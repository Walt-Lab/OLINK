"use strict";(self.webpackChunkaurelia=self.webpackChunkaurelia||[]).push([[467],{114550:(e,t,n)=>{n.d(t,{Z:()=>setSelection})
var a=n(947730),i=n(787004)
function setSelection(e){a.Z.dispatch({actionType:i.QdN,data:e})}},133936:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(440281),i=n.n(a),s=n(250965),r=n.n(s),o=n(955836),l=n(614392)
class SecondaryStructure extends i().Model{getSvg(e,t){null==t&&(t=!0)
let n=this.get("svg")
this.get("dg"),this.get("name")
const a=this.get("nucleotideType")
let i,s=r()(n)[2]
r()(s).find("text").each((function(){const e=r()(this)
if("&"===e.text())return i=`${e.attr("x")},${e.attr("y")}`}))
null!=i&&(n=n.replace(i,'" /><polyline style="stroke: black; fill: none; stroke-width: 1.5" id="outline" points="'))
s=r()(n)[2]
let l=!1
r()(s).find("text").each((function(){const e=r()(this)
if(null!=i)if("&"===e.text()){l=!0
e.remove()}else{const t=l?"#1c5981":"#86271e"
e.attr("fill",t)}else e.attr("fill","#1c5981")
a===o.Wy.DNA&&"U"===e.text()&&e.text("T")
if(a===o.Wy.DNA&&"u"===e.text())return e.text("t")}))
r()(s).find("#seq").attr("style","")
r()(s).find("polyline").css("stroke","#dadada")
r()(s).find("#pairs").css("stroke","#dadada")
const c=r()(s).attr("height")
r()(s).attr("width",e).attr("height",e).css("cursor","pointer")
s.setAttribute("viewBox",`0 0 ${c} ${c}`)
if(!t){r()(s).find("script").remove()
r()(s).find("rect").attr("onclick","")
r()(s).find("#seq").removeAttr("id")}return s}showModal(){const e=r()(window).height()-200,t=r()(this.get("svg")).attr("height"),n=e<t?e:t,a=this.getSvg(n),i=r()("<div>").addClass("text-center").html(a)
i.append(r()("<p>").html('Secondary structure analysis performed by <a href="http://www.tbi.univie.ac.at/~ronny/RNA/index.html" target="_blank">ViennaRNA</a>.').addClass("pull-right"))
return new l.I4({title:`${this.get("name")}: ${this.get("dg")} kcal`,msg:i[0],noPadding:!0}).choice("Done","button--tertiaryGray").show()}}const c=SecondaryStructure},707171:(e,t,n)=>{n.d(t,{Z:()=>h})
var a=n(602652),i=n.n(a),s=n(989526),r=n(531041),o=n(204026),l=n(103593),c=n(59860),d=n(954240),u=n(801455),p=n(865486),m=n(924982),E=n(379346)
function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class ArchiveRegisteredBioentitiesOption extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_handleChangeOptions",(({shouldUnregisterBioentities:e,shouldRemoveShortcuts:t})=>{this.props.onChange({shouldUnregisterBioentities:e,shouldRemoveShortcuts:t})}))
_defineProperty(this,"_handleChangeFolder",(({target:{value:e}})=>{this.props.onChange({unregisteredBioentitiesFolderId:e||null})}))}static isEnabled(e){return e.some((({isRegistered:e})=>e))}static getValidationError(e){return null==e.shouldUnregisterBioentities?"Please select a registry action.":e.shouldUnregisterBioentities&&null==e.unregisteredBioentitiesFolderId?"Please select a folder to move unregistered entities into.":null}static getDefaultState(e){const t=r.default.compact(e.map((e=>e.projectFolder?e.projectFolder.api_identifier:null))),n=1===new Set(t).size?t[0]:null,a=[]
for(const t of e){t.folder&&a.push(t.folder.id)
t.projectFolderId&&a.push(t.projectFolder.api_identifier)}return{shouldRemoveShortcuts:null,shouldUnregisterBioentities:null,unregisteredBioentitiesFolderId:n,parentFolderIds:a}}static getActions(e){return r.default.compact([{text:"Unregister registered entities",value:{shouldUnregisterBioentities:!0,shouldRemoveShortcuts:!1}},{text:"Keep registered entities in registry",value:{shouldUnregisterBioentities:!1,shouldRemoveShortcuts:!1}},e.some((({isShortcut:e})=>e))&&e.some((({id:e})=>E.ZP.isFolder(e)))&&{text:"Remove entities from project",value:{shouldUnregisterBioentities:!1,shouldRemoveShortcuts:!0}}])}render(){return s.createElement(c.Z,{className:"u-spacing-top"},s.createElement(l.Z,{md:12},s.createElement(u.Z,{label:"Registry Action"}),s.createElement(d.ZP,{displayName:null==this.props.shouldUnregisterBioentities?"Choose action...":ArchiveRegisteredBioentitiesOption.getActions(this.props.itemsForArchive).find((e=>e.value.shouldUnregisterBioentities===Boolean(this.props.shouldUnregisterBioentities)&&e.value.shouldRemoveShortcuts===Boolean(this.props.shouldRemoveShortcuts))).text,menu:s.createElement(p.ZP,{height:p.ZP.HEIGHTS.MEDIUM,width:p.ZP.WIDTHS.FULL,value:{shouldUnregisterBioentities:this.props.shouldUnregisterBioentities,shouldRemoveShortcuts:this.props.shouldRemoveShortcuts}},ArchiveRegisteredBioentitiesOption.getActions(this.props.itemsForArchive).map((({text:e,value:t})=>s.createElement(m.Z,{key:e,onSelect:this._handleChangeOptions,value:t},e))))}),this.props.shouldUnregisterBioentities&&s.createElement(o.Z,{className:"u-small-spacing-top",level:"append",onChange:this._handleChangeFolder,showInventory:!0,value:this.props.unregisteredBioentitiesFolderId,unsetOnFetchFail:!1})))}}_defineProperty(ArchiveRegisteredBioentitiesOption,"propTypes",{itemsForArchive:i().array.isRequired,onChange:i().func.isRequired,shouldRemoveShortcuts:i().bool,shouldUnregisterBioentities:i().bool,unregisteredBioentitiesFolderId:i().string})
const h=ArchiveRegisteredBioentitiesOption},955212:(e,t,n)=>{n.d(t,{Z:()=>i})
var a=n(552413)
class GibsonTabState extends a.Z{}const i=GibsonTabState},920119:(e,t,n)=>{n.d(t,{Z:()=>i})
var a=n(552413)
class GoldenGateTabState extends a.Z{}const i=GoldenGateTabState},552413:(e,t,n)=>{n.d(t,{Z:()=>y})
var a=n(440281),i=n.n(a),s=n(85758),r=n.n(s),o=n(250965),l=n.n(o),c=n(531041),d=n(267560),u=n(630981),p=n(331356),m=n(955836),E=n(48047),h=n(776065),g=n(921554),S=n(766455),_=n(974913),T=n(432128),I=n(8747),A=n(926025),f=n(650858)
class PrimerAssemblyTabRowState extends i().Model{initialize(){this.computeTm=this.computeTm.bind(this)
this.computeDG=this.computeDG.bind(this)
this.computeMisprime=this.computeMisprime.bind(this)}defaults(){return{fragmentSequenceID:null,fragmentSequenceName:null,fragmentResultColor:null,strand:null,tmAnneal:null,tmWhole:null,tmDiff:null,binding:null,overhang:null,dg:null,misprime:null,pairedId:null,sequence:null,fragmentResultIndex:null,pairId:null,dgHandler(){},misprimeHandler(){}}}computeBinding(e){return this.set({binding:e.bindingBases().length})}computeOverhang(e){return this.set({overhang:e.overhangLength()})}computeTm(e){const t=this.get("sequence").get("_sequence").sequencePrimers().get(this.get("pairedId")),n=E.meltingTemperature(e.bindingBases(),m.Wy.DNA),a=E.meltingTemperature(e.bases(),m.Wy.DNA),i=E.meltingTemperature(t.bindingBases(),m.Wy.DNA),s=Math.abs(n-i)
this.set({tmAnneal:n,tmWhole:a,tmDiff:s})}computeDG(e){const t=l()("<div>").addClass("spinner")
this.set({dg:t[0].outerHTML,dgHandler(){}})
let n=new FormData
n.append("nucleotideType",e.nucleotideType())
n.append("primer",e.bases())
const a=T.Z.get(f.gq.SECONDARY_TEMP),i=null==a||isNaN(parseInt(a))?37:parseInt(a)
n.append("temperature",i)
n.append("skip_homodimer",!0)
I.by({url:"/1/api/oligo-secondary-structure",data:n,dataType:"json",processData:!1,contentType:!1,type:"PUT"}).fail(_.ZP.notifyError).done((a=>{const s=l()("<a>").text(a.monomer.dg)
this.set({dg:s[0].outerHTML,dgHandler:()=>{this.set({dg:t[0].outerHTML})
n=new FormData
n.append("all",!0)
n.append("nucleotideType",e.nucleotideType())
n.append("primer",e.bases())
n.append("temperature",i)
I.by({url:"/1/api/oligo-secondary-structure",data:n,dataType:"json",processData:!1,contentType:!1,type:"PUT"}).fail(_.ZP.notifyError).done((t=>{p.Z.create(this.get("sequence"),a.monomer,t,"Monomer",i,e.nucleotideType(),e.bases())
this.set({dg:s[0].outerHTML})}))}})}))}computeMisprime(e){const t=this.get("sequence"),n=t.get("_sequence")
if(n.finalized())return
const a=l()("<div>").addClass("spinner")
this.set({misprime:a[0].outerHTML,misprimeHandler(){}})
const i=n.fragmentResults().at(this.get("fragmentResultIndex"))
let s={bases:e.bases(),dnaTmPreferences:m.cl,rnaTmPreferences:m.sd,nucleotideType:m.Wy.DNA,min_matching_bases:T.Z.get(f.VF.MIN_MATCHING_BASES),min_temp:T.Z.get(f.VF.MIN_MELTING_TEMP),max_temp:T.Z.get(f.VF.MAX_MELTING_TEMP),min_base_index:i.start(),max_base_index:i.end(),max_mismatches:T.Z.get(f.VF.MAX_MISMATCHES),max_total_mismatches:T.Z.get(f.VF.MAX_TOTAL_MISMATCHES),exact_match:!1,unique_match:!1}
const r=new d.Z([],{sequence_id:n.id})
r.fetch({data:s}).fail(_.ZP.notifyError).done((()=>{const n=r.length>1?"Yes":"No",a=l()("<a>").text(n)[0].outerHTML
this.set({misprime:a,misprimeHandler:function(){s={findType:3,searchBases:e.bases(),minBaseIndex:i.start(),maxBaseIndex:i.end(),exactMatch:!1,uniqueMatch:!1}
u.A.insert(t,s)}})}))}}class PrimerAssemblyTabRowStates extends i().Collection{static initClass(){this.prototype.model=PrimerAssemblyTabRowState}}PrimerAssemblyTabRowStates.initClass()
class PrimerAssemblyTabState extends S.Xh{defaults(){return c.default.extend(super.defaults(),{title:"Assembly Parameters",closeable:!1,showPrintableSummary:!1,preferenceKey:"primer-assembly"})}initialize(){const e=this.get("sequence").get("_sequence")
this.primerPairs=e.primerPairs()
this.primers=e.sequencePrimers()
this.set({rows:new PrimerAssemblyTabRowStates})
this.listenTo(e,"change:sequencePrimers",(()=>{null!=this.primers&&this.stopListening(this.primers)
this.primers=e.sequencePrimers()
this.listenToPrimers(this.primers)}))
this.listenToPrimers(this.primers)
this.listenTo(e,"change:bases",(()=>{for(const e of Array.from(this.get("rows").models))e.computeMisprime(this.primers.get(e.id))}))
this.listenToPrimerPairs(this.primerPairs)
this.listenTo(e,"change:primerPairs",(()=>{null!=this.primerPairs&&this.stopListening(this.primerPairs)
this.primerPairs=e.primerPairs()
this.listenToPrimerPairs(this.primerPairs)
this.computeRows()}))
this.listenTo(T.Z,`change:${f.gq.MELTING_TEMP_DNA}`,(function(){return this.allRows((e=>e.computeTm))}))
this.listenTo(T.Z,`change:${f.gq.SECONDARY_TEMP}`,(0,A.D)((()=>this.allRows((e=>e.computeDG))),500))
const t=["change:findprimers.MIN_MATCHING_BASES","change:findprimers.MIN_MELTING_TEMP","change:findprimers.MAX_MELTING_TEMP","change:findprimers.MAX_MISMATCHES"].join(" ")
this.listenTo(T.Z,t,(function(){return this.allRows((e=>e.computeMisprime))}))
this.computeRows()}showPrintableSummary(){return this.get("showPrintableSummary")}allRows(e){for(const t of Array.from(this.primers.models)){const n=this.get("rows").get(t.id)
null!=n&&e(n)(t)}}computeRows(){const e=this.get("rows"),t=[],n=this.get("sequence").get("_sequence")
n.fragmentResults().each(((e,a)=>{const i=g.vx[a],s=this.primerPairs.get(e.primerPairID())
if(null!=s){const[e,r]=Array.from(s.getPrimers(this.primers))
return(()=>{const o=[]
for(const[l,c]of[[e,r],[r,e]]){const e=new PrimerAssemblyTabRowState({id:l.id,fragmentResultColor:i,primerName:l.name(),strand:l.strand(),pairedId:c.id,sequence:this.get("sequence"),fragmentResultIndex:a,pairId:s.id})
e.computeBinding(l)
e.computeOverhang(l)
e.computeTm(l)
e.computeDG(l)
n.finalized()||e.computeMisprime(l)
o.push(t.push(e))}return o})()}}))
e.reset(t)}listenToPrimers(e){const computePairedTm=e=>{const t=e.get("pairedId"),n=this.get("sequence").get("_sequence").sequencePrimers().get(t)
this.get("rows").get(t).computeTm(n)}
this.listenTo(e,"change:bases",(function(e,t){const n=this.get("rows").get(e.id)
if(null!=n){n.computeBinding(e)
n.computeTm(e)
n.computeDG(e)
n.computeMisprime(e)
computePairedTm(n)}}))
this.listenTo(e,"change:overhang_length",(function(e,t){const n=this.get("rows").get(e.id)
if(null!=n){n.computeBinding(e)
n.computeOverhang(e)
n.computeTm(e)
computePairedTm(n)}}))
this.listenTo(e,"change:name",(function(e,t){const n=this.get("rows").get(e.id)
null!=n&&n.set({primerName:e.name()})}))}listenToPrimerPairs(e){this.listenTo(e,"remove reset",this.computeRows)}lighten(e){if(this.showPrintableSummary())return e
const t=r().rgb(e)
return`rgba(${t.r}, ${t.g}, ${t.b}, 0.4)`}openFragmentSequence(e){h.Z.openFile(e.get("fragmentSequenceID"))}}const y=PrimerAssemblyTabState},56137:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(420347),i=n(232606),s=n(776065),r=n(679726),o=n(977043),l=n(550977)
class BasicFolderItem extends a.Z{static initClass(){this.prototype.urlRoot="/1/api/basic-folder-items"}initialize(){this.registerListeners()
this.set({isLatest:!0})}registerListeners(){}cleanUp(){this.stopListening()}duplicate(){r.Z.openForCopy({showInventory:!0,showNotebook:!1},(e=>{s.Z.copyAndOpenItem(this.id,e)}))}isLatest(){return this.get("isLatest")}setIsLatest(e){(0,i.hu)((0,l.Wz)(this.id),"Basic folder item must be complex polymer to set version attribute")
this.set({isLatest:e})}allowEditsToNote(){return this.isLatest()&&super.allowEditsToNote()}getBannerText(){return this.isLatest()?this.isArchived()?"Editing disabled on archived entity.":(0,o.ke)(this.permissions(),"entity"):"Editing disabled on previous versions."}setBanner(){this.writable()&&this.isLatest()?this.setBannerText(null):this.setBannerText(this.getBannerText())}}BasicFolderItem.initClass()
const c=BasicFolderItem},135645:(e,t,n)=>{n.d(t,{Z:()=>h})
var a=n(602652),i=n.n(a),s=n(989526),r=n(861825),o=n(629656),l=n(336489),c=n(378045),d=n(113505),u=n(661978),p=n(372721),m=n(749278),E=n(939092)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}function isDuplicate(e,t){return e.type===p.BA.SAMPLE_GROUP_SCHEMA_FIELD&&t.type===p.BA.SAMPLE_GROUP_SCHEMA_FIELD&&(e.schemaField.id===t.schemaField.id&&e.sampleType===t.sampleType)}class BulkAddSampleGroupsFlow extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_getPanes",(()=>[{paneKey:p.y$.UPLOAD_SPREADSHEET,configuration:d.Z.configure({})},{paneKey:p.y$.MAP_COLUMN_NAMES,configuration:l.Z.configure({getValidColumnTypes:()=>[p.BA.SAMPLE_GROUP_SCHEMA_FIELD,p.BA.IGNORE],getRequiredColumnsError(e){const t=(0,E.mD)(e,isDuplicate)
if(t){const{schemaField:e,sampleType:n}=t,a=r.jh[n]
return`"Set ${e.name} ${a}" found more than once`}return null},onValidateSpreadsheet:u.jm})},{paneKey:p.y$.SHOW_ERRORS,configuration:c.Z.configure({enableReplaceLinkWithText:!1,enableSkipErrors:!0})}]))
_defineProperty(this,"_handleImportFromSpreadsheet",(()=>{u.Vl(this.props.onImportRows)}))}static open(e){o.bA(p.qF,s.createElement(BulkAddSampleGroupsFlow,_extends({},e,{onRequestClose:u.Mr})))}render(){return s.createElement(m.Z,{importType:p.pt.REQUEST_SAMPLES,initialSettings:{initialSampleGroupSchemaId:this.props.sampleGroupSchemaId},onImportFromSpreadsheet:this._handleImportFromSpreadsheet,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import request samples"})}}_defineProperty(BulkAddSampleGroupsFlow,"propTypes",{onImportRows:i().func.isRequired,onRequestClose:i().func.isRequired,sampleGroupSchemaId:i().string.isRequired})
const h=BulkAddSampleGroupsFlow},893833:(e,t,n)=>{n.d(t,{Z:()=>g})
var a=n(602652),i=n.n(a),s=n(989526),r=n(629656),o=n(276281),l=n(171457),c=n(336489),d=n(378045),u=n(113505),p=n(661978),m=n(372721),E=n(749278),h=n(939092)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class BulkCreateBatchesFlow extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_getPanes",(()=>[{paneKey:m.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION,configuration:l.Z.configure({showRegistries:!0,showInventory:!1,folderSelectorLabel:"Import location"})},{paneKey:m.y$.UPLOAD_SPREADSHEET,configuration:u.Z.configure()},{paneKey:m.y$.MAP_COLUMN_NAMES,configuration:c.Z.configure({getValidColumnTypes:()=>[m.BA.FILENAME,m.BA.BATCH_SCHEMA_FIELD,m.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){const n=[m.BA.FILENAME],a=h.lx(n,e,t,!1)
return a||null},onValidateSpreadsheet:p.O_})},{paneKey:m.y$.SHOW_ERRORS,configuration:d.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]))}static open(e){r.bA(m.qF,s.createElement(BulkCreateBatchesFlow,_extends({},e,{onRequestClose:p.Mr})))}componentDidMount(){o.$r()}render(){return s.createElement(E.Z,{importType:m.pt.SAMPLES,initialSettings:{initialFolder:this.props.initialFolder},onImportFromSpreadsheet:p.Ai,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import batches from spreadsheet"})}}_defineProperty(BulkCreateBatchesFlow,"propTypes",{initialFolder:m.R9.selectedDestination,onRequestClose:i().func.isRequired})
const g=BulkCreateBatchesFlow},605713:(e,t,n)=>{n.d(t,{Z:()=>g})
var a=n(602652),i=n.n(a),s=n(989526),r=n(629656),o=n(276281),l=n(171457),c=n(336489),d=n(378045),u=n(113505),p=n(661978),m=n(372721),E=n(749278),h=n(939092)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class BulkUpdateBatchesFlow extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_getPanes",(()=>[{paneKey:m.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION,configuration:l.Z.configure({showRegistries:!0,showInventory:!1,folderSelectorLabel:"Update location",folderSelectorPopoverContent:"Only batches in this location will be updated."})},{paneKey:m.y$.UPLOAD_SPREADSHEET,configuration:u.Z.configure()},{paneKey:m.y$.MAP_COLUMN_NAMES,configuration:c.Z.configure({getValidColumnTypes:()=>[m.BA.BATCH_NAME,m.BA.BATCH_SCHEMA_FIELD,m.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){const n=[m.BA.BATCH_NAME],a=h.lx(n,e,t,!1)
return a||(e.some((({type:e})=>e===m.BA.BATCH_SCHEMA_FIELD))?null:"At least one batch field must be selected.")},onValidateSpreadsheet:p.ZX})},{paneKey:m.y$.SHOW_ERRORS,configuration:d.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]))}static open(e){r.bA(m.qF,s.createElement(BulkUpdateBatchesFlow,_extends({},e,{onRequestClose:p.Mr})))}componentDidMount(){o.$r()}render(){return s.createElement(E.Z,{importItemWord:"batch",importType:m.pt.UPDATE_SAMPLES,initialSettings:{initialFolder:this.props.initialFolder},onImportFromSpreadsheet:p.sq,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Update batches"})}}_defineProperty(BulkUpdateBatchesFlow,"propTypes",{initialFolder:m.R9.selectedDestination,onRequestClose:i().func.isRequired})
const g=BulkUpdateBatchesFlow},539317:(e,t,n)=>{n.d(t,{Z:()=>ImportFilesTutorialLink})
var a=n(989526),i=n(475242),s=n(348920)
function ImportFilesTutorialLink(){return s.ZP.PRIVATE_DEPLOY?null:a.createElement("span",{className:"u-btn-af-height"},"Need help? ",a.createElement("a",{href:i.F.REGISTRY_IMPORT_SPREADSHEETS,target:"_blank",rel:"noopener noreferrer"},"Check out our tutorial"),".")}},171457:(e,t,n)=>{n.d(t,{Z:()=>C})
var a=n(602652),i=n.n(a),s=n(989526),r=n(232606),o=n(56063),l=n(675649),c=n(537076),d=n(204026),u=n(125440),p=n(778095),m=n(216101),E=n(103593),h=n(205986),g=n(59860),S=n(334148),_=n(801455),T=n(514674),I=n(368734),A=n(778877),f=n(661978),y=n(372721)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class ChooseImportLocationModalPane extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_handleDestinationFolderChange",(e=>{const{folderId:t,registryId:n}=m.parseFolderValue(e.target.value)
f.y$({selectedDestination:{folderId:t,registryId:n}})
this.props.onDestinationFolderChange&&this.props.onDestinationFolderChange(t)}))
_defineProperty(this,"_handleTagSchemaChange",(e=>{null!=e?f.y$({selectedTagSchemaId:e.id}):this.props.isSchemaRequired?(0,r.hu)(!1,"TagSchemaSelector returned null for the tagSchema"):f.y$({selectedTagSchemaId:null})}))
_defineProperty(this,"_handleChangeImportBatchesOption",(e=>{f.Ov({[y.JY.IMPORT_BATCHES]:e.target.checked})}))
_defineProperty(this,"_openNewSchemaPage",(()=>{const e=p.Z.getRegistries()[0]
this.props.modalProps.onRequestClose()
l.c4(null,m.getCreateTagSchemaUrl(e.s_owner.url_identifier,e.id))}))
_defineProperty(this,"schemaPopoverContent",(()=>s.createElement("div",null,s.createElement("p",null,"Schemas let you define new entity types. You can edit existing schemas and add new ones in your registry settings."))))}static configure({showRegistries:e,showInventory:t,onDestinationFolderChange:n,getEnabledOptions:a=(({options:e,selectedSchemaIds:t})=>[]),shouldShowSchemaSelector:i=!0,isSchemaRequired:s=!0,folderSelectorLabel:o,folderSelectorPopoverContent:l}){(0,r.hu)(null!=e,"Must configure with `showRegistries`.");(0,r.Gp)(null!=t,"Must configure with `showInventory`.")
return{showRegistries:e,showInventory:t,getEnabledOptions:a,shouldShowSchemaSelector:i,onDestinationFolderChange:n,isSchemaRequired:s,folderSelectorLabel:o,folderSelectorPopoverContent:l}}render(){const e=this.props.selectedDestination&&(!this.props.shouldShowSchemaSelector||this.props.selectedSchemaIds.tagSchemaId||!this.props.isSchemaRequired)&&(!this.props.options[y.JY.IMPORT_CONTAINERS]||this.props.selectedSchemaIds.containerSchemaId)&&!this.props.isLoading
let t,n
if(this.props.selectedDestination){(0,r.hu)(this.props.selectedDestination.folderId,"Selected destination is missing folderId.");({folderId:t,registryId:n}=this.props.selectedDestination)}const a=n?m.generateFolderValue(t,n,""):t,i=p.Z.getRegistries().length&&p.Z.getRegistries().some((e=>m.hasSettingsAccess(e)))
return s.createElement(h.ZP,_extends({enableRedesign:!1,buttons:[{key:"prev",text:"Next",style:S.ZJ.SECONDARY,onClick:f.mX,disabled:!e,dataTestAttrs:{component:"ImportLocationModal",element:"footerButton",key:I.Z.NEXT}}]},this.props.modalProps),s.createElement(g.Z,null,s.createElement(E.Z,{xs:12},s.createElement("div",{className:"form-group"},s.createElement("span",null,s.createElement(_.Z,{label:this.props.folderSelectorLabel,isRequired:!0}),this.props.folderSelectorPopoverContent&&s.createElement(u.Z,{renderContent:()=>this.props.folderSelectorPopoverContent,iconClassName:"bulkImportModal-helpIcon u-tiny-spacing-left"})),s.createElement(d.Z,{enableRedesign:!0,onChange:this._handleDestinationFolderChange,showRegistries:this.props.showRegistries,showInventory:this.props.showInventory,value:a,unsetOnFetchFail:!0})))),s.createElement(g.Z,null,s.createElement(E.Z,{xs:12},this.props.shouldShowSchemaSelector&&s.createElement("div",null,s.createElement("div",{className:"form-group"},s.createElement("span",null,s.createElement(_.Z,{label:"Schema",isRequired:this.props.isSchemaRequired}),s.createElement(u.Z,{renderContent:this.schemaPopoverContent,iconClassName:"bulkImportModal-helpIcon u-tiny-spacing-left"})),s.createElement(T.ZP,{oligoAwareFolderItemTypes:this.props.schemalessCreationEntityType?[this.props.schemalessCreationEntityType]:(0,c.getRegistrySupportedOligoAwareTypes)(),onChange:this._handleTagSchemaChange,registryId:n,requiredPermissions:[o.cr],selectedTagSchemaId:this.props.selectedSchemaIds.tagSchemaId,allowNone:!this.props.isSchemaRequired})),i&&s.createElement("div",{className:"u-tiny-spacing-top"},"Don't see the schema you're looking for? ",s.createElement("a",{onClick:this._openNewSchemaPage},"Create a new one"),".")),s.createElement(A.Z,{options:this.props.options,enabledOptions:this.props.getEnabledOptions(this.props),selectedSchemaIds:this.props.selectedSchemaIds}))))}}_defineProperty(ChooseImportLocationModalPane,"propTypes",{selectedDestination:i().shape({folderId:i().string.isRequired,registryId:i().string}),getEnabledOptions:i().func.isRequired,isLoading:i().bool.isRequired,modalProps:y.R9.modalProps,onDestinationFolderChange:i().func,options:i().objectOf(i().bool).isRequired,schemalessCreationEntityType:i().oneOf(c.SCHEMALESS_BULK_IMPORT_SUPPORTED_OLIGO_AWARE_TYPES),selectedSchemaIds:y.R9.selectedSchemaIds,showRegistries:i().bool.isRequired,showInventory:i().bool.isRequired,shouldShowSchemaSelector:i().bool.isRequired,isSchemaRequired:i().bool})
_defineProperty(ChooseImportLocationModalPane,"defaultProps",{isSchemaRequired:!0})
const C=ChooseImportLocationModalPane},893351:(e,t,n)=>{n.d(t,{Z:()=>S})
var a=n(602652),i=n.n(a),s=n(989526),r=n(629656),o=n(208029),l=n(396213),c=n(789179),d=n(336489),u=n(378045),p=n(113505),m=n(661978),E=n(372721),h=n(749278),g=n(939092)
function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class BulkUpdateDataTableFlow extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_getPanes",(()=>[{paneKey:E.y$.UPLOAD_SPREADSHEET,configuration:p.Z.configure({getExampleImageURL:()=>g.oW(null)})},{paneKey:E.y$.MAP_COLUMN_NAMES,configuration:d.Z.configure({getValidColumnTypes:()=>[E.BA.DATA_TABLE_MATCHER,E.BA.DATA_TABLE_VALUE,E.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){if(0===e.filter((({type:e})=>e===E.BA.DATA_TABLE_MATCHER)).length)return"At least one Match field is required."
if(0===e.filter((({type:e})=>e===E.BA.DATA_TABLE_VALUE)).length)return"At least one Set field is required."
const n=e.map((({tableColumnName:e})=>e)).filter((e=>e))
return new Set(n).size<n.length?"Each column must be selected at most once.":null},onValidateSpreadsheet:()=>{m.Yu(this.props.dataTable)}})},{paneKey:E.y$.SHOW_ERRORS,configuration:u.Z.configure({enableReplaceLinkWithText:!1,enableSkipErrors:!1})}]))
_defineProperty(this,"_handleImportFromSpreadsheet",(()=>{m.Up(this.props.dataTable,this.props.onImportRows)}))}static open(e){r.bA(E.qF,s.createElement(BulkUpdateDataTableFlow,_extends({},e,{onRequestClose:m.Mr})))}render(){return s.createElement(h.Z,{importType:E.pt.DATA_TABLE,initialSettings:{initialTableColumnNames:(0,c.z)(this.props.dataTable.config),initialDataTableKeyFields:this.props.dataTableKeyFields},onImportFromSpreadsheet:this._handleImportFromSpreadsheet,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:`Bulk update ${o.D6.result_table}`})}}_defineProperty(BulkUpdateDataTableFlow,"propTypes",{dataTableKeyFields:i().arrayOf(i().oneOf(E.F6).isRequired),onRequestClose:i().func.isRequired,dataTable:l.uH,onImportRows:i().func.isRequired})
const S=BulkUpdateDataTableFlow},728115:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(787004),i=n(947730),s=n(391028),r=n(40563),o=n(982899)
class BulkAntibodyStore extends s.Z{resetState(){this.bulkAntibody=o.tD()}getBulkAntibody(){return this.bulkAntibody}payloadHandler(e){switch(e.actionType){case a.wnG:this.bulkAntibody=o.BN.update(this.bulkAntibody,e.updates)
this.emitChange()
break
case a.qK0:n(662909).fetchInputFiles(e.proteinFolderId)
this.bulkAntibody=o.BN.update(this.bulkAntibody,{outputFolderId:e.outputFolderId,step:r.h8.BULK_ANTIBODY})
this.emitChange()
break}}}const l=new BulkAntibodyStore(i.Z)},933671:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(787004),i=n(947730),s=n(391028),r=n(20921)
class BulkTranslationStore extends s.Z{resetState(){this.bulkTranslation=r.kb()}getBulkTranslation(){return this.bulkTranslation}payloadHandler(e){switch(e.actionType){case a.JC7:this.bulkTranslation=r.BN.update(this.bulkTranslation,e.updates)
this.emitChange()
break
case a.INW:this.bulkTranslation=r.BN.updateTranslationSpec(this.bulkTranslation,e.translationSpecIndex,e.updates)
this.emitChange()
break
case a.qK0:this.bulkTranslation=r.BN.update(this.bulkTranslation,{errors:[]})
this.emitChange()}}}const o=new BulkTranslationStore(i.Z)},751805:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(531041),i=n(468943),s=n(959415),r=n(171471),o=n(5245)
class Annotation extends s.sd{defaults(){return(0,a.default)(super.defaults()).extend({visible:!0,hover:!1})}type(){return"annotation"}initialize(){this.listenTo(this.get("_annotation"),"change",this.change)
this.listenTo(this.get("_annotation"),"destroy remove",(function(e,t,n){return this.selfDestroy(n)}))
this.listenTo(this.get("_annotation"),"change:id",(function(){return this.set({id:this.get("_annotation").id})}))}start(){return this.get("_annotation").start()}end(){return this.get("_annotation").end()}editable(){return this.get("_annotation").editable()}hover(){return this.get("hover")}color(){return this.get("_annotation").color()}name(){return this.get("_annotation").name()}notes(){return this.get("_annotation").notes()}customFields(){return this.get("_annotation").customFields()}displayLabel(){return this.name()}annotationType(){var e
return null!=(e=this.get("_annotation").get("annotation_type"))?e:""}uid(){return this.get("_annotation").cid}strand(){return this.get("_annotation").strand()}annularLayer(){return this.get("annularLayer")}change(e,t){return this.trigger("change:_annotation",this,this.collection,t)}visible(){return this.get("visible")}fromSubPart(){return this.get("_annotation").fromSubPart()}selfDestroy(e){null==e&&(e={})
return this.trigger("destroy",this,this.collection,e)}destroy(){const e=this.get("_annotation").destroy()
this.selfDestroy()
return e}click(e,t){null==t&&(t=!1);(0,o.r7)(e,this.start(),this.end())
const n=e.get("selection")
return t?n.expandRange(this.start(),this.end()):n.select(this)}dblClick(e,t){null==t&&(t=!1)
this.click(e,t)
if(e.allowFeatureEdits()&&this.editable()){i.j("annotation","open_annotation_panel",{product:r.XC.MOLBIO,openedFrom:"annotation_double_click",sequence_id:e.get("id")})
return e.get("selection").trigger("annotation",this)}}}const l=Annotation},813572:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(531041),i=n(436208),s=n(751805),r=n(959415),o=n(703764),l=n(132814)
class Annotations extends r.FE{static initClass(){this.prototype.model=s.Z}batchName(){return"annotations"}initialize(e,t){super.initialize(...arguments)
this.setLayers()
this.setLayers=this.batch(this.setLayers)
this.computeVisibilities=this.batch(this.computeVisibilities)
this.on("add remove change:_annotation change:visible reset",this.setLayers)
return this.on("add remove change:_annotation change:visible reset",this.computeVisibilities)}computeVisibilities(){const validType=e=>null!=e&&""!==e,e=this.chain().map((e=>e.annotationType())).filter((e=>validType(e))).uniq().value(),t={}
for(var n of Array.from(e))t[n]=[!0,!1]
let a=[!0,!1]
this.each((e=>{const i=e.visible()
a=[a[0]&&i,a[1]||i]
n=e.annotationType()
if(validType(n))return t[n]=[t[n][0]&&i,t[n][1]||i]}))
let i=[!0,!1]
for(n of Array.from(e))i=[t[n][0]&&i[0],t[n][1]||i[1]]
return this.trigger("visibilities",t,i,a)}slice(e,t,n=null){let i=this.filter((n=>{const a=n.get("_annotation").start(),i=n.get("_annotation").end()
return n.get("visible")&&l.isRangeOverlap(e,t,a,i)}))
null!=n&&(i=n(i))
return a.default.sortBy(i,(n=>Math.max(e,n.get("_annotation").start())-e-(Math.min(t,n.get("_annotation").end())-e)))}setFullLayers(){const e=o.eo(this.filter((e=>e.get("visible"))),{top:!1})
for(const{model:t,layer:n}of Array.from(e))t.set(i.LINEAR_LAYER_FULL,n,{silent:!0})}setLayers(){this.setFullLayers()
this.trigger("layerChange")}}Annotations.initClass()
const c=Annotations},322976:(e,t,n)=>{n.d(t,{Z:()=>S})
var a=n(440281),i=n.n(a),s=n(250965),r=n.n(s),o=n(531041),l=n(232606),c=n(518352),d=n(392965),u=n(390462),p=n(87209),m=n(771398),E=n(974913),h=n(989526)
const g=(0,n(659680).Z)((function DuplicateModal({analyses:e,name:t}){return h.createElement("form",{className:"duplicate-modal-form"},h.createElement("div",{className:"form-group"},h.createElement("input",{type:"text",placeholder:"New sequence name",className:"name-input",defaultValue:t})),h.createElement("div",{className:"form-group"},h.createElement("div",{className:"folder-selector-container"})),h.createElement("div",{className:"row"},e.length>0&&h.createElement("div",{className:"col col-md-6"},h.createElement("h4",null,h.createElement("input",{type:"checkbox",className:"select-all-analyses select-all",defaultChecked:!0}),"Copy Analyses:"),h.createElement("ul",{className:"copy-list"},e.map((e=>h.createElement("li",{key:e.id},h.createElement("label",null,h.createElement("input",{type:"checkbox",className:"copied-analysis",defaultChecked:!0,value:e.id}),e.name))))))))}))
class DuplicateModal_DuplicateModal extends i().View{static initClass(){this.prototype.template=g
this.prototype.events={"change .select-all":"selectAllToggle","change .copy-list input":"renderSelectAll","submit form":function(e){e.preventDefault()
this.clone()}}}initialize({analyses:e,cloneSuccess:t,initialFolderId:n,name:a,sequenceID:i,version:s}){this.analyses=e
this.cloneSuccess=t
this.initialFolderId=n
this.name=a
this.sequenceID=i
this.version=s
this.clone=this.clone.bind(this)
null==this.version&&(this.version="latest")
null==this.initialFolderId&&(this.initialFolderId=u.Z.get(u.O.INVENTORY))}remove(){super.remove()
null!=this.selectorView&&this.selectorView.remove()}selectAllToggle(e){const t=r()(e.currentTarget)
return t.closest("div").find(".copy-list").find("input").prop({checked:t.prop("checked")})}renderSelectAll(e){const t=r()(e.currentTarget).closest("ul"),n=t.closest("div"),a=t.find("input").length,i=t.find("input:checked").length,s=i===a,o=i>0
return n.find(".select-all").prop({checked:o,indeterminate:!s&&o})}renderFolderSelector(e){null!=this.selectorView&&this.selectorView.remove()
this.selectorView=new d.Z({initialFolderId:e,inputClassName:"folder-select",props:{showInventory:!0}})
this.$(".folder-selector-container").html(this.selectorView.render().el)}clone(){const e=this.$el.find(".name-input").val()
if(!e){E.ZP.error("Please enter a valid name.")
return}const t=this.$el.find(".folder-select").val()
if(!t){E.ZP.error("Please select a folder.")
return}u.Z.set(u.O.INVENTORY,t)
const n=this.$el.find("input.copied-analysis:checked").map((function(){return parseInt(r()(this).val())})).get()
p.$Z()
m.ty({url:`/1/api/sequences/${this.sequenceID}/versions/${this.version}/clone`,data:{folder:t,name:e,analyses:n}}).then((e=>{c.Z.invalidateFolderContents(t)
return r().when(this.cloneSuccess(e))})).fail(E.ZP.notifyError).always((()=>p.Cp()))}render(){this.analyses.forEach((e=>(0,l.hu)(o.default.isNumber(e.id))))
this.$el.html(this.template({name:this.name,analyses:this.analyses}))
this.renderFolderSelector(this.initialFolderId)
return this}}DuplicateModal_DuplicateModal.initClass()
const S=DuplicateModal_DuplicateModal},557993:(e,t,n)=>{n.d(t,{Z:()=>T})
var a=n(440281),i=n.n(a),s=n(113691),r=n(531041),o=n(232606),l=n(974913),c=n(359366),d=n(989526),u=n(659680)
const p=(0,u.Z)((function FilesPicker({multiple:e}){return d.createElement(d.Fragment,null,d.createElement("input",{type:"file",multiple:e,className:"hidden file","data-test-component":"FilesPicker","data-test-element":"input"}),d.createElement("div",{className:"drop-help"},d.createElement("span",{className:"glyphicon glyphicon-cloud-upload"}),d.createElement("span",{className:"instructions"},"Drag and drop to upload"),d.createElement("button",{type:"button",className:"btn btn-af-primary file-choose"},e?"or choose files":"or choose a file")),d.createElement("h5",{className:"js-files-title hidden"},e?"Files to Upload":"File to Upload"," (",d.createElement("span",{className:"js-files-count"}),")"),d.createElement("div",{className:"files-list-wrapper"},d.createElement("table",{className:"table table-bordered"},d.createElement("tbody",{className:"files-list"}))))}))
var m=n(263137)
const E=(0,u.Z)((function FilesPickerItem({name:e,status:t}){return d.createElement("td",null,d.createElement("span",{className:"pull-right"},"uploading"===t?d.createElement("img",{src:"/static/img/spinner.gif"}):"complete"===t?d.createElement("span",{className:"glyphicon glyphicon-ok"}):"failed"===t?d.createElement("span",{className:"glyphicon glyphicon-exclamation-sign"}):"pending"===t?d.createElement("span",{className:"glyphicon glyphicon-trash delete u-danger-pointer"}):null),d.createElement("span",{className:"name"},d.createElement("span",{className:"glyphicon glyphicon-file files-picker-icon"}),d.createElement("span",{...(0,m.Z)({component:"FilesPickerItem",element:"fileName"})},e)))})),h="uploading",g="complete",S="failed",_="pending"
class UploadFileModel extends i().Model{defaults(){return{file:null,name:"Untited",status:_,deleted:!1}}upload(){this.set({status:h})
return this.get("upload")(this.get("file"),this.get("name"))}}class UploadFileView extends i().View{static initClass(){this.prototype.template=E
this.prototype.tagName="tr"
this.prototype.events={"click .delete":"handleDelete"}}initialize(){this.listenTo(this.model,"change:deleted",(()=>{if(this.shouldRemove())return this.remove()}))
this.listenTo(this.model,"change:name change:status",(()=>this.render()))}render(){this.$el.html(this.template({name:this.model.get("name"),status:this.model.get("status")}))
return this}handleDelete(){this.model.set("deleted",!0)}shouldRemove(){return this.model.get("status")===_&&this.model.get("deleted")}}UploadFileView.initClass()
class FilesPicker_FilesPicker extends i().View{static initClass(){this.prototype.tagName="div"
this.prototype.className="files-picker"
this.prototype.template=p
this.prototype.events={"click .file-choose":"chooseFiles","change .file":"addFromChooser",filedrop:"handleDrop"}}initialize(e){this.handleUpload=this.handleUpload.bind(this)
e=r.default.extend({getName:e=>e.name,multiple:!0,parallelism:2,bulkUpload:!1},e)
super.initialize(e)
null==this.collection&&(this.collection=new(i().Collection)([],UploadFileModel))
this.listenTo(this.collection,"change:deleted",((e,t)=>{(0,o.hu)(t)
this.collection.remove(e)
this.$(".js-files-count").text(this.collection.length)}));({getName:this.getName,multiple:this.multiple,bulkUpload:this.bulkUpload,parallelism:this.parallelism,upload:this.upload,maxFiles:this.maxFiles}=e)}handleDrop(e,t){t.length>0&&this.addFiles(t)}chooseFiles(){return this.$(".file").click()}addFromChooser(e){return this.addFiles(e.target.files)}addFiles(e){return(()=>{const t=null!=this.maxFiles?this.maxFiles-this.collection.length:null
if(null!=t&&Array.from(e).length>t){let e=`You've exceeded the limit of **${this.maxFiles} files**.`
t>0&&(e+=` Please try your action again but add **no more than ${t} additional files**.`)
l.ZP.warn(e)
return}const n=[]
for(const t of Array.from(e)){const e=this.getName(t),a=new UploadFileModel({file:t,name:e,upload:this.upload})
n.push(this.registerUpload(a))}return n})()}registerUpload(e){this.$(".files-list").append(new UploadFileView({model:e}).render().el)
this.$(".js-files-title").removeClass("hidden")
this.multiple||this.collection.each((e=>{e.set("deleted",!0)}))
this.collection.add(e)
this.$(".js-files-count").text(this.collection.length)}handleUpload({uploadComplete:e,allComplete:t}){c.Z.pop(this.el)
this.$(".file-choose").addClass("disabled")
return this.bulkUpload?this.handleBulkUpload({allComplete:t}):this.handleSerialUpload({uploadComplete:e,allComplete:t})}handleSerialUpload({uploadComplete:e,allComplete:t}){(0,o.hu)(r.default.isFunction(e)&&r.default.isFunction(t))
const n=new s.c(this.parallelism)
function task(t,n){t.get("deleted")?n():t.upload().done((()=>t.set("status",g))).fail((()=>t.set("status",S))).done((n=>e(n,t.get("file").name))).always((()=>n()))}this.collection.each((e=>{n.defer(task,e)}))
n.awaitAll((()=>t()))}setAllFilesStatus(e){this.collection.each((t=>t.set({status:e})))}handleBulkUpload({allComplete:e}){(0,o.hu)(r.default.isFunction(e))
this.setAllFilesStatus(h)
const t=this.upload(this.collection.map((e=>e.get("file"))));(0,o.hu)(null!=t,"Upload handler should return a promise")
return t.fail((()=>this.setAllFilesStatus(S))).done((()=>this.setAllFilesStatus(g))).done((()=>e()))}remove(){c.Z.pop(this.el)
return super.remove()}render(){this.$el.html(this.template({multiple:this.multiple}))
c.Z.push(this.el)
return this}}FilesPicker_FilesPicker.initClass()
const T=FilesPicker_FilesPicker},273783:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(901369),i=n(959415),s=n(47984),r=n(132814)
const{ASSEMBLY_TYPE:o}=s
class GoldenGateCutSite extends i.sd{defaults(){return{start:null,end:null,cutSiteOffset:null}}start(){return this.get("start")}end(){return this.get("end")}cutSiteOffset(){return this.get("cutSiteOffset")}uid(){return this.cid}strand(){return 0}click(e){return e.selection().select(this)}}class GoldenGateCutSites extends i.FE{static initClass(){this.prototype.model=GoldenGateCutSite}slice(e,t){return this.filter((n=>r.isRangeOverlap(e,t,n.start(),n.end())))}updateCutSites(e){if(e.finalized()||e.assemblyType()!==o.GOLDEN_GATE){this.reset([])
return}const t=a.Z.goldenGate.stickyEndRanges(e),n=e.assembly().enzyme().get("offset"),i=(()=>{const e=[]
for(const{start:a,end:i}of Array.from(t))e.push({start:a,end:i,cutSiteOffset:n})
return e})()
this.reset(i)}}GoldenGateCutSites.initClass()
const l=GoldenGateCutSites},337520:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(531041),i=n(478752),s=n(959415),r=n(436208),o=n(703764),l=n(132814)
class SequencePrimers extends s.FE{static initClass(){this.prototype.model=i.Z}initialize(e,t){null==t&&(t={})
super.initialize(...arguments);({sequence:this.sequence}=t)
this.setLayers()
this.setLayers=this.batch(this.setLayers)
return this.listenTo(this,"add remove change:_primer change:visible reset",this.setLayers)}comparator(e){return e.start()}batchName(){return"sequencePrimers"}getUnarchivedPrimers(){return this.filter((e=>!e.isArchived()))}slice(e,t){const n=this.sequence.length()
if(0===n)return[]
t%=n
const i=this.getUnarchivedPrimers().filter((n=>{const a=n.drawStart(this.sequence),i=n.drawEnd(this.sequence)
return n.get("visible")&&l.isRangeOverlap(e,t,a,i)&&0!==n.bases().length}))
return a.default.sortBy(i,(n=>Math.max(e,n.get("_primer").start())-e-(Math.min(t,n.get("_primer").end())-e)))}getCount(){return this.getUnarchivedPrimers().length}setLayers(){const e=o.eo(this.filter((e=>e.visible())),{top:!1,sequence:this.sequence})
for(const{model:t,layer:n}of Array.from(e))t.set(r.LINEAR_LAYER_FULL,n,{silent:!0})
this.trigger("layerChange")}}SequencePrimers.initClass()
const c=SequencePrimers},663117:(e,t,n)=>{n.d(t,{Z:()=>AlignmentTabState})
var a=n(440281),i=n.n(a),s=n(884155),r=n(531041),o=n(232606),l=n(348920),c=n(48047),d=n(674607),u=n(126675),p=n(2186),m=n(882321),E=n(693707),h=n(219579),g=n(974913),S=n(970211),_=n(68371)
class AlignmentTabState extends _.Z{initialize(...e){super.initialize(...e)
this.history=[]
l.ZP.MOLBIO_ENABLE_ALIGNMENT_UNDO&&this.on("change:loaded",this.initializeHistory)}initializeHistory(){0===this.history.length&&this.history.push(this.toHistoryState())}addToHistory(){const e=this.toHistoryState(),t=r.default.last(this.history);(0,s.is)(t.analysisState.get("alignments"),e.analysisState.get("alignments"))||this.history.push(e)}replaceHistory(e){this.history=e}toHistoryState(){return{analysisState:this.get("analysis").toHistoryState(),selectionStart:this.get("selectionProps").get("start"),rowIndex:this.get("selectionProps").get("rowIndex")}}inSync(){const e=this.get("sequence").get("versions"),t=e.getLastId(),n=this.get("analysis").get("versionId")
if(t===n)return!0
const a=e.filter((e=>e.id===t))[0]
return(0,S.YO)(e.models.map((e=>e.attributes)),a.attributes)&&a.get("parentId")===n}canUndo(){return this.inSync()&&this.history.length>1}async revertMasterSequence(e){const t=e.alignments.find((e=>["template","consensus"].includes(e.type))).sequence;(0,o.TY)(t.parts.length,0,"Attempted to revert master sequence with parts")
const n=(0,c.removeGaps)(t.bases),a=this.get("sequence"),i=await a.getVersionToResetTo()
if(!i){g.ZP.warn("Cannot undo while previous operation is in progress. Try again in a moment.")
return!1}if(i.get("bases")!==n){g.ZP.error(`Could not perform undo because ${this.get("analysis").get("alignmentType")} sequence version history is out of sync with alignment history.`)
return!1}await a.resetToVersion(i)
return!0}async undo(){const e=this.get("analysis"),t=this.history.pop(),n=r.default.last(this.history).analysisState.toJS(),a=this.get("sequence")
if(t.analysisState.toJS().versionId!==n.versionId){if(!await this.revertMasterSequence(n))return[]}n.versionId=a.getActiveVersionId()
e.set(e.parse(n))
this.loadAnalysis(e)
return[t.rowIndex,t.selectionStart]}cleanUp(){this.stopListening()
this.set("loaded",!1)
!function __guard__(e,t){return null!=e?t(e):void 0}(this.get("analysis"),(e=>e.unload()))}msVisibilityOptions(e){const t=[p.lA.name,p.j3.name,p.p4.name,p.Jv.name,p.KL.name,p.tO.name,p.bK.name]
if(null!=e.get("trace")){t.push(p.je.name)
t.push(p.cM.name)}else{t.push(p.jB.name)
t.push(p.gY.name)}e.get("type")===this.get("analysis").get("alignmentType")?t.push(p.nq.name):this.get("analysis").get("alignmentType")===m.Fl.TEMPLATE&&t.push(p.P$.name)
return this.get("visibilityOptions").makeLocalSync({editableOptions:t})}topVisibilityOptions(){return this.get("visibilityOptions").makeLocalSync({editableOptions:[p.lA.name,p.jB.name,p.KL.name,p.tO.name,p.gY.name,p.j3.name,p.p4.name,p.bp.name,p.nq.name,p.Yv.name]})}summaryVisibilityOptions(){return this.get("visibilityOptions").makeLocalSync({editableOptions:[]})}defaults(){return(0,r.default)(super.defaults()).extend({inEditMode:!1,analysis:null,analysisId:null,alignmentId:null,loaded:!1,mapstates:new d.hR,title:"Alignment Loading...",range:null,slice:null,scrollData:null,selectionProps:new(i().Model)({start:0,end:null,anchorEnd:"start",active:!1,rowIndex:0}),dnaType:new h.Z,summaryState:null,visibilityOptions:(0,p.Ig)("alignment",[{base:p.jB,visible:!0,editable:!0,sync:!0},{base:p.KL,visible:!0,editable:!0,sync:!0},{base:p.tO,visible:!0,editable:!0,sync:!0},{base:p.yX,visible:!1,editable:!0},{base:p.gY,visible:!0,editable:!0,sync:!0},{base:p.gO,visible:!1,editable:!1,sync:!0},{base:p.dq,visible:!1,editable:!1},{base:p.j3,visible:!1,editable:!0},{base:p.p4,visible:!1,editable:!0},{base:p.VZ,visible:!1,editable:!1},{base:p.Jv,visible:!0,editable:!0},{base:p.je,visible:!0,editable:!0},{base:p.cM,visible:!0,editable:!0},{base:p.bK,visible:!1,editable:!0},{base:p.bp,visible:!0,editable:!0},{base:p.fq,visible:!0,editable:!1},{base:p.B$,visible:!0,editable:!1},{base:p.P$,visible:!0,editable:!0,sync:!0},{base:p.nq,visible:!0,editable:!0},{base:p.Yv,visible:!0,editable:!0,sync:!0},{base:p.lA,visible:!0,editable:!0,sync:!1}])})}handleCanEdit(e,{isFeatureEdit:t}={}){if(e&&!t&&this.get("sequence").parts().length){g.ZP.error("Editing is not currently allowed on sequences with parts.")
return!1}if(this.get("sequence").get("versions").getLastId()!==this.get("analysis").get("versionId")){const e=this.get("sequence").get("versions").get(this.get("analysis").get("versionId"))
null!=e?g.ZP.error(`This analysis is out of sync. To edit it, please reset your sequence to version '${e.get("name")}' or realign.`):g.ZP.error("This analysis is out of sync. Your sequence has been reverted back too far. To edit it, please realign.")
return!1}const n=e&&!t,a=this.get("sequence").permissions()
if(!(n?a.writable:a.polymerFeaturesEditable)||this.get("sequence").get("_sequence").get("locked")){g.ZP.error("This sequence is not editable.")
return!1}if(!this.get("sequence").get("currentVersion")){g.ZP.error("Please reset the sequence to the current version before editing this analysis.")
return!1}return!0}async createAllTranslation(e){const t=this.get("mapstates").find((e=>e.get("sequence").has("baseSequence")))
for(const n of this.get("mapstates").models)if(n.cid!==t.cid){const t=n.get("sequence")
1!==e&&t.isSingleStranded()||await t.createTranslation(e,{bulk:!0})}const n=t.get("sequence")
1!==e&&n.isSingleStranded()||await n.createTranslation(e)
let a=this.get("analysis").get("name")
a.length>32&&(a=`${a.slice(0,32)}...`)
g.ZP.success(`Sequence alignment **${a}** updated.`)}containsRnaSequence(){return this.get("mapstates").models.map((e=>e.get("sequence"))).some((e=>e.isRNASequence()))}loadAnalysis(e){let t,n
this.set({loaded:!1})
this.set("analysis",e)
this.set("analysisId",e.id)
this.set("title",this.get("analysis").get("name"))
this.get("mapstates").reset((()=>{const a=[]
for(t of Array.from(this.get("analysis").get("alignments").models)){n=t.get("type")===this.get("analysis").get("alignmentType")?new d.CE({alignment:t,alignmentComments:e.get("alignmentComments"),baseSequence:this.get("sequence"),visibilityOptions:this.topVisibilityOptions(),handleCanEdit:this.handleCanEdit.bind(this,!0),permissions:this.get("sequence").get("permissions")}):new d.CE({alignment:t,visibilityOptions:this.msVisibilityOptions(t),handleCanEdit:this.handleCanEdit.bind(this,!1),permissions:this.get("sequence").get("permissions")})
n.get("layout").DNA.set("type",this.get("dnaType"))
n.get("layout").Translations.get("single").set("type",this.get("dnaType"))
n.get("layout").Translations.set("indexType",this.get("dnaType"))
a.push(n)}return a})())
const a=this.get("mapstates").models[0].get("sequence"),i=(()=>{const e=[]
for(n of Array.from(this.get("mapstates").models))e.push(n.get("sequence"))
return e})()
this.set("summaryState",new d.v_({sequences:i,visibilityOptions:this.summaryVisibilityOptions(),alignmentComments:e.get("alignmentComments")}))
this.set("range",new u.Z({getLengthFn:()=>a.length(),start:0,end:Math.min(100,a.length())}))
this.set("slice",new E.Z)
this.get("selectionProps").set({start:0,end:null,anchorEnd:"start",active:!1,rowIndex:0})
this.set("loaded",!0)
this.listenTo(this.get("analysis").get("alignments"),"remove",(function removeAlignment(e){r.default.chain(this.get("mapstates").models).filter((t=>t.get("sequence").get("_sequence").cid===e.get("sequence").cid)).each((e=>e.destroy()))
return r.default.chain(this.get("summaryState").get("submapstates").models).filter((t=>t.get("sequence").get("_sequence").cid===e.get("sequence").cid)).each((e=>e.destroy()))}))
return this.listenTo(this.get("analysis").get("alignments"),"sort",(function sortAlignments(){const e=[],n=this.get("analysis").get("alignments").models
for(let a=0;a<n.length;a++){t=n[a]
e[t.get("sequence").cid]=a}const a=this.get("mapstates"),i=this.get("summaryState").get("submapstates")
a.comparator=t=>e[t.get("sequence").get("_sequence").cid]
i.comparator=t=>e[t.get("sequence").get("_sequence").cid]
a.sort()
return i.sort()}))}getSubmapstates(){return this.get("summaryState").get("submapstates").models}getNameFromSubmapstate(e){return e.get("sequence").name()}getLineRanges(e){const t=e.get("sequence"),n=this.get("analysis").getMasterSequence()
return t.getLineRanges(n)}getCidForSubmapstate(e){return e.get("sequence").get("_sequence").cid}getMasterSubmapstateCid(){return this.get("analysis").getMasterSequence().cid}getSummaryType(){return this.get("summaryState").get("layout").DNA.get("type")}fitSummaryTypeToWidth(e,t,n){this.getSummaryType().fitToWidth(e,t,n)}getSummaryMapVisibilityOptions(){return this.get("summaryState").get("visibilityOptions")}getSummaryMapLineLayout(){return this.getSubmapstates()[0].get("layout").Line}setSummaryMapLineLayout({height:e,vMargin:t}){this.getSubmapstates().forEach((n=>{n.get("layout").Line.set({height:e,vMargin:t})}))}getPolymerLength(){return this.get("analysis").getMasterSequence().length()}getType(){return this.get("mapstates").models[0].get("layout").DNA.get("type")}getMapStateForMasterSequence(){return this.get("mapstates").find((e=>e.isMasterSequence()))}jumpToLocation({residueIndex:e,rowIndex:t}){this.getMapStateForMasterSequence().get("sequence").get("selection").reset(e)
this.get("mapstates").at(t).get("sequence").trigger("jump",e)}}},841996:(e,t,n)=>{n.d(t,{Z:()=>G})
var a=n(767807),i=n.n(a),s=n(250965),r=n.n(s),o=n(989526),l=n(782279),c=n(531041),d=n(468943),u=n(232606),p=n(348920),m=n(675649),E=n(171471),h=n(787004),g=n(459830),S=n(17086),_=n(999053),T=n(776065),I=n(947730),A=n(373787),f=n(396298),y=n(990697),C=n(376377),R=n(352858),b=n(140929),N=n(974913),O=n(614392),L=n(380490),P=n(166459),D=n(455040),v=n(87209),M=n(102385),B=n(379346),U=n(158490),F=n(649981),w=n(260929),k=n(771398),x=n(317275)
function dispatchFulfillmentsLoadedForEntry(e){const{requestFulfillments:t}=e;(0,P.getStore)().dispatch(D.vl({entryId:e.id,requestFulfillments:t}))}const Z={print:(e,t)=>{let a
null==t&&(t={})
let{showNote:i,protocolCids:s,indexSlice:r,showTimestamps:d}=t
const u=n(967911).Z.getEditorState(e),{entryProtocols:p}=u.entry
null==s&&(s=(()=>{const e=[]
for(a of Array.from(p))e.push(a.cid)
return e})())
const m=s
function handlePrint(){null==i&&(i=!1)
let e=`versionId=${u.openVersionId}`
i&&(e+="&note=true")
d&&(e+="&showTimestamps=true")
e+=`&protocols=${Array.from(m).map((e=>u.cidIdMap[e])).join(",")}`
null!=r&&(e+=`&startIndex=${r.start}&endIndex=${r.end}`)
window.open(`view?${e}#print`,"_blank")}const E=c.default.filter(p,(e=>null!=e.externalFile&&Array.from(m).includes(e.cid)))
if(E.length>0){const e=o.createElement("div",null,o.createElement("p",null,"This entry contains imported protocols which cannot be printed:"),o.createElement("ul",null,Array.from(E).map((e=>o.createElement("li",null,e.name)))),o.createElement("p",null,"Download and open these protocols directly to print them."))
new O.I4({title:"Print Entry",msg:l.renderToStaticMarkup(e)}).choice("Print Entry","btn-af-primary",handlePrint).choice("Cancel","btn-af-default").show()}else handlePrint()},updateProtocol:(e,t,n,a)=>{Z.update(e,U.Z.entryVersionUpdate({$apply:e=>F.Z.withEntryProtocolUpdated(e,n,a)}))},addProtocol:(e,t,n)=>{const a={},i=U.Z.entryVersionUpdate({$apply:e=>F.Z.withProtocolAdded(e,n,a)})
Z.update(e,i,{cidIdMap:a})},removeProtocol:(e,t,n)=>{Z.update(e,U.Z.entryVersionUpdate({$apply:e=>F.Z.withEntryProtocolRemoved(e,n)}))},revertProtocol:(e,t,n,a)=>{const s=i()(t,U.Z.entryVersionUpdate({$apply:e=>F.Z.withEntryProtocolReverted(e,n)}))
Z.revert(e,s,a)},reorderProtocols:(e,t,n)=>{Z.update(e,U.Z.entryVersionUpdate({$apply:e=>F.Z.withEntryProtocolsReordered(e,n)}))},registerObjects:(e,t)=>{I.Z.dispatch({actionType:h.DCn,entryId:e,cidIdMap:t})},updateNote:(e,t,n={performTableEvaluation:!0},a)=>{Z.update(e,U.Z.entryVersionUpdate({$merge:{note:t,...p.ZP.ENABLE_NOTEBOOK_TABLE_MAPPING&&a&&{structuredTableMappings:a}}}),n)},setName:(e,t)=>{Z.update(e,{$merge:{name:t}})},update:(e,t,{cidIdMap:n={},bumpVersion:a=!0,performTableEvaluation:i=!0}={})=>{p.ZP.ELN_ENABLE_REALTIME_UPDATES_M1&&(0,P.getStore)().dispatch(y.yg(e))
I.Z.dispatch({actionType:h.uW$,entryId:e,op:t,cidIdMap:n,bumpVersion:a,performTableEvaluation:i})},postServerUpdate:(e,t)=>{I.Z.dispatch({actionType:h.uW$,entryId:e,op:{$merge:t},bumpVersion:!1})},revert:(e,t,n)=>{I.Z.dispatch({actionType:h.ebW,entryId:e,entry:t,restoreData:n})},loadVersion:(e,t,n)=>{null==n&&(n={})
const{deferred:a}=n
I.Z.dispatch({actionType:h.PJP,entryId:e,versionId:t})
_.Z.getVersion(e,t).done((n=>{dispatchFulfillmentsLoadedForEntry(n)
I.Z.dispatch({actionType:h.xgU,entryId:e,versionId:t,version:n})
null!=a&&a.resolve()})).fail((n=>{I.Z.dispatch({actionType:h.TQQ,entryId:e,versionId:t})
null!=a&&a.reject(n)}))},fetchVersions:e=>{const t=n(967911).Z
if(!t.inStore(e))return
const{openVersionId:a}=t.getEditorState(e)
I.Z.dispatch({actionType:h.ABn,entryId:e})
_.Z.getVersions(e,{openVersionId:a}).done((t=>{I.Z.dispatch(c.default.extend({actionType:h.x6,entryId:e,versions:t.data},(0,x.Z)(t,"parent")))})).fail((()=>{I.Z.dispatch({actionType:h.gsi,entryId:e})}))},delete:(e,t)=>{null==t&&(t={})
const{success:n}=t
I.Z.dispatch({actionType:h.yHR,entryId:e})
_.Z.delete(e).done((()=>{I.Z.dispatch({actionType:h.Sle,entryId:e})
"function"==typeof n&&n()})).fail((t=>{I.Z.dispatch({actionType:h.AGp,entryId:e,error:t})
N.ZP.notifyError(t)}))},refreshReview:e=>{const t=n(967911).Z,{entry:a}=t.getEditorState(e)
if(null!=(null!=a?a.review:void 0)){(0,u.hu)(M.Z.hasLicense("LICENSE_REVIEWS"),"Expected to have LICENSE_REVIEWS")
C.oO(a.review.id).then((n=>{t.inStore(e)&&Z.postServerUpdate(e,{review:n})}))}},saveFileData:(e,{data:t,success:n})=>{_.Z.update(e,t).done((a=>{const i={folder:a.folder,editURL:a.editURL}
null!=t.name&&(i.name=t.name)
a.errors&&a.errors.forEach((e=>{N.ZP.error(e)}))
Z.postServerUpdate(e,i)
"function"==typeof n&&n()})).fail(N.ZP.notifyError)},resetToOpenVersion:e=>{const t=n(967911).Z,{isLatest:a}=t.getEditorState(e);(0,u.hu)(!a,"Unexpected reset version while on latest version")
S.gW({immediateAutoSaverQueueSaveAction:R.qi},void 0,(()=>{I.Z.dispatch({actionType:h.WCn,entryId:e})}))},save:e=>{const t=n(967911).Z
function getStoreSnapshotForSave(){const{entry:n,openVersion:a,metadata:i}=t.getEditorState(e)
return{openVersion:a,serverEntry:c.default.extend(t.prepareForSave(e,n),{metadata:i}),clientEntry:n}}const a=getStoreSnapshotForSave()
m.Gh(`entry-save-${e}`,(()=>{let n
if(t.inStore(e)){if(t.isLockedFromExternalChange(e))return r().Deferred().resolve().promise()
if(!t.hasUnsavedChanges(e))return r().Deferred().resolve().promise()
n=getStoreSnapshotForSave()}else n=a
const{openVersion:i,serverEntry:s,clientEntry:o}=n
I.Z.dispatch({actionType:h._g6,entryId:e})
return _.Z.update(e,s).done((n=>{I.Z.dispatch({actionType:h.$71,entryId:e,savedVersion:i,versionId:n.cidIdMap[s.cid],cidIdMap:n.cidIdMap,serverData:{folder:n.folder,editURL:n.editURL}})
n.errors&&n.errors.forEach((e=>{N.ZP.error(e)}))
if(t.inStore(e)){A.fetchDataTablesValidationStatus(e,o.note)
M.Z.hasLicense("LICENSE_REVIEWS")&&Z.refreshReview(e)}})).fail((t=>{N.ZP.stickyNotifyForFriendlyError(t,"entry-save-fail")
I.Z.dispatch({actionType:h.Aj7,entryId:e,error:t})}))}))},open:async(e,t)=>{let a
null==t&&(t={})
const{versionId:i,deferred:s}=t,r=n(967911).Z
I.Z.dispatch({actionType:h.Yy7,entryId:e})
a=null!=i?_.Z.getVersion(e,i):_.Z.get(e)
try{const t=await Promise.resolve(a)
dispatchFulfillmentsLoadedForEntry(t)
I.Z.dispatch({actionType:h.GS,entryId:e,entry:t})
if(r.inStore(e)){const t=r.getEntry(e)
A.fetchDataTablesValidationStatus(e,t.note)}null!=s&&s.resolve()}catch(t){if(!k.d0(t))throw t
I.Z.dispatch({actionType:h.KLc,entryId:e})
null!=s?s.reject(t):N.ZP.notifyError(t)}},close:e=>{I.Z.dispatch({actionType:h.moZ,entryId:e})},invalidate:e=>{I.Z.dispatch({actionType:h.hPS,entryId:e})},revalidate:e=>{I.Z.dispatch({actionType:h.KLc,entryId:e})},registerCollaboratorJoined:(e,t)=>{I.Z.dispatch({actionType:h.vDB,entryId:e,userId:t})},registerCollaboratorLeft:(e,t)=>{I.Z.dispatch({actionType:h.d9X,entryId:e,userId:t})},triggerEntryEvaluation:e=>{I.Z.dispatch({actionType:h.MHh,fileId:e})},generateEvaluationSnapshot:async e=>{const t=n(967911).Z
if(!t.inStore(e)){w.ZK(`Attempted to generate evaluation snapshot for ${e} but it was not in the store!`)
return}const a=t.getEntry(e).note,i=(0,f.G5)(a.id,a),{computedTables:s}=await(0,b.$p)({fullTableMap:i,hasFormulasDisabled:!1,selectors:a.selectors})
I.Z.dispatch({actionType:h.ik4,entryId:e,evaluatedTables:s})},createFromTemplate:({entryName:e,folderId:t,templateId:n,tagSchemaId:a,schemaTags:i,initialDay:s,onSuccess:r,fulfillments:o})=>{v.$Z()
return _.Z.createFromTemplate({name:e,folder:t,template:n,tagSchemaId:a,schemaTags:i,initialDay:s,fulfillments:o}).done((e=>{dispatchFulfillmentsLoadedForEntry(e)
T.Z.openFile(e.id)
null!=r&&r()})).fail(N.ZP.notifyError).always((()=>{v.Cp()}))},createRegistrationTable:(e,t,n,a,{success:i,fileId:s})=>{v.$Z()
const r=B.ZP.apiIdToType(s),o=r===g.EntryType.STAGE_CONFIGURATION||r===g.EntryType.STAGE_ENTRY
_.Z.createRegistrationTable({name:e,tagSchemaId:t,tableType:n,labelingStrategy:a,fileId:s,isWatchingInputTable:o}).done((({registrationTable:e,registrationRecordList:t})=>{d.KK(E.H4.CREATED_REGISTRATION_TABLE_IN_ENTRY,{isWatchingInputTable:e.isWatchingInputTable,initialRowCount:e.rows.length,initialColumnCount:e.columns.length});(0,P.getStore)().dispatch(L.WN({[t.id]:t}))
i(e)})).fail(N.ZP.notifyError).always((()=>{v.Cp()}))},invokeProcessTaskExecutionTableMapping:(e,t)=>{I.Z.dispatch({actionType:h.AUH,entryId:e,taskIds:t})}},G=Z},919210:(e,t,n)=>{n.d(t,{Z:()=>p})
var a=n(250965),i=n.n(a),s=n(675649),r=n(787004),o=n(947730),l=n(963145),c=n(785249),d=n(974913)
const u={print:(e,t)=>{const n=c.Z.getEditorState(e),a=n.cidIdMap[n.note.cid]
let i=""
Object.entries(t).forEach(((e,t)=>{i+=`&${e}=${t}`}))
window.open(`view?note=${a}${i}#print`,"_blank")},registerObjects:(e,t)=>{o.Z.dispatch({actionType:r.ryr,fileId:e,cidIdMap:t})},load:(e,t)=>{o.Z.dispatch({actionType:r.ITN,fileId:e,note:t})
return u.fetchVersions(e)},close:e=>{o.Z.dispatch({actionType:r.anV,fileId:e})},update:(e,t,{bumpVersion:n=!0}={})=>{o.Z.dispatch({actionType:r.eq2,fileId:e,op:t,cidIdMap:{},bumpVersion:n})},replace:(e,t,n)=>{o.Z.dispatch({actionType:r.uHi,fileId:e,note:t,restoreData:n})},loadVersion:(e,t)=>{o.Z.dispatch({actionType:r.YW6,fileId:e,versionId:t})
l.Z.getVersion(e,t).done((n=>{o.Z.dispatch({actionType:r.LKW,fileId:e,versionId:t,version:n})})).fail((()=>{o.Z.dispatch({actionType:r.gis,fileId:e,versionId:t})}))},fetchVersions:e=>{o.Z.dispatch({actionType:r.cfw,fileId:e})
return l.Z.getVersions(e).done((t=>{o.Z.dispatch({actionType:r.x4Z,fileId:e,versions:t})})).fail((t=>{o.Z.dispatch({actionType:r.v1g,fileId:e})}))},save:e=>{let{note:t,openVersion:n}=c.Z.getEditorState(e),a=c.Z.prepareForSave(e,t)
s.Gh(`note-${e}`,(()=>{if(c.Z.inStore(e)){({note:t,openVersion:n}=c.Z.getEditorState(e))
if(!c.Z.hasUnsavedChanges(e))return i().Deferred().resolve().promise()
a=c.Z.prepareForSave(e,t)}o.Z.dispatch({actionType:r.Tyb,fileId:e})
return l.Z.update(e,a).done((t=>{o.Z.dispatch({actionType:r.r$X,fileId:e,savedVersion:n,versionId:t.cidIdMap[a.cid],cidIdMap:t.cidIdMap})
c.Z.inStore(e)&&u.fetchVersions(e)})).fail((t=>{d.ZP.stickyNotifyForFriendlyError(t,"note-save-fail")
o.Z.dispatch({actionType:r.eyr,fileId:e,error:t})}))}))}},p=u},301008:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(531041),i=n(812651),s=n(766455)
class DigestTabState extends s.X4{defaults(){return{...super.defaults(),unsaved:!0}}initialize(e,t){super.initialize(...arguments)
this.analysis=e.analysis
this.sequence=e.sequence
this._sequence=e.sequence.get("_sequence")
this.set("title",this.analysis.get("name"))
this.set("id",`analysis_${this.analysis.cid}`)
this.listenTo(this.analysis,"change:name",((e,t)=>{this.set("title",t)}))
this.update()
this.listenTo(this._sequence,"change:bases change:circular",(()=>{this.update()}))}update(){const e=this.analysis.get("enzymes"),t=this.sequence.getFragments(e),n=this.analysis.get("fragments")
null!=n&&this.stopListening(n)
this.analysis.set("fragments",new i.SequenceCollection(t.sortBy((e=>e.get("start")))))
this.listenTo(this.analysis.get("fragments"),"change:selected",a.default.bind((function(){return this.trigger("selectedFragmentChange")}),this))}}const r=DigestTabState},426178:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(301008),i=n(920995)
class Digests extends i.d{constructor(){super(...arguments)
this.model=a.Z}}const s=Digests},331356:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(440281),i=n.n(a),s=n(133936),r=n(766455)
class SecondaryStructures extends i().Collection{static initClass(){this.prototype.model=s.Z}}SecondaryStructures.initClass()
class SecondaryStructureTabState extends r.Xh{defaults(){return{...super.defaults(),title:"All Structures"}}static create(e,t,n,a,i,r,o,l){const c=new SecondaryStructureTabState({sequence:e,mainStructure:new s.Z({...t,nucleotideType:r,name:a}),structures:new SecondaryStructures(n.map((e=>({...e,nucleotideType:r,name:a})))),temperature:i,primer:o,primer2:l,name:a})
e.fileState().buffers().addTab(c)}}const o=SecondaryStructureTabState},504544:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(531041),i=n(766455)
class TranslationTableTabState extends i.X4{defaults(){return(0,a.default)(super.defaults()).extend({title:"Translations"})}deleteTranslations(e){const t=this.sequence()._sequence().translations(),n=t.filter((t=>Array.from(e).includes(t.id))),a=t.bulkDelete(n,{fileUpdate:!0})
a.done((()=>this.sequence().updateVersions()))
return a}}const s=TranslationTableTabState},205155:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(440281),i=n.n(a)
const s={ladder:{width:50},lane:{width:100},gel:{fill:"#eee",padding:20,height:500},band:{fill:"#666",height:4,width:60,active:{fill:"#000"}},header:{height:30},padding:20,type:{height:15}}
var r=n(891515),o=n(766455)
class VirtualDigestTabState extends o.X4{defaults(){return{...super.defaults(),active:!1,closeable:!1,ladderId:"life-1kbplus",digests:new(i().Collection),title:"Virtual Digest",layout:s,ladders:r.Z.slice(),preferenceKey:o.HN}}ladders(){return this.get("ladders")}}const l=VirtualDigestTabState},605998:(e,t,n)=>{n.r(t)
n.d(t,{exportSourceFiles:()=>exportSourceFiles,open:()=>open})
var a=n(232606),i=n(663117),s=n(699418),r=n(974913),o=n(87209),l=n(771398),c=n(8747)
async function open({sequenceId:e,alignmentId:t}){let n
try{const r=await s.ZP.get().openFolderItem(e,{open:!0});(0,a.hu)(null!=r,"Expected non-null fileState")
n=r.findTab(i.Z,(e=>e.get("alignmentId")===t))
if(n)n.set("active",!0)
else{o.x$()
const e=r.get("sequence"),a=e.get("analyses").find((e=>e.get("apiId")===t))
if(!a)return
n=new i.Z({sequence:e,alignmentId:t})
r.buffers().addTab(n,{side:"left"})
r.setIsWorkspaceSplit(!1)
await a.fetch({parse:!0})
n.loadAnalysis(a)}}catch(e){if((0,l.d0)(e)){r.ZP.notifyError(e)
n&&n.close()
return}throw e}finally{o.hl()}}async function exportSourceFiles(e){const t="alignment-source-export"
r.ZP.info("Preparing export...",{id:t,duration:0})
try{const n=await c.s0({url:"/1/api/sequence/analyses:get-attached-files",data:{analysisIds:e}})
window.location=n.url
r.ZP.success("Export complete. Downloading...",{id:t})}catch(e){r.ZP.close(t)
if((0,l.d0)(e)){r.ZP.notifyError(e)
return}throw e}}},933863:(e,t,n)=>{n.d(t,{Z:()=>AlignmentListingRenderer})
var a=n(989526),i=n(318311),s=n(451882),r=n(62315),o=n(89635),l=n(868710),c=n(36424),d=n(63573),u=n(10584)
class AlignmentListingRenderer{getColumnConfigurations(){return[{column:{header:(0,o.o7)(r.bo.SORT_NAME_KEY),accessorKey:i.dC.NAME,flexGrow:1,isSortable:!0,sortKey:r.bo.SORT_NAME_KEY},render:e=>a.createElement(s.z,{alignmentSummary:e})},{column:{header:(0,o.o7)(r.bo.SORT_MODIFIED_AT_KEY),accessorKey:i.dC.MODIFIED_AT,flexGrow:1,isSortable:!0,sortKey:r.bo.SORT_MODIFIED_AT_KEY},render:e=>a.createElement(l.ZP,{title:u.UT(e.modifiedAt,{showTime:!0}),container:"body",placement:l.TQ.TOP,delay:350},a.createElement("span",{className:"u-ellipsis-text"},u.UT(e.modifiedAt,{showTime:!1})))},{column:{header:(0,o.o7)(r.bo.SORT_CREATED_AT_KEY),accessorKey:i.dC.CREATED_AT,flexGrow:1,isSortable:!0,sortKey:r.bo.SORT_CREATED_AT_KEY},render:e=>a.createElement(l.ZP,{title:u.UT(e.createdAt,{showTime:!0}),container:"body",placement:l.TQ.TOP,delay:350},a.createElement("span",{className:"u-ellipsis-text"},u.UT(e.createdAt,{showTime:!1})))}]}getRowContentHeight(){return d._5}renderIcon(){return a.createElement(c.Z,{className:"scrollableTable-cell-icon",icon:"alignment"})}openContextMenu(){}}},804921:(e,t,n)=>{n.d(t,{Z:()=>CreateSequenceAlignmentsModal})
var a=n(692013),i=n(989526),s=n(476235),r=n(232606),o=n(348920),l=n(882321),c=n(390462),d=n(432128),u=n(368734),p=n(334148),m=n(205986),E=n(97737),h=n(64558),g=n(764403),S=n.n(g),_=n(615439),T=n.n(_),I=n(178570),A=n(456670),f=n(62955),y=n(778223),C=n(229329),R=n(601790)
function UseCurrentVersionTableSequenceCell({input:e,isTemplate:t,dispatch:n}){const a=t?void 0:()=>{n({type:f.JS.REMOVE_INPUT,input:e})}
return i.createElement(R.bL,null,(0,s.$P)(e,{size:y.TK.MINI,onRemove:a}))}function UseCurrentVersionTableCheckboxCell({input:e,dispatch:t}){let n=!1,a=!0,r=h.ZT
if((0,s.VP)(e)){n=e.useCurrentVersion
a=!1
r=n=>{t({type:f.JS.SET_USE_CURRENT_VERSION,input:e,value:n.target.checked})}}return i.createElement(R.bL,null,i.createElement(C.Z,{id:(0,s.ad)(e),checked:n,disabled:a,label:"",onChange:r}))}function UseCurrentVersionTable({alignmentSetup:e,dispatch:t}){let n,a=e.items
if((0,s.VO)(e)){n=e.template
a=[n,...e.items]}return i.createElement(R.iA,{numRows:a.length,overflowVisible:!0},i.createElement(R.sg,{header:"Sequence",renderCell:e=>i.createElement(UseCurrentVersionTableSequenceCell,{input:a[e],dispatch:t,isTemplate:a[e]===n})}),i.createElement(R.sg,{header:"Use Latest Version",renderCell:e=>i.createElement(UseCurrentVersionTableCheckboxCell,{input:a[e],dispatch:t})}))}var b=n(955836),N=n(48047),O=n(467607),L=n(16133),P=n(291689),D=n(62315),v=n(103593),M=n(102176),B=n(59860),U=n(271359),F=n(890711),w=n(36424),k=n(402763),x=n(801455),Z=n(134749),G=n(665704),H=n(927517)
function CollapsibleSection({title:e,children:t}){const[n,s]=(0,i.useState)(!1)
return i.createElement(i.Fragment,null,i.createElement("hr",{className:(0,a.iv)(W.fullWidthHorizontalRule)}),i.createElement("div",{onClick:()=>{s(!n)},className:(0,a.iv)(W.clickable)},i.createElement(w.Z,{icon:n?"chevron-right":"chevron-down",className:(0,a.iv)(W.icon)}),i.createElement("span",{className:(0,a.iv)(W.text)},e)),!n&&t)}function ChooseInputPane({inputs:e,sequenceAnalysisInfo:t,dispatch:n}){const r=function maybeGetExistingConsensusNucleotideType(e){return null==e||(0,s.VO)(e.alignmentSetup)?void 0:e.alignmentSetup.nucleotideType}(t),[o,l]=(0,i.useState)(null!=r?r:b.Wy.DNA),[c,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[E,g]=(0,i.useState)(""),[_,A]=(0,i.useState)(!1),C=(0,i.useRef)(null),R=Boolean(c)&&Boolean(u)
function setSanitizedTextInputBases(e,t){const{sanitizedBases:n,errors:{convertedUToT:a,convertedTToU:i}}=(0,N.getSanitizedBasesAndSanitizationErrors)(e,t);(a||i)&&A(!0)
m(n)}function submitTextInput(){n({type:f.JS.ADD_INPUT,input:{type:f.n$.TEXT,name:c,residues:u,id:(0,I.Z)(),nucleotideType:o}})
d("")
m("")
C.current&&C.current.focus()}function makeInterceptEnterKeyFunc(e){return t=>{if((0,H.isEnterKey)(t)){t.preventDefault()
e()}}}let U="long_sequence"
null!=r&&(U=r===b.Wy.DNA?"sequence":"rna_sequence")
return i.createElement(i.Fragment,null,(!r||r===b.Wy.DNA)&&i.createElement(i.Fragment,null,i.createElement("div",{className:(0,a.iv)(W.text,W.basicBottomMargin)},"Upload sequence and trace files (.ab1, .ftv, .fasta, .gb, and .geneious). RNA uploads are not currently supported."),i.createElement("div",{className:(0,a.iv)(W.fileInputOffset)},i.createElement(F.Z,{multiple:!0,onSelectFiles:(...e)=>{n({type:f.JS.UPLOAD_FILES,files:e,dispatch:n})}}))),i.createElement("div",{className:(0,a.iv)(W.text,W.basicVerticalMargin)},"Search for a DNA / RNA sequence."),i.createElement("div",{className:S()("u-flex-display",(0,a.iv)(W.colPaddingOffset))},i.createElement(v.Z,{lg:5,md:5,sm:5,xs:5},i.createElement(k.ZP,{searchURL:`/1/api/all/search?filter=${U}`,fetchParams:{context:D.ci.LISTING},doSearch:k.Kq,isMulti:!0,autoFocus:!1,searchOnEmptyQuery:!1,placeholder:"Search by name",getOptionDatasFromResponse:t=>t.data.map((t=>{var n
return{name:i.createElement("span",null,i.createElement("div",{className:(0,a.iv)(W.ellipsizedText)},t.name),i.createElement("div",{className:(0,a.iv)(W.ellipsizedText,W.optionMetadata)},t.folder.name)),icon:t.sequence_type===O.uS.DOUBLE_STRANDED?"sequence":"rna_sequence",value:null!==(n=e.find((e=>(0,s.VP)(e)&&e.id===t.id)))&&void 0!==n?n:{type:f.n$.BIOENTITY,name:t.name,id:t.id,canBeTemplate:t.permissions.polymerFeaturesEditable,nucleotideType:t.nucleotideType},dataTestAttrs:{component:"ChipSelectInput",element:"searchResult",key:t.id}}})),value:e,query:E,onQueryChange:e=>{g(e.target.value)},onSelect:t=>{e.some((e=>T()(e,t)))?n({type:f.JS.REMOVE_INPUT,input:t}):n({type:f.JS.ADD_INPUT,input:t})},renderChips:()=>null,scrollable:!0,onKeyDown:makeInterceptEnterKeyFunc(h.ZT)}))),i.createElement("hr",null),i.createElement("div",{className:(0,a.iv)(W.text,W.basicVerticalMargin)},"Create a DNA / RNA sequence from scratch."),i.createElement(B.Z,null,i.createElement(v.Z,{lg:5,md:5,sm:5,xs:5},i.createElement(P.l,{nucleotideType:o,onChangeSelection:e=>{l(e)
setSanitizedTextInputBases(u,e)
A(!1)},disabled:null!=r}))),i.createElement(M.Z,{className:S()("u-flex-display",(0,a.iv)(W.colPaddingOffset,W.maxWidth100))},i.createElement(v.Z,{lg:3,md:3,sm:3,xs:3},i.createElement(G.Z,{value:c,onChange:e=>{d(e.target.value)},labelStyle:x.Z.STYLES.HIDDEN,label:"Name",placeholder:"Name",onKeyDown:makeInterceptEnterKeyFunc((()=>{R&&submitTextInput()})),textInputRef:C,dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"textNameInput"}})),i.createElement(v.Z,{lg:8,md:8,sm:8,xs:8},i.createElement(G.Z,{value:u,onChange:e=>{setSanitizedTextInputBases(e.target.value,o)},labelStyle:x.Z.STYLES.HIDDEN,label:"Bases",placeholder:"Bases",error:_?{message:(0,L.DD)(o),style:Z.P1.INFO}:null,onKeyDown:makeInterceptEnterKeyFunc((()=>{R&&submitTextInput()})),dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"textBasesInput"}})),i.createElement(v.Z,{lg:1,md:1,sm:1,xs:1},i.createElement(p.Co,{buttonStyle:p.ZJ.TERTIARY_GRAY,size:p.qE.SMALL,text:"Add",disabled:!R,onClick:submitTextInput,className:(0,a.iv)(W.withoutButtonFocusStyling),dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"textAddButton"}}))),t&&i.createElement(CollapsibleSection,{title:"Current sequences"},i.createElement(UseCurrentVersionTable,{alignmentSetup:t.alignmentSetup,dispatch:n})),i.createElement(CollapsibleSection,{title:t?"New sequences":"Sequences"},i.createElement("div",null,e.map((e=>(0,s.$P)(e,{size:y.TK.MINI,onRemove:()=>{n({type:f.JS.REMOVE_INPUT,input:e})}}))))))}const W=a.mM.create({text:A.Bk,basicBottomMargin:{marginBottom:A.dn},basicVerticalMargin:A.Sf,fileInputOffset:{margin:"0px -10px"},colPaddingOffset:A.Yb,fullWidthHorizontalRule:A.rz,icon:{...A.QI,marginRight:"8px"},maxWidth100:A.MF,clickable:A.LD,withoutButtonFocusStyling:A.f8,optionMetadata:{color:U.pF},ellipsizedText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})
var q=n(954240),V=n(865486),J=n(924982)
function ProgramParamsSelectDropdown({label:e,name:t,options:n,currentValue:s,updateParams:r}){var o
const l=n.find((e=>e.value===s)),c=n.map((e=>{var n
return i.createElement(J.Z,{onSelect:e=>{r({[t]:e})},value:e.value,metadata:e.metadata,key:e.value.toString()},null!==(n=e.display)&&void 0!==n?n:e.value)}))
return i.createElement(v.Z,{lg:6,md:6,sm:6,xs:6,className:(0,a.iv)(K.param),key:t},i.createElement(x.Z,{label:e}),i.createElement(q.ZP,{displayName:null!==(o=l.display)&&void 0!==o?o:l.value,menu:i.createElement(V.ZP,{value:s,scrollable:!0},c)}))}function ProgramParamsSection({currentParameters:e,parameterNames:t,parameterOptionValues:n,updateParams:s,defaultParameters:r}){const o=t.map((t=>{const a=n[t]
return i.createElement(ProgramParamsSelectDropdown,{key:t,label:a.label,name:t,options:a.options,currentValue:e[t],updateParams:s})}))
return i.createElement(i.Fragment,null,i.createElement("div",{className:S()("u-flex-display",(0,a.iv)(K.colPaddingOffset))},i.createElement(M.Z,{className:"u-flex-grow u-no-spacing-bottom"},o)),i.createElement(p.Co,{buttonStyle:p.ZJ.LINK,text:"Reset to defaults",className:S()("u-moderate-spacing-bottom",(0,a.iv)(K.withoutButtonFocusStyling)),onClick:()=>{s(r)},disabled:T()(e,r)}))}const K=a.mM.create({param:{marginBottom:A.dn},colPaddingOffset:A.Yb,withoutButtonFocusStyling:A.f8})
var Y,X=n(204026),$=n(757389),z=n(129270),j=n(263137),Q=n(166310),ee=n(383628),te=n(868710),ne=n(198964),ae=n(994633),ie=n(472347),se=n(554475),re=n(914073),oe=n(198210),le=n(687201),ce=n(435191),de=n(391918)
!function(e){e.SELECT_ALL="Select all"
e.UNSELECT_ALL="Unselect all"
e.SELECT_ALL_DNA="Select all DNA"
e.UNSELECT_ALL_DNA="Unselect all DNA"
e.SELECT_ALL_RNA="Select all RNA"
e.UNSELECT_ALL_RNA="Unselect all RNA"
e.DNA_SEPARATOR="DNA"
e.RNA_SEPARATOR="RNA"}(Y||(Y={}))
const ue=a.mM.create({multiselectOption:{textAlign:"center",borderBottom:`1px solid ${U.pF}`},separatorOption:{fontWeight:z.KB,cursor:"default",color:U.Rl}}),pe={[Y.SELECT_ALL]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"selectAll"},name:Y.SELECT_ALL,value:Y.SELECT_ALL},[Y.UNSELECT_ALL]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"unselectAll"},name:Y.UNSELECT_ALL,value:Y.UNSELECT_ALL},[Y.SELECT_ALL_DNA]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"selectAllDNA"},name:Y.SELECT_ALL_DNA,value:Y.SELECT_ALL_DNA},[Y.UNSELECT_ALL_DNA]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"unselectAllDNA"},name:Y.UNSELECT_ALL_DNA,value:Y.UNSELECT_ALL_DNA},[Y.SELECT_ALL_RNA]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"selectAllRNA"},name:Y.SELECT_ALL_RNA,value:Y.SELECT_ALL_RNA},[Y.UNSELECT_ALL_RNA]:{className:(0,a.iv)(ue.multiselectOption),dataTestAttrs:{component:"AlignmentInputOption",element:"root",key:"unselectAllRNA"},name:Y.UNSELECT_ALL_RNA,value:Y.UNSELECT_ALL_RNA},[Y.DNA_SEPARATOR]:{className:(0,a.iv)(ue.separatorOption),disabled:!0,name:Y.DNA_SEPARATOR,value:Y.DNA_SEPARATOR},[Y.RNA_SEPARATOR]:{className:(0,a.iv)(ue.separatorOption),disabled:!0,name:Y.RNA_SEPARATOR,value:Y.RNA_SEPARATOR}}
function filterChoicesByQuery(e,t,n){return e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase()))).map((e=>(0,s.rF)(e,n)))}function buildOptionDatas({dnaChoices:e,rnaChoices:t,nonDisabledDNAChoices:n,nonDisabledRNAChoices:a,nonDisabledChoices:i,selection:r,query:o,alignmentKind:c,getDisabledOptionProps:d}){const u=[],p=[],m=[]
if(""!==o){p.push(...filterChoicesByQuery(n,o,d))
m.push(...filterChoicesByQuery(a,o,d))}else{p.push(...e.map((e=>(0,s.rF)(e,d))))
m.push(...t.map((e=>(0,s.rF)(e,d))))
if(c===l.zf.CONSENSUS)if(0===e.length||0===t.length)0===r.length?u.push(pe[Y.SELECT_ALL]):r.length===i.length&&u.push(pe[Y.UNSELECT_ALL])
else{n.length>0&&t.length>0&&(0===r.length?u.push(pe[Y.SELECT_ALL_DNA]):r.length===n.length&&u.push(pe[Y.UNSELECT_ALL_DNA]))
a.length>0&&e.length>0&&(0===r.length?u.push(pe[Y.SELECT_ALL_RNA]):r.length===a.length&&u.push(pe[Y.UNSELECT_ALL_RNA]))}else{0===r.length&&u.push(pe[Y.SELECT_ALL])
r.length===i.length&&u.push(pe[Y.UNSELECT_ALL])}}if(p.length>0&&m.length>0){p.unshift(pe[Y.DNA_SEPARATOR])
m.unshift(pe[Y.RNA_SEPARATOR])}u.push(...p,...m)
return u}function AlignmentInputSelector({choiceValues:e,selection:t,onSelect:n,getDisabledOptionProps:a,autofocus:r,alignmentKind:o}){const[l,c]=(0,i.useState)(""),[d,u]=(0,h.uK)(e,(e=>e.nucleotideType===b.Wy.DNA)),p=e.filter((e=>!a(e).disabled)),[m,E]=(0,h.uK)(p,(e=>e.nucleotideType===b.Wy.DNA))
return i.createElement(le.Z,{isMulti:!0,autoFocus:r,placeholder:"Search",optionDatas:buildOptionDatas({dnaChoices:d,rnaChoices:u,nonDisabledDNAChoices:m,nonDisabledRNAChoices:E,nonDisabledChoices:p,selection:t,query:l,alignmentKind:o,getDisabledOptionProps:a}),value:t,onSelect:function modifiedOnSelect(e){switch(e){case Y.SELECT_ALL:for(const e of p)n(e)
break
case Y.SELECT_ALL_DNA:for(const e of m)n(e)
break
case Y.SELECT_ALL_RNA:for(const e of E)n(e)
break
case Y.UNSELECT_ALL:case Y.UNSELECT_ALL_DNA:case Y.UNSELECT_ALL_RNA:for(const e of t)n(e)
break
default:n(e)}},renderChips:e=>i.createElement(i.Fragment,null,e.map((e=>(0,s.$P)(e,{size:y.TK.MINI,onRemove:()=>{n(e)}})))),scrollable:!0,query:l,onQueryChange:e=>{c(e.target.value)},renderOptionContent:function renderOptionContent(e){return Object.values(Y).includes(e.value)?i.createElement(de.Z,{className:e.className,dataTestAttrs:e.dataTestAttrs},e.name):(0,ce.xG)(e)}})}function MafftParametersOptions({parameters:e,dispatch:t}){const n=["maxIterations","retree","gapOpenPenalty","gapExtensionPenalty","adjustDirection"].filter((t=>{var n
return!(null===(n=l.c0[t].irrelevantStrategies)||void 0===n?void 0:n.includes(e.strategy))}))
return i.createElement(ProgramParamsSection,{currentParameters:e,parameterNames:n,parameterOptionValues:l.c0,defaultParameters:l.p2,updateParams:e=>{t({type:f.JS.UPDATE_MAFFT_PARAMETERS,parameters:e})}})}function ClustalOParametersOptions({parameters:e,dispatch:t}){return i.createElement(ProgramParamsSection,{currentParameters:e,parameterNames:["mbedGuideTree","mbedIteration","numCombinedIterations","maxGuidetreeIterations","maxHmmIterations"],parameterOptionValues:l.su,defaultParameters:l.C0,updateParams:e=>{t({type:f.JS.UPDATE_CLUSTALO_PARAMETERS,parameters:e})}})}function FolderSection({folderId:e,setFolderId:t}){return i.createElement(i.Fragment,null,i.createElement("div",{className:(0,a.iv)(Ee.text,Ee.basicVerticalMargin)},"Select destination folder."),i.createElement(X.Z,{enableRedesign:!0,showInventory:!0,value:e,onChange:e=>{t(e.target.value)},unsetOnFetchFail:!1}))}function CrossTickButton({onClick:e}){return i.createElement("div",{className:(0,a.iv)(Ee.clickable,Ee.crossIconContainer),onClick:e},i.createElement(w.Z,{className:(0,a.iv)(Ee.crossIcon),icon:"cross-thick"}))}function AddTemplateGroupDropdown({inputs:e,templateGroups:t,allowDuplicateTemplates:n,addGroup:r,onClose:o}){const[l,c]=(0,i.useState)(!1)
function getDisabledOptionProps(e){return e.type!==f.n$.BIOENTITY||e.canBeTemplate?!n&&t.some((t=>T()(t.template,e)))?{disabled:!0,disabledMessage:"Input already used as template."}:{}:{disabled:!0,disabledMessage:"Lacking edit permissions."}}const d=i.createElement(ae.Z,null,i.createElement(ie.Z,{optionDatas:e.map((e=>(0,s.rF)(e,getDisabledOptionProps))),onSelect:r,scrollable:!0}))
return i.createElement(ne.ZP,{closeOnInsideClick:!1,closeOnOutsideClick:!0,alwaysDropDown:!0,menu:d,isOpen:l,onToggle:e=>{e||o()
c(e)}},i.createElement("span",{className:S()((0,a.iv)(Ee.plusIcon,Ee.clickable,Ee.alignBottom)),...(0,j.Z)({component:"CreateSequenceAlignmentsModal",element:"AddTemplateGroupIcon"})},i.createElement(w.Z,{icon:"compose"})))}function TemplateAlignmentConfiguration({addGroup:e,removeGroup:t,onClose:n,allowMulti:r,addInput:o,removeInput:l,templateGroups:c,allowDuplicateTemplates:d,inputs:u,alignmentKind:p}){return i.createElement("div",{className:S()((0,a.iv)(Ee.colPaddingOffset,Ee.flex))},i.createElement("div",{className:S()((0,a.iv)(Ee.alignmentRows))},i.createElement("div",null,i.createElement(v.Z,{lg:3,md:3,sm:3,xs:3},i.createElement("div",null,i.createElement("span",{className:(0,a.iv)(Ee.text)},"Template(s)"),r&&i.createElement(AddTemplateGroupDropdown,{inputs:u,templateGroups:c,allowDuplicateTemplates:d,addGroup:e,onClose:n}))),i.createElement(v.Z,{lg:9,md:9,sm:9,xs:9},i.createElement("span",{className:(0,a.iv)(Ee.text)},"Non-template sequence(s)"))),c.map((({template:e,items:n},c)=>i.createElement("div",{key:c,className:S()((0,a.iv)(Ee.flex))},i.createElement(v.Z,{lg:3,md:3,sm:3,xs:3,className:S()((0,a.iv)(Ee.flex))},(0,s.$P)(e,{size:y.TK.SMALL,onRemove:void 0},Ee.inputChip)),i.createElement(v.Z,{lg:8,md:8,sm:8,xs:8},i.createElement(AlignmentInputSelector,{autofocus:!1,choiceValues:u,getDisabledOptionProps:t=>T()(t,e)?{disabled:!0,disabledMessage:"Cannot align sequence against itself."}:{},selection:n,onSelect:e=>{n.some((t=>T()(e,t)))?l(c,e):o(c,e)},alignmentKind:p})),i.createElement(v.Z,{lg:1,md:1,sm:1,xs:1,className:S()((0,a.iv)(Ee.flex))},r&&i.createElement(CrossTickButton,{onClick:()=>{t(c)}})))))))}function ConsensusAlignmentConfiguration({addGroup:e,removeGroup:t,allowMulti:n,disableRename:s,renameGroup:r,consensusGroups:o,inputs:c,addInput:d,removeInput:u}){return i.createElement("div",{className:S()((0,a.iv)(Ee.colPaddingOffset,Ee.flex))},i.createElement("div",{className:S()((0,a.iv)(Ee.alignmentRows))},i.createElement(v.Z,{lg:12,md:12,sm:12,xs:12},i.createElement("div",{className:(0,a.iv)(Ee.headerWrapper)},i.createElement("span",{className:(0,a.iv)(Ee.text)},"Group(s)"),n&&i.createElement("span",{onClick:()=>{e()},className:S()((0,a.iv)(Ee.plusIcon,Ee.clickable,Ee.alignBottom))},i.createElement(w.Z,{icon:"compose"})))),o.map((({name:e,items:o,nucleotideType:p},m)=>i.createElement("div",{className:(0,a.iv)(Ee.headerWrapper),key:m},i.createElement(v.Z,{lg:3,md:3,sm:3,xs:3},i.createElement(G.Z,{onChange:e=>{r(m,e.target.value)},value:e,placeholder:"Alignment name",label:"",labelStyle:x.Z.STYLES.HIDDEN,disabled:s})),i.createElement(v.Z,{lg:8,md:8,sm:8,xs:8},i.createElement(AlignmentInputSelector,{autofocus:!1,choiceValues:c,getDisabledOptionProps:e=>p&&e.nucleotideType!==p?{disabled:!0,disabledText:`Only one nucleotide type can be included in each consensus alignment. This is a ${p} alignment.`}:{},selection:o,onSelect:e=>{o.some((t=>T()(e,t)))?u(m,e):d(m,e)},alignmentKind:l.zf.CONSENSUS})),i.createElement(v.Z,{lg:1,md:1,sm:1,xs:1},n&&i.createElement(CrossTickButton,{onClick:()=>{t(m)}})))))))}const me={[l.IK.MAFFT]:{programDisplay:"MAFFT",programDescription:"Faster, less precise, can reverse sequences",programReferenceLink:i.createElement("a",{href:"http://mbe.oxfordjournals.org/content/30/4/772",target:"_blank",rel:"noopener noreferrer"},"MAFFT v7 (Katoh, Standley 2013)"),strategies:[{value:l.ob.AUTO,display:"Auto",description:"Pick a strategy automatically based on the count and size of inputs."},{value:l.ob.SIXMER,display:"6-mer distance",description:"Use 6-mer distance for constructing the guide tree."},{value:l.ob.LOCALPAIR,display:"Local pairwise",description:"Compute local pairwise alignments using Smith-Waterman for constructing the guide tree and iterative refinement."},{value:l.ob.GLOBALPAIR,display:"Global pairwise",description:"Compute global pairwise alignments using Needleman-Wunsch for constructing the guide tree and iterative refinement."}]},[l.IK.CLUSTALO]:{programDisplay:"Clustal Omega",programDescription:"Slower, more precise, cannot reverse sequences",programReferenceLink:i.createElement("a",{href:"http://dx.doi.org/10.1038/msb.2011.75",target:"_blank",rel:"noopener noreferrer"},"Clustal Omega (Sievers et al. 2011)"),strategies:[{value:l.IK.CLUSTALO,display:"Multiple (3+) sequence alignment",description:"Use seeded guide trees and HMM profile-profile techniques."}]}},Ee=a.mM.create({alignmentKindToggleInfoText:A.HI,text:A.Bk,referenceText:{...z.E0,marginBottom:"-4px"},fullWidthHorizontalRule:A.rz,param:{marginBottom:A.dn},alignmentDiagram:A.MF,basicVerticalMargin:A.Sf,colPaddingOffset:A.Yb,withoutButtonFocusStyling:A.f8,plusIcon:{...A.zE,marginLeft:"8px"},crossIcon:{color:U.TG},crossIconContainer:{...A.LD,alignSelf:"center"},clickable:A.LD,inputChip:{flex:0,alignSelf:"center"},headerWrapper:{display:"flex",alignItems:"center"},alignmentRows:{display:"flex",flexDirection:"column",flex:1,gap:"10px"},flex:{display:"flex"},alignBottom:{verticalAlign:"bottom"},autoReindexCheckbox:{display:"inline-flex"}}),ContigMessage=()=>i.createElement("div",null,"If you’d like to perform a contig alignment (shown below), we recommend selecting the MAFFT “local pairwise” algorithm."),he={[l.zf.PAIRWISE]:{text:"Pairwise Alignment - Make one alignment against the template for each non-template sequence.",supportingInfo:i.createElement("img",{className:(0,a.iv)(Ee.alignmentDiagram),src:(0,$.Z)("/static/img/pairwise_diagram.svg")}),action:{actionType:ee.J7.ACCORDION},bannerType:ee.ct.INFO,hideIcon:!0},[l.zf.MULTISEQUENCE]:{text:"Multisequence Alignment - The results will be attached as a single alignment on the template sequence.",supportingInfo:i.createElement(i.Fragment,null,i.createElement("img",{className:(0,a.iv)(Ee.alignmentDiagram),src:(0,$.Z)("/static/img/multisequence_diagram.svg")}),i.createElement(ContigMessage,null),i.createElement("img",{className:(0,a.iv)(Ee.alignmentDiagram),src:(0,$.Z)("/static/img/multisequence_contig_diagram.svg")})),action:{actionType:ee.J7.ACCORDION},bannerType:ee.ct.INFO,hideIcon:!0},[l.zf.CONSENSUS]:{text:"Consensus Alignment - A new sequence will be created with the consensus of all the selected sequences.",supportingInfo:i.createElement(i.Fragment,null,i.createElement("img",{className:(0,a.iv)(Ee.alignmentDiagram),src:(0,$.Z)("/static/img/consensus_diagram.svg")}),i.createElement(ContigMessage,null),i.createElement("img",{className:(0,a.iv)(Ee.alignmentDiagram),src:(0,$.Z)("/static/img/consensus_contig_diagram.svg")})),action:{actionType:ee.J7.ACCORDION},bannerType:ee.ct.INFO,hideIcon:!0}}
function AlignmentKindToggleGroup({disabled:e,selectedAlignmentKind:t,dispatch:n}){return i.createElement(oe.Z,{options:[{id:l.zf.PAIRWISE,buttonProps:{text:"Pairwise"},dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"alignmentKindToggle",key:l.zf.PAIRWISE}},{id:l.zf.MULTISEQUENCE,buttonProps:{text:"Multisequence"},dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"alignmentKindToggle",key:l.zf.MULTISEQUENCE}},{id:l.zf.CONSENSUS,buttonProps:{text:"Consensus"},dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"alignmentKindToggle",key:l.zf.CONSENSUS}}],selection:t,onChangeSelection:e=>{n({type:f.JS.SELECT_ALIGNMENT_KIND,value:e})},isFullWidth:!0,size:p.qE.MEDIUM,disabled:e})}function getAutoReindexCheckboxDisabledMessage(e,t,n){return e.isTemplateSequenceEditable?t===l.zf.MULTISEQUENCE&&(0,s.VP)(n[0].template)&&!n[0].template.useCurrentVersion?"Benchling cannot automatically reindex this alignment because the template sequence doesn't reflect the latest version.":null:"Auto-reindex is disabled because you do not have edit permissions for the template sequence."}function AutoReindexCheckbox({checked:e,onChange:t,disabledMessage:n}){return i.createElement(i.Fragment,null,i.createElement("div",{className:(0,a.iv)(Ee.autoReindexCheckbox)},i.createElement(te.ZP,{disabled:null==n,title:n},i.createElement(C.Z,{id:"alignment-auto-reindex",checked:e,label:"Automatically reindex alignment if needed.",onChange:t,disabled:null!=n})),i.createElement(te.ZP,{title:"If you check this box, Benchling will automatically reset the origin of the template sequence to better accommodate the corresponding non-template sequences."},i.createElement("div",null,i.createElement(w.Z,{icon:"info-circle",className:"u-mini-spacing-left"})))))}function DefineParametersPane({alignmentKind:e,program:t,dispatch:n,mafftParameters:r,clustalOParameters:c,pairwiseConfiguration:d,multisequenceConfiguration:u,consensusConfiguration:m,inputs:E,folderId:g,realignmentInfo:_,autoReindex:T}){const[I,A]=(0,i.useState)(!1),y=Boolean(_),C=[...E]
if(_){(0,s.VO)(_.sequenceAnalysisInfo.alignmentSetup)&&C.push(_.sequenceAnalysisInfo.alignmentSetup.template)
C.push(..._.sequenceAnalysisInfo.alignmentSetup.items)}const R=(0,h.UY)(C,"name"),{programDisplay:b,programReferenceLink:N,strategies:O}=me[t],L=t===l.IK.CLUSTALO?O[0].display:O.find((({value:e})=>e===r.strategy)).display
const P=!y&&(0,s.qw)(e,d,u,m).some((e=>(0,s.V_)(e)))
return i.createElement(i.Fragment,null,i.createElement(AlignmentKindToggleGroup,{disabled:y,selectedAlignmentKind:e,dispatch:n}),y&&i.createElement("p",{className:(0,a.iv)(Ee.alignmentKindToggleInfoText)},"Your realignment must be the same type as your original alignment."),i.createElement("div",{className:(0,a.iv)(Ee.basicVerticalMargin)},i.createElement(ee.ZP,{...he[e]})),i.createElement("hr",null),e===l.zf.PAIRWISE&&i.createElement(TemplateAlignmentConfiguration,{addGroup:e=>{n({type:f.JS.ADD_PAIRWISE_TEMPLATE,template:e})},removeGroup:e=>{n({type:f.JS.REMOVE_PAIRWISE_TEMPLATE,index:e})},onClose:()=>{n({type:f.JS.MAYBE_AUTOPOPULATE_TEMPLATE_GROUP})},allowMulti:!y,addInput:(e,t)=>{n({type:f.JS.ADD_PAIRWISE_INPUT,index:e,input:t})},removeInput:(e,t)=>{n({type:f.JS.REMOVE_PAIRWISE_INPUT,index:e,input:t})},templateGroups:d,allowDuplicateTemplates:!1,inputs:R,alignmentKind:e}),e===l.zf.MULTISEQUENCE&&i.createElement(TemplateAlignmentConfiguration,{addGroup:e=>{n({type:f.JS.ADD_MULTISEQUENCE_TEMPLATE,template:e})},removeGroup:e=>{n({type:f.JS.REMOVE_MULTISEQUENCE_TEMPLATE,index:e})},onClose:()=>{n({type:f.JS.MAYBE_AUTOPOPULATE_TEMPLATE_GROUP})},allowMulti:!y,addInput:(e,t)=>{n({type:f.JS.ADD_MULTISEQUENCE_INPUT,index:e,input:t})},removeInput:(e,t)=>{n({type:f.JS.REMOVE_MULTISEQUENCE_INPUT,index:e,input:t})},templateGroups:u,allowDuplicateTemplates:!0,inputs:R,alignmentKind:e}),e===l.zf.CONSENSUS&&i.createElement(ConsensusAlignmentConfiguration,{addGroup:()=>{n({type:f.JS.ADD_CONSENSUS_GROUP})},removeGroup:e=>{n({type:f.JS.REMOVE_CONSENSUS_GROUP,index:e})},allowMulti:!y,disableRename:y,renameGroup:(e,t)=>{n({type:f.JS.SET_CONSENSUS_GROUP_NAME,index:e,name:t})},consensusGroups:m,inputs:R,addInput:(e,t)=>{n({type:f.JS.ADD_CONSENSUS_INPUT,index:e,input:t})},removeInput:(e,t)=>{n({type:f.JS.REMOVE_CONSENSUS_INPUT,index:e,input:t})}}),P&&i.createElement(i.Fragment,null,i.createElement("hr",null),i.createElement(FolderSection,{folderId:g,setFolderId:e=>{n({type:f.JS.SET_FOLDER,folderId:e})}})),i.createElement("hr",null),i.createElement("div",{className:(0,a.iv)(Ee.text,Ee.basicVerticalMargin)},"Choose an alignment program."),y&&i.createElement(Q.Z,null,"The fields below are set to the values you chose for your most recent alignment. These values may not reflect the selections you made when you last performed this particular alignment."),i.createElement("div",{className:(0,a.iv)(Ee.basicVerticalMargin)},i.createElement("div",{className:S()("u-flex-display",(0,a.iv)(Ee.colPaddingOffset))},i.createElement(v.Z,{lg:7,md:7,sm:7,xs:7},i.createElement(q.ZP,{displayName:`${L} (${b})`,menu:i.createElement(V.ZP,{value:t},[l.IK.MAFFT,l.IK.CLUSTALO].map((e=>i.createElement(se.Z,{key:e},i.createElement(re.Z,null,`${me[e].programDisplay} - ${me[e].programDescription}`),me[e].strategies.map((e=>i.createElement(J.Z,{key:e.value,value:e.value,metadata:e.description,onSelect:()=>{n({type:f.JS.SELECT_PROGRAM_STRATEGY,value:e.value})},dataTestAttrs:{component:"AlignmentProgramOption",element:"root",key:e.value}},e.display))))))),dataTestAttrs:{component:"AlignmentProgramDropdown",element:"root"}})),i.createElement(v.Z,{lg:3},i.createElement(p.Co,{text:I?"Hide parameters":"Show parameters",className:(0,a.iv)(Ee.withoutButtonFocusStyling),buttonStyle:p.ZJ.TERTIARY_GRAY,size:p.qE.SMALL,onClick:()=>{A(!I)}})))),I&&function getProgramParamsSection(){return t===l.IK.MAFFT?i.createElement(MafftParametersOptions,{parameters:r,dispatch:n}):i.createElement(ClustalOParametersOptions,{parameters:c,dispatch:n})}(),i.createElement("div",{className:(0,a.iv)(Ee.referenceText,Ee.basicVerticalMargin)},"Alignments performed via ",N,"."),_&&!o.ZP.MOLBIO_ENABLE_PLASMID_ALIGNMENT_ROTATION&&i.createElement(AutoReindexCheckbox,{checked:T,onChange:e=>{n({type:f.JS.SET_AUTO_REINDEX,value:e.target.checked})},disabledMessage:getAutoReindexCheckboxDisabledMessage(_,e,u)}))}function getInitialState({initialInputs:e,initialState:t,realignmentInput:n}){if(t)return t
const a=e.filter((e=>e.type===f.n$.BIOENTITY&&e.canBeTemplate)),i=1===a.length?a:[],u={statusByStep:{[f.tH.ChooseInput]:E.cV.UNVISITED,[f.tH.DefineParameters]:E.cV.UNVISITED},currentStepKey:f.tH.ChooseInput,numFilesUploading:0,inputs:e,folderId:c.Z.get(c.O.INVENTORY),program:d.Z.get(l.hU.ALIGNMENT_PROGRAM),mafftParameters:d.Z.get(l.hU.MAFFT_PARAMETERS),clustalOParameters:d.Z.get(l.hU.CLUSTAL_O_PARAMETERS),alignmentKind:(p=null==n?void 0:n.sequenceAnalysisInfo,p&&!(0,s.VO)(p.alignmentSetup)?l.zf.CONSENSUS:l.zf.MULTISEQUENCE),pairwiseConfiguration:n?[]:i.map((e=>({template:e,items:[]}))),multisequenceConfiguration:null!=n&&(0,s.VO)(n.sequenceAnalysisInfo.alignmentSetup)?[n.sequenceAnalysisInfo.alignmentSetup]:i.map((e=>({template:e,items:[]}))),consensusConfiguration:n&&!(0,s.VO)(n.sequenceAnalysisInfo.alignmentSetup)?[n.sequenceAnalysisInfo.alignmentSetup]:(0,s.qU)(e),defineParametersPaneAccessed:!1,realignmentInfo:n,autoReindex:null!=n&&n.isTemplateSequenceEditable&&!o.ZP.MOLBIO_ENABLE_PLASMID_ALIGNMENT_ROTATION,hasAutopopulatedTemplateGroup:{multisequenceConfiguration:!1,pairwiseConfiguration:!1}}
var p;(0,r.hu)(null==u.realignmentInfo||[l.zf.MULTISEQUENCE,l.zf.CONSENSUS].includes(u.alignmentKind),"Pairwise alignments are not allowed for realignments.");(0,r.hu)(null==u.realignmentInfo||u.alignmentKind!==l.zf.MULTISEQUENCE||1===u.multisequenceConfiguration.length,"Realignments may only be performed for a single template at a time.")
return u}function CreateSequenceAlignmentsModal({onRequestClose:e,initialInputs:t,initialState:n,realignmentInput:r}){const[{program:o,alignmentKind:c,currentStepKey:d,inputs:h,folderId:g,mafftParameters:S,clustalOParameters:_,numFilesUploading:T,statusByStep:I,pairwiseConfiguration:A,multisequenceConfiguration:y,consensusConfiguration:C,realignmentInfo:R,autoReindex:b},N]=(0,i.useReducer)(f.ZP,{initialInputs:t,initialState:n,realignmentInput:r},getInitialState),O=Boolean(R)
let L=h.length
if(R){(0,s.VO)(R.sequenceAnalysisInfo.alignmentSetup)&&(L+=1)
L+=R.sequenceAnalysisInfo.alignmentSetup.items.length}const P=function getStepModalButtons(e,t,n,a,i,r,o,l,c,d,m){const E=(0,s.qw)(o,l,c,d),h=0===E.length||E.some((e=>!(0,s.J8)(e,Boolean(r),m)))
return e===f.tH.ChooseInput?[{text:"Cancel",cancel:!0},{text:"Next",submit:!0,style:p.ZJ.SECONDARY,onClick:()=>{a({type:f.JS.UPDATE_CURRENT_STEP,value:f.tH.DefineParameters})},disabled:t||!n,dataTestAttrs:{component:"CreateSequenceAlignmentsModal",key:u.Z.NEXT}}]:[{text:"Back",style:p.ZJ.TERTIARY_GRAY,onClick:()=>{a({type:f.JS.UPDATE_CURRENT_STEP,value:f.tH.ChooseInput})}},{text:m?"Realign":"Create Alignment",submit:!0,style:p.ZJ.PRIMARY,onClick:()=>{a({type:f.JS.PERFORM_ALIGNMENTS})
i()},disabled:h}]}(d,Boolean(T),L>1,N,e,g,c,A,y,C,O)
return i.createElement(m.ZP,{onRequestClose:e,title:O?c===l.zf.CONSENSUS?`Realign ${C[0].nucleotideType}`:"Realign DNA / RNA":"Create DNA / RNA alignment",large:!0,buttons:P,dataTestAttrs:{component:"CreateSequenceAlignmentsModal",element:"root"}},i.createElement("div",{className:(0,a.iv)(ge.stepNavMarginAdjustment)},i.createElement(E.ZP,{steps:[{key:f.tH.ChooseInput,title:"Choose input"},{key:f.tH.DefineParameters,title:"Define parameters"}],statusByStep:I,currentStepKey:d,onUpdateCurrentStep:e=>{N({type:f.JS.UPDATE_CURRENT_STEP,value:e})},disabled:T>0})),i.createElement(i.Fragment,null,d===f.tH.ChooseInput&&i.createElement(ChooseInputPane,{dispatch:N,inputs:h,sequenceAnalysisInfo:null==R?void 0:R.sequenceAnalysisInfo}),d===f.tH.DefineParameters&&i.createElement(DefineParametersPane,{dispatch:N,program:o,alignmentKind:c,mafftParameters:S,clustalOParameters:_,pairwiseConfiguration:A,multisequenceConfiguration:y,consensusConfiguration:C,inputs:h,folderId:g,realignmentInfo:R,autoReindex:b})))}const ge=a.mM.create({stepNavMarginAdjustment:{marginBottom:"13px"}})},476235:(e,t,n)=>{n.d(t,{$P:()=>getInputChip,J8:()=>isValidSetup,VO:()=>isTemplateSetup,VP:()=>isBioentityInput,V_:()=>requiresFolderId,ad:()=>getInputItemKey,qU:()=>buildDefaultConsensusConfiguration,qw:()=>getSelectedSetups,rF:()=>inputToOptionData})
var a=n(692013),i=n(989526),s=n(882321),r=n(280539),o=n(778223),l=n(62955)
function getInputItemKey(e){switch(e.type){case l.n$.TEXT:case l.n$.BIOENTITY:return e.id
case l.n$.FILE:return e.sequenceDictURL
default:return""}}const isTemplateSetup=e=>"template"in e,isBioentityInput=e=>e.type===l.n$.BIOENTITY
function getInputChip(e,t,n){const s={className:(0,a.iv)(c.basicChip,n),...t}
return e.type===l.n$.BIOENTITY?i.createElement(r.default,{...s,id:e.id,key:getInputItemKey(e)}):i.createElement("span",{title:e.name,key:getInputItemKey(e)},i.createElement(o.ZP,{...s,text:e.name,icon:(0,l.Gb)(e)}))}function inputToOptionData(e,t){return{name:e.name,value:e,icon:(0,l.Gb)(e),dataTestAttrs:{component:"AlignmentInputOption",element:"root"},...t(e)}}function getSelectedSetups(e,t,n,a){switch(e){case s.zf.PAIRWISE:return t
case s.zf.MULTISEQUENCE:return n
case s.zf.CONSENSUS:return a
default:throw new Error(`Unexpected alignment kind: ${e}`)}}function requiresFolderId(e){return!isTemplateSetup(e)||isTemplateSetup(e)&&!isBioentityInput(e.template)}function isValidSetup(e,t,n){const a=isTemplateSetup(e)?1:2
let i=!0
isTemplateSetup(e)||(i=e.items.every((t=>t.nucleotideType===e.nucleotideType)))
return e.items.length>=a&&(n||!requiresFolderId(e)||t)&&i}function buildDefaultConsensusConfiguration(e){if(0===e.length)return[]
const t=new Set(e.map((e=>e.nucleotideType)))
return Array.from(t).map((t=>({name:`Untitled ${t} Consensus`,items:e.filter((e=>e.nucleotideType===t)),nucleotideType:t})))}const c=a.mM.create({basicChip:{display:"inline-block",maxWidth:"25ch",whiteSpace:"nowrap",margin:"4px"}})},456670:(e,t,n)=>{n.d(t,{Bk:()=>l,HI:()=>c,LD:()=>g,MF:()=>p,NM:()=>d,QI:()=>o,Sf:()=>E,Yb:()=>u,dn:()=>s,f8:()=>h,rz:()=>m,zE:()=>r})
var a=n(129270),i=n(271359)
const s="17px",r={color:i.t0},o={color:i.pp},l={...a.cf,...o},c={...a.XI,...o},d={...c,fontWeight:a.KB},u={margin:"0px -15px"},p={maxWidth:"100%"},m={margin:`${s} -16px`},E={margin:`${s} 0px`},h={":focus":{textDecoration:"none"}},g={":hover":{cursor:"pointer"}}},62955:(e,t,n)=>{n.d(t,{JS:()=>i,n$:()=>s,tH:()=>a,ZP:()=>createSequenceAlignmentModalReducer,Gb:()=>getIconForInput})
var a,i,s,r=n(767807),o=n.n(r),l=n(615439),c=n.n(l),d=n(476235),u=n(468943),p=n(232606),m=n(955836),E=n(882321),h=n(390462),g=n(432128),S=n(124640),_=n(97737),T=n(536105),I=n.n(T),A=n(605998),f=n(348920),y=n(675649),C=n(292132),R=n(459830),b=n(294120),N=n(699418),O=n(54503),L=n(392113),P=n(782649),D=n(826478),v=n(974913),M=n(886911),B=n(166459),U=n(62315),F=n(502633),w=n(953403),k=n(260929),x=n(771398),Z=n(8747),G=n(804921)
function convertAlignmentInputToAlignmentInputItemPayload(e,t){const n={identifier:(0,d.ad)(e),identifierType:e.type,nucleotideType:e.nucleotideType}
e.type===s.FILE&&(n.originalFileURL=e.originalFileURL)
t&&(0,d.VP)(e)&&(n.useCurrentVersion=e.useCurrentVersion)
return n}async function uploadAndParseFile(e){var t,n,a
let i
try{i=await(0,w.ws)(e)}catch(i){i&&(i.userMessage=null!==(a=null!==(t=i.userMessage)&&void 0!==t?t:null===(n=i.responseJSON)||void 0===n?void 0:n.userMessage)&&void 0!==a?a:`Failed to upload file "${e.name}".`)
v.ZP.notifyError(i,{duration:v.a9});(0,x.bE)(i)&&(0,k.vU)(`Server [${i.status}]: ${i.responseText}`,{fingerprint:["benchling","molbio","alignment-client-upload-failure",i.status.toString()]})
return}const s=await(0,x.s0)({url:"/1/api/parse-sequence-file",data:{s3FileUrl:i}})
if(!function isFileParseFailure(e){return Boolean(e.error)}(s))return{sequences:s.sequences,originalFileUrl:i}
v.ZP.error(`Failed to parse file "${e.name}": ${s.error}.`,{duration:v.a9})}function notifyAlignmentSuccess(e,t){let n,a
if(1===e.length){const t=e[0],i={sequenceId:t.sequence_id,alignmentId:t.apiId}
a="Alignment completed successfully."
n={actionText:"Open",onActionClick:()=>{(0,A.open)(i)}}}else{a="Alignments completed successfully."
n={actionText:"View",onActionClick:()=>{const e={...(0,O.v)(),sorts:[{key:U.bo.SORT_CREATED_AT_KEY,reverse:!0}],filters:[{...(0,U.QW)(U.Vm.TYPES),value:[R.SEQUENCE_ANALYSIS]},{...(0,U.QW)(U.Vm.CREATED_AT),value:{fromDatetime:I()().format("YYYY-MM-DD"),toDatetime:null}}]};(0,B.getStore)().dispatch(L.openListing(b.$0.SEARCH,e))}}}(0,P.M)({id:t,message:a,duration:30,type:D.pC.SUCCESS,actions:[n]})}function onAlignmentFailure(e,t,n){var a
const i=null!==(a=e&&v.ZP.getFriendlyError(e))&&void 0!==a?a:"Sorry, an unexpected error occurred during the alignment operation.";(0,P.M)({id:n,message:i,type:D.pC.DANGER,actions:[{actionText:"Adjust input and retry",onActionClick:()=>{(0,u.j)(t.realignmentInfo?"realignment":"alignment","clickRetry");(0,F.Z)(G.Z,{initialInputs:[],initialState:t})}}]})}function getFolderIdPayload(e){if((0,d.qw)(e.alignmentKind,e.pairwiseConfiguration,e.multisequenceConfiguration,e.consensusConfiguration).some((e=>(0,d.V_)(e)))){(0,p.Gp)(null!=e.folderId,"Expected a folderId for current alignment setup.")
return e.folderId}}function getProgramPayload(e){let t
t=e.program===E.IK.MAFFT?{algorithmType:e.program,parameters:e.mafftParameters}:{algorithmType:e.program,parameters:e.clustalOParameters}
return t}function getSequenceIdentifierToContext(e){const t=[]
e.alignmentKind===E.zf.MULTISEQUENCE?e.multisequenceConfiguration.forEach((({template:e,items:n})=>{t.push(e,...n)})):e.alignmentKind===E.zf.PAIRWISE?e.pairwiseConfiguration.forEach((({template:e,items:n})=>{t.push(e,...n)})):e.consensusConfiguration.forEach((({items:e})=>{t.push(...e)}))
return t.filter((e=>e.type===s.TEXT)).reduce(((e,t)=>{const n={name:t.name,bases:t.residues}
void 0!==t.alignmentRowNumber&&(n.alignmentRowNumber=t.alignmentRowNumber)
e[t.id]=n
return e}),{})}function getAlignmentInputPayloads(e){const t=[],n=Boolean(e.realignmentInfo)
e.alignmentKind===E.zf.MULTISEQUENCE?e.multisequenceConfiguration.forEach((({template:e,items:a})=>t.push({alignmentType:E.Fl.TEMPLATE,template:convertAlignmentInputToAlignmentInputItemPayload(e,n),items:a.map((e=>convertAlignmentInputToAlignmentInputItemPayload(e,n)))}))):e.alignmentKind===E.zf.PAIRWISE?e.pairwiseConfiguration.forEach((({template:e,items:a})=>{a.forEach((a=>{t.push({alignmentType:E.Fl.TEMPLATE,template:convertAlignmentInputToAlignmentInputItemPayload(e,n),items:[convertAlignmentInputToAlignmentInputItemPayload(a,n)]})}))})):e.consensusConfiguration.forEach((({name:e,items:a})=>t.push({alignmentType:E.Fl.CONSENSUS,name:e,items:a.map((e=>convertAlignmentInputToAlignmentInputItemPayload(e,n)))})))
return t}function withPendingStatus(e,t,n){var a,i,s
return(null===(s=null===(i=null===(a=N.ZP.get().get(t))||void 0===a?void 0:a.get("toolbar"))||void 0===i?void 0:i.get("alignmentPanelState"))||void 0===s?void 0:s.withAlignmentPending(e,n))||e}async function performBulkAlignment(e){const t=(0,M.BL)("alignmentCreation",{enabled:!1},void 0,{program:e.program,alignmentKind:e.alignmentKind});(0,M.hY)(t)
const n={program:getProgramPayload(e),alignments:getAlignmentInputPayloads(e),folderId:getFolderIdPayload(e),sequenceIdentifierToContext:getSequenceIdentifierToContext(e)},a=n.alignments.length,i=(0,P.M)({message:`Performing ${a} ${(0,y._6)(a,"alignment")}.`,type:D.pC.INFO,duration:v.a9}),r={count:a,kind:e.alignmentKind}
try{let a=Z.s0({url:"/1/api/bulk-align",data:n},1e3*f.ZP.MOLBIO_ALIGNMENT_TIMEOUT)
n.alignments.filter((e=>e.alignmentType===E.Fl.TEMPLATE)).filter((({template:e})=>e.identifierType===s.BIOENTITY)).forEach((({template:t,items:n})=>{a=withPendingStatus(a,t.identifier,{algorithm:e.program,numSequences:n.length+1})}))
const{bulkAlignmentSummaries:o}=await a;(0,u.j)("alignment","success",r)
!function onBulkAlignmentSuccess(e,t){const n=N.ZP.get()
e.forEach((e=>{const t=n.get(e.sequence_id)
t&&t.get("sequence").get("analyses").add(new C.sp(e,{parse:!1}))}))
notifyAlignmentSuccess(e,t)}(o,i)}catch(t){(0,u.j)("alignment","failure",r)
if(!(0,v.Ew)(t))throw t
onAlignmentFailure(t,e,i)}finally{(0,M.Eb)(t);(0,M.sT)(t)}}async function performRealignment(e){const t=(0,M.BL)("realignment",{enabled:!1},void 0,{program:e.program,alignmentKind:e.alignmentKind});(0,M.hY)(t)
const n=getAlignmentInputPayloads(e)
if(1!==n.length)throw new Error("Attempted realignment for multiple alignments.")
const a={program:getProgramPayload(e),alignment:n[0],sequenceAnalysisId:e.realignmentInfo.sequenceAnalysisInfo.sequenceAnalysisId,sequenceIdentifierToContext:getSequenceIdentifierToContext(e),autoReindex:e.autoReindex},i={kind:e.alignmentKind},s=(0,P.M)({message:"Performing realignment.",type:D.pC.INFO,duration:v.a9})
try{let n=Z.s0({url:"/1/api/realignment",data:a},1e3*f.ZP.MOLBIO_ALIGNMENT_TIMEOUT)
const{items:r}=a.alignment
n=withPendingStatus(n,e.realignmentInfo.sequenceAnalysisInfo.sequenceId,{algorithm:e.program,numSequences:r.length+1})
const{sequence:o,analysis:l}=await n
!function onRealignmentSuccess(e,t,n){const a=N.ZP.get().get(e)
if(a){const e=a.get("sequence")
e.updateVersions({switchToLast:!0})
const n=e.get("analyses").get(t.id)
if(null!=n){n.stopAllListeners()
n.set(n.parse(t))
n.registerListeners()}const i=a.findAlignmentTab(n)
if(i){i.loadAnalysis(n)
f.ZP.MOLBIO_ENABLE_ALIGNMENT_UNDO&&n&&i.replaceHistory([{analysisState:n.toHistoryState(),selectionStart:0,rowIndex:0}])}}notifyAlignmentSuccess([{sequence_id:e,apiId:t.apiId}],n)}(o.id,l,s);(0,u.j)("realignment","success",i)}catch(t){(0,u.j)("realignment","failure",i)
if(!(0,v.Ew)(t))throw t
onAlignmentFailure(t,e,s)}finally{(0,M.Eb)(t);(0,M.sT)(t)}}!function(e){e.ChooseInput="ChooseInput"
e.DefineParameters="DefineParameters"}(a||(a={}))
!function(e){e.UPDATE_CURRENT_STEP="UPDATE_CURRENT_STEP"
e.UPLOAD_FILES="UPLOAD_FILES"
e.UPLOAD_FILE_SUCCESS="UPLOAD_FILE_SUCCESS"
e.UPLOAD_FILE_FAILURE="UPLOAD_FILE_FAILURE"
e.SELECT_PROGRAM_STRATEGY="SELECT_PROGRAM_STRATEGY"
e.SELECT_ALIGNMENT_KIND="SELECT_ALIGNMENT_KIND"
e.ADD_INPUT="ADD_INPUT"
e.REMOVE_INPUT="REMOVE_INPUT"
e.UPDATE_MAFFT_PARAMETERS="UPDATE_MAFFT_PARAMETERS"
e.UPDATE_CLUSTALO_PARAMETERS="UPDATE_CLUSTALO_PARAMETERS"
e.ADD_PAIRWISE_TEMPLATE="ADD_PAIRWISE_TEMPLATE"
e.ADD_MULTISEQUENCE_TEMPLATE="ADD_MULTISEQUENCE_TEMPLATE"
e.ADD_CONSENSUS_GROUP="ADD_CONSENSUS_GROUP"
e.REMOVE_PAIRWISE_TEMPLATE="REMOVE_PAIRWISE_TEMPLATE"
e.REMOVE_MULTISEQUENCE_TEMPLATE="REMOVE_MULTISEQUENCE_TEMPLATE"
e.REMOVE_CONSENSUS_GROUP="REMOVE_CONSENSUS_GROUP"
e.ADD_PAIRWISE_INPUT="ADD_PAIRWISE_INPUT"
e.REMOVE_PAIRWISE_INPUT="REMOVE_PAIRWISE_INPUT"
e.ADD_MULTISEQUENCE_INPUT="ADD_MULTISEQUENCE_INPUT"
e.REMOVE_MULTISEQUENCE_INPUT="REMOVE_MULTISEQUENCE_INPUT"
e.ADD_CONSENSUS_INPUT="ADD_CONSENSUS_INPUT"
e.REMOVE_CONSENSUS_INPUT="REMOVE_CONSENSUS_INPUT"
e.SET_CONSENSUS_GROUP_NAME="SET_CONSENSUS_GROUP_NAME "
e.SET_FOLDER="SET_FOLDER"
e.PERFORM_ALIGNMENTS="PERFORM_ALIGNMENTS"
e.SET_USE_CURRENT_VERSION="SET_USE_CURRENT_VERSION"
e.SET_AUTO_REINDEX="SET_AUTO_REINDEX"
e.MAYBE_AUTOPOPULATE_TEMPLATE_GROUP="MAYBE_AUTOPOPULATE_TEMPLATE_GROUP"}(i||(i={}))
!function(e){e.FILE="FILE"
e.TEXT="TEXT"
e.BIOENTITY="BIOENTITY"}(s||(s={}))
function getIconForInput(e){return e.type===s.FILE?"docs":e.nucleotideType===m.Wy.DNA?S.m.Sequence:S.m.RNASequence}function createSequenceAlignmentModalReducer(e,t){var n
const r=(null===(n=e.realignmentInfo)||void 0===n?void 0:n.sequenceAnalysisInfo)?"realignment":"alignment"
switch(t.type){case i.UPDATE_CURRENT_STEP:(0,u.j)(r,"changeStep",{step:t.value})
return o()(e,{currentStepKey:{$set:t.value},statusByStep:{[a.ChooseInput]:{$set:t.value===a.DefineParameters?_.cV.DONE:_.cV.UNVISITED}},defineParametersPaneAccessed:{$set:!0}})
case i.UPLOAD_FILES:!async function uploadAndParseFiles(e,t){const n=t.length
if(!n)return
let a=0,r=0
const o=n>1?`Uploading ${n} files`:`Uploading ${t[0].name}`,l=(0,P.M)({message:o,type:D.pC.INFO,duration:v.a9}),c=t.map((async(t,c)=>{const d=await uploadAndParseFile(t)
a++;(0,P.M)({id:l,message:o,progress:a/n*100})
if(d){r++
for(const{name:t,url:n}of d.sequences)e({type:i.ADD_INPUT,input:{type:s.FILE,name:t,originalFileURL:d.originalFileUrl,sequenceDictURL:n,nucleotideType:m.Wy.DNA}})
e({type:i.UPLOAD_FILE_SUCCESS})}else e({type:i.UPLOAD_FILE_FAILURE})}))
await Promise.allSettled(c);(0,P.M)({id:l,message:0===r?"All uploads failed":`Successfully uploaded ${r} of ${n}`,type:0===r?D.pC.DANGER:D.pC.SUCCESS})}(t.dispatch,t.files)
return o()(e,{numFilesUploading:e=>e+t.files.length})
case i.UPLOAD_FILE_SUCCESS:case i.UPLOAD_FILE_FAILURE:return o()(e,{numFilesUploading:e=>e-1})
case i.SELECT_PROGRAM_STRATEGY:if(t.value===E.IK.CLUSTALO){(0,u.j)(r,"changeAlignmentProgram",{program:E.IK.CLUSTALO})
g.Z.set(E.hU.ALIGNMENT_PROGRAM,E.IK.CLUSTALO)
return o()(e,{program:{$set:E.IK.CLUSTALO}})}{(0,u.j)(r,"changeAlignmentProgram",{program:E.IK.MAFFT})
const n=o()(e,{program:{$set:E.IK.MAFFT},mafftParameters:{$merge:{strategy:t.value}}})
g.Z.set(E.hU.MAFFT_PARAMETERS,n.mafftParameters)
g.Z.set(E.hU.ALIGNMENT_PROGRAM,E.IK.MAFFT)
return n}case i.SELECT_ALIGNMENT_KIND:(0,u.j)(r,"changeAlignmentKind",{kind:t.value});(0,p.hu)(null==e.realignmentInfo||[E.zf.MULTISEQUENCE,E.zf.CONSENSUS].includes(t.value),"Pairwise alignments are not allowed for realignments.")
return o()(e,{alignmentKind:{$set:t.value}})
case i.ADD_INPUT:{(0,u.j)(r,"addInput",{type:t.input.type})
const n={inputs:{$push:[t.input]}},a={0:{items:{$push:[t.input]}}}
1===e.pairwiseConfiguration.length&&(n.pairwiseConfiguration=a)
1===e.multisequenceConfiguration.length&&(n.multisequenceConfiguration=a)
null!=e.realignmentInfo&&e.alignmentKind===E.zf.CONSENSUS&&1===e.consensusConfiguration.length&&(n.consensusConfiguration=a)
null!=e.realignmentInfo||e.defineParametersPaneAccessed||(n.consensusConfiguration={$set:(0,d.qU)([...e.inputs,t.input])})
return o()(e,n)}case i.REMOVE_INPUT:(0,u.j)(r,"removeInput",{type:t.input.type})
return function removeInput(e,t){const removeInputItem=e=>({...e,items:e.items.filter((e=>!c()(e,t)))})
return o()(e,{inputs:e=>e.filter((e=>!c()(e,t))),multisequenceConfiguration:e=>e.filter((({template:e})=>!c()(e,t))).map((e=>removeInputItem(e))),pairwiseConfiguration:e=>e.filter((({template:e})=>!c()(e,t))).map((e=>removeInputItem(e))),consensusConfiguration:e=>e.map((e=>removeInputItem(e))),realignmentInfo:e=>e?{isTemplateSequenceEditable:e.isTemplateSequenceEditable,sequenceAnalysisInfo:{...e.sequenceAnalysisInfo,alignmentSetup:removeInputItem(e.sequenceAnalysisInfo.alignmentSetup)}}:void 0})}(e,t.input)
case i.UPDATE_MAFFT_PARAMETERS:{(0,u.j)(r,"changeAlignmentParameters")
const n=o()(e,{mafftParameters:{$merge:t.parameters}})
g.Z.set(E.hU.MAFFT_PARAMETERS,n.mafftParameters)
return n}case i.UPDATE_CLUSTALO_PARAMETERS:{(0,u.j)(r,"changeAlignmentParameters")
const n=o()(e,{clustalOParameters:{$merge:t.parameters}})
g.Z.set(E.hU.CLUSTAL_O_PARAMETERS,n.clustalOParameters)
return n}case i.ADD_PAIRWISE_TEMPLATE:(0,u.j)(r,"addGroup",{kind:E.zf.PAIRWISE})
return o()(e,{pairwiseConfiguration:{$push:[{template:t.template,items:[]}]}})
case i.ADD_MULTISEQUENCE_TEMPLATE:(0,u.j)(r,"addGroup",{kind:E.zf.MULTISEQUENCE});(0,p.hu)(null==e.realignmentInfo,"Realignments may only be performed for a single template at a time.")
return o()(e,{multisequenceConfiguration:{$push:[{template:t.template,items:[]}]}})
case i.ADD_CONSENSUS_GROUP:(0,u.j)(r,"addGroup",{kind:E.zf.CONSENSUS});(0,p.hu)(null==e.realignmentInfo,"Realignments may only be performed for a single template at a time.")
return o()(e,{consensusConfiguration:{$push:[{name:"Untitled Consensus",items:[]}]}})
case i.REMOVE_PAIRWISE_TEMPLATE:(0,u.j)(r,"removeGroup",{kind:E.zf.PAIRWISE})
return o()(e,{pairwiseConfiguration:e=>e.filter(((e,n)=>n!==t.index))})
case i.REMOVE_MULTISEQUENCE_TEMPLATE:(0,u.j)(r,"removeGroup",{kind:E.zf.MULTISEQUENCE});(0,p.hu)(null==e.realignmentInfo,"Realignments may only be performed for a single template at a time.")
return o()(e,{multisequenceConfiguration:e=>e.filter(((e,n)=>n!==t.index))})
case i.REMOVE_CONSENSUS_GROUP:(0,u.j)(r,"removeGroup",{kind:E.zf.CONSENSUS});(0,p.hu)(null==e.realignmentInfo,"Realignments may only be performed for a single template at a time.")
return o()(e,{consensusConfiguration:e=>e.filter(((e,n)=>n!==t.index))})
case i.ADD_PAIRWISE_INPUT:return o()(e,{pairwiseConfiguration:{[t.index]:{items:{$push:[t.input]}}}})
case i.REMOVE_PAIRWISE_INPUT:return o()(e,{pairwiseConfiguration:{[t.index]:{items:{$apply:e=>e.filter((e=>!c()(e,t.input)))}}}})
case i.ADD_MULTISEQUENCE_INPUT:return o()(e,{multisequenceConfiguration:{[t.index]:{items:{$push:[t.input]}}}})
case i.REMOVE_MULTISEQUENCE_INPUT:return o()(e,{multisequenceConfiguration:{[t.index]:{items:{$apply:e=>e.filter((e=>!c()(e,t.input)))}}}})
case i.ADD_CONSENSUS_INPUT:return o()(e,{consensusConfiguration:{[t.index]:{items:{$push:[t.input]},nucleotideType:{$set:t.input.nucleotideType}}}})
case i.REMOVE_CONSENSUS_INPUT:return o()(e,{consensusConfiguration:{[t.index]:{items:{$apply:e=>e.filter((e=>!c()(e,t.input)))}}}})
case i.SET_CONSENSUS_GROUP_NAME:return o()(e,{consensusConfiguration:{[t.index]:{name:{$set:t.name}}}})
case i.SET_FOLDER:(0,u.j)(r,"selectFolder")
h.Z.set(h.O.INVENTORY,t.folderId)
return o()(e,{folderId:{$set:t.folderId}})
case i.PERFORM_ALIGNMENTS:(0,u.j)(r,"clickPerformAlignment")
e.realignmentInfo?performRealignment(e):performBulkAlignment(e)
return e
case i.SET_USE_CURRENT_VERSION:(0,u.j)(r,"setUseCurrentVersion",{value:t.value})
return function setUseCurrentVersion(e,t,n){const setUseCurrentVersionForInputs=e=>e.map((e=>c()(e,t)?{...e,useCurrentVersion:n}:e)),setUseCurrentVersionForSetup=e=>(0,d.VO)(e)?{...e,template:(0,d.VP)(e.template)&&c()(e.template,t)?{...e.template,useCurrentVersion:n}:e.template,items:setUseCurrentVersionForInputs(e.items)}:{...e,items:setUseCurrentVersionForInputs(e.items)}
return o()(e,{autoReindex:()=>!!e.realignmentInfo&&e.alignmentKind===E.zf.MULTISEQUENCE&&(0,d.VP)(e.multisequenceConfiguration[0].template)&&c()(e.multisequenceConfiguration[0].template,t)&&n,inputs:e=>setUseCurrentVersionForInputs(e),multisequenceConfiguration:e=>e.map((e=>setUseCurrentVersionForSetup(e))),pairwiseConfiguration:e=>e.map((e=>setUseCurrentVersionForSetup(e))),consensusConfiguration:e=>e.map((e=>setUseCurrentVersionForSetup(e))),realignmentInfo:e=>e?{...e,sequenceAnalysisInfo:{...e.sequenceAnalysisInfo,alignmentSetup:setUseCurrentVersionForSetup(e.sequenceAnalysisInfo.alignmentSetup)}}:void 0})}(e,t.input,t.value)
case i.SET_AUTO_REINDEX:(0,u.j)(r,"setAutoReindex",{value:t.value})
return o()(e,{autoReindex:{$set:t.value}})
case i.MAYBE_AUTOPOPULATE_TEMPLATE_GROUP:{let t
if(e.alignmentKind===E.zf.MULTISEQUENCE)t="multisequenceConfiguration"
else{if(e.alignmentKind!==E.zf.PAIRWISE)return e
t="pairwiseConfiguration"}return e.hasAutopopulatedTemplateGroup[t]||1!==e[t].length||0!==e[t][0].items.length?e:o()(e,{[t]:{0:{items:{$push:e.inputs.filter((n=>n!==e[t][0].template))}}},hasAutopopulatedTemplateGroup:{[t]:{$set:!0}}})}default:return e}}},267560:(e,t,n)=>{n.d(t,{Z:()=>FindPrimersResultsCollection})
var a=n(440281),i=n.n(a),s=n(250965),r=n.n(s),o=n(531041),l=n(407161),c=n(8747)
class FindPrimersResultsCollection extends i().Collection{static initClass(){this.prototype.model=l.Hn}url(){return`/1/api/sequences/${this.sequence_id}/find-primers`}initialize(e,{sequence_id:t}){this.sequence_id=t}parse(e){return e.results}fetch(e){const t=o.default.keys(e)
1===t.length&&null!=e.data||console.warn(`FindPrimersResults.fetch only supports data, got ${t}.`)
const n=r().Deferred()
c.ty({url:this.url(),data:e.data}).fail((e=>n.reject(e))).done((e=>{this.set(this.parse(e),{silent:!0})
this.trigger("sync",this)
return n.resolve(e)}))
return n.promise()}}FindPrimersResultsCollection.initClass()},630981:(e,t,n)=>{n.d(t,{A:()=>FindPrimersTabState})
var a=n(267560),i=n(955836),s=n(407161),r=n(650858),o=n(390462),l=n(921554),c=n(766455),d=n(432128)
const u={title:"Find Binding Sites",highlightMatches:!0,findType:1,selectedSaveLibrary:null,selectedLibraries:[],searchName:"",searchBases:"",primerName:"",showResults:!1,color:l.fT,minBaseIndex:0,maxBaseIndex:0,sortByText:"Location",nucleotideType:i.Wy.DNA}
class FindPrimersTabState extends c.X4{initialize(){this.on("change:findType",(()=>{this.removePrimers()}))}static insert(e,t,n){const i=new s.EV
let{searchName:r,searchBases:o,nucleotideType:l}=u
const c=new s.EV
if(null!=n){r=n.name()
o=n.bases()
l=n.nucleotideType()
i.add(n)}const d=new FindPrimersTabState({...t,sequence:e,results:new a.Z([],{sequence_id:e.id}),searchExisting:i,searchExistingBases:c,searchName:r,searchBases:o,nucleotideType:l})
e.fileState().buffers().addTab(d)}defaults(){const e={minMatchingBases:d.Z.get(r.VF.MIN_MATCHING_BASES),minMeltingTemp:d.Z.get(r.VF.MIN_MELTING_TEMP),maxMeltingTemp:d.Z.get(r.VF.MAX_MELTING_TEMP),maxMismatches:d.Z.get(r.VF.MAX_MISMATCHES),maxTotalMismatches:d.Z.get(r.VF.MAX_TOTAL_MISMATCHES),exactMatch:d.Z.get(r.VF.EXACT_MATCH),uniqueMatch:d.Z.get(r.VF.UNIQUE_MATCH)}
let t=o.Z.getList(o.O.FIND_OLIGO)
if(!t){const e=o.Z.get(o.O.OLIGO)
t=null!=e?[e]:[]}return{...super.defaults(),...u,...e,selectedLibraries:t}}close(){this.removePrimers()
super.close()}removePrimers(){const e=this.get("sequence").sequencePrimers(),t=this.get("results").map((e=>e.cid)),n=e.filter((e=>t.includes(e.get("_primer").cid)))
for(const e of n)e.destroy()}getNewPrimers(){const e=this.get("sequence").get("_sequence").sequencePrimers(),t=this.get("results").map((e=>e.cid))
return e.filter((e=>t.includes(e.cid)))}prepareSelectedLibrariesForFind(){return this.get("selectedLibraries").filter((e=>Boolean(e)))}getMisprimingState(){return{minMatchingBases:this.get("minMatchingBases"),maxMismatches:this.get("maxMismatches"),maxTotalMismatches:this.get("maxTotalMismatches"),minMeltingTemp:this.get("minMeltingTemp"),maxMeltingTemp:this.get("maxMeltingTemp"),exactMatch:this.get("exactMatch"),uniqueMatch:this.get("uniqueMatch")}}}},282614:(e,t,n)=>{n.d(t,{i:()=>i,r:()=>a})
var a,i
!function(e){e.NUMBER="int"
e.FLOAT="float"
e.START_INDEX="start_index"
e.END_INDEX="end_index"
e.INTERVAL_LIST="intervals"
e.INDEX_LIST="int_list"
e.BOOL="booleanint"
e.TEXT="text"}(a||(a={}))
!function(e){e.PCR="pcr"
e.QPCR_DYES="qpcr-dyes"
e.QPCR_PROBE="qpcr-probe"
e.SEQUENCING="sequencing"}(i||(i={}))},720100:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(282614)
const i={PICK_INTERNAL:{label:"PRIMER_PICK_INTERNAL_OLIGO",type:a.r.BOOL,tasks:[{task:a.i.QPCR_PROBE,default:"true"}],default:null},TARGET_START:{label:"region-start",placeholder:"Start",type:a.r.START_INDEX,default:null},TARGET_END:{label:"region-end",placeholder:"End",type:a.r.END_INDEX,default:null},INCLUDED_START:{label:"SEQUENCE_START_INCLUDED_REGION",placeholder:"Start",type:a.r.START_INDEX,default:null},INCLUDED_END:{label:"SEQUENCE_END_INCLUDED_REGION",placeholder:"End",type:a.r.END_INDEX,default:null},EXCLUDED_REGION:{label:"SEQUENCE_EXCLUDED_REGION",placeholder:"e.g. 1-200,175-300",type:a.r.INTERVAL_LIST,default:null},EXCLUDED_PROBE_REGION:{label:"SEQUENCE_INTERNAL_EXCLUDED_REGION",placeholder:"e.g. 1-200,175-300",type:a.r.INTERVAL_LIST,tasks:[{task:a.i.QPCR_PROBE,default:null}],default:null},GC_MIN:{label:"PRIMER_MIN_GC",default:35,type:a.r.FLOAT},GC_OPT:{label:"PRIMER_OPT_GC",default:50,type:a.r.FLOAT},GC_MAX:{label:"PRIMER_MAX_GC",default:65,type:a.r.FLOAT},TM_MIN:{label:"PRIMER_MIN_TM",default:55,type:a.r.FLOAT},TM_OPT:{label:"PRIMER_OPT_TM",default:62,type:a.r.FLOAT},TM_MAX:{label:"PRIMER_MAX_TM",default:65,type:a.r.FLOAT},SIZE_MIN:{label:"PRIMER_MIN_SIZE",default:18,type:a.r.NUMBER},SIZE_OPT:{label:"PRIMER_OPT_SIZE",default:22,type:a.r.NUMBER},SIZE_MAX:{label:"PRIMER_MAX_SIZE",default:26,type:a.r.NUMBER},GC_CLAMP:{label:"PRIMER_GC_CLAMP",placeholder:0,type:a.r.NUMBER,default:null},GC_PROBE_MIN:{label:"PRIMER_INTERNAL_MIN_GC",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:35}],default:null},GC_PROBE_OPT:{label:"PRIMER_INTERNAL_OPT_GC",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:50}],default:null},GC_PROBE_MAX:{label:"PRIMER_INTERNAL_MAX_GC",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:65}],default:null},TM_PROBE_MIN:{label:"PRIMER_INTERNAL_MIN_TM",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:55}],default:null},TM_PROBE_OPT:{label:"PRIMER_INTERNAL_OPT_TM",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:62}],default:null},TM_PROBE_MAX:{label:"PRIMER_INTERNAL_MAX_TM",type:a.r.FLOAT,tasks:[{task:a.i.QPCR_PROBE,default:65}],default:null},SIZE_PROBE_MIN:{label:"PRIMER_INTERNAL_MIN_SIZE",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:18}],default:null},SIZE_PROBE_OPT:{label:"PRIMER_INTERNAL_OPT_SIZE",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:22}],default:null},SIZE_PROBE_MAX:{label:"PRIMER_INTERNAL_MAX_SIZE",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:26}],default:null},PRODUCT_MIN_SIZE:{label:"PRIMER_PRODUCT_MIN_SIZE",tasks:[{task:a.i.QPCR_PROBE,default:75},{task:a.i.QPCR_DYES,default:75},{task:a.i.PCR,default:200}],type:a.r.NUMBER,default:null},PRODUCT_MAX_SIZE:{label:"PRIMER_PRODUCT_MAX_SIZE",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:150},{task:a.i.QPCR_DYES,default:150},{task:a.i.PCR,default:1e3}],default:null},PRODUCT_OPT_SIZE:{label:"PRIMER_PRODUCT_OPT_SIZE",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:100},{task:a.i.QPCR_DYES,default:100}],default:null},MIN_3_PRIME_OVERLAP:{label:"PRIMER_MIN_3_PRIME_OVERLAP_OF_JUNCTION",default:4,type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}]},MIN_5_PRIME_OVERLAP:{label:"PRIMER_MIN_5_PRIME_OVERLAP_OF_JUNCTION",default:7,type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}]},OVERLAP_JXN_LIST:{label:"SEQUENCE_OVERLAP_JUNCTION_LIST",type:a.r.INDEX_LIST,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},FORCE_FORWARD_START:{label:"SEQUENCE_FORCE_LEFT_START",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},FORCE_FORWARD_END:{label:"SEQUENCE_FORCE_LEFT_END",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},FORCE_REVERSE_START:{label:"SEQUENCE_FORCE_RIGHT_START",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},FORCE_REVERSE_END:{label:"SEQUENCE_FORCE_RIGHT_END",type:a.r.NUMBER,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},FORWARD_PRIMER_SEQUENCE:{label:"SEQUENCE_PRIMER",type:a.r.TEXT,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},REVERSE_PRIMER_SEQUENCE:{label:"SEQUENCE_PRIMER_REVCOMP",type:a.r.TEXT,tasks:[{task:a.i.QPCR_PROBE,default:null},{task:a.i.QPCR_DYES,default:null},{task:a.i.PCR,default:null}],default:null},INTERNAL_OLIGO_SEQUENCE:{label:"SEQUENCE_INTERAL_OLIGO",type:a.r.TEXT,tasks:[{task:a.i.QPCR_PROBE,default:null}],default:null},SEQUENCING_SPACING:{label:"PRIMER_SEQUENCING_SPACING",default:500,type:a.r.NUMBER,tasks:[{task:a.i.SEQUENCING,default:null}]},SEQUENCING_INTERVAL:{label:"PRIMER_SEQUENCING_INTERVAL",default:250,type:a.r.NUMBER,tasks:[{task:a.i.SEQUENCING,default:null}]},SEQUENCING_LEAD:{label:"PRIMER_SEQUENCING_LEAD",default:50,type:a.r.NUMBER,tasks:[{task:a.i.SEQUENCING,default:null}]},SEQUENCING_ACCURACY:{label:"PRIMER_SEQUENCING_ACCURACY",default:20,type:a.r.NUMBER,tasks:[{task:a.i.SEQUENCING,default:null}]},NUM_RESULTS:{label:"PRIMER_NUM_RETURN",default:5,type:a.r.NUMBER}},s=Object.freeze(i)},728510:(e,t,n)=>{n.d(t,{Z:()=>d})
var a=n(531041),i=n(282614),s=n(720100),r=n(650858),o=n(132814),l=n(766455),c=n(432128)
class PrimerWizardTabState extends l.Xh{defaults(){const e=c.Z.get(r.gq.WIZARD)
return(0,a.default)(super.defaults()).extend({title:"Primer Wizard",params:null!=e?e:{task:i.i.PCR}})}getDefault(e,t){if(!("tasks"in e))return e.default
const n=a.default.findWhere(e.tasks,{task:t})
return(null!=n?n.default:void 0)||null}savePreferences(){const e={task:this.get("params").task},t=["start_index","end_index","int_list","intervals"],{task:n}=this.get("params")
for(const a in s.Z){const i=s.Z[a],{label:r}=i
!Array.from(t).includes(i.type)&&r in this.get("params")&&this.get("params")[r]!==String(this.getDefault(i,n))&&(e[r]=this.get("params")[r])}c.Z.set(r.gq.WIZARD,e)}isNumber(e){return!isNaN(parseFloat(e))&&a.default.isFinite(e)}getInteger(e){return this.isNumber(e)&&parseFloat(e)%1==0?parseInt(e):null}getFloat(e){return this.isNumber(e)?parseFloat(e):null}getBooleanInt(e){const t=e.toLowerCase()
return"true"===t?1:"false"===t?0:null}getStartIndex(e){let t=this.getInteger(e)
null!=t&&(t=o.displayStartToModel(t,this.get("sequence").startIndex()))
return t}getEndIndex(e){let t=this.getInteger(e)
null!=t&&(t=o.displayEndToModel(t,this.get("sequence").length(),this.get("sequence").startIndex()))
return t}getIntervals(e){const t=e.split(","),n=[]
for(const e of Array.from(t)){let[t,a]=Array.from(e.split("-"))
t=this.getInteger(t)
a=this.getInteger(a)
if(null==t||null==a)return null
const i=o.distance(t,a,this.get("sequence").length(),this.get("sequence").circular())
if(i<0)return null
t=o.displayStartToModel(t,this.get("sequence").startIndex())
n.push(`${t},${i}`)}return n.join(" ")}getIntList(e){const t=e.trim(),n=[]
for(let e of Array.from(t.split(","))){e=this.getInteger(e)
if(null==e)return null
{const t=o.displayStartToModel(e,this.get("sequence").startIndex())
if(!(0<=t&&t<this.get("sequence").length()))return null
n.push(t)}}return n.join(" ")}parseAndValidate(e,t,n){const s=a.default.object([[i.r.NUMBER,this.getInteger],[i.r.FLOAT,this.getFloat],[i.r.INDEX_LIST,this.getIntList],[i.r.TEXT,e=>e],[i.r.BOOL,this.getBooleanInt],[i.r.START_INDEX,this.getStartIndex],[i.r.END_INDEX,this.getEndIndex],[i.r.INTERVAL_LIST,this.getIntervals]])[n].apply(this,[t])
if(null==s)throw new TypeError(`Invalid parameter value for ${e}: ${t}`)
return s}getParams(){const{task:e}=this.get("params"),t={task:e}
for(const n in s.Z){const i=s.Z[n]
if(!("tasks"in i)||null!=a.default.findWhere(i.tasks,{task:e}))if(i.label in this.get("params"))t[i.label]=this.parseAndValidate(i.label,this.get("params")[i.label],i.type)
else{const e=this.getDefault(i,this.get("params").task)
null!=e&&(t[i.label]=this.parseAndValidate(i.label,e,i.type))}}return t}}const d=PrimerWizardTabState},495547:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(989526),i=n(263137),s=n(36424),r=n(250965),o=n.n(r),l=n(459830),c=n(36693),d=n(88941),u=n(927517)
class ProteinSearchInput extends a.Component{constructor(){super(...arguments)
this.state={query:""}
this.proteinInputRef=a.createRef()
this.fileSearchDropdownRef=a.createRef()
this._handleSelectAttachment=(e,t,n,a)=>{this.props.onChooseProtein(a)
this.setState({query:""})}}getInputElement(){var e
return null===(e=this.proteinInputRef.current)||void 0===e?void 0:e.inputRef.current}componentDidMount(){const e=this.getInputElement()
null!=e&&o()(e).on("keyup",(e=>{if(u.isEscapeKey(e)&&this.state.query){e.stopPropagation()
this.setState({query:""})}}))}componentWillUnmount(){const e=this.getInputElement()
null!=e&&o()(e).off()}render(){return a.createElement("div",null,a.createElement(d.Z,{type:"text",placeholder:"Search for an AA sequence on Benchling",value:this.state.query,onChange:e=>{this.setState({query:e.target.value})},onKeyDown:e=>{var t
null===(t=this.fileSearchDropdownRef.current)||void 0===t||t.queryKeydownHandler(e)},ref:this.proteinInputRef,focusOnMount:!0,...(0,i.Z)({component:"ProteinSearchInput",element:"formInput"})}),""!==this.state.query&&a.createElement(c.Z,{ref:this.fileSearchDropdownRef,width:"100%",query:this.state.query,fileType:l.PROTEIN,selectAttachment:this._handleSelectAttachment}))}}const p=ProteinSearchInput
var m=n(709524)
class ChooseProteinAlignmentPane extends a.Component{constructor(){super(...arguments)
this.renderProteinRow=(e,t)=>{const n=this.props.allowSetTemplate||t!==this.props.templateProteinIndex
return a.createElement("tr",{className:"template _test-proteinRow",key:`${e}-${t}`},this.renderProteinCell(e,t===this.props.templateProteinIndex),this.props.allowSetTemplate?this.renderTemplateCell(t):a.createElement("td",null),n?this.renderDeleteCell(t):a.createElement("td",null))}
this.renderProteinCell=(e,t)=>a.createElement("td",{...(0,i.Z)({component:"ChooseProteinAlignmentPane",element:"proteinCell"})},a.createElement("span",{className:"chooseProteinAlignment-proteinName"},e),a.createElement("br",null),t&&a.createElement("span",{className:"chooseProteinAlignment-proteinDescription",...(0,i.Z)({component:"ChooseProteinAlignmentPane",element:"proteinDescriptionTemplate"})},"Template"))
this.renderTemplateCell=e=>e===this.props.templateProteinIndex?a.createElement("td",{className:"chooseProteinAlignment-templateCell",...(0,i.Z)({component:"ChooseProteinAlignmentPane",element:"templateCell"})},a.createElement("a",{className:"chooseProteinAlignment-hoverButton",onClick:()=>{this.props.onSetTemplateProteinAt(null)}},"Unset Template")):a.createElement("td",{className:"chooseProteinAlignment-templateCell",...(0,i.Z)({component:"ChooseProteinAlignmentPane",element:"templateCell"})},a.createElement("a",{className:"chooseProteinAlignment-hoverButton",onClick:()=>{this.props.onSetTemplateProteinAt(e)}},"Set Template"))
this.renderDeleteCell=e=>a.createElement("td",{className:"chooseProteinAlignment-deleteCell"},a.createElement("a",{className:"faded u-danger-pointer chooseProteinAlignment-hoverButton",onClick:()=>{this.props.onRemoveProteinAt(e)}},a.createElement(s.Z,{icon:"delete"})))
this.renderProteinTable=()=>0===this.props.proteinSpecifiers.length?a.createElement("div",{className:"chooseProteinAlignment-noProteinsText"},"No proteins chosen for alignment."):a.createElement("table",{className:"table table-hover"},a.createElement("tbody",null,this.props.proteinSpecifiers.map(((e,t)=>this.renderProteinRow(e.name,t)))))}render(){return a.createElement("div",null,a.createElement("div",{className:"u-tiny-spacing-bottom"},"Add proteins to your alignment:"),a.createElement(p,{onChooseProtein:e=>{this.props.onAddProteinSpecifier((0,m.Z)(e))}}),a.createElement("h4",{className:"chooseProteinAlignment-tableTitle"},"Proteins"),this.renderProteinTable())}}ChooseProteinAlignmentPane.defaultProps={allowSetTemplate:!0}
const E=ChooseProteinAlignmentPane},107098:(e,t,n)=>{n.d(t,{Z:()=>f})
var a=n(767807),i=n.n(a),s=n(989526),r=n(495547),o=n(204026),l=n(263137),c=n(103593),d=n(102176),u=n(88941),p=n(929123),m=n(59860)
function ConfirmProteinAlignmentPane(e){return s.createElement("div",null,e.shouldCreateNewProtein&&s.createElement("div",null,s.createElement(m.Z,null,s.createElement(c.Z,{md:8},s.createElement(d.Z,null,s.createElement(p.Z,null,"Consensus AA Sequence Name"),s.createElement(u.Z,{placeholder:"Untitled AA Sequence",value:e.proteinName||"",onChange:t=>{e.onSetProteinName(t.target.value)},focusOnMount:!0,...(0,l.Z)({component:"ConfirmProteinAlignmentPane",element:"nameField"})}))),s.createElement(c.Z,{md:4},s.createElement(d.Z,null,s.createElement(p.Z,null,"Folder"),s.createElement(o.Z,{showInventory:!0,value:e.folderId,onChange:t=>{e.onSetFolderId(t.target.value)},unsetOnFetchFail:!0})))),s.createElement("hr",null)),s.createElement("span",null,"Alignment computed using Clustal Omega."))}var E=n(390462),h=n(62847),g=n(974913),S=n(368734),_=n(629656),T=n(205986)
const I="ProteinAlignmentModal",A="CHOOSE_PANE"
class ProteinAlignmentModal extends s.Component{constructor(){super(...arguments)
this.state={proteinSpecifiers:this.props.initialProteinSpecifiers,templateProteinIndex:this.props.initialTemplateProteinIndex,proteinName:null,folderId:E.Z.get(E.O.INVENTORY),currentPane:A}
this._shouldCreateNewProtein=()=>null==this.state.templateProteinIndex
this._shouldEnableCreateAlignment=()=>!this._shouldCreateNewProtein()||null!=this.state.proteinName&&null!=this.state.folderId
this._handleRequestClose=()=>{_.xv(I)}
this._handleAddProteinSpecifier=e=>{this.setState({proteinSpecifiers:i()(this.state.proteinSpecifiers,{$push:[e]})})}
this._handleRemoveProteinAt=e=>{this.setState({proteinSpecifiers:i()(this.state.proteinSpecifiers,{$splice:[[e,1]]})})
e<this.state.templateProteinIndex?this.setState({templateProteinIndex:this.state.templateProteinIndex-1}):e===this.state.templateProteinIndex&&this.setState({templateProteinIndex:null})}
this._handleSetTemplateProteinAt=e=>{null==e||this.state.proteinSpecifiers[e].canBeTemplate?this.setState({templateProteinIndex:e}):g.ZP.warn("Cannot set read-only AA sequence as template.",{id:"ProteinAlignmentModal: Cannot set read-only AA sequence as template."})}
this._handleSetProteinName=e=>{this.setState({proteinName:e})}
this._handleSetFolderId=e=>{this.setState({folderId:e})
E.Z.set(E.O.INVENTORY,e)}
this._handleCreateAlignment=()=>{h.Z.create({proteinName:this.state.proteinName,folderId:this._shouldCreateNewProtein()?this.state.folderId:void 0,templateProteinIndex:this.state.templateProteinIndex,proteinSpecifiers:this.state.proteinSpecifiers})
this._handleRequestClose()}
this._getButtons=()=>this.state.currentPane===A?[{text:"Next",style:"primary",disabled:this.state.proteinSpecifiers.length<=1,onClick:()=>{this.setState({currentPane:"CONFIRM_PANE"})},key:"next",dataTestAttrs:{component:"ProteinAlignmentModal",element:"footerButton",key:S.Z.NEXT}}]:[{text:"Back",pullLeft:!0,onClick:()=>{this.setState({currentPane:A})},key:"back"},{text:"Create Alignment",style:"primary",disabled:!this._shouldEnableCreateAlignment(),onClick:this._handleCreateAlignment,key:"create",dataTestAttrs:{component:"ProteinAlignmentModal",element:"footerButton",key:S.Z.CREATE}}]
this._renderPane=()=>this.state.currentPane===A?s.createElement(r.Z,{proteinSpecifiers:this.state.proteinSpecifiers,templateProteinIndex:this.state.templateProteinIndex,onAddProteinSpecifier:this._handleAddProteinSpecifier,onRemoveProteinAt:this._handleRemoveProteinAt,onSetTemplateProteinAt:this._handleSetTemplateProteinAt}):s.createElement(ConfirmProteinAlignmentPane,{shouldCreateNewProtein:this._shouldCreateNewProtein(),proteinName:this.state.proteinName,onSetProteinName:this._handleSetProteinName,folderId:this.state.folderId,onSetFolderId:this._handleSetFolderId})}static open({initialProteinSpecifiers:e}){_.bA(I,s.createElement(ProteinAlignmentModal,{initialProteinSpecifiers:e}))}static openWithTemplateSpecifier(e){_.bA(I,s.createElement(ProteinAlignmentModal,{initialTemplateProteinIndex:0,initialProteinSpecifiers:[e]}))}render(){return s.createElement(T.ZP,{title:"Create protein alignment",onRequestClose:this._handleRequestClose,buttons:this._getButtons()},this._renderPane())}}const f=ProteinAlignmentModal},709524:(e,t,n)=>{n.d(t,{Z:()=>specifierForProtein})
function specifierForProtein(e){return{id:e.id,name:e.name,canBeTemplate:Boolean(e.permissions.polymerFeaturesEditable)}}},126382:(e,t,n)=>{n.d(t,{Z:()=>AddDatasetToAnalysisConfigurationModal})
var a=n(989526),i=n(769784),s=n(64558),r=n(232606),o=n(751512),l=n(954240),c=n(476604),d=n(865486),u=n(472347),p=n(191193)
const m=i.Ps`
  query AnalysisSelectorQuery @skipAudit @engComponent(name: INSIGHTS) {
    analysisListing {
      analyses {
        id
        name
        permissions {
          writable
        }
        archiveRecord {
          __typename
        }
        modifiedAt
      }
    }
  }
`
function AnalysisSelector(e){const t=(0,o.IJ)(m,{fetchPolicy:"network-only"})
if(t.type===o.NI.ERROR)return null
if(t.type===o.NI.PENDING)return a.createElement(c.b,null)
const n=function sortAndFilterAnalyses(t){const n=e.hideArchivedAnalyses?t.filter((e=>null==e.archiveRecord)):t
if(e.disableReadOnlyAnalyses){const e=(0,s.UY)(n.filter((e=>!e.permissions.writable)),"name")
return(0,s.UY)(n.filter((e=>e.permissions.writable)),"name").concat(e)}return(0,s.UY)(n,"name")}(t.data.analysisListing.analyses),i=n.map((t=>({name:t.name,value:t.id,metadata:`Last modified ${(0,p.Z)(t.modifiedAt)}`,disabled:e.disableReadOnlyAnalyses&&!t.permissions.writable,disabledMessage:"You do not have permission to edit this analysis"})))
if(e.disableReadOnlyAnalyses){const e={isHeader:!0,name:"Read-only Analyses"},t=i.findLastIndex((e=>!e.disabled))
i.splice(t+1,0,e)}return a.createElement(l.ZP,{menu:a.createElement(u.Z,{onSelect:t=>{const a=n.find((e=>e.id===t));(0,r.hu)(null!=a,"Analysis not found",{analysisId:t})
e.onSelect(a)},optionDatas:i,selectedValue:e.selectedAnalysisId,width:d.ZP.WIDTHS.FULL}),displayName:function getDisplayName(){var t
if(null==e.selectedAnalysisId)return"Select analysis..."
const a=n.find((t=>t.id===e.selectedAnalysisId))
return null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"Analysis not found"}(),disabled:e.disabled,dataTestAttrs:{component:"AnalysisSelector",element:"root"}})}var E=n(468943),h=n(171471),g=n(102176),S=n(334148),_=n(16049),T=n(389760),I=n(801455),A=n(665704),f=n(205986),y=n(883026)
function AddDatasetToAnalysisConfigurationModal(e){var t
const n=(0,_.Z)(null!==(t=e.initialDatasetName)&&void 0!==t?t:""),i=n.value,[s,o]=(0,a.useState)(null),l=null!=i&&!function onlyWhiteSpace(e){return 0===e.trim().length}(i)&&null!=s,c={actionOrigin:h.D2.NOTEBOOK,modalType:"create_dataset"},d=h.XC.ANALYSIS_TOOL;(0,T.Z)((()=>{E.gx(h.U9.OPENED_MODAL,d,c)}))
return a.createElement(f.ZP,{title:"Add to existing analysis",onRequestSubmit:()=>{E.gx(h.U9.SUBMITTED_MODAL,d,c)
!async function handleRequestSubmit(){(0,r.hu)(l,"Unexpectedly creating analysis with null dataset name or analysis")
await(0,y.jI)(e.onCreateDataFrame({dataFrameName:i,analysisId:s}),"Creating dataset for analysis...")
e.onRequestSubmit()}()},onRequestClose:()=>{E.gx(h.U9.CLOSED_MODAL,d,c)
e.onRequestClose()},buttons:[{submit:!0,text:"Create",style:S.ZJ.SECONDARY,disabled:!l}]},a.createElement(g.Z,null,a.createElement(I.Z,{label:"Analysis"}),a.createElement(AnalysisSelector,{selectedAnalysisId:s,onSelect:e=>{o(e.id)},disableReadOnlyAnalyses:!0,hideArchivedAnalyses:!0})),a.createElement(g.Z,null,a.createElement(A.Z,{label:"Analysis table name",autoFocus:!1,dataTestAttrs:{component:"CreateAnalysisModal",element:"dataFrameTextField"},...n})))}},201069:(e,t,n)=>{n.d(t,{T:()=>getFullAnalysisUrl,d:()=>parseAnalyticsUrlQueryParameters})
var a=n(631999),i=n(675649),s=n(697134)
function parseAnalyticsUrlQueryParameters(){var e
const{queryKey:t}=(0,i.he)(window.location.href)
return{stepId:null!==(e=t.stepId)&&void 0!==e?e:null}}function getFullAnalysisUrl(e){if((0,s.CZ)(e))return
const{stepId:t}=parseAnalyticsUrlQueryParameters()
return(0,i.Dv)(e.url,{stepId:t&&(0,a.wL)(e,t)?t:null})}},498571:(e,t,n)=>{n.r(t)
n.d(t,{CreateAnalysisModal:()=>CreateAnalysisModal,default:()=>ConnectedCreateAnalysisModal})
var a=n(989526),i=n(468943),s=n(786628),r=n(232606),o=n(171471),l=n(766096),c=n(432128),d=n(102176),u=n(334148),p=n(954240),m=n(16049),E=n(389760),h=n(801455),g=n(665704),S=n(865486),_=n(297020),T=n(924982),I=n(205986),A=n(346383),f=n(883026),y=n(936091),C=n(624034),R=n(418511)
const b=[C.C_.BLANK,C.C_.PARAMETER_OPTIMIZATION]
function onlyWhiteSpace(e){return 0===e.trim().length}function CreateAnalysisModal(e){var t,n,y
const N=(0,m.Z)(null!==(t=e.initialAnalysisName)&&void 0!==t?t:""),O=(0,m.Z)(null!==(n=e.initialDatasetName)&&void 0!==n?n:""),[L,P]=(0,a.useState)(C.C_.BLANK),[D,v]=(0,a.useState)(null!==(y=c.Z.get(C.KT.PROJECT_ID))&&void 0!==y?y:null),M=N.value,B=O.value,U=M&&!onlyWhiteSpace(M),F=null!=D,w=B&&!onlyWhiteSpace(B),k=U&&F&&(!e.fromStructuredTable||w),x={actionOrigin:e.fromStructuredTable?o.D2.NOTEBOOK:o.D2.ANALYSIS_TOOL,modalType:"create_analysis"},Z=s.X.ANALYSIS_TOOL;(0,E.Z)((()=>{i.gx(o.U9.OPENED_MODAL,Z,x)}))
return a.createElement(I.ZP,{title:e.fromStructuredTable?"Add to new analysis":"Create analysis",onRequestSubmit:()=>{i.gx(o.U9.SUBMITTED_MODAL,Z,x)
!async function handleRequestSubmit(){(0,r.hu)(null!=D,"Unexpectedly creating analysis with null project")
await(0,f.jI)(e.onCreateAnalysis({name:M,projectId:D,templateType:L},B),"Creating analysis...")
e.onRequestSubmit()}()},onRequestClose:()=>{i.gx(o.U9.CLOSED_MODAL,Z,x)
e.onRequestClose()},buttons:[{submit:!0,text:"Create",style:u.ZJ.SECONDARY,disabled:!k}]},(0,l.Z)()&&!e.fromStructuredTable&&a.createElement(d.Z,null,a.createElement(h.Z,{label:"Analysis type"}),a.createElement(p.ZP,{buttonSize:u.qE.SMALL,displayName:C.L_[L],menu:a.createElement(S.ZP,{height:_.Bl.SMALL},b.map((e=>a.createElement(T.Z,{key:e,value:e,onSelect:e=>{P(e)}},C.L_[e]))))})),a.createElement(d.Z,null,a.createElement(g.Z,{label:e.fromStructuredTable?"Analysis name":"Name",placeholder:"Enter a name for this analysis",autoFocus:!0,dataTestAttrs:{component:"CreateAnalysisModal",element:"nameTextField"},...N})),e.fromStructuredTable&&a.createElement(d.Z,null,a.createElement(g.Z,{label:"Analysis table name",autoFocus:!1,dataTestAttrs:{component:"CreateAnalysisModal",element:"dataFrameTextField"},...O})),a.createElement(d.Z,null,a.createElement(h.Z,{label:"Project"}),a.createElement(A.Z,{onProjectSelected:v,selectedProjectId:D,enableRedesign:!0,preferenceKey:C.KT.PROJECT_ID})),a.createElement(R.Z,{projectId:D}))}function ConnectedCreateAnalysisModal(e){return a.createElement(CreateAnalysisModal,{...e,onCreateAnalysis:y.TN})}},669050:(e,t,n)=>{n.d(t,{Z:()=>h})
var a=n(64558),i=n(440281),s=n.n(i),r=n(201069),o=n(694582),l=n(348920),c=n(15655),d=n(459830),u=n(325740),p=n(697134),m=n(766455),E=n(982519)
class AnalysisToolbarState extends s().Model{}class AnalysisFileState extends u.Z{static getQueryOptions(e){return{query:o.h,variables:{analysisId:e}}}static dataToAttributes(e){const{analysis:t}=e
return(0,p.CZ)(t)?{}:{analysis:t,...(0,a.ei)(t,"name","url","archiveRecord")}}static openFile(e){return super.openFile(e)}archiveRecord(){var e
return null!==(e=this.get("archiveRecord"))&&void 0!==e?e:null}setArchiveRecord(e){this.set({archiveRecord:e})}setPermissions(){}defaults(){return{...super.defaults(),toolbar:new AnalysisToolbarState,statusbar:new c.PM,hideTabNav:!0}}initialize(...e){super.initialize(...e)
const t=new m.Sq([new m.aL,new m.aL({active:!1})])
this.set({buffers:t})
t.addTab(new E.Z(this.getTabStateAttributes()),{active:!0})}getTabStateAttributes(){return{analysisId:this.id,...(0,r.d)()}}editURL(){const e=this.get("url")
return null==e||l.ZP.ENABLE_ANALYSIS_TOOL_FIRST_PARTY_ANALYSES?e:(0,r.T)(this.attributes.analysis)}name(){var e
return null!==(e=this.get("name"))&&void 0!==e?e:"Loading..."}registerTitleAndURLSync(){this.on("change:name change:url",(()=>{this.syncTitleAndURL()}))}}AnalysisFileState.fileType=d.ANALYSIS
const h=AnalysisFileState},982519:(e,t,n)=>{n.d(t,{Z:()=>AnalysisTabState})
var a=n(766455)
class AnalysisTabState extends a.Xh{defaults(){return{...super.defaults(),title:"Analysis",closeable:!1,preferenceKey:"analysis"}}}},882101:(e,t,n)=>{n.d(t,{Z:()=>isCreateAnalysisEnabled})
var a=n(348920)
function isCreateAnalysisEnabled(){return a.ZP.ENABLE_ANALYSIS_TOOL&&(a.ZP.MACHINE_LEARNING_ENABLE_ANALYSIS_TOOL_CREATION_PER_USER&&a.ZP.MACHINE_LEARNING_ENABLE_ANALYSIS_TOOL_CREATION_FOR_USER||!a.ZP.MACHINE_LEARNING_ENABLE_ANALYSIS_TOOL_CREATION_PER_USER)}},418511:(e,t,n)=>{n.d(t,{Z:()=>DataSharingWarningBanner})
var a=n(769784),i=n(989526),s=n(751512),r=n(91092),o=n(697134),l=n(383628)
const c=a.ZP`
  query ProjectNameQuery($projectId: StrictString!) @skipAudit {
    project(id: $projectId) {
      ... on ProjectNode {
        id
        name
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,r.f)("InaccessibleInfo").fragment}
`
function DataSharingWarningBanner({projectId:e}){const t=(0,s.A4)(c,{variables:{projectId:e},skip:null==e}),n=`Data in this analysis, including those pulled from other projects, will be available to all users with access to ${t.type!==s.NI.SUCCESS||(0,o.CZ)(t.data.project)?"the selected project":t.data.project.name}.`
return i.createElement(l.ZP,{bannerType:l.ct.INFO,text:n})}},468943:(e,t,n)=>{n.d(t,{KK:()=>deprecatedTrackEvent,L9:()=>trackEvent,Uh:()=>deprecatedGenerateEventGroupId,Vr:()=>makeAnalyticsEventId,gx:()=>trackEventWithModule,h$:()=>disable,j:()=>track})
var a=n(250965),i=n.n(a),s=n(913930),r=n.n(s),o=n(531041),l=n(178570),c=n(951873),d=n(17086),u=n(771398)
let p=!1
function disable(){p=!0}function convertActionOriginAndActionMethodToLower(e){(function isMetadataWithActionOrigin(e){return e.hasOwnProperty("action_origin")})(e)&&"string"==typeof e.action_origin&&(e.action_origin=e.action_origin.toLowerCase());(function isMetadataWithActionMethod(e){return e.hasOwnProperty("action_method")})(e)&&"string"==typeof e.action_method&&(e.action_method=e.action_method.toLowerCase())
return e}(0,u.dE)((function getAnalyticsMetadataHeaders(){return d.U2("analyticsMetadata")?{"X-BENCH-ANALYTICS-METADATA":encodeURIComponent(JSON.stringify(d.U2("analyticsMetadata")))}:{}}))
function makeAnalyticsEventId(){return l.Z()}function track(e,t,n){const a=n instanceof Object?convertActionOriginAndActionMethodToLower((0,c.t)(n)):n
window.debug&&console.debug(`[analytics] ${e}.${t}`,a)
r().captureBreadcrumb({level:"info",category:"analytics.track",message:`${e}.${t}`,data:a})
p||i().ajax({type:"POST",url:"/1/api/analytics/track",contentType:"application/json",data:JSON.stringify({module:e,action:t,metadata:o.default.extend({client_timestamp:(new Date).toISOString()},a),url:window.location.href,referrer:document.referrer,client_api_version:window.clientAPIVersion})})}function deprecatedTrackEvent(e,t={}){const n=convertActionOriginAndActionMethodToLower((0,c.t)(t))
window.debug&&console.debug(`[analytics] ${e.module}.${e.action}`,n)
r().captureBreadcrumb({level:"info",category:"analytics.deprecatedTrackEvent",message:`${e.module}.${e.action}`,data:n})
p||i().ajax({type:"POST",url:"/1/api/analytics:track-event",contentType:"application/json",data:JSON.stringify({analyticsEvent:e,metadata:o.default.extend({client_timestamp:(new Date).toISOString()},n),url:window.location.href,referrer:document.referrer,clientApiVersion:window.clientAPIVersion})})}function deprecatedGenerateEventGroupId(e,t){return`${e}-${t}-${(new Date).toISOString()}`}function trackEvent(e,t={}){const n=convertActionOriginAndActionMethodToLower((0,c.t)(t))
window.debug&&console.debug(`[analytics] ${e.action}`,n)
r().captureBreadcrumb({level:"info",category:"analytics.trackEvent",message:`${e.action}`,data:n})
p||i().ajax({type:"POST",url:"/1/api/analytics:track-single-tracked-event",contentType:"application/json",data:JSON.stringify({analyticsEvent:e,metadata:{...n,client_timestamp:(new Date).toISOString()},url:window.location.href,referrer:document.referrer,clientApiVersion:window.clientAPIVersion})})}function trackEventWithModule(e,t,n={}){trackEvent({...e,module:t},n)}},786628:(e,t,n)=>{n.d(t,{J:()=>a,X:()=>i})
var a,i
!function(e){e.READ="read"
e.WRITE="write"}(a||(a={}))
!function(e){e.ANALYSIS_TOOL="analysis_tool"
e.BENCHLING_APPS="benchling_apps"
e.CAPILLARY="capillary"
e.CHEMISTRY="chemistry"
e.COLLABORATION="collaboration"
e.CONFIG_MIGRATION="config_migration"
e.DATA_FRAMES="data_frames"
e.DATA_MANAGEMENT="data_management"
e.ELN="eln"
e.EVENTS="events"
e.FORMS="forms"
e.GROWTH="growth"
e.IDENTITY="identity"
e.INSIGHTS="external_analytics"
e.INSTRUMENTS="instruments"
e.LEGACY_WORKFLOWS="workflows"
e.MOLBIO="molbio"
e.MODBIO="modified_biologics"
e.NAVIGATION="navigation"
e.PIPELINES="pipelines"
e.PROCEDURES="procedures"
e.PROJECT_FOLDER="project_folder"
e.REGISTRY="bioregistry"
e.REQUESTS="requests"
e.RESULTS="results"
e.REVIEWS="reviews"
e.SAMPLES="samples"
e.SCHEMAS="schemas"
e.SIGHTGLASS="sightglass"
e.STUDIES="studies"
e.WORKFLOWS="workflows_v2"
e.WORKLISTS="worklists"
e.MODULE_MISSING="module_missing"}(i||(i={}))},376068:(e,t,n)=>{n.d(t,{Ld:()=>a,Mr:()=>closeModal,h7:()=>openModal})
var a
!function(e){e.COOKIE_CONSENT_MODAL_OPEN="COOKIE_CONSENT_MODAL_OPEN"
e.COOKIE_CONSENT_MODAL_CLOSE="COOKIE_CONSENT_MODAL_CLOSE"}(a||(a={}))
function openModal(){return{type:a.COOKIE_CONSENT_MODAL_OPEN}}function closeModal(){return{type:a.COOKIE_CONSENT_MODAL_CLOSE}}},664711:(e,t,n)=>{n.d(t,{Z:()=>ElapsedTimeEventTracker})
var a=n(536105),i=n.n(a),s=n(468943)
class ElapsedTimeEventTracker{constructor(e){this.analyticsEvent=e
this.startMoment=null}startTimer(){this.startMoment=i()()}stopTimerAndTrack(){if(null!=this.startMoment){(0,s.KK)(this.analyticsEvent,{millisecondsElapsed:i()().diff(this.startMoment)})
this.startMoment=null}}}},951873:(e,t,n)=>{n.d(t,{e:()=>structuredTableActionOrigin,t:()=>standardAnalyticsMetadataToDict})
var a=n(64558),i=n(171471),s=n(494168),r=n(453580),o=n(357444),l=n(808844)
function structuredTableActionOrigin(e){switch(e.kind){case r.sl.MIXTURE_METADATA:case r.sl.MIXTURE_INGREDIENTS:return i.D2.NOTEBOOK_ENTRY_MIXTURE_PREP_TABLE
case r.sl.INVENTORY:return i.D2.NOTEBOOK_ENTRY_INVENTORY_UPDATE_TABLE
case r.sl.PLATE_CREATION:return i.D2.NOTEBOOK_ENTRY_PLATE_CREATION_TABLE
case r.sl.BOX_CREATION:return i.D2.NOTEBOOK_ENTRY_BOX_CREATION_TABLE
case r.sl.RUN_OUTPUT_SAMPLES:return i.D2.NOTEBOOK_ENTRY_RUN_OUTPUT_SAMPLES_TABLE
case r.sl.REGISTRATION:return i.D2.NOTEBOOK_ENTRY_REGISTRATION_TABLE
case r.sl.RESULTS:return i.D2.NOTEBOOK_ENTRY_RESULTS_TABLE
case r.sl.TRANSFER:switch(e.metadata.mode){case s.Z.CREATE:return i.D2.NOTEBOOK_ENTRY_CONTAINER_CREATION_TABLE
case s.Z.FILL:return i.D2.NOTEBOOK_ENTRY_FILL_EXISTING_TABLE
default:return i.D2.NOTEBOOK_UNDETERMINED_STRUCTURED_TABLE}case r.sl.PROCESS_OUTPUT:switch(e.metadata.tableLocation){case o.$o.WORKSPACE_TAB:case o.$o.TASK_DETAILS_OUTPUTS_TAB:return i.D2.WORKFLOWS_TASK_GROUP_WORKFLOW_OUTPUT_TABLE
case o.$o.ENTRY:return i.D2.NOTEBOOK_ENTRY_WORKFLOW_OUTPUT_TABLE
case o.$o.DIRECT_EXECUTION_MODAL:return i.D2.WORKFLOWS_DIRECT_EXECUTION_MODAL_WORKFLOW_OUTPUT_TABLE
case o.$o.CREATE_MODAL:case o.$o.STATUS_CONFIRMATION_MODAL:case o.$o.FIELD_MAPPING_MODAL:default:return i.D2.WORKFLOWS_UNDETERMINED_STRUCTURED_TABLE}case r.sl.PROCESS_TASK:switch(e.metadata.tableLocation){case o.$o.WORKSPACE_TAB:case o.$o.TASK_DETAILS_OUTPUTS_TAB:return i.D2.WORKFLOWS_TASK_GROUP_WORKFLOW_TASK_TABLE
case o.$o.ENTRY:return i.D2.NOTEBOOK_ENTRY_WORKFLOW_TASK_TABLE
case o.$o.DIRECT_EXECUTION_MODAL:return i.D2.WORKFLOWS_DIRECT_EXECUTION_MODAL_WORKFLOW_TASK_TABLE
case o.$o.CREATE_MODAL:case o.$o.STATUS_CONFIRMATION_MODAL:case o.$o.FIELD_MAPPING_MODAL:default:return i.D2.WORKFLOWS_UNDETERMINED_STRUCTURED_TABLE}case r.sl.LOOKUP:return i.D2.NOTEBOOK_ENTRY_LOOKUP_TABLE
default:return i.D2.NOTEBOOK_UNDETERMINED_STRUCTURED_TABLE}}function standardizeRecursively(e){return Array.isArray(e)?e.map((e=>"object"==typeof e&&null!=e?standardizeRecursively(e):e)):"object"==typeof e&&null!=e?(0,a.m8)(Object.entries(e).map((([e,t])=>[(0,l.mu)(e),standardizeRecursively(t)]))):e}function standardAnalyticsMetadataToDict(e,t){return standardizeRecursively({...t,...e})}},342940:(e,t,n)=>{n.d(t,{Z:()=>mountCookieConsentManager})
var a,i,s,r=n(989526),o=n(521126),l=n.n(o),c=n(250965),d=n.n(c),u=n(615439),p=n.n(u),m=n(692013),E=n(531041),h=n(232606),g=n(348920),S=n(508085),_=n(352422)
!function(e){e.EXPLICIT_AGREE="EXPLICIT_AGREE"
e.EXPLICIT_DISAGREE="EXPLICIT_DISAGREE"
e.IMPLICIT_AGREE="IMPLICIT_AGREE"
e.UNSPECIFIED="UNSPECIFIED"}(a||(a={}))
!function(e){e.FUNCTIONAL="functional"
e.MARKETING_AND_ANALYTICS="marketingAndAnalytics"
e.ADVERTISING="advertising"
e.ESSENTIAL="essential"}(i||(i={}))
!function(e){e.GOOGLE_TAG_MANAGER="Google Tag Manager"
e.FACEBOOK_PIXEL="Facebook Pixel"
e.LINKEDIN_INSIGHT_TAG="LinkedIn Insight Tag"
e.SPLIT="Split"
e.GOOGLE_ANALYTICS="Google Analytics"
e.INTERCOM="Intercom"
e.AMPLITUDE="Amplitude"
e.WEBHOOKS="Webhooks"
e.ADROLL="AdRoll"
e.CLEARBIT_REVEAL="Clearbit Reveal"
e.ZENDESK="Zendesk"
e.GAINSIGHT_PX="GainsightPx"}(s||(s={}))
const T=[{id:s.GOOGLE_TAG_MANAGER,name:"Google Tag Manager (Bing Event Tracking, Loop Analytics, Hotjar)",category:i.ADVERTISING},{id:s.FACEBOOK_PIXEL,name:"Facebook Pixel",category:i.ADVERTISING},{id:s.LINKEDIN_INSIGHT_TAG,name:"LinkedIn Insight Tag",category:i.ADVERTISING},{id:s.SPLIT,name:"Split",category:i.MARKETING_AND_ANALYTICS},{id:s.AMPLITUDE,name:"Amplitude",category:i.MARKETING_AND_ANALYTICS},{id:s.ADROLL,name:"AdRoll",category:i.ADVERTISING},{id:s.GOOGLE_ANALYTICS,name:"Google Analytics",category:i.MARKETING_AND_ANALYTICS},{id:s.INTERCOM,name:"Intercom",category:i.FUNCTIONAL},{id:s.ZENDESK,name:"Zendesk",category:i.ESSENTIAL},{id:s.GAINSIGHT_PX,name:"GainsightPx",category:i.ESSENTIAL},{id:s.CLEARBIT_REVEAL,name:"Clearbit Reveal",category:i.MARKETING_AND_ANALYTICS}],I=T.filter((e=>e.category===i.ESSENTIAL)).map((e=>e.id))
function getNonSegmentDestinationIds(){const e=[]
g.ZP.ENABLE_INTERCOM&&e.push("Intercom")
g.ZP.ENABLE_ZENDESK_MESSAGING&&e.push("Zendesk")
g.ZP.ENABLE_GAINSIGHT_PX&&e.push("GainsightPx")
return e}var A=n(129270),f=n(334148),y=n(271359),C=n(946948),R=n(205986),b=n(685370)
function Heading({children:e}){return r.createElement("th",{className:(0,m.iv)(O.tableHeading)},e)}function Cell({children:e}){return r.createElement("td",{className:(0,m.iv)(O.tableCell)},e)}class CookieConsentModal extends r.Component{constructor(){super(...arguments)
this.state={prefs:this.getInitialPrefs()}
this.handleCancel=async()=>{if(await Promise.resolve(b.iG("Are you sure you want to cancel?",r.createElement("span",null,"Your preferences have not been saved. By continuing to use our website, you're agreeing to our"," ",r.createElement("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),"."),f.ZJ.PRIMARY,{acceptText:"Yes, Cancel",rejectText:"Go Back",enableRedesign:!0,promiseCompatible:!0,medium:!0}))){const e={...this.props.initialPreferences}
for(const t of this.props.destinationIds){(0,h.Gp)(e[t]!==a.UNSPECIFIED,"Initial prefs passed into CookieConsentModal should have have value UNSPECIFIED.")
e[t]||(e[t]=a.IMPLICIT_AGREE)}this.props.onRequestSubmit(e)}}}getInitialPrefs(){const e={}
for(const t of Object.values(i)){const n=this.getDestinationsForCategory(t),i=n.map((e=>this.props.initialPreferences[e.id]||a.UNSPECIFIED))
let s=1===new Set(i).size?i[0]:a.UNSPECIFIED
s===a.IMPLICIT_AGREE&&(s=a.UNSPECIFIED)
for(const t of n)e[t.id]=s}return e}getDestinationsForCategory(e){return this.props.destinationIds.map((e=>function destinationById(e){const t=E.default.findWhere(T,{id:e})
if(!t){(0,h.Gp)(!1,`Expected destination info for ID ${e}.`)
return{id:e,name:e,category:i.MARKETING_AND_ANALYTICS}}return t}(e))).filter((t=>t.category===e))}handleSetPreference(e,t){const n={...this.state.prefs}
for(const{id:a}of this.getDestinationsForCategory(e))n[a]=t
this.setState({prefs:n})}getNamesforCategory(e){return this.getDestinationsForCategory(e).map((e=>e.name))}getCategoryPreference(e){if(!this.isCategoryVisible(e))return a.UNSPECIFIED
const t=this.getDestinationsForCategory(e).map((e=>this.state.prefs[e.id]||a.UNSPECIFIED));(0,h.Gp)(1===new Set(t).size,`Expected exactly one unique preference for ${e}, got ${JSON.stringify(t)}`)
return t[0]}isCategoryVisible(e){return this.getDestinationsForCategory(e).length>0}isInputValid(){return Object.values(this.state.prefs).every((e=>e===a.EXPLICIT_AGREE||e===a.EXPLICIT_DISAGREE))}renderPrefPicker(e){return r.createElement(C.t,{selectedValue:this.getCategoryPreference(e),options:[{label:"Yes",value:a.EXPLICIT_AGREE},{label:"No",value:a.EXPLICIT_DISAGREE}],onChange:t=>{this.handleSetPreference(e,t)}})}render(){return r.createElement(R.ZP,{buttons:[{text:"Save",submit:!0,disabled:!this.isInputValid()},{text:"Cancel",cancel:!0}],closeable:!1,large:!0,onRequestClose:this.handleCancel,onRequestSubmit:()=>{this.props.onRequestSubmit(this.state.prefs)},title:"Data Collection Preferences"},r.createElement("p",{className:(0,m.iv)(O.explanationText)},"Benchling uses data collected by cookies and JavaScript libraries to improve your browsing experience, analyze site traffic,"," ",this.isCategoryVisible(i.ADVERTISING)&&"deliver personalized advertisements, ","and increase the overall performance of our site. By using our website, you agree to our"," ",r.createElement("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),". The table below outlines how we use this data by category. To opt out of a category of data collection, select “No” and save your preferences."),r.createElement("table",{className:(0,m.iv)(O.table)},r.createElement("thead",null,r.createElement("tr",null,r.createElement(Heading,null,"Allow"),r.createElement(Heading,null,"Category"),r.createElement(Heading,null,"Purpose"),r.createElement(Heading,null,"Tools"))),r.createElement("tbody",null,this.isCategoryVisible(i.FUNCTIONAL)&&r.createElement("tr",null,r.createElement(Cell,null,this.renderPrefPicker(i.FUNCTIONAL)),r.createElement(Cell,null,"Functional"),r.createElement(Cell,null,"To monitor the performance of our site and to enable features like chat-based support."),r.createElement(Cell,null,this.getNamesforCategory(i.FUNCTIONAL).join(", "))),this.isCategoryVisible(i.MARKETING_AND_ANALYTICS)&&r.createElement("tr",null,r.createElement(Cell,null,this.renderPrefPicker(i.MARKETING_AND_ANALYTICS)),r.createElement(Cell,null,"Marketing and Analytics"),r.createElement(Cell,null,"To understand user behavior in order to provide you with a more relevant browsing experience or personalize the content on our site."),r.createElement(Cell,null,this.getNamesforCategory(i.MARKETING_AND_ANALYTICS).join(", "))),this.isCategoryVisible(i.ADVERTISING)&&r.createElement("tr",null,r.createElement(Cell,null,this.renderPrefPicker(i.ADVERTISING)),r.createElement(Cell,null,"Advertising"),r.createElement(Cell,null,"To personalize and measure the effectiveness of advertising on our site and other websites. Some services are also used for marketing and analytics."),r.createElement(Cell,null,this.getNamesforCategory(i.ADVERTISING).join(", "))),r.createElement("tr",null,r.createElement(Cell,null,"N/A"),r.createElement(Cell,null,"Essential"),r.createElement(Cell,null,"We use browser cookies and other services that are necessary for the site to work as intended."),r.createElement(Cell,null,this.getNamesforCategory(i.ESSENTIAL).join(", "))))))}}const N={borderStyle:"solid",borderWidth:1,borderColor:y.pF,padding:8},O=m.mM.create({table:{width:"100%"},explanationText:A.hv,tableHeading:{...A.c4,...N},tableCell:{...A.hv,...N}})
var L=n(376068),P=n(634489),D=n(195300)
class CookieConsentManagerConnector extends P.C{enhanceProps(){return{isModalOpen:this.reduxState().ui.cookieConsentModal.isOpen,onOpenModal:()=>{this.dispatch(L.h7())},onCloseModal:()=>{this.dispatch(L.Mr())}}}}class CookieConsentManager extends r.Component{constructor(){super(...arguments)
this.isAnalyticsInitialized=!1
this.handleSubmit=e=>{this.props.saveConsent(e)
this.props.onCloseModal()
this.initAnalyticsIfNecessary(e)}}componentDidMount(){d()("#data-collection-preferences-link").click((()=>{this.props.onOpenModal()}))
this.props.isConsentRequired&&this.getDestinationIds().some((e=>!I.includes(e)&&!this.props.preferences.hasOwnProperty(e)))?this.props.onOpenModal():this.initAnalyticsIfNecessary(this.props.preferences)}initAnalyticsIfNecessary(e){if(!this.isAnalyticsInitialized){this.isAnalyticsInitialized=!0
!function initAnalyticsFromPreferences(e){const{bootstrapUser:t}=window
window.analytics&&window.analytics.ready((()=>{t&&window.analytics.identify(t.entityId,t.publicIdentifyTraits)
window.analytics.page()}))
if(g.ZP.ENABLE_INTERCOM&&e.Intercom!==a.EXPLICIT_DISAGREE&&window.initializeIntercom){window.initializeIntercom();(0,S.sW)()}g.ZP.ENABLE_ZENDESK_MESSAGING&&g.ZP.ENABLE_IN_APP_SUPPORT&&(0,_.f)()
g.ZP.ENABLE_GAINSIGHT_PX&&window.initializeGainsightPx&&window.initializeGainsightPx()}(e)}}getDestinationIds(){return[...this.props.destinations.map((e=>e.id)),...getNonSegmentDestinationIds()]}render(){return r.createElement(D.Z,{open:this.props.isModalOpen},this.props.isModalOpen&&r.createElement(CookieConsentModal,{onRequestSubmit:this.handleSubmit,onRequestClose:()=>{(0,h.Gp)(!1,"Expected CookieConsentModal to never cancel.")},destinationIds:this.getDestinationIds(),initialPreferences:this.props.preferences}))}}const v=CookieConsentManagerConnector.connect(CookieConsentManager,{throttleUpdates:!0,shouldPropagateNextState:(e,t)=>!p()(e,t)})
class NonSegmentConsentManagerBuilder extends r.Component{constructor(){super(...arguments)
this.preferences=this.props.loadPreferences().customPreferences||{}
this.isConsentRequired=this.props.shouldRequireConsent()
this.handleSaveConsent=e=>{this.props.savePreferences({destinationPreferences:{},customPreferences:e,cookieDomain:this.props.cookieDomain})
window.location.reload()}}render(){return this.props.children({destinations:[],preferences:this.preferences,isConsentRequired:this.isConsentRequired,saveConsent:this.handleSaveConsent})}}function getCookieDomain(){return window.location.hostname}function reconcileSegmentPreferences(e){e[s.GOOGLE_TAG_MANAGER]&&!e[s.GOOGLE_ANALYTICS]&&(e={...e,[s.GOOGLE_TAG_MANAGER]:!1})
return e}function mapCustomPreferences({destinations:e,preferences:t}){let n={}
for(const i of e)n[i.id]=t[i.id]!==a.EXPLICIT_DISAGREE
n=reconcileSegmentPreferences(n)
return{destinationPreferences:n,customPreferences:t}}class CookieConsentManagerContainer extends r.Component{constructor(){super(...arguments)
this._isMounted=!1
this.state={isReady:!1,BuilderComponent:NonSegmentConsentManagerBuilder}}async componentDidMount(){this._isMounted=!0
const{loadPreferences:e,savePreferences:t}=await n.e(396).then(n.bind(n,97396)),a=await n.e(972).then(n.bind(n,106972)),i=await Promise.all([n.e(972),n.e(427)]).then(n.bind(n,252427))
!function repairSavedPreferences({loadPreferences:e,savePreferences:t}){const{destinationPreferences:n,customPreferences:a}=e()
if(!n)return
const i=reconcileSegmentPreferences(n)
i!==n&&t({destinationPreferences:i,customPreferences:a,cookieDomain:getCookieDomain()})}({loadPreferences:e,savePreferences:t})
const s=await async function testSegmentAccessible(e){if(!g.ZP.ENABLE_SEGMENT_ANALYTICS_JS)return!1
try{await e([g.ZP.SEGMENT_WRITE_KEY])
return!0}catch(e){return!1}}(a)
this._isMounted&&this.setState({isReady:!0,BuilderComponent:s?i:NonSegmentConsentManagerBuilder,loadPreferences:e,savePreferences:t})}componentWillUnmount(){this._isMounted=!1}render(){const{isReady:e,BuilderComponent:t,loadPreferences:n,savePreferences:a}=this.state
return window._IS_LEGAL_PAGE||window._IS_INTERNAL_ADMIN_PAGE?null:e?r.createElement(t,{loadPreferences:n,savePreferences:a,writeKey:g.ZP.SEGMENT_WRITE_KEY,shouldRequireConsent:()=>window.location.search.includes("require-consent-manager")||l()(),mapCustomPreferences,cookieDomain:getCookieDomain()},(e=>r.createElement(v,{...e}))):null}}var M=n(676276)
function mountCookieConsentManager(){!function resetInvalidTrackingPreferencesCookie(){"benchling.com"!==window.location.host&&(document.cookie="tracking-preferences=; domain=.benchling.com; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")}()
const e=document.createElement("div")
document.body.appendChild(e)
M.A9(r.createElement(CookieConsentManagerContainer,null),e)}},767994:(e,t,n)=>{n.d(t,{Z:()=>reduceCookieConsentModal})
var a=n(376068)
const i={isOpen:!1}
function reduceCookieConsentModal(e=i,t){switch(t.type){case a.Ld.COOKIE_CONSENT_MODAL_OPEN:return{...e,isOpen:!0}
case a.Ld.COOKIE_CONSENT_MODAL_CLOSE:return{...e,isOpen:!1}
default:return e}}},915241:(e,t,n)=>{n.d(t,{j:()=>a})
var a
!function(e){e.SUCCESS="success"
e.FAILURE="failure"}(a||(a={}))},255044:(e,t,n)=>{n.d(t,{Z:()=>JellyfishListingRenderer})
var a=n(989526),i=n(581210),s=n(351319),r=n(402360),o=n(459830),l=n(318311),c=n(62315),d=n(89635),u=n(36424),p=n(214918)
class JellyfishListingRenderer{renderIcon(){return a.createElement(u.Z,{icon:o.JELLYFISH,className:"scrollableTable-cell-icon"})}getColumnConfigurations(e,{starredItemsByObjectId:t}){return[{column:{accessorKey:l.dC.ID,header:(0,d.o7)(c.bo.SORT_IDENTIFIER_KEY),flexGrow:1,isSortable:!0,sortKey:c.bo.SORT_IDENTIFIER_KEY,width:200},render:e=>a.createElement("span",{key:"name",className:"sidepanel-primaryLabel"},e.name,a.createElement("span",{className:"u-mini-spacing-left"},a.createElement(r.Z,{item:e})))},{column:{header:(0,d.o7)(c.bo.SORT_STARRED),accessorKey:l.dC.STAR,isCollapsible:!1,isSortable:!0,sortKey:c.bo.SORT_STARRED,width:70},render:e=>t&&(0,i.Id)(e)&&a.createElement(s.ZP,{item:e,isStarred:t[e.id]})},{column:{accessorKey:l.dC.CREATED_AT,header:(0,d.o7)(c.bo.SORT_CREATED_AT_KEY),flexGrow:1,isSortable:!0,sortKey:c.bo.SORT_CREATED_AT_KEY},render:e=>a.createElement(p.h,{datetime:e.createdAt,showTimeInCell:!1})},{column:{accessorKey:l.dC.MODIFIED_AT,header:(0,d.o7)(c.bo.SORT_MODIFIED_AT_KEY),flexGrow:1,isSortable:!0,sortKey:c.bo.SORT_MODIFIED_AT_KEY},render:e=>a.createElement(p.h,{datetime:e.modifiedAt,showTimeInCell:!1})}]}getRowContentHeight(e){return 40}openContextMenu(e,t,n){}}},864870:(e,t,n)=>{n.d(t,{ZP:()=>E})
var a=n(769784),i=n(440281),s=n.n(i),r=n(15655),o=n(459830),l=n(514927),c=n(892931),d=n(91092),u=n(432128),p=n(586704)
const m=a.Ps`
  query JellyfishFileStateQuery($fileId: StrictString!) @skipAudit @engComponent(name: CORE_OBJECT) {
    jellyfish(id: $fileId) {
      ...BaseFolderItemFileGraphQL
      ...JellyfishFileStateGraphQL
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,d.f)("JellyfishFileState").fragment}
  ${(0,d.f)("BaseFolderItemFile").fragment}
  ${(0,d.f)("InaccessibleInfo").fragment}
`
class Jellyfish extends c.Z{getQueryWrapper(){return{query:m}}queryVariables(){return{fileId:this.id}}getGraphQLFolderItemFromQueryData(e){return e.jellyfish}getUpdatedQueryData(e){return{jellyfish:{...this.graphQLFolderItem(),...e}}}}class JellyfishFileState extends l.Z{static initClass(){this.prototype.hasNote=!1}defaults(){return{...super.defaults(),toolbar:new(s().Model),statusbar:new r.C6}}hasMetadata(){return!0}initialize(e,t){super.initialize(e,t)
const n=new p.Z({id:this.id})
this.buffers().at(0).tabs().add(n)
this.buffers().at(0).tabs().add(this.metadataTab)
n.set({active:!0})
const a=u.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null!=a&&a)}}JellyfishFileState.Model=Jellyfish
JellyfishFileState.fileType=o.JELLYFISH
JellyfishFileState.initClass()
const E=JellyfishFileState},586704:(e,t,n)=>{n.d(t,{Z:()=>JellyfishTabState})
var a=n(766455)
class JellyfishTabState extends a.Xh{defaults(){return{...super.defaults(),title:"Jellyfish",closeable:!1,preferenceKey:"jellyfish"}}}},188663:(e,t,n)=>{n.d(t,{J:()=>s,i:()=>r})
var a=n(442058),i=n(358630)
const s=a.C1,r=i.z},581210:(e,t,n)=>{n.d(t,{yC:()=>asCoreObject,Xk:()=>asCoreObjectId,QL:()=>doesObjectHaveCapability,gy:()=>doesObjectTypeHaveCapability,Kq:()=>getApiBaseForObjectType,mq:()=>getCapabilitiesForModelType,Dw:()=>getCoreObjectIds,uB:()=>getCoreObjectsWithCapability,Mx:()=>getModelTypeConstantForObjectType,tQ:()=>getObjectType,Y2:()=>getObjectTypeForModelTypeConstant,$S:()=>getObjectTypesWithCapability,Id:()=>isCoreObject,Dj:()=>isCoreObjectWithCapability})
var a=n(232606),i=n(311950),s=n(188663)
const r={[s.i.CAN_EDIT_WORKFLOW_SCHEMA_FIELD_VALUES]:new Set([s.J.WORKFLOW_OUTPUT_SCHEMA,s.J.WORKFLOW_TASK_SCHEMA]),[s.i.COLLABORATABLE]:new Set([s.J.ENTITY_SCHEMA,s.J.ENTRY,s.J.FEATURE_LIBRARY,s.J.FOLDER,s.J.PROJECT,s.J.REGISTRY,s.J.RESULT_SCHEMA,s.J.RUN_SCHEMA,s.J.TEMPLATE_COLLECTION,s.J.WORKLIST]),[s.i.CORE_OBJECT_ARCHIVABLE]:new Set([s.J.DATASET,s.J.FILE,s.J.JELLYFISH,s.J.PROCEDURE,s.J.PROCEDURE_BATCH,s.J.PROCEDURE_FLOWCHART,s.J.PROCEDURE_FLOWCHART_VERSION,s.J.PROCEDURE_METHOD_DEFINITION,s.J.PROCEDURE_METHOD_DEFINITION_VERSION,s.J.PROCEDURE_METHOD_EXECUTION_INSTANCE,s.J.PROCEDURE_PLAN,s.J.PROCEDURE_RUN,s.J.PROCEDURE_STEP_EXECUTION_INSTANCE,s.J.STUDY,s.J.TENTACLE,s.J.UNIT,s.J.WORKSHEET]),[s.i.DATA_CATALOG_ITEM]:new Set([s.J.DATASET,s.J.FILE]),[s.i.HAS_CUSTOM_FIELDS]:new Set([s.J.AA_SEQUENCE,s.J.CUSTOM_ENTITY,s.J.DATASET,s.J.DNA_OLIGO,s.J.DNA_SEQUENCE,s.J.ENTRY,s.J.FILE,s.J.MIXTURE,s.J.MOLECULE,s.J.RNA_OLIGO,s.J.RNA_SEQUENCE,s.J.STAGE_ENTRY]),[s.i.STARRABLE]:new Set([s.J.DATASET,s.J.ENTRY,s.J.FILE,s.J.FOLDER,s.J.JELLYFISH]),[s.i.STUDYABLE]:new Set([s.J.AA_SEQUENCE,s.J.BOX,s.J.CONTAINER,s.J.CUSTOM_ENTITY,s.J.DATASET,s.J.DNA_OLIGO,s.J.DNA_SEQUENCE,s.J.ENTRY,s.J.FILE,s.J.PLATE,s.J.RNA_OLIGO,s.J.RNA_SEQUENCE,s.J.WORKFLOW_TASK])},o={[s.J.AA_SEQUENCE]:"/1/api/proteins",[s.J.BOX]:"/1/api/boxes",[s.J.CONTAINER]:"/1/api/containers",[s.J.CUSTOM_ENTITY]:"/1/api/custom-entities",[s.J.CUSTOM_SCHEMA_INTERFACE]:"/1/api/custom-schema-interfaces",[s.J.DATASET]:"/1/api/datasets",[s.J.DNA_OLIGO]:"/1/api/sequences",[s.J.DNA_SEQUENCE]:"/1/api/sequences",[s.J.DOCUMENT]:"/1/api/documents",[s.J.ENTITY_SCHEMA]:"/1/api/entity-schemas",[s.J.ENTRY]:"/1/api/entries",[s.J.FEATURE_LIBRARY]:"/1/api/feature-libraries",[s.J.FILE]:"/1/api/files",[s.J.FOLDER]:"/1/api/folders",[s.J.JELLYFISH]:"/1/api/jellyfishes",[s.J.MIXTURE]:"/1/api/mixtures",[s.J.MOLECULE]:"/1/api/molecules",[s.J.PLATE]:"/1/api/plates",[s.J.PROCEDURE]:"/1/api/procedures",[s.J.PROCEDURE_BATCH]:"/1/api/procedure-batches",[s.J.PROCEDURE_FLOWCHART]:"/1/api/procedure-flowcharts",[s.J.PROCEDURE_FLOWCHART_VERSION]:"/1/api/procedure-flowchart-versions",[s.J.PROCEDURE_METHOD_DEFINITION]:"/1/api/procedure-method-definitions",[s.J.PROCEDURE_METHOD_DEFINITION_VERSION]:"/1/api/procedure-method-definition-versions",[s.J.PROCEDURE_METHOD_EXECUTION_INSTANCE]:"/1/api/procedure-method-execution-instances",[s.J.PROCEDURE_PARAMETER]:"/1/api/procedure-parameters",[s.J.PROCEDURE_PARAMETER_CONFIRMATION_VALUE]:"/1/api/procedure-parameter-confirmation-values",[s.J.PROCEDURE_PARAMETER_VERSION]:"/1/api/procedure-parameter-versions",[s.J.PROCEDURE_PLAN]:"/1/api/procedure-plans",[s.J.PROCEDURE_RUN]:"/1/api/procedure-runs",[s.J.PROCEDURE_STEP_DEFINITION_VERSION]:"/1/api/procedure-step-definition-versions",[s.J.PROCEDURE_STEP_EXECUTION_INSTANCE]:"/1/api/procedure-step-execution-instances",[s.J.PROJECT]:"/1/api/projects",[s.J.QUANTITY]:"/1/api/quantities",[s.J.REGISTRY]:"/1/api/registries",[s.J.REQUEST_SCHEMA]:"/1/api/request-schemas",[s.J.RESULT]:"/1/api/results",[s.J.RESULT_SCHEMA]:"/1/api/result-schemas",[s.J.RNA_OLIGO]:"/1/api/sequences",[s.J.RNA_SEQUENCE]:"/1/api/sequences",[s.J.RUN_SCHEMA]:"/1/api/run-schemas",[s.J.STAGE_ENTRY]:"/1/api/stage-entries",[s.J.STAR]:"/1/api/stars",[s.J.STUDY]:"/1/api/studies",[s.J.SYSTEM_SCHEMA_INTERFACE]:"/1/api/system-schema-interfaces",[s.J.TEMPLATE_COLLECTION]:"/1/api/template-collections",[s.J.TENTACLE]:"/1/api/tentacles",[s.J.UNIT]:"/1/api/units",[s.J.USER]:"/1/api/users",[s.J.WORKFLOW_OUTPUT]:"/1/api/process-outputs",[s.J.WORKFLOW_OUTPUT_SCHEMA]:"/1/api/process-output-schemas",[s.J.WORKFLOW_TASK]:"/1/api/process-tasks",[s.J.WORKFLOW_TASK_GROUP]:"/1/api/processes",[s.J.WORKFLOW_TASK_SCHEMA]:"/1/api/process-task-schemas",[s.J.WORKLIST]:"/1/api/worklists",[s.J.WORKSHEET]:"/1/api/worksheets"}
var l=n(442058)
const c={assaysch:e=>s.J.RUN_SCHEMA,seq:e=>s.J.DNA_SEQUENCE,src:e=>s.J.PROJECT}
function getObjectTypePrefix(e){const t=e.indexOf("_")
if(-1!==t){const n=e.slice(0,t)
return l.Ac.hasOwnProperty(n)?n:null}return null}function isCoreObjectId(e){return null!=getObjectTypePrefix(e)}function asCoreObjectId(e){(0,a.hu)(isCoreObjectId(e),`Expected ${e} to be a valid core object id`)
return e}function isCoreObject(e){return null!=(null==e?void 0:e.id)&&isCoreObjectId(e.id)}function asCoreObject(e){(0,a.hu)(isCoreObject(e),`Expected ${e} to be a valid core object`)
return e}function getCoreObjectIds(e){return e.filter((e=>isCoreObjectId(e)))}function getObjectType(e){const t=getObjectTypePrefix(e.id);(0,a.hu)(null!=t,`Invalid prefix for object with id ${e.id}`)
const n=Array.from(l.Ac[t])
if(1===n.length)return n[0]
if(null!=c[t]&&null!=e)return c[t](e)
throw Error(`Encountered prefix representing ambiguous types without disambiguation function defined - ${t}: ${n}`)}function getModelTypeConstantForObjectType(e){return i.l[e]}function getObjectTypeForModelTypeConstant(e){return i.b[e]}function isCoreObjectWithCapability(e,t){return isCoreObject(e)&&doesObjectHaveCapability(e,t)}function getCoreObjectsWithCapability(e,t){return function getCoreObjects(e){return e.filter((e=>isCoreObject(e)))}(e).filter((e=>doesObjectHaveCapability(e,t)))}function getObjectTypesWithCapability(e){return r[e]}function doesObjectTypeHaveCapability(e,t){return getObjectTypesWithCapability(t).has(e)}function getCapabilitiesForModelType(e){const t=getObjectTypeForModelTypeConstant(e)
return t?function getCapabilitiesForObjectType(e){const t=[]
for(const n of Object.keys(s.i))r[n].has(e)&&t.push(n)
return t}(t):[]}function doesObjectHaveCapability(e,t){return doesObjectTypeHaveCapability(getObjectType(e),t)}const d={...o,[s.J.BOX]:"/1/api/grids",[s.J.CUSTOM_ENTITY]:"/1/api/basic-folder-items",[s.J.DNA_OLIGO]:"/1/api/sequences",[s.J.DNA_SEQUENCE]:"/1/api/sequences",[s.J.ENTITY_SCHEMA]:"/1/api/tag-schemas",[s.J.PLATE]:"/1/api/grids",[s.J.PROJECT]:"/1/api/sources",[s.J.REGISTRY]:"/1/api/sources",[s.J.REQUEST_SCHEMA]:"/1/api/assay-schemas",[s.J.RESULT]:"/1/api/assay-results",[s.J.RESULT_SCHEMA]:"/1/api/assay-schemas",[s.J.RNA_OLIGO]:"/1/api/sequences",[s.J.RNA_SEQUENCE]:"/1/api/sequences",[s.J.RUN_SCHEMA]:"/1/api/assay-schemas",[s.J.CUSTOM_SCHEMA_INTERFACE]:"/1/api/schema-interfaces"}
function getApiBaseForObjectType(e){return d[e]}},491355:(e,t,n)=>{n.d(t,{E$:()=>getPlatformConfiguration,O$:()=>getPlatformConfigForItemType,Zv:()=>p,iN:()=>d,ml:()=>isStudyableConfiguration})
var a=n(232606),i=n(256605),s=n(973538),r=n(188663)
function getPlatformConfigKey(e,t){return`${e}-${t}`}function getPlatformConfigForItemType(e,t){return m[getPlatformConfigKey(e,t)]}const o={[r.i.STUDYABLE]:i.Nk.IS_STUDYABLE,[r.i.CORE_OBJECT_ARCHIVABLE]:i.Nk.IS_DIRECTLY_ARCHIVEABLE,[r.i.CAN_EDIT_WORKFLOW_SCHEMA_FIELD_VALUES]:i.Nk.CAN_EDIT_SCHEMA_FIELDS},l={[r.J.WORKFLOW_TASK]:e=>{var t
return null===(t=e.schema)||void 0===t?void 0:t.executionType},[r.J.WORKFLOW_TASK_GROUP]:e=>{var t
return null===(t=e.processTaskSchema)||void 0===t?void 0:t.executionType},[r.J.WORKFLOW_OUTPUT]:e=>{var t
return null===(t=e.schema)||void 0===t?void 0:t.processExecutionType},[r.J.WORKFLOW_TASK_SCHEMA]:e=>e.executionType,[r.J.WORKFLOW_OUTPUT_SCHEMA]:e=>e.processExecutionType}
function getProcessConfiguration(e,t){return{__capabilityType:t,isPlatformCapabilityEnabledForItemInstance:n=>{const i=l[e](n)
return null==i||!!(0,a.Gp)(null!=o[t],"capability must be mapped to process feature type")&&(0,s.v)(o[t],i)}}}const c=Object.keys(o).reduce(((e,t)=>{for(const n of Object.keys(l))e[getPlatformConfigKey(t,n)]=getProcessConfiguration(n,t)
return e}),{})
function isStudyableConfiguration(e){return(null==e?void 0:e.__capabilityType)===r.i.STUDYABLE}const d={__capabilityType:r.i.STUDYABLE,isPlatformCapabilityEnabledForItemInstance:()=>!0},u={__capabilityType:r.i.STUDYABLE,isPlatformCapabilityEnabledForItemInstance:e=>(0,a.Gp)(void 0!==e.isFixedPlateWell,"Item instance must be a Container with isFixedPlateWell defined")&&!e.isFixedPlateWell},p={__capabilityType:r.i.CORE_OBJECT_ARCHIVABLE,isPlatformCapabilityEnabledForItemInstance:()=>!0},m={[getPlatformConfigKey(r.i.STUDYABLE,r.J.CONTAINER)]:u,...c}
function getPlatformConfiguration(e,t,n){const i=getPlatformConfigForItemType(e,t)
if(null==i)return n;(0,a.hu)(i.__capabilityType===e,`Expected platform configuration to be for capability ${e} got ${i.__capabilityType}`,{maybeConfig:i})
return i}},347246:(e,t,n)=>{n.d(t,{Z:()=>refreshListings})
var a=n(294120),i=n(166459),s=n(627259)
function refreshListings(){for(const e of Object.values(a.SA))(0,i.getStore)().dispatch((0,s.KM)(e))}},112526:(e,t,n)=>{n.d(t,{R:()=>unstarItems,t:()=>starItems})
var a=n(188663),i=n(581210),s=n(788836),r=n(771398)
function getIds(e){return e.map((({id:e})=>e))}function starItems(e){return r.s0({url:(0,i.Kq)(a.J.STAR),data:{objectIds:getIds(e),userId:s.Z.currentUser().id}})}function unstarItems(e){return r.WY({url:(0,i.Kq)(a.J.STAR),data:{objectIds:getIds(e),userId:s.Z.currentUser().id}})}},478644:(e,t,n)=>{n.d(t,{e:()=>updateItemsOnArchive,k:()=>updateItemsOnUnarchive})
function updateItemArchiveRecords(e,t,n){const a={...e}
t.forEach((e=>{a[e]={...a[e],archiveRecord:n(e)}}))
return a}function updateItemsOnArchive(e,t,n){return updateItemArchiveRecords(e,t,(e=>n[e]))}function updateItemsOnUnarchive(e,t){return updateItemArchiveRecords(e,t,(()=>null))}},402360:(e,t,n)=>{n.d(t,{Z:()=>ArchiveRecordLabel})
var a=n(989526),i=n(157530),s=n(263137),r=n(382857)
function ArchiveRecordLabel(e){return(0,r.ZP)(e.item)?a.createElement("span",{className:"faded",...(0,s.Z)({component:"ArchiveRecordLabel",element:"archiveRecordLabelText"})}," ","(",(0,i.Q)(e.item),")"):null}},282974:(e,t,n)=>{n.d(t,{Z:()=>ArchiveButton})
var a=n(989526),i=n(996447),s=n(868710),r=n(334148),o=n(317275)
function ArchiveButton({buttonStyle:e=r.ZJ.TERTIARY_BLUE,className:t,disabled:n,fullWidth:l,showText:c,tooltipTitle:d="Archive",...u}){return a.createElement(s.ZP,{title:d},a.createElement(r.Co,{buttonStyle:e,className:t,disabled:n,fullWidth:l,icon:"archive",onClick:e=>{var t
u.onClickTracking&&u.onClickTracking()
if("onClick"in u)u.onClick(e)
else{e.stopPropagation()
i.bA({...(0,o.Z)(u,"initialPurpose","items","onArchive","shouldDetectShortcuts"),analyticsMetadata:null===(t=u.getAnalyticsMetadata)||void 0===t?void 0:t.call(u)})}},size:r.qE.SMALL,text:c?"Archive":null,dataTestAttrs:{component:"ArchiveButton",element:"root"}}))}},367780:(e,t,n)=>{n.d(t,{Z:()=>ArchiveOrUnarchiveButton})
var a=n(989526),i=n(323570),s=n(382857),r=n(977043),o=n(334148),l=n(379346),c=n(282974),d=n(331845)
function ArchiveOrUnarchiveButton(e){const t={className:e.className,fullWidth:e.fullWidth,showText:e.showText,getAnalyticsMetadata:e.getAnalyticsMetadata}
if((0,s.ZP)(e.item)&&e.isUnarchivable)return a.createElement(d.Z,{...t,buttonStyle:e.buttonStyle||o.ZJ.SECONDARY,itemIds:[e.item.id],onUnarchive:e.onUnarchive,unarchiveOptions:{hasRegisteredItems:l.ZP.isBiologicalEntity(e.item.id)&&r.vU(e.item)},tooltipTitle:e.unarchiveTooltipTitle})
if(!(0,s.ZP)(e.item)&&(0,i.Z)(e.item)&&e.isArchivable){const n=e.archiveButtonClass
return a.createElement(n,{...t,buttonStyle:e.buttonStyle||o.ZJ.NEGATIVE,items:[e.item],onArchive:e.onArchive,tooltipTitle:e.archiveTooltipTitle})}return null}ArchiveOrUnarchiveButton.defaultProps={archiveButtonClass:c.Z,fullWidth:!1,isArchivable:!1,isUnarchivable:!1,showText:!1}},331845:(e,t,n)=>{n.d(t,{Z:()=>UnarchiveButton})
var a=n(989526),i=n(17086),s=n(868710),r=n(334148)
function UnarchiveButton({buttonStyle:e=r.ZJ.TERTIARY_BLUE,className:t,disabled:n,fullWidth:o,showText:l,tooltipTitle:c="Unarchive",...d}){return a.createElement(s.ZP,{title:c,disabled:n},a.createElement(r.Co,{buttonStyle:e,className:t,disabled:n,fullWidth:o,icon:"unarchive",onClick:e=>{var t
d.onClickTracking&&d.onClickTracking()
i.S8({analyticsMetadata:null===(t=d.getAnalyticsMetadata)||void 0===t?void 0:t.call(d)},null,(()=>{"onClick"in d?d.onClick(e):null!=d.unarchiveOptions?d.onUnarchive(d.itemIds,d.unarchiveOptions):d.onUnarchive(d.itemIds)}))},size:r.qE.SMALL,text:l?"Unarchive":null,dataTestAttrs:{component:"UnarchiveButton",element:"root"}}))}},206556:(e,t,n)=>{n.d(t,{Z:()=>A})
var a=n(764403),i=n.n(a),s=n(769784),r=n(989526),o=n(531041),l=n(348920),c=n(459830),d=n(751512),u=n(697134),p=n(383628),m=n(103593),E=n(59860),h=n(868710),g=n(476604),S=n(314670),_=n(801455),T=n(379346)
const I=s.ZP`
  query InventoryArchiveSettingQuery @skipAudit @engComponent(name: INVENTORY) {
    inventoryConfig {
      ... on InventoryConfigNode {
        id
        enableArchiveEntityInContainerOption
      }
      ... on InaccessibleInfoNode {
        invalidId
        canRequestAccess
      }
    }
  }
`
function ArchiveStorablesOption(e){const t=o.default.uniq(e.items.map((e=>T.ZP.apiIdToType(e.id)))),n=t.some((e=>[c.BOX,c.LOCATION,c.PLATE].includes(e))),a=t.some((e=>e===c.CONTAINER))
return r.createElement("div",{className:i()({"u-spacing-top":l.ZP.ARCHIVE_ENABLE_REMOVE_BARCODES_OPTION||a})},l.ZP.ARCHIVE_ENABLE_REMOVE_BARCODES_OPTION&&r.createElement(E.Z,null,r.createElement(m.Z,{md:12},r.createElement("div",null,r.createElement("input",{checked:e.shouldRemoveBarcodes,id:"shouldRemoveBarcodes",onChange:t=>{e.onChange({shouldRemoveBarcodes:t.target.checked})},type:"checkbox"}),r.createElement("span",{className:"u-small-spacing-left"},e.shouldRemoveBarcodes&&n&&r.createElement(h.ZP,{title:"Removing barcodes from archived inventory that contain items will also remove barcodes from the contained items."},r.createElement(S.Z,{className:"u-tiny-spacing-right"})),r.createElement(_.Z,{className:"u-normal-font-weight",htmlFor:"shouldRemoveBarcodes",label:"Remove barcodes"}))))),e.shouldPresentArchiveEntityInContainerOption&&a&&r.createElement(E.Z,null,r.createElement(m.Z,{md:12},r.createElement("div",null,r.createElement("input",{checked:e.shouldArchiveContainedSamples,id:"shouldArchiveContainedSamples",onChange:t=>{e.onChange({shouldArchiveContainedSamples:t.target.checked})},type:"checkbox"}),r.createElement("span",{className:"u-small-spacing-left"},r.createElement(_.Z,{className:"u-normal-font-weight",htmlFor:"shouldArchiveContainedSamples",label:"Archive entities in containers"})))),e.shouldArchiveContainedSamples&&r.createElement(E.Z,null,r.createElement(m.Z,{md:12},r.createElement("div",{className:"u-small-spacing-top u-small-spacing-left u-small-spacing-right"},r.createElement(p.ZP,{bannerType:p.ct.INFO,text:"If an entity is stored in multiple containers, archiving the entity archives it in other containers."}))))))}function QueryingArchiveStorablesOption(e){const t=(0,d.IJ)(I)
if(t.type===d.NI.PENDING)return r.createElement(g.Z,null)
let n=!1
t.type!==d.NI.SUCCESS||(0,u.CZ)(t.data.inventoryConfig)||(n=Boolean(t.data.inventoryConfig.enableArchiveEntityInContainerOption))
return r.createElement(ArchiveStorablesOption,{...e,shouldPresentArchiveEntityInContainerOption:n})}QueryingArchiveStorablesOption.isEnabled=e=>e.some((e=>T.ZP.isStorable(e.id)))
QueryingArchiveStorablesOption.getDefaultState=()=>({shouldRemoveBarcodes:!1,shouldArchiveContainedSamples:!1})
const A=QueryingArchiveStorablesOption},192149:(e,t,n)=>{n.d(t,{e:()=>CheckableArchiveTable,Z:()=>ArchiveTable})
var a=n(989526),i=n(764403),s=n.n(i)
function getRowClassName(e,t){return s()({"u-faded u-strike-through":e.isShortcut&&t.shouldRemoveShortcuts})}var r=n(263137)
function ArchiveTableRowName({itemForArchive:e,options:t,dataTestAttrs:n}){return a.createElement("div",{className:getRowClassName(e,t),...(0,r.Z)(n)},e.name)}var o=n(348920),l=n(634489),c=n(477956),d=n(922805),u=n(849557),p=n(377249),m=n(36424),E=n(746242)
class ContainerArchiveTableRowTypeDataConnector extends l.C{enhanceProps(){return{container:this.getOrFetchRequired(p.V.STORABLE_SUMMARY,this.props.itemForArchive.id)}}}const h=ContainerArchiveTableRowTypeDataConnector.connect((function ContainerArchiveTableRowType({container:e,itemForArchive:t,options:n}){const i=t.isShortcut?E.Z:m.Z
return a.createElement("div",{className:getRowClassName(t,n)},a.createElement(i,{className:"faded",icon:t.iconId}),a.createElement("span",{className:"u-small-spacing-left"},t.friendlyTypeName),a.createElement(u.ZP,{className:"u-small-spacing-left",item:e,includeAvailability:o.ZP.INVENTORY_ENABLE_CHECK_IN_CHECK_OUT,includeAuthorization:(0,d.Eq)(c.F.V1),includeMessage:!0,renderAllStatuses:!1}))}))
var g=n(379346)
function ArchiveTableRowType({itemForArchive:e,options:t}){if(g.ZP.isContainer(e.id))return a.createElement(h,{itemForArchive:e,options:t})
const n=e.isShortcut?E.Z:m.Z
return a.createElement("div",{className:getRowClassName(e,t)},a.createElement(n,{className:"faded",icon:e.iconId}),a.createElement("span",{className:"u-small-spacing-left"},e.friendlyTypeName))}var S=n(776105),_=n(691383),T=n(457564)
function getColumns(e){return[T.Z.defaultColumn("Type","id",{render:(t,n)=>a.createElement(ArchiveTableRowType,{itemForArchive:n,options:e})}),T.Z.defaultColumn("Name","name",{render:(t,n)=>a.createElement(ArchiveTableRowName,{itemForArchive:n,options:e,dataTestAttrs:{component:"ArchiveTable",element:"rowName"}})})]}function ArchiveTable({itemsForArchive:e,options:t}){return a.createElement("div",{className:"archiveModal-table"},a.createElement(T.Z,{columns:getColumns(t),rows:function filterItemsForDisplay(e){return e.filter((e=>!e.isProjectRootFolder&&((0,S.Z)()||!g.ZP.isBatch(e.id))&&!g.ZP.isProcessSchema(e.id)))}(e),clickable:!1,selectable:!1,hoverable:!0,coloredHeader:!0,wrapCell:!0}))}function CheckableArchiveTable(e){const t=new Set(e.checkedRowIds)
return a.createElement("div",{className:"archiveModal-table"},a.createElement(_.Z,{columns:getColumns(e.options),rows:e.itemsForArchive.map((e=>({...e,checked:t.has(e.id)}))),clickable:!1,selectable:!1,hoverable:!0,coloredHeader:!0,wrapCell:!0,onChangeChecks:e.onChangeChecks}))}},392663:(e,t,n)=>{n.d(t,{Z:()=>getArchiveAwareDisplayName})
var a=n(382857)
function getArchiveAwareDisplayName(e){return`${e.name}${(0,a.ZP)(e)?" (archived)":""}`}},323570:(e,t,n)=>{n.d(t,{Z:()=>isArchivable})
var a=n(188663),i=n(581210),s=n(491355),r=n(348920),o=n(459830),l=n(379346)
function isArchivable(e){const t=(0,i.Id)(e)&&(0,i.QL)(e,a.i.CORE_OBJECT_ARCHIVABLE),n=r.ZP.ENABLE_ARCHIVING_V2&&function canHaveArchiveRecord(e){const t=l.ZP.apiIdToType(e)
return[...o.STORABLE_ITEMS,o.BASIC_FOLDER_ITEM,o.BULK_ASSEMBLY,o.ENTRY,o.FOLDER,o.MIXTURE,o.MOLECULE,o.PROCESS,o.PROTEIN,o.PROTOCOL,o.SEQUENCE,o.STUDY,o.SOURCE,o.ASSAY_RUN,o.BATCH,o.CONNECTION,o.PROCESS_TASK,o.PROCESS_OUTPUT,o.MONOMER,o.TEMPLATE,o.SUBTEMPLATE,o.TEMPLATE_COLLECTION,o.ANALYSIS].includes(t)}(e.id)
let c=!0
if((0,i.Id)(e)){const t=(0,i.tQ)(e)
c=(0,s.E$)(a.i.CORE_OBJECT_ARCHIVABLE,t,s.Zv).isPlatformCapabilityEnabledForItemInstance(e)}return(t||n)&&c}},382857:(e,t,n)=>{n.d(t,{Gh:()=>isArchivedGQL,Rj:()=>isArchivedREST,Vt:()=>isCoreObjectArchived,ZP:()=>isArchived})
var a=n(764677),i=n(232606)
function isArchivedREST(e){return Boolean(e.archiveRecord)}function isArchivedGQL(e){return(0,a.uv)(e.archiveRecord)}function isCoreObjectArchived(e){var t
return Boolean(null===(t=e.archiveData)||void 0===t?void 0:t.archived)}function isArchived(e){if(null==e){(0,i.Gp)(!1,"isArchived called with null")
return!1}return isCoreObjectArchived(e)||isArchivedREST(e)||isArchivedGQL(e)}},894833:(e,t,n)=>{n.d(t,{Z:()=>sortArchivedToLast})
function getArchiveRecord(e){return"archiveRecord"in e&&e.archiveRecord||null}function sortArchivedToLast(e){return[...e.filter((e=>!getArchiveRecord(e))),...e.filter((e=>Boolean(getArchiveRecord(e))))]}},397387:(e,t,n)=>{n.d(t,{ZP:()=>ImplementedEquipmentSchemaInterface,ox:()=>o,qh:()=>isEquipmentInterfaceImplementation})
var a=n(989526),i=n(459830),s=n(229329)
const r="ssi_equipment",o=[i.BASIC_FOLDER_ITEM]
function isEquipmentInterfaceImplementation(e){return e.interfaceId===r}function ImplementsEquipmentInterfaceCheckbox(e){return a.createElement(s.Z,{className:"u-tiny-spacing-bottom",id:"configure-equipment-checkbox",label:"Configure as equipment",checked:e.checked,onChange:e.onChange,disabled:e.disabled})}function ImplementedEquipmentSchemaInterface(e){const t=null!=e.config
return a.createElement(ImplementsEquipmentInterfaceCheckbox,{onChange:function onToggleConfiguration(){null==e.config?e.onUpdate({interfaceId:r}):e.onUpdate(null)},checked:t,disabled:!e.isWritable})}},901369:(e,t,n)=>{n.d(t,{Z:()=>G})
var a={}
n.r(a)
n.d(a,{addPrimerNameSuffixes:()=>addPrimerNameSuffixes,basePlugin:()=>p,getFlankingPrimers:()=>getFlankingPrimers,getJunctions:()=>getJunctions,validSpacerOrder:()=>validSpacerOrder})
var i={}
n.r(i)
n.d(i,{plugin:()=>h})
var s={}
n.r(s)
n.d(s,{findJunctionAtPosition:()=>findJunctionAtPosition,primerPlugin:()=>y,replacePrimerRegion:()=>replacePrimerRegion})
var r={}
n.r(r)
n.d(r,{designGibson:()=>designGibson,plugin:()=>M})
var o={}
n.r(o)
n.d(o,{StickyEnd:()=>StickyEnd,designGoldenGate:()=>designGoldenGate,plugin:()=>k,slotsToFragments:()=>slotsToFragments,stickyEndRanges:()=>stickyEndRanges,validateStickyEnds:()=>validateStickyEnds})
var l=n(531041),c=n(132814),d=n(48047),u=n(47984)
function getFlankingPrimers(e,t){if(!t.primerFlanked())return[null,null]
const n=e.primerPairs().get(t.primerPairID())
return null==n?[null,null]:n.getPrimers(e.sequencePrimers())}function getJunctions(e){const t=e.fragmentResults()
return t.map(((n,a)=>{const i=t.at((a+1)%t.length),[s,r]=Array.from(getFlankingPrimers(e,n)),[o,l]=Array.from(getFlankingPrimers(e,i))
return[n.end(),i.start(),o,r]}))}function validSpacerOrder(e){const t=e.map((e=>!e.isEmpty()&&null!=e.singleFragment().enzymeIDs()))
for(let n=0;n<e.models.length;n++){if(!e.models[n].isSpacer())continue
const a=0===n?e.length-1:n-1,i=(n+1)%e.length
if(t[a]&&t[i])return!1}return!0}function addPrimerNameSuffixes(e){const t=l.default.countBy(e.models,(e=>e.name())),n={}
e.each((e=>{const a=e.name()
if(!(t[a]<2)){a in n||(n[a]=0)
n[a]++
e.set({name:`${a} (${n[a]})`})}}))}const p={assemblyType:null,attachTabs(e,t){},checkAssembly(e){throw new Error("Did not expect checkAssembly to be called on basePlugin - make sure it's been implemented")},getFragmentResultPieces:e=>e.fragmentResults().map((e=>[e.color(),e.start(),e.end()])),isFlankingPrimer(e,t){if(e.finalized())return!1
e.primerPairs(),e.sequencePrimers()
return null!=e.fragmentResults().chain().map((t=>t.primerFlanked()?getFlankingPrimers(e,t):[])).flatten().compact().find((e=>e.id===t.id)).value()},canDelete:(e,t,n)=>!0,canEditSelection:(e,t,n)=>!0,canReplace:(e,t,n)=>!0,didDelete(e,t,n,a,i){},didInsert(e,t,n,a,i){},didReplace(e,t,n,a,i){},shouldOpenSequenceFiles:()=>!0},{ASSEMBLY_TYPE:m}=u,{basePlugin:E}=a
function _permuteWithRev(e,t){let n,a
if(0===e.length)return[[]]
if(1===e.length){n=e[0]
a=t.at(n).singleFragment().reverse()
return[[[e[0],a]],[[e[0],!a]]]}{const i=[]
for(const s of Array.from(_permuteWithRev(e.slice(1),t))){n=e[0]
a=t.at(n).singleFragment().reverse()
for(let t=0;t<e.length-1;t++){i.push(s.slice(0,t).concat([[n,a]]).concat(s.slice(t)))
i.push(s.slice(0,t).concat([[n,!a]]).concat(s.slice(t)))}}return i}}const h=l.default.extend({},E,{assemblyType:m.DIGEST,checkAssembly:function checkAssembly(e){const t=e.slots()
if(!t.all((e=>!!e.isEmpty()||null!=e.singleFragment().getSequence())))return{warnings:[],errors:[]}
const n=t.map((e=>{if(!e.isEmpty()){return e.singleFragment().getSequence().getFragments(e.singleFragment().enzymeIDs())}})),a=l.default.map(n,((e,n)=>{if(null!=e){const a=t.at(n).singleFragment(),i=a.start(),s=a.end()
return e.chain().map((e=>{let t
const n=e.get("start"),a=e.get("end")
i!==n?t=[n,__guard__(e.get("_cutter5"),(e=>e.name))]:s!==a&&(t=[a,__guard__(e.get("_cutter3"),(e=>e.name))])
if(null!=t&&c.isRangeWithin(n,a,i,s))return t})).without(void 0).head().value()}})),i=t.map(((e,t)=>{if(!e.isEmpty()){const a=n[t],i=e.singleFragment().getSelectedFragment(a)
e.set({sequenceFragment:i})
return i}})),s=l.default.map(i,(e=>null!=e?e.cloneReverseComplement():void 0)),doCutsMatch=(e,n)=>__range__(0,t.length,!1).map((a=>{const r=0===a?t.length-1:a-1,o=(a+1)%t.length
function getFragment(e){return e[1]?s[e[0]]:i[e[0]]}const l=getFragment(e[r]),c=getFragment(e[o]),u=getFragment(e[a]),p=d.stickyCompatible(l,u),m=d.stickyCompatible(u,c)
if(n){t.at(a).set({prevMatched:p,nextMatched:m,thisFragment:u,prevFragment:l,nextFragment:c})}return[p,m]})),r=l.default.map(__range__(0,t.length,!1),(e=>{const n=t.at(e)
return[e,n.isEmpty()?null:n.singleFragment().reverse()]})),invalidCutSites=e=>!e.isEmpty()&&null==e.get("thisFragment"),o=doCutsMatch(r,!0)
t.each(((e,t)=>{const n=[],i=[]
invalidCutSites(e)&&i.push("Selected cut sites are no longer valid - reset slot to continue.")
if(null!=a[t]){let[i,s]=Array.from(a[t])
i=c.modelToDisplay(i,e.singleFragment().getSequence().startIndex())
const r=`${s} has a cut site in the middle at position ${i}.`
n.push(r)}const[s,r]=Array.from(o[t])
s||i.push("The left sticky end does not match.")
r||i.push("The right sticky end does not match.")
e.set({warnings:n,errors:i})}))
const u=[],p=[]
if(t.all((e=>!e.isEmpty()))){l.default.chain(o).flatten().all().value()||p.push("Sticky ends are mismatched.")
const m=l.default.chain(_permuteWithRev(__range__(0,t.length,!1),t)).initial().rest().value(),E=l.default.map(m,(e=>l.default.chain(doCutsMatch(e,!1)).flatten().all().value())),h=l.default.find(__range__(0,m.length,!1),(e=>E[e]))
if(null!=h){const g=m[h]
function getName(e){const[t,n]=Array.from(e),a=0===t?"backbone":`insert #${t}`
return n?`reversed ${a}`:a}const S=l.default.find(__range__(0,g.length,!1),(e=>0===g[e][0])),_=l.default.map(__range__(0,g.length,!1),(e=>{const t=(S+e)%g.length
return getName(g[t])})).join(", ")
u.push(`An alternative ordering (${_}) has matching sticky ends.`)}}else p.push("The backbone or an insert is unset.")
l.default.chain(i).map((e=>null!=e&&(0===e.get("offset5")||0===e.get("offset3")))).any().value()&&u.push("You are using blunt ends.")
for(const T of Array.from(t.models))if(invalidCutSites(T)){p.push("One or more slots have invalid cut sites.")
break}return{errors:p,warnings:u}}})
function __guard__(e,t){return null!=e?t(e):void 0}function __range__(e,t,n){const a=[],i=e<t,s=n?i?t+1:t-1:t
for(let t=e;i?t<s:t>s;i?t++:t--)a.push(t)
return a}var g=n(250965),S=n.n(g),_=n(232606)
const{basePlugin:T,getFlankingPrimers:I,getJunctions:A}=a,{ASSEMBLY_TYPE:f}=u
function replacePrimerRegion(e,t,n,a,i,s){const r=t.bases(),o=c.distance(a,i,e.length(),e.circular()),l=c.distance(a,s,e.length(),e.circular())
return r.slice(0,o)+n+r.slice(l)}function protectPrimerEnds(e,t,n,a,i){(0,_.hu)(t!==n,`protectPrimerEnds called on start = ${t} and end = ${n}`)
const s=t,r=n
null!=a&&(n=c.mod(n-1,e.length()))
null!=i&&(t=c.mod(t+1,e.length()))
return c.isWrap(s,r)!==c.isWrap(t,n)?null:[t,n]}function findJunctionAtPosition(e,t){return l.default.find(A(e),(n=>{const[a,i]=Array.from(n)
return c.baseInRange(t,a,c.mod(i+1,e.length()))}))}const y=l.default.extend({},T,{_getTwoPrimerJunctionRanges(e,t,n){throw new Error("Did not expect _getTwoPrimerJunctionRanges to be called on primerPlugin - make sure it's been implemented")},_editableRanges(e){const t=e.fragmentResults()
return t.chain().map(((n,a)=>{const i=t.at((a+1)%t.length),[s,r]=Array.from(I(e,n)),[o,c]=Array.from(I(e,i)),d=null!=r&&null!=o?this._getTwoPrimerJunctionRanges(e,o,r):null!=o?[[n.end(),o.end()]]:null!=r?[[r.start(),i.start()]]:[]
return l.default.map(d,((...e)=>{const[t,a]=Array.from(e[0])
return[t,a,o,r,n.end(),i.start()]}))})).flatten(!0).value()},_findDeleteRange(e,t,n){return l.default.find(this._editableRanges(e),(a=>{let[i,s,r,o,l,d]=Array.from(a)
const u=protectPrimerEnds(e,i,s,r,o)
if(null==u)return!1;[i,s]=Array.from(u)
if(c.isRangeWithin(t,n,i,s)){const a=c.mod(l-1,e.length()),i=c.mod(d+1,e.length())
return c.isRangeOverlap(a,i,t,n)}return!1}))},_findReplaceRange(e,t){return l.default.find(this._editableRanges(e),(n=>{let[a,i,s,r,o,l]=Array.from(n)
const d=protectPrimerEnds(e,a,i,s,r)
if(null==d)return!1;[a,i]=Array.from(d)
return c.isRangeWithin(t.modelStart(),t.modelEnd(),a,i)}))},_canInsert(e,t,n){throw new Error("Did not expect _canInsert to be called on primerPlugin - make sure it's been implemented")},_canInitiateReplace(e,t,n){if(null!=this._findReplaceRange(e,t))return!0
e.assemblyType()===f.GOLDEN_GATE?n("To replace bases that aren't under a primer's binding bases, finalize the sequence from the results tab."):n("To replace bases outside junctions, finalize the sequence from the results tab.")
return!1},canEditSelection(e,t,n){return!!e.finalized()||(t.isEmpty()?this._canInsert(e,t,n):this._canInitiateReplace(e,t,n))},canReplace(e,t,n,a){if(e.finalized())return!0
const i=this._findReplaceRange(e,t)
if(null==i){a("To replace bases outside junctions, finalize the sequence from the results tab.")
return!1}const[s,r,o,l]=Array.from(i)
if(null==o&&null==l)return!0
if(c.distance(t.modelStart(),t.modelEnd(),e.length(),e.circular())===n.length)return!0
a("Replacement bases in regions must be the same length as the selection.")
return!1}})
var C=n(812651),R=n(955836),b=n(921554)
n(432128),n(650858)
const{findJunctionAtPosition:N,primerPlugin:O,replacePrimerRegion:L}=s,{addPrimerNameSuffixes:P,validSpacerOrder:D}=a,{ASSEMBLY_TYPE:v}=u
function gibsonPrimerDesign(e,t,n){null==n&&(n={})
let a="",i=""
if(t.length<n.minOverlap||e.length<n.minOverlap||n.maxOverlap<n.minOverlap)return[]
const s=Math.min(t.length,n.maxOverlap),r=Math.min(e.length,n.maxOverlap)
return l.default.chain(_gibson_range_(n.minOverlap,s+1,!1)).map((s=>{i=t.slice(0,s)
const o=d.meltingTemperature(i,R.Wy.DNA)
return o<n.tmAnneal?[]:l.default.chain(_gibson_range_(n.minOverlap,r+1,!1)).map((t=>{a=e.slice(e.length-t)
const s=a+i
return d.meltingTemperature(s,R.Wy.DNA)>=n.tmWhole?{bases:s,bindingTm:o,down_overlap:i.length}:null})).without(null).value()})).flatten(!0).sortBy((e=>e.bases.length)).value()}function _getOverlapForDesign(e,t,n){return n?Math.max(t.length,e):t.length+e}function designGibson(e,t,n){let a,i,s
const r=l.default.map(e,(e=>e.cloneReverseComplement())),o=l.default.map(_gibson_range_(0,e.length,!1),(a=>{const i=(a+1)%e.length,s=0===a?e.length-1:a-1,o=(null!=t[s]?t[s].bases():void 0)||"",c=!e[s].has("_cutter3"),u=l.default.extend({},n,{minOverlap:_getOverlapForDesign(n.minOverlap,o,c),maxOverlap:_getOverlapForDesign(n.maxOverlap,o,c)}),p=gibsonPrimerDesign(e[s].bases()+o,e[a].bases(),u),m=(null!=t[a]?t[a].bases():void 0)||"",E=!e[i].has("_cutter5"),h=l.default.extend({},n,{minOverlap:_getOverlapForDesign(n.minOverlap,m,E),maxOverlap:_getOverlapForDesign(n.maxOverlap,m,E)}),g=gibsonPrimerDesign(r[i].bases()+d.revcomp(m,R.jb),r[a].bases(),h),S=[]
for(const e of Array.from(p))for(const t of Array.from(g))Math.abs(e.bindingTm-t.bindingTm)<=n.tmDiff&&S.push([e,t])
if(0===S.length)return null
const _=l.default.min(S,(e=>e[0].bases.length+e[1].bases.length))
return{forward:_[0],reverse:_[1]}}))
for(const e of Array.from(o))if(null==e)return
let u=new C.Sequence,p=(()=>{let n
const r=[]
for([a,n]of Array.from(l.default.zip(e,t))){i=u.length()
u=u.concat(a)
s=u.length()
null!=n&&(u=u.concat(n))
r.push([i,s])}return r})()
p=(()=>{const e=[]
for([i,s]of Array.from(p)){s=c.mod(s,u.length())
e.push([i,s])}return e})()
u.set({circular:!0,junctions:p})
const m=l.default.zip(o,e,p,b.vx.slice(0,e.length)),E=u.sequencePrimers(),h=l.default.map(m,(([e,t,n,a],r)=>{if(t.has("_cutter5")&&t.has("_cutter3")){E.add({skip:!0})
E.add({skip:!0})
return null}const{forward:o,reverse:l}=e;[i,s]=Array.from(n)
E.add({bases:o.bases,start:i,end:c.mod(i+o.down_overlap,u.length()),name:`${t.name()} FWD`,color:a,strand:1})
E.add({bases:l.bases,start:c.mod(s-l.down_overlap,u.length()),end:s,name:`${t.name()} REV`,color:a,strand:-1})
return{fwd_index:2*r,rev_index:2*r+1}}))
P(E)
u.set({primerPairs:h})
return u}const M=l.default.extend({},O,{assemblyType:v.GIBSON,attachTabs(e,t){const a=n(955212).Z
t.add(new a({sequence:e}))},checkAssembly(e){const t=[]
l.default.every(e.slots().withoutSpacers(),(e=>!e.isEmpty()))||t.push("A backbone or insert is unset.")
D(e.slots())||t.push("Spacer sequences must be adjacent to at least one fragment generated by PCR.")
return{errors:t,warnings:[]}},_getTwoPrimerJunctionRanges:(e,t,n)=>c.getRangeOverlap(n.start(),n.overhangEdge(e),t.overhangEdge(e),t.end()),_canInsert(e,t,n){if(null!=N(e,t.modelStart()))return!0
n("To insert bases outside junctions, finalize the sequence from the results tab.")
return!1},canDelete(e,t,n){if(e.finalized())return!0
if(null!=this._findDeleteRange(e,t.modelStart(),t.modelEnd()))return!0
n("To delete bases outside junction areas, finalize the sequence from the results tab.")
return!1},didDelete(e,t,n,a,i){let s,r
if(e.finalized())return
const o=t.modelStart(),l=c.mod(o+n,e.length()),d=N(e,o);(0,_.hu)(null!=d,`junction was null after a delete (start=${o}, deletionLength=${n})`)
const[u,p,m,E]=Array.from(d)
function getOverlap(t,n){const a=c.mod(o-n,e.length()),i=c.mod(l-n,e.length()),s=c.getRangeOverlap(a,i,t.start(),t.end())
if(s.length>0){const[t,n]=Array.from(s[0])
return c.distance(t,n,e.length(),e.circular())}return 0}if(null!=m){s=L(e,m,"",m.overhangEdge(e)+n,o,l)
r=getOverlap(m,n)
const t=c.mod(m.start()+r,e.length())
m.set({bases:s,start:t})}if(null!=E){s=L(e,E,"",E.overhangEdge(e),l,o)
r=getOverlap(E,0)
const t=c.mod(E.end()-r,e.length())
E.set({bases:s,end:t})}S().when(null!=m?m.save(null,{fileUpdate:!0}):void 0).then((()=>null!=E?E.save(null,{fileUpdate:!0}):void 0)).done((()=>a("Successfully updated primers."))).fail((()=>i("Error updating primers. One or more primers may not be in sync with the newly edited sequence.")))},didInsert(e,t,n,a,i){let s,r
if(e.finalized())return
const o=N(e,t);(0,_.hu)(null!=o,"didInsert found no junction even though canEditSelection passed")
const[l,u,p,m]=Array.from(o)
if(null!=p||null!=m){if(null!=p){r=p.bases()
const a=c.distance(p.overhangEdge(),t+n.length,e.length(),e.circular());(0,_.hu)(a<r.length,"fwdInsert must be before end of primer")
s=r.slice(0,a)+n+r.slice(a)
p.set({bases:s})}if(null!=m){r=m.bases()
const a=d.revcomp(n,R.jb),i=c.distance(m.overhangEdge(),t,e.length(),e.circular())
s=r.slice(0,i)+a+r.slice(i)
m.set({bases:s})}S().when(null!=p?p.save(null,{fileUpdate:!0}):void 0).then((()=>null!=m?m.save(null,{fileUpdate:!0}):void 0)).done((()=>a("Primers successfully updated."))).fail((()=>i("Error updating primers.")))}},didReplace(e,t,n,a,i){let s
if(e.finalized())return
const r=this._findReplaceRange(e,t);(0,_.hu)(null!=r,"didReplace found no range even though _canInitiateReplace was passed")
const[o,l,c,u]=Array.from(r)
if(null!=c||null!=u){if(null!=c){s=L(e,c,n,c.overhangEdge(e),t.modelStart(),t.modelEnd())
c.set({bases:s})}if(null!=u){s=L(e,u,d.revcomp(n,R.jb),u.overhangEdge(e),t.modelEnd(),t.modelStart())
u.set({bases:s})}S().when(null!=c?c.save(null,{fileUpdate:!0}):void 0).then((()=>null!=u?u.save(null,{fileUpdate:!0}):void 0)).done((()=>a("Primers successfully updated."))).fail((()=>i("Error updating primers.")))}}})
function _gibson_range_(e,t,n){const a=[],i=e<t,s=n?i?t+1:t-1:t
for(let t=e;i?t<s:t>s;i?t++:t--)a.push(t)
return a}var B=n(920119),U=n(146238),F=n(260929)
const w=U.ZP.getCommonEnzymes()
class AssemblyError extends Error{}function throwAssemblyError(e){throw new AssemblyError(e)}function slotsToFragments(e){const t=l.default.zip(...e.map((e=>{let t;(0,_.hu)(!e.isSpacer(),"Expected a fragment slot")
if(e.isEmpty())return[null,!1]
const n=e.singleFragment(),a=n.getSequence()
if(null==a)return[null,!1]
const i=null!=n.enzymeIDs()
if(i){t=n.getSelectedFragmentFromSequence(a)
t.set({offset5:0,offset3:0})}else{const e=n.start(),i=n.end(),s={annotations:!0,notcontained:!0}
t=a.get("_sequence").createFromIndices(e,i,s)}n.reverse()&&(t=t.cloneReverseComplement())
t.set({name:n.getSequence().name()})
return[t,i]})))
return 0===t.length?[[],[]]:t}function validateStickyEnds(e,t,n){let a
null==n&&(n=!1)
const i=[],s=[]
let r=0
for(const t of e){const e=d.gc(t.bases,d.NucleotideType.DNA)
if(0===e||1===e){a=`Sticky end ${t.friendly()} has GC content of ${0===e?0:100}%.`
n?s.push(a):t.preExisting||(r+=1)}}const o=e.concat(t),isInternalStickyEnd=t=>t>=e.length
for(let e=0;e<o.length;e++){const t=o[e]
for(let u=0;u<o.length;u++){const p=o[u]
if(u<e)continue
const m=(e===u?[]:[p]).concat([p.revcomp()])
for(const o of m){const p=(l=t.bases,-1!==(c=o.bases).indexOf(l.slice(1))||-1!==c.indexOf(l.slice(0,-1))),m=d.hammingDistance(t.bases,o.bases)
if(p||m<2){const l=0===m,c=isInternalStickyEnd(e),d=isInternalStickyEnd(u),E=l?"identical":p?"too similar":"similar"
a=c&&d?`Internal sticky ends ${t.friendly()} and ${o.friendly()} are ${E}.`:c?`Sticky end ${o.friendly()} is ${E} to internal sticky end ${t.friendly()}.`:d?`Sticky end ${t.friendly()} is ${E} to internal sticky end ${o.friendly()}.`:`Sticky ends ${t.friendly()} and ${o.friendly()} are ${E}.`
n?(p?i:s).push(a):c&&d||t.preExisting&&o.preExisting||(r+=p?1e3:1)}}}}var l,c
return n?{errors:i,warnings:s}:{validationScore:r}}function tm(e){return d.meltingTemperature(e,R.Wy.DNA)}function _getPrimerPair(e,t,n){let a="",i=0
const getForwardBindingRegion=t=>e.slice(0,t)
let s="",r=0
const getReverseBindingRegion=t=>e.slice(e.length-t)
n.bindingRegionMinLength>e.length&&throwAssemblyError(`Fragment with is too short for minimum binding region length of ${n.bindingRegionMinLength}.`)
for(i=n.bindingRegionMinLength;i<e.length;i++){a=getForwardBindingRegion(i)
if(tm(a)>=n.bindingRegionMinTM)break}for(r=n.bindingRegionMinLength;r<e.length;r++){s=getReverseBindingRegion(r)
if(tm(s)>=n.bindingRegionMinTM)break}Math.min(tm(s),tm(a))<n.bindingRegionMinTM&&throwAssemblyError(`Unable to design primers with binding region melting temperatures over ${n.bindingRegionMinTM} C.`)
const getForwardPrimer=()=>n.preRecognitionSiteBases+t.get("seq")+n.postRecognitionSiteBases+n.forwardPreBindingRegionBases+a,getReversePrimer=()=>n.preRecognitionSiteBases+t.get("seq")+n.postRecognitionSiteBases+d.revcomp(n.reversePreBindingRegionBases,R.jb)+d.revcomp(s,R.jb)
let o=getForwardPrimer(),l=getReversePrimer(),c=tm(a),u=tm(s)
const primerPairTMDiff=()=>Math.abs(c-u)
for(;primerPairTMDiff()>n.primerPairMaxTMDiff;)if(c<u){if(i===e.length)break
i++
a=getForwardBindingRegion(i)
o=getForwardPrimer()
c=tm(a)}else{if(r===e.length)break
r++
s=getReverseBindingRegion(r)
l=getReversePrimer()
u=tm(s)}primerPairTMDiff()>n.primerPairMaxTMDiff&&throwAssemblyError(`Unable to design primers with a melting temperature difference under ${n.primerPairMaxTMDiff} C.`)
return{forward:{bases:o,bindingLength:i},reverse:{bases:l,bindingLength:r}}}class StickyEnd{constructor(e,t=null,n=null){this.fragmentName=t
null==n&&(n=!1)
this.preExisting=n
this.bases=d.normalize(e)}friendly(){return null!=this.fragmentName?`${this.bases} (${this.fragmentName})`:this.bases}revcomp(){return new StickyEnd(d.revcomp(this.bases,R.jb),`${this.fragmentName}, rev comp`,this.preExisting)}}function _makePrevIndexFunc(e){return t=>0===t?e.length-1:t-1}function _makeNextIndexFunc(e){return t=>(t+1)%e.length}function _spacerBasesAt(e,t){return(null!=e[t]?e[t].bases():void 0)||""}function _startStickyEnd(e,t,n=null){const a=e.bases().slice(0,t.stickyEndLength())
return new StickyEnd(a,n||e.name(),!0)}function _endStickyEnd(e,t,n=null){const a=e.bases().slice(e.length()-t.stickyEndLength())
return new StickyEnd(a,n||e.name(),!0)}function _getPreExistingJunctionStickyEnds(e,t,n){const a=_makePrevIndexFunc(e),i=[]
for(let s=0;s<e.length;s++){let r=null
null!=e[a(s)]&&null!=e[s]&&(r=`${e[a(s)].name()} / ${e[s].name()}`)
t[s]?i.push(_startStickyEnd(e[s],n,r)):t[a(s)]?i.push(_endStickyEnd(e[a(s)],n,r)):i.push(null)}return i}function _getJunctionStickyEndParts(e,t,n,a,i){const s=_makePrevIndexFunc(e),r=_getPreExistingJunctionStickyEnds(e,t,a),o=e.map(((o,l)=>{let c
const d=e[s(l)],u=_spacerBasesAt(n,s(l)),p=r[l]
if(t[l])return{prevFragmentStart:d.length(),prevFragmentEnd:d.length(),fragmentStart:0,fragmentEnd:a.stickyEndLength(),prevSpacerStart:u.length,prevSpacerEnd:u.length,stickyEnd:p}
if(t[s(l)])return{prevFragmentStart:d.length()-a.stickyEndLength(),prevFragmentEnd:d.length(),fragmentStart:0,fragmentEnd:0,prevSpacerStart:0,prevSpacerEnd:0,stickyEnd:p}
const m=0-Math.ceil(u.length/2),E=0+Math.floor(u.length/2);(0,_.hu)(m<=E,"Expected prevSpacerLeft <= prevSpacerRight")
const h=i(l),g=h-Math.floor(a.stickyEndLength()/2),S=h+Math.ceil(a.stickyEndLength()/2);(0,_.hu)(a.stickyEndLength()>0,`stickyEndLength=${a.stickyEndLength()} > 0 false.`);(0,_.hu)(g<S,`left=${g} < right=${S} false.`)
const T=d.length()+Math.min(0,g-m),I=d.length()+Math.min(0,S-m);(0,_.hu)(T<=I,"Expected prevFragmentStart <= prevFragmentEnd")
if(T<0)return null
const A=0+Math.max(0,g-E),f=0+Math.max(0,S-E);(0,_.hu)(A<=f,"Expected fragmentStart <= fragmentEnd")
if(f>o.length())return null
const y=Math.min(E,Math.max(m,g))-m,C=Math.min(E,Math.max(m,S))-m;(0,_.hu)(y<=C,c=d.bases().slice(T,I)+u.slice(y,C)+o.bases().slice(A,f))
return{prevFragmentStart:T,prevFragmentEnd:I,fragmentStart:A,fragmentEnd:f,prevSpacerStart:y,prevSpacerEnd:C,stickyEnd:new StickyEnd(c)}}))
return o.some((e=>null==e))?null:o}function designGoldenGate(e,t,n,a){let i
null==a&&(a={})
const s=l.default.defaults(a,{preRecognitionSiteLength:6,bindingRegionMinTM:50,bindingRegionMinLength:18,primerPairMaxTMDiff:5,enzymeID:85,dryRun:!1}),r=[],o=[],u=w.get(s.enzymeID)
if(!u)throw new Error(`Invalid enzymeID: ${s.enzymeID}`)
s.preRecognitionSiteBases||(s.preRecognitionSiteBases=d.random(s.preRecognitionSiteLength));(0,_.hu)(s.preRecognitionSiteBases.length===s.preRecognitionSiteLength,"Did not fill prerecognition site correctly")
const p=[]
for(const t of e){if(null==t&&s.dryRun)continue
const e=d.digest([t],[u.toJSON()])
for(i=0;i<e.length;i++){const n=e[i]
if(0!==i){n.set({name:t.name()})
p.push(_startStickyEnd(n,u))}}}const m=_makePrevIndexFunc(e)
for(let n=0;n<e.length;n++)if(t[n]&&t[m(n)]){const t=_startStickyEnd(e[n],u),a=_endStickyEnd(e[m(n)],u)
if(t.bases!==a.bases){const i=`${e[n].name()} starts with sticky end ${t.bases} but ${e[m(n)].name()} ends with sticky end ${a.bases}.`
if(!s.dryRun)return S().Deferred().reject(i).promise()
r.push(i)}}const E=validateStickyEnds(l.default.compact(_getPreExistingJunctionStickyEnds(e,t,u)),p,s.dryRun)
Array.prototype.push.apply(r,E.errors)
Array.prototype.push.apply(o,E.warnings)
return s.dryRun?[r,o]:function _designStickyEnds(e,t,n,a,i){let s
const r=_makePrevIndexFunc(e),o=S().Deferred(),c=function getDeviationsIndexMap(e,t,n){const a={}
let i=0
for(let s=0;s<e;s++)if(!t[s]&&!t[n(s)]){a[s]=i
i++}return a}(e.length,t,r),d=l.default.size(c)
if(0===d){s=_getJunctionStickyEndParts(e,t,n,a,(e=>{throw new Error("Unexpected call to stickyEndCenterMap.")}))
return o.resolve(s).promise()}const u=new Array(d)
let p=1/0,m=null
o.reject()
let E=o
for(let r=0;r<15;r++)E=E.then(null,(()=>{const o=100*r/15,E=100*Math.pow(Math.sin(.005*Math.PI*o),.333),h=S().Deferred().notify(E)
l.default.defer((()=>{let o
const l=-r,E=2*r+1,g=[]
for(o=0;o<=d;o++)g.push(Math.pow(E,o))
for(let S=0;S<Math.min(g[d],1e3);S++){if(g[d]<=1e3){for(o=0;o<d;o++){const e=Math.floor(S%g[o+1]/g[o]),t=e%2==0?e/2:(e+1)/-2
u[o]=t}if(u.every((e=>l<e&&e<r)))continue}else for(o=0;o<d;o++){const e=Math.floor(l+Math.random()*E)
u[o]=e}s=_getJunctionStickyEndParts(e,t,n,a,(e=>u[c[e]]))
if(null==s)continue
const{validationScore:_}=validateStickyEnds(s.map((e=>e.stickyEnd)),i)
if(p>_){p=_
m=s}if(0===p){h.resolve(m)
return}}h.reject()}))
return h.promise()}))
return E.then(null,(()=>S().Deferred().resolve(m).promise()))}(e,t,n,u,p).then((a=>{const i=S().Deferred()
try{const r=function _designPrimers(e,t,n,a,i,s){let r,o,u
const p=_makePrevIndexFunc(e),m=_makeNextIndexFunc(e),E=Array(e.length).fill(null),h=Array(e.length).fill(null)
for(let l=0;l<e.length;l++){u=e[l]
if(t[l])continue
const c=_spacerBasesAt(n,p(l)),g=_spacerBasesAt(n,l),{prevFragmentStart:S,prevSpacerStart:_,fragmentStart:T}=s[l],I=e[p(l)].bases().slice(S)+c.slice(_)
o=T
const{prevFragmentEnd:A,prevSpacerEnd:f,fragmentEnd:y}=s[m(l)],C=g.slice(0,f)+e[m(l)].bases().slice(0,y)
r=A
const R=u.bases().slice(o,r)
h[l]=_getPrimerPair(R,a,Object.assign({},i,{forwardPreBindingRegionBases:I,reversePreBindingRegionBases:C,postRecognitionSiteBases:d.random(a.postRecognitionSiteLength())}))
E[l]=[o,r]}let g=new C.Sequence
const S=[],_=l.default.zip(e,n)
for(let e=0;e<_.length;e++){let n,i,s;[u,n]=_[e]
i=g.length()
t[e]&&(t[p(e)]?u=u.slice(a.stickyEndLength()):i+=a.stickyEndLength())
g=g.concat(u)
s=g.length()
t[e]&&(s-=a.stickyEndLength())
null!=n&&(g=g.concat(n))
S.push([i,s])}const T=[]
for(const[e,t]of S)T.push([e,c.mod(t,g.length())])
g.set({circular:!0,junctions:T})
const I=g.sequencePrimers(),A=l.default.zip(h,e,T,b.vx.slice(0,e.length)).map((([e,t,n,a],i)=>{if(null==e){I.add({skip:!0})
I.add({skip:!0})
return null}const{forward:s,reverse:l}=e,d=n[0];[o,r]=E[i]
const u=c.mod(d+o,g.length())
I.add({bases:s.bases,start:u,end:c.mod(u+s.bindingLength,g.length()),name:`${t.name()} FWD`,color:a,strand:1})
const p=c.mod(d+r,g.length())
I.add({bases:l.bases,start:c.mod(p-l.bindingLength,g.length()),end:p,name:`${t.name()} REV`,color:a,strand:-1})
return{fwd_index:2*i,rev_index:2*i+1}}))
addPrimerNameSuffixes(I)
g.set({primerPairs:A})
return g}(e,t,n,u,s,a)
i.resolve(r)}catch(e){if(!(e instanceof AssemblyError))throw e
i.reject(e.message)}return i.promise()}))}function _getStickyEndRange(e,t,n,a){if(null==t&&null==n&&null==a)return[null,null]
const i=e.assembly().enzyme(),s=null!=t?c.mod(t.overhangEdge(e)+t.bases().indexOf(i.get("seq"))+i.recognitionSiteLength()+i.postRecognitionSiteLength(),e.length()):null!=n?c.mod(n.overhangEdge(e)-n.bases().indexOf(i.get("seq"))-i.recognitionSiteLength()-i.postRecognitionSiteLength()-i.stickyEndLength(),e.length()):a
return[s,c.mod(s+i.stickyEndLength(),e.length())]}function stickyEndRanges(e){const t=e.fragmentResults(),n=_makeNextIndexFunc(t)
return t.map(((a,i)=>{const s=t.at(n(i)),r=getFlankingPrimers(e,a)[1],o=getFlankingPrimers(e,s)[0],[l,c]=_getStickyEndRange(e,o,r,a.end())
return{start:l,end:c,upstreamFragment:a,downstreamFragment:s}}))}const k=Object.assign({},y,{assemblyType:u.ASSEMBLY_TYPE.GOLDEN_GATE,attachTabs(e,t){t.add(new B.Z({sequence:e}))},checkAssembly(e){let t=[],n=[]
e.slots().withoutSpacers().every((e=>!e.isEmpty()))||t.push("A backbone or insert is unset.")
validSpacerOrder(e.slots())||t.push("Spacer sequences must be adjacent to at least one fragment generated by PCR.")
const a=e.enzyme(),[i,s]=slotsToFragments(e.slots().withoutSpacers()),[r,o]=designGoldenGate(i,s,e.slots().getSpacers(),Object.assign({dryRun:!0},e.parameters()))
t=t.concat(r)
n=n.concat(o)
e.slots().each((e=>{if(e.isEmpty())return
const n=e.singleFragment().enzymeIDs()
if(n)for(const i of n.map((e=>w.get(e))))i.id!==a.id&&t.push(`${e.displayName()} was cut with ${i.get("name")} - must use ${a.get("name")}`)}))
return{canCreateWithErrors:t.length===r.length,errors:t,warnings:n}},_getTwoPrimerJunctionRanges:(e,t,n)=>[[n.start(),t.end()]],_canInsert(e,t,n){n("To insert on a Golden Gate assembly, insert spacer slots prior to sequence creation.")
return!1},canDelete(e,t,n){if(e.finalized())return!0
n("To delete bases, finalize the sequence from the results tab.")
return!1},didDelete(e,t,n,a,i){e.finalized()||F.vU("didDelete was called in GG assembly, but delete should not be allowed!")},didInsert(e,t,n,a,i){e.finalized()||F.vU("didInsert was called in GG assembly, but insert should not be allowed!")},didReplace(e,t,n,a,i){if(e.finalized())return
const s=this._findReplaceRange(e,t);(0,_.hu)(null!=s,"didReplace found no range even though _canInitiateReplace passed")
const r=s[2],o=s[3],l=s[4],[u,p]=_getStickyEndRange(e,r,o,l)
if(null==r&&null==o)return
const m=t.modelStart(),E=t.modelEnd()
function replaceRegion(t,a){let i
if(!c.isRangeOverlap(m,E,t,a))return
const s=c.baseInRange(m,t,a)?m:t,l=c.baseInRange(E,t,a)?E:a,h=n.slice(s-m,l-m)
if(null!=r&&c.baseInRange(s,u,r.end())){i=replacePrimerRegion(e,r,h,r.overhangEdge(e),s,l)
r.set({bases:i})}if(null!=o&&c.baseInRange(s,o.start(),p)){i=replacePrimerRegion(e,o,d.revcomp(h,R.jb),o.overhangEdge(e),l,s)
o.set({bases:i})}}null!=o&&replaceRegion(o.start(),u)
replaceRegion(u,p)
null!=r&&replaceRegion(p,r.end())
S().when(null!=r?r.save(null,{fileUpdate:!0}):void 0).then((()=>null!=o?o.save(null,{fileUpdate:!0}):void 0)).done((()=>{a("Primers successfully updated.")})).fail((()=>{i("Error updating primers.")}))}}),x=[p,h,M,k],Z=l.default.object(x.map((e=>[e.assemblyType,e])))
function for_(e){let t
t=null==e?"null":e
const n=Z[t]
if(null==n)throw new Error(`Unexpected assembly type: ${t}`)
return n}const G={of:function of_(e){return for_(e.assemblyType())},for:for_,digest:i,gibson:r,goldenGate:o}},805937:(e,t,n)=>{n.d(t,{QU:()=>a,mw:()=>s,n9:()=>i,o2:()=>r})
const a="Export audit log",i="Export chain of custody - container history",s="Select format for audit log export",r="Select format for container history report"},554685:(e,t,n)=>{n.d(t,{F1:()=>a,KQ:()=>checkDataModsReasonRequired,Nq:()=>exportSampleContainerHistory,dV:()=>exportAuditLogs,tk:()=>exportRelatedResultsAuditLogs})
var a,i=n(647812),s=n.n(i),r=n(771398),o=n(8747)
!function(e){e.CSV="CSV"
e.PDF="PDF"}(a||(a={}))
function exportAuditLogs(e,t,n={}){return o.ty({data:{ids:e,format:t,...n,browser_timezone:s().tz.guess()},url:"/1/api/audits:export-logs"})}function exportRelatedResultsAuditLogs(e,t){return o.ty({data:{apiId:e,exportFormat:t},url:"/1/api/audits:export-related-results-logs"})}function exportSampleContainerHistory(e,t){return o.ty({data:{container_api_ids:e,export_format:t,browser_timezone:s().tz.guess()},url:"/1/api/audits:export-sample-container-history-report"})}function checkDataModsReasonRequired(e){return r.s0({data:{api_ids:e},url:"/1/api/audits:check-data-mods-reason-required"})}},609630:(e,t,n)=>{n.d(t,{GE:()=>callAsyncWithDataModifications,Kz:()=>callWithDataModifications})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(554685),l=n(348920),c=n(17086),d=n(103593),u=n(929123),p=n(59860),m=n(830893),E=n(271359),h=n(954240),g=n(389760),S=n(865486),_=n(924982),T=n(629656),I=n(205986),A=n(502633),f=n(927517),y=n(771398)
var C=n(468943),R=n(171471)
function getBaseMetadataFromParams(e){return{action_origin:e.actionOrigin,modified_action:e.modifiedAction,num_modified_total_items:e.numModifiedTotalItems,notebook_entry_id:e.entryId}}const b="DATA_MODS_MODAL_KEY"
async function callWithDataModifications(e,t,n,a=!1){var i;(a?null===(i=await(0,o.KQ)(e.apiIds))||void 0===i?void 0:i.data_mods_reason_required:t&&l.ZP.AUDITING_ENABLE_DATA_MODIFICATIONS)?(0,A.Z)(DataModificationsModal,{changeSummary:e.changeSummary,onRequestClose:e.onRequestClose,onRequestSubmit:e.onRequestSubmit,trackingParams:n}):e.onRequestSubmit()}async function callAsyncWithDataModifications(e,t,n,a=!1){var i
if(a?!(null===(i=await(0,o.KQ)(e.apiIds))||void 0===i?void 0:i.data_mods_reason_required):!t||!l.ZP.AUDITING_ENABLE_DATA_MODIFICATIONS){await e.onRequestSubmit()
return!0}let s=!1
await(0,A.Z)(DataModificationsModal,{changeSummary:e.changeSummary,onRequestClose:e.onRequestClose,onRequestSubmit:async()=>{s=!0
await e.onRequestSubmit()},modalKey:b,trackingParams:n})
return s}(0,y.dE)((function getDataModificationsHeaders(){return c.U2("dataModifications")?{"X-BENCH-DATA-MODIFICATIONS":btoa(JSON.stringify(c.U2("dataModifications")))}:{}}))
function maybeTextToElement(e){return"string"==typeof e?r.createElement("p",null,e):e}function ChangeSummary(e){return null!=e.previousChangeSummary?r.createElement("div",{className:s()((0,a.iv)(N.changeSummary))},r.createElement("p",null,"Would you like to update the change reason code and note that you provided?"),r.createElement("p",null,r.createElement("strong",null,"Previous change:")),maybeTextToElement(e.previousChangeSummary),r.createElement("p",null,r.createElement("strong",null,"Additional change:")),maybeTextToElement(e.currentChangeSummary)):r.createElement("div",{className:s()((0,a.iv)(N.changeSummary))},maybeTextToElement(e.currentChangeSummary))}function DataModificationsModal(e){var t;(0,g.Z)((()=>{e.trackingParams&&function trackModalOpen(e){C.L9({module:R.XC[e.module],action:"opened_modal_data_mods",actionCategory:R.Jw.READ},getBaseMetadataFromParams(e))}(e.trackingParams)}))
let n="",i=""
const o=c.U2("dataModifications"),E=null!==(t=null==o?void 0:o.changeSummary)&&void 0!==t?t:null
if(null!=o){T.xv(b)
n=o.reasonCode
i=o.reasonComment}const[A,y]=(0,r.useState)(n),[O,L]=(0,r.useState)(i),[P,D]=(0,r.useState)(!1),[v,M]=(0,r.useState)(!1),B=Boolean(A&&O&&!P&&!v)
const U=l.ZP.AUDITING_DATA_MODIFICATIONS_REASON_CODES,formatReasonString=e=>`${e}: ${U[e]}`
return r.createElement(I.ZP,{onRequestClose:()=>{e.trackingParams&&function trackModalClose(e){C.L9({module:R.XC[e.module],action:"closed_modal_data_mods",actionCategory:R.Jw.READ},getBaseMetadataFromParams(e))}(e.trackingParams)
e.onRequestClose()},onRequestSubmit:async()=>{e.trackingParams&&function trackModalSubmit(e,t){C.L9({module:R.XC[e.module],action:"submitted_modal_data_mods",actionCategory:R.Jw.WRITE},{...getBaseMetadataFromParams(e),reason_code:t})}(e.trackingParams,A)
await c.S8({dataModifications:{reasonCode:A,reasonComment:O,changeSummary:e.changeSummary}},null,(async()=>{await e.onRequestSubmit()}))},title:"Provide a reason for the change",medium:!0,buttons:[{text:"Submit",submit:!0,disabled:!B}],dataTestAttrs:{component:"DataModificationsModal",element:"root"}},r.createElement(p.Z,null,r.createElement(d.Z,{md:12},r.createElement(ChangeSummary,{currentChangeSummary:e.changeSummary,previousChangeSummary:E}))),r.createElement(p.Z,null,r.createElement(d.Z,{md:12},r.createElement("div",null,r.createElement(u.Z,null,"Reason"),r.createElement(h.ZP,{displayName:A||"Choose reason...",menu:r.createElement(S.ZP,{height:S.ZP.HEIGHTS.MEDIUM,width:S.ZP.WIDTHS.FIT_CONTENT},Object.keys(U).map((e=>r.createElement(_.Z,{key:e,onSelect:y,value:formatReasonString(e)},formatReasonString(e))))),dataTestAttrs:{component:"DataModificationsModal",element:"form",key:"reason"}})))),r.createElement(p.Z,null,r.createElement(d.Z,{md:12},r.createElement(u.Z,null,"Additional note"),r.createElement(m.Z,{name:"reasonComment",value:O,onChange:e=>{const t=e.target.value
M(function hasNonAsciiChar(e){return/[^\x20-\x7E]+/.test(e)}(t))
D(t.length>255)
L(t)},onKeyPress:function _handleEnterPress(e){f.isEnterKey(e)&&e.preventDefault()},rows:4,className:s()({"fieldInput-input--error":P||v})}),v&&r.createElement("p",{className:s()((0,a.iv)(N.charError))},"Note cannot contain any special characters"),r.createElement("p",{className:s()((0,a.iv)(P?N.errorCounter:N.counter))},O.length,"/",255," characters"))))}const N=a.mM.create({charError:{marginTop:"5px",textAlign:"right",color:E.Zl},errorCounter:{marginTop:"5px",textAlign:"right",color:E.Zl},counter:{marginTop:"5px",textAlign:"right",color:E.TG},changeSummary:{whiteSpace:"pre-line"}})},7060:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(989526),i=n(805937),s=n(868710),r=n(334148),o=n(108696)
class ExportAuditLogButton extends a.Component{constructor(){super(...arguments)
this.handleClick=()=>{o.dV(this.props.ids)}}render(){return a.createElement(s.ZP,{container:"body",placement:s.TQ.TOP,title:i.QU},a.createElement(r.Co,{buttonStyle:this.props.buttonStyle,className:this.props.className,disabled:0===this.props.ids.length,icon:"audit-trail",onClick:this.handleClick,size:this.props.buttonSize}))}}ExportAuditLogButton.defaultProps={buttonStyle:r.ZJ.TERTIARY_BLUE,buttonSize:r.qE.SMALL}
const l=ExportAuditLogButton},636757:(e,t,n)=>{n.d(t,{Z:()=>ExportAuditLogModal})
var a=n(64558),i=n(989526),s=n(554685),r=n(334148),o=n(954240),l=n(865486),c=n(924982),d=n(205986),u=n(805937)
function ExportAuditLogModal(e){const[t,n]=i.useState(s.F1.PDF)
return i.createElement(d.ZP,{enableRedesign:!0,title:e.modalTitle,onRequestClose:e.onRequestClose,medium:!0,onRequestSubmit:()=>{e.onRequestSubmit(t)},buttons:[{text:"Export",submit:!0,style:r.ZJ.PRIMARY,disabled:null==t}],dataTestAttrs:{component:"ExportAuditLogModal",element:"root"}},i.createElement("div",{className:"form-group"},i.createElement(o.ZP,{displayName:null!=t?t:e.dropdownDisplayString,menu:i.createElement(l.ZP,{height:l.ZP.HEIGHTS.MEDIUM,width:l.ZP.WIDTHS.FULL},(0,a.SL)(Object.keys(s.F1)).map((e=>i.createElement(c.Z,{key:e,onSelect:n,value:e},e)))),dataTestAttrs:{component:"ExportAuditLogModal",element:"dropdown"}})))}ExportAuditLogModal.defaultProps={modalTitle:u.mw,dropdownDisplayString:"Select audit log format..."}},746779:(e,t,n)=>{n.d(t,{G:()=>a})
const a=n(769784).Ps`
  fragment OrganizationDefaultSchemaCollaboratorsConfiguration on OrganizationNode {
    id
    handle
    name
    schemaCollaborationDefaultConfigurations {
      id
      schemaType
      defaultSchemaCollaborations {
        party {
          ... on PartyInterface {
            id
            name
            handle
          }
        }
        policy {
          id
        }
        teamRole
        organizationRole
      }
    }
  }
`},713255:(e,t,n)=>{n.d(t,{$:()=>bulkFetchPermissions})
var a=n(771398)
function bulkFetchPermissions(e){return a.s0({url:"/1/api/permissions:bulk-get",data:{ids:e}})}},106664:(e,t,n)=>{n.d(t,{Bi:()=>getCollaboratorPolicyId,ME:()=>getCollaboratorMemberPolicyId,SK:()=>setCollaboratorPolicyId,W_:()=>getCollaboratorAdminPolicyKey,b7:()=>getCollaboratorAdminPolicyId,km:()=>getCollaboratorMemberPolicyKey,oc:()=>setCollaboratorMemberPolicyId,pc:()=>getCollaboratorPolicyKey,t3:()=>setCollaboratorAdminPolicyId,ul:()=>findMatchingPolicyStatement})
var a=n(232606),i=n(56063)
function getCollaboratorPolicyKey(e){if((0,i.x7)(e))return"dataPolicyId";(0,a.hu)((0,i.K8)(e),"Unexpected policy type")
return"schemaPolicyId"}function getCollaboratorAdminPolicyKey(e){if((0,i.Yb)(e))return"adminDataPolicyId";(0,a.hu)((0,i.Ez)(e),"Unexpected policy type")
return"adminSchemaPolicyId"}function getCollaboratorMemberPolicyKey(e){return(0,i.Yb)(e)?"memberDataPolicyId":"memberSchemaPolicyId"}function getCollaboratorPolicyId(e){return(0,i.x7)(e)?e.dataPolicyId:e.schemaPolicyId}function setCollaboratorPolicyId(e,t,n){t===i.Mi.DATA?e.dataPolicyId=n:e.schemaPolicyId=n}function getCollaboratorMemberPolicyId(e){return(0,i.Yb)(e)?e.memberDataPolicyId:e.memberSchemaPolicyId}function setCollaboratorMemberPolicyId(e,t,n){t===i.Mi.DATA?e.memberDataPolicyId=n:e.memberSchemaPolicyId=n}function getCollaboratorAdminPolicyId(e){return(0,i.Yb)(e)?e.adminDataPolicyId:e.adminSchemaPolicyId}function setCollaboratorAdminPolicyId(e,t,n){t===i.Mi.DATA?e.adminDataPolicyId=n:e.adminSchemaPolicyId=n}function findMatchingPolicyStatement(e,t){return e.find((e=>t.action===e.action&&t.itemType===e.itemType))}},791442:(e,t,n)=>{n.d(t,{d:()=>RequestAccessActions_requestAccess})
var a=n(771398)
function RequestAccessActions_requestAccess(e){!function requestAccess(e){return a.s0({url:"/1/api/auth:request-access",data:{id:e}})}(e)}},318535:(e,t,n)=>{n.d(t,{G:()=>i})
var a=n(602652)
const i=a.PropTypes.shape({invalidId:a.PropTypes.string.isRequired})},714529:(e,t,n)=>{n.d(t,{Z:()=>WorkspaceItemInaccessibleGuard})
var a=n(989526),i=n(531041),s=n(3472),r=n(776065),o=n(974913),l=n(95537)
function WorkspaceItemInaccessibleGuard({inaccessibleInfo:e,modelType:t}){(0,a.useEffect)((()=>{if(e){(0,l.qg)(e)?(0,l.do)(e):o.ZP.error(s.INACCESSIBLE_MESSAGE)
i.default.defer((()=>{r.Z.removeFromWorkspace(e.invalidId)}))}}),[t,e])
return null}},920287:(e,t,n)=>{n.d(t,{io:()=>getInDevelopmentCapabilities,u4:()=>isFeatureInDevelopment})
var a=n(232606),i=n(348920),s=n(814099)
function getInDevelopmentCapabilities(){return Object.values(s.e2).filter((e=>!i.ZP.IDENTITY_RELEASED_CAPABILITIES.includes(e)))}function isFeatureInDevelopment(e,t=getInDevelopmentCapabilities()){const n=function getCapabilityFromFeature(e){var t
const n=e
return null!==(t=Object.keys(s.e2).find((e=>n.startsWith(e))))&&void 0!==t?t:null}(e)
if(!n){(0,a.Gp)(!1,"Expected capability prefix of feature to match a member of the Capability enum",{feature:e})
return!1}return t.includes(n)}},473446:(e,t,n)=>{n.d(t,{Gv:()=>getCapabilityFeatures,ly:()=>legacyIsCapabilityEnabled,m3:()=>getCapabilityFeatureFromStandardFeature})
var a=n(531041),i=n(232606),s=n(41706),r=n(814099),o=n(348920),l=n(459830),c=n(379346)
function getCapabilities(e,t,n){return function isRegisteredPolymer(e,t){return l.POLYMERS.includes(e)&&Boolean(null==t?void 0:t.isRegistered)}(e,t)&&n!==s.N7.OPEN?[r.e2.REGISTRY]:r.L1[e]}function getCapabilityFeatureFromStandardFeature(e,t){const n=r.VK[e],a=`${e}_${t}`
if(Object.keys(n).includes(a))return n[a];(0,i.hu)(!r.VA.includes(e),"A StandardFeature was used to gate an item that was ignored for this capability with CAPABILITY_TO_UNUSED_STANDARD_FEATURES. This feature should be implemented or the calling component should prevent this action for this item type.",{capability:e,standardFeature:t})
return null}function getCapabilityFeatures(e){const{feature:t}=e
let n,i=null
if((0,r.PB)(e))i=e.itemType
else{const t=c.ZP.apiIdToMaybeType(e.item.id);(function isMappedToCapabilityModelType(e){return!!e&&Object.keys(r.L1).includes(e)})(t)&&(i=t)
n=e.itemState}if(!i)return null
const s=getCapabilities(i,n,t),o=a.default.compact(s.map((e=>getCapabilityFeatureFromStandardFeature(e,t))))
return o.length?o:null}function legacyIsCapabilityEnabled(e){const t=r.XT[e]
if(null==t)return!0
const n=o.ZP[t];(0,i.Gp)("boolean"==typeof n,"applicationFlag must be a bool")
return Boolean(n)}},210970:(e,t,n)=>{n.d(t,{e8:()=>isCapabilityEnabledForListing})
var a=n(814099),i=n(323539),s=n(348920),r=n(41706),o=n(473446)
a.e2.RESULTS
let l=function makeTenantProvisionableCapabilitiesSetFromBootstrap(){var e
if(!(null===(e=window.bootstrap)||void 0===e?void 0:e.tenantProvisionableCapabilities))return null
return new Set(window.bootstrap.tenantProvisionableCapabilities)}()
function isCapabilityEnabledForListing(e){return s.ZP.IDENTITY_ENABLE_CAPABILITY_GATING?function isCapabilityEnabledForListingThroughCapabilityManagement(e){if(a.Ze.includes(e))return(0,o.ly)(e)
if(!l)return!0
const t=(0,o.m3)(e,r.N7.OPEN)
return l.has(e)||Boolean(t)&&(0,i.cr)({feature:t})}(e):(0,o.ly)(e)}},323539:(e,t,n)=>{n.d(t,{h8:()=>c,Xd:()=>areAllFeaturesEnabled,or:()=>areAnyFeaturesEnabled,XH:()=>getFeatureStatus,Oj:()=>isConnectFeatureEnabled,cr:()=>isFeatureEnabled,Yz:()=>makeFeatureStatus})
var a=n(232606),i=n(814099),s=n(348920)
var r=n(788927)
let o=function makeEnabledCapabilityFeaturesSetFromBootstrap(){var e,t
const n=(null===(e=window.bootstrap)||void 0===e?void 0:e.enabledCapabilityFeatures)||(null===(t=window.bootstrap)||void 0===t?void 0:t.enabledFeatures)
if(!n){window.debug&&console.warn('This page has not opted-in to front-end capability management gating. To enable capability managment for this page\'s front-end components, please set "window.bootstrap.enabledCapabilityFeatures" - see benchling/lib/sharedviews.py for an example. Note that not all pages need capability management for its front-end components so this is not an indication of anything wrong.')
return null}return new Set(n)}(),l=function makeShareLinkEnabledFeaturesFromBootstrap(){var e
if(!(null===(e=window.bootstrap)||void 0===e?void 0:e.shareLinkEnabledFeatures))return null
return new Set(window.bootstrap.shareLinkEnabledFeatures)}()
function isFeatureEnabledFromPermissions(e,t){return Boolean(t.permissions[i.hj[e]])}function legacyIsFeatureEnabled(e,t=!1){var n
return!((0,i.Fk)(e)&&(null===(n=e.item)||void 0===n?void 0:n.permissions)&&!isFeatureEnabledFromPermissions(e.feature,e.item))&&(t||function isCapabilityFeatureEnabledFromBenchlingConfig(e){return{[i.sZ.INSIGHTS_CREATE]:s.ZP.ENABLE_EXTERNAL_ANALYTICS_UI,[i.sZ.INSIGHTS_DISCOVER]:s.ZP.ENABLE_EXTERNAL_ANALYTICS_UI,[i.sZ.INSIGHTS_DELETE]:!0,[i.sZ.INSIGHTS_EDIT]:!0,[i.sZ.INSIGHTS_MOVE]:!0,[i.sZ.INSIGHTS_OPEN]:!0,[i.TD.INVENTORY_ADMIN]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_DISCOVER]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_IMPORT]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_EXPORT]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_CREATE]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_DELETE]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_EDIT]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_MOVE]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_OPEN]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_SHOW_DETAILS]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_AT_MENTION]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_ARCHIVE]:s.ZP.ENABLE_STORAGE,[i.TD.INVENTORY_UNARCHIVE]:s.ZP.ENABLE_STORAGE,[i.d$.LAB_AUTOMATION_ADMIN]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_ARCHIVE]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_CREATE]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_DELETE]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_DISCOVER]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_EDIT]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_EDIT_TAGS]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_IMPORT]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_OPEN]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.d$.LAB_AUTOMATION_UNARCHIVE]:s.ZP.ENABLE_RUNS||s.ZP.ENABLE_LAB_AUTOMATION||s.ZP.INSTRUMENTS_ENABLE,[i.Ot.MOLBIO_ADMIN]:!0,[i.Ot.MOLBIO_IMPORT]:!0,[i.Ot.MOLBIO_EXPORT]:!0,[i.Ot.MOLBIO_CREATE]:!0,[i.Ot.MOLBIO_DELETE]:!0,[i.Ot.MOLBIO_EDIT]:!0,[i.Ot.MOLBIO_MOVE]:!0,[i.Ot.MOLBIO_OPEN]:!0,[i.Ot.MOLBIO_ARCHIVE]:!0,[i.Ot.MOLBIO_UNARCHIVE]:!0,[i.Ot.MOLBIO_ADD_TO_WORKLIST]:!0,[i.gx.PROCESSES_ADMIN]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_AT_MENTION]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_ARCHIVE]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_CREATE]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_DELETE]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_DISCOVER]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_EDIT]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_EDIT_TAGS]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_EXPORT]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_OPEN]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_MOVE]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_SHOW_DETAILS]:s.ZP.WORKFLOWS_ENABLE,[i.gx.PROCESSES_UNARCHIVE]:s.ZP.WORKFLOWS_ENABLE,[i.ed.REGISTRY_EXPORT]:!0,[i.ed.REGISTRY_MOVE]:!0,[i.ed.REGISTRY_OPEN]:!0,[i.ed.REGISTRY_UNREGISTER]:!0,[i.ed.REGISTRY_WORKLISTS]:!0,[i.ed.REGISTRY_ADMIN]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_DISCOVER]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_IMPORT]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_CREATE]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_DELETE]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_EDIT]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_EDIT_TAGS]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_REGISTER]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_SET_SCHEMA]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_SHOW_DETAILS]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_AT_MENTION]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_ARCHIVE]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_UNARCHIVE]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_BATCHES]:s.ZP.ENABLE_REGISTRY,[i.ed.REGISTRY_MIXTURES]:s.ZP.ENABLE_REGISTRY,[i.gm.RESULTS_ADMIN]:s.ZP.ENABLE_NEW_RESULTS,[i.gm.RESULTS_CREATE]:s.ZP.ENABLE_NEW_RESULTS,[i.gm.RESULTS_OPEN]:s.ZP.ENABLE_NEW_RESULTS,[i.gm.RESULTS_SHOW_DETAILS]:s.ZP.ENABLE_NEW_RESULTS,[i.jE.DEVELOPER_PLATFORM_DISCOVER]:!0,[i.jE.DEVELOPER_PLATFORM_OPEN]:!0,[i.jE.DEVELOPER_PLATFORM_ADMIN]:!0,[i.jE.DEVELOPER_PLATFORM_API_KEY_AUTH]:!0}[e]}(e.feature))}var c,d=n(722938),u=n(473446),p=n(920287)
function getCapabilityFeatureStatus(e,t=!1){var n
if(function shouldUseLegacyGating(e){return!s.ZP.IDENTITY_ENABLE_CAPABILITY_GATING||(0,p.u4)(e)&&!s.ZP.IDENTITY_ENABLE_GATING_AND_PROVISIONING_IN_DEVELOPMENT_CAPABILITIES}(e.feature))return makeFeatureStatus(legacyIsFeatureEnabled(e,t),c.LEGACY)
if(function isFeatureEnabledFromShareLink(e){return!(!e.item||e.item.id!==(0,r.A$)())&&(null!=l?l:new Set).has(e.feature)}(e))return{enabled:!0}
if((0,i.Fk)(e)&&(null===(n=e.item)||void 0===n?void 0:n.permissions))return makeFeatureStatus(isFeatureEnabledFromPermissions(e.feature,e.item),c.INSUFFICIENT_PERMISSION)
const a=(0,d.Sn)([e.feature])
return makeFeatureStatus(function isFeatureEnabledFromFeatureList(e){return!o||o.has(e)}(e.feature),c.MISSING_CAPABILITY,a)}function getItemIfExists(e){return(0,i.nn)(e)?e.item:null}function getItemIfHasPermissions(e){return e&&(0,i.UV)(e)?e:void 0}function getStandardFeatureStatus(e){const t=(0,u.Gv)(e)
if(null==t)return function getUnmappedStandardFeatureStatus(e){const t=getItemIfHasPermissions(getItemIfExists(e))
if(!t)return{enabled:!0};(0,a.hu)(Object.keys(i._W).includes(e.feature),"StandardFeature does not support permissions lookup",{feature:e.feature})
const n=i._W[e.feature]
return n===i.qw||t.permissions[n]?{enabled:!0}:{enabled:!1,reason:c.INSUFFICIENT_PERMISSION}}(e)
const n=function translateIntoCapabilityDefinitions(e,t){const n=getItemIfExists(e)
return t.map((e=>(0,i.KE)(e)?{feature:e,item:getItemIfHasPermissions(n)}:{feature:e,...n?{item:n}:{}}))}(e,t),s=function getCapabilityFeatureListStatus(e,t=!1){let n=!0
const a=[]
for(const i of e){const e=getCapabilityFeatureStatus(i,t)
e.enabled?n=!1:e.reason===c.MISSING_CAPABILITY&&a.push(i)}if(n&&a.length)return{allDisabled:n,userMessage:(0,d.Sn)(a.map((e=>e.feature)))}
return{allDisabled:n}}(n,!0)
return makeFeatureStatus(!s.allDisabled,c.MISSING_CAPABILITY,s.userMessage)}!function(e){e.MISSING_CAPABILITY="MISSING_CAPABILITY"
e.INSUFFICIENT_PERMISSION="INSUFFICIENT_PERMISSION"
e.LEGACY="LEGACY"}(c||(c={}))
function makeFeatureStatus(e,t,n){return e?{enabled:!0}:{enabled:!1,reason:t,userMessage:n}}function getFeatureStatus(e){return function getCapabilityManagementFeatureStatus(e){return(0,i.BD)(e)?getStandardFeatureStatus(e):getCapabilityFeatureStatus(e)}(e)}function isFeatureEnabled(e){return getFeatureStatus(e).enabled}function isConnectFeatureEnabled(e){return getFeatureStatus(e).enabled&&s.ZP.INSTRUMENTS_ENABLE}function areAnyFeaturesEnabled(e){return e.some((e=>isFeatureEnabled(e)))}function areAllFeaturesEnabled(e){return e.every((e=>isFeatureEnabled(e)))}},199821:(e,t,n)=>{n.d(t,{Z:()=>getPolicyName})
function getPolicyName(e){return e.name.toUpperCase()}},69934:(e,t,n)=>{n.d(t,{Z:()=>getUserFacingPolicies})
function getUserFacingPolicies(e){return e.filter((e=>!e.isHidden))}},122717:(e,t,n)=>{n.d(t,{EV:()=>initListeners})
var a=n(232606),i=n(771398)
var s=n(989526),r=n(334148),o=n(205986)
const l="IDLE_TIME_WARNING_MODAL_KEY"
function IdleTimeoutWarningModal(e){return s.createElement(o.ZP,{onRequestClose:e.onRequestClose,closeable:!1,closeableOnBackgroundClick:!1,closeableOnEscapeKey:!1,title:"Your session is about to expire",medium:!0,buttons:[{text:"Sign out",submit:!0,asLink:!0,dataMethod:"POST",href:"/signout",style:r.ZJ.SECONDARY_WHITE,onClick:e.onSignOut},{text:"Continue",cancel:!0,style:r.ZJ.SECONDARY,onClick:e.onRequestClose}]},s.createElement("p",null,"For security reasons, your session will expire soon due to inactivity."),s.createElement("p",null,"Click Continue to stay signed in."))}function broadcastToTabs(e,t){e&&e.postMessage(t)}var c=n(675649),d=n(99312),u=n(788836),p=n(629656),m=n(502633),E=n(145007)
const h=6e4,g=12e4;(0,a.hu)(!0,"Warning time 120000 must be greater than heartbeat time 60000")
let S,_,T=!1,I=Date.now(),A=null
const f=d.isBrowser&&d.supportsBroadcastChannel?new BroadcastChannel("benchling.userSession.timeoutChannel"):null
function handleTimeoutEvent(e){if(null!=u.Z.currentUser()){!0===e.data.timeout&&c.bO()
e.data.warningDelay&&setWarningTimeout(e.data.warningDelay)
if(e.data.closeWarningModal){T=!1
p.xv(l)}e.data.signOut&&i.e7("POST","/signout")}}function setLastActive(e){I=e}function initListeners(e=y){if(null!=u.Z.currentUser()){!function bindEventListeners(e){window.addEventListener("resize",e,{capture:!0});["keydown","pointerdown","pointermove","scroll","wheel"].forEach((t=>{document.addEventListener(t,e,{capture:!0})}))
document.addEventListener("visibilitychange",(t=>{"visible"===document.visibilityState&&e(t)}),{capture:!0})}(e)
setInterval(pingServer,h)
!function bindChannelListener(e,t){e&&(e.onmessage=t)}(f,handleTimeoutEvent)
setLastActive(Date.now())}}const y=(0,E.Z)(((e,t=T,n=Date.now(),a=A)=>{if(!t){setLastActive(n)
a&&n>a-18e4&&pingServer(n)}}),500)
async function pingServer(e=Date.now()){const t=Math.round((e-function getLastActive(){return I}())/1e3),{secondsUntilTimeout:n}=await function setClientLastActive(e){return i.Ry({url:"/1/api/session:keep-alive",data:{secondsSinceLastActive:e}})}(t)
null==n?A=null:function handleUpdatedProjectedTimeout(e,t=T){A=Date.now()+1e3*e
if(!t){const t=Math.max(0,1e3*e-g)
setWarningTimeout(t)
broadcastToTabs(f,{warningDelay:t})}clearTimeout(S)
S=setTimeout(pingServer,1e3*e+2e3)}(n)}function setWarningTimeout(e){clearTimeout(_)
_=setTimeout((()=>{(0,m.Z)(IdleTimeoutWarningModal,{onRequestClose:continueSession,onSignOut:()=>{broadcastToTabs(f,{signOut:!0})},modalKey:l})
T=!0}),e)}function continueSession(e=Date.now()){T=!1
broadcastToTabs(f,{closeWarningModal:!0})
setLastActive(e)
pingServer()}},832821:(e,t,n)=>{n.d(t,{ZP:()=>isCollaboratable})
var a=n(188663),i=n(581210),s=n(232606),r=n(348920)
const o=new Set([a.J.ENTITY_SCHEMA,a.J.FEATURE_LIBRARY,a.J.PROJECT,a.J.REGISTRY,a.J.RESULT_SCHEMA,a.J.RUN_SCHEMA,a.J.STAGE_ENTRY,a.J.TEMPLATE_COLLECTION,a.J.WORKLIST])
function isCollaboratable(e){if((0,i.Id)(e)){const t=(0,i.tQ)(e)
return(0,i.Dj)(e,a.i.COLLABORATABLE)&&!o.has(t)&&function capabilityEnabledByConfig(e){const t=new Map([[a.J.FOLDER,r.ZP.PERMISSIONS_ENABLE_GRANULAR_FOLDER_PERMISSIONS],[a.J.ENTRY,r.ZP.PERMISSIONS_ENABLE_GRANULAR_ENTRY_PERMISSIONS]]);(0,s.Gp)(t.has(e),`Core object type ${e} must be mapped in isCollaboratable.`)
return Boolean(t.get(e))}(t)}return!1}},985379:(e,t,n)=>{n.d(t,{E:()=>i,Z:()=>reducePolicies})
var a=n(973625)
const i={dataPolicies:void 0}
function reducePolicies(e=i,t){switch(t.type){case a.Z5.POLICIES_BOOTSTRAPPED:return{...e,dataPolicies:t.dataPolicies}
case a.Z5.DATA_POLICY_UPDATED:return{...e,dataPolicies:e.dataPolicies.map((e=>e.id===t.dataPolicy.id?t.dataPolicy:e))}
default:return e}}},131689:(e,t,n)=>{n.d(t,{Z:()=>getActionRowDatas})
var a=n(64558),i=n(933388),s=n(348920),r=n(477956),o=n(922805)
function getActionRowDatas(e,t,n){n||(n=0)
return[].concat(...t.filter((e=>function isLeafActionOptionVisible(e){return!e.hidden&&("actionOptions"in e||![i.aU.RESTRICT_SAMPLES,i.aU.UNRESTRICT_SAMPLES,i.aU.EDIT_RESTRICTED_SAMPLE_USERS].includes(e.action)||(0,o.Eq)(r.F.V2))}(e))).map((t=>function expandActionOption(e,t,n){if(!("actionOptions"in t)){const a=t
return"EDIT_CHEMICAL_STRUCTURE"!==a.action||s.ZP.CHEMISTRY_ENABLE_MOLECULE?[{name:a.name,disabled:Boolean(a.disabled),description:a.description,actionItemTypes:[{action:a.action,itemType:a.itemTypeOverride||e}],conditionOptions:a.conditionOptions,level:n}]:[]}const i=t,r=getActionRowDatas(e,i.actionOptions,n+1)
return[{name:i.name,disabled:r.some((e=>e.disabled)),description:i.description,actionItemTypes:[].concat(...r.map((e=>e.actionItemTypes))),conditionOptions:(0,a.wf)(r.map((e=>e.conditionOptions)),(e=>e.condition)),level:n},...r]}(e,t,n))))}},185268:(e,t,n)=>{n.d(t,{ZP:()=>BenchlingAppEditor,Yd:()=>getStringValueForDependency})
var a=n(989526),i=n(492262),s=n(615439),r=n.n(s),o=n(531041),l=n(232606),c=n(711023),d=n(459830),u=n(537076),p=n(204026),m=n(65301),E=n(730216),h=n(122599),g=n(979518),S=n(889234),_=n(408266),T=n(211332),I=n(57665),A=n(404565),f=n(848300),y=n(23553),C=n(993391),R=n(229329),b=n(137975),N=n(30609),O=n(686177),L=n(473056),P=n(759345),D=n(346383),v=n(514674),M=n(10584),B=n(117170),U=n(997574),F=n(868710),w=n(334148),k=n(692013),x=n(764403),Z=n.n(x),G=n(271359),H=n(36424),W=n(369706),q=n(223629),V=n(232493)
function BenchlingAppConfigurationArrayElement({arrayName:e,element:t,forceExpand:n,changeElement:i,removeElement:s,updateArrayElementValidation:r}){const[o,l]=(0,a.useState)(n),[c,d]=(0,a.useState)((0,V.TQ)(t.elementConfigs));(0,a.useEffect)((()=>{r(e+t.name,{validation:c,arrayElementName:t.name,arrayName:e})}),[c,e,t.name])
return a.createElement("div",{className:(0,k.iv)(J.rowContainer)},a.createElement("div",{className:"u-lr-split"},a.createElement("span",null,a.createElement("span",{className:(0,k.iv)(J.cursorHover),onClick:function toggleExpanded(){l(!o)}},o?a.createElement(H.Z,{className:"u-small-spacing-right",icon:"chevron-down"}):a.createElement(H.Z,{className:"u-small-spacing-right",icon:"chevron-right"})),a.createElement("span",{className:(0,k.iv)(J.elementName)},a.createElement(W.Z,{emptyValueAllowed:!1,requestChange:n=>{const a=t.name,s={...t,name:n}
i(s)
r(e+a,null)},type:W.T.TEXT,value:t.name,isFullWidth:!1}))),a.createElement("span",{className:Z()("u-small-spacing-right",(0,k.iv)(J.cursorHover)),onClick:s},a.createElement(H.Z,{icon:"format-delete"}))),o&&t.elementConfigs&&a.createElement("div",{className:(0,k.iv)(J.elementConfigContainer)},a.createElement(q.Z,{configuration:t.elementConfigs,updateConfiguration:function handleChangeElementConfigs(e){const n={...t,elementConfigs:e}
i(n)},configsValidation:c,updateConfigsValidation:d,updateArrayElementValidation:(e,t)=>{}})))}const J=k.mM.create({rowContainer:{paddingLeft:"10px",paddingRight:"10px",border:"1px",borderStyle:"solid",borderColor:G.pF,marginBottom:"10px"},elementConfigContainer:{padding:"15px",paddingTop:"0px"},description:{marginBottom:"8px"},cursorHover:{":hover":{cursor:"pointer"}},elementName:{display:"inline-block",fontWeight:"bold",marginBottom:"0px"}})
function makeEmptySubdependencies(e){return null!=e?e.map((e=>({...e,value:null}))):null}function makeNewBlankElement(e,t){return{__typename:"BenchlingAppConfigArrayElementNode",name:`Element ${t}`,elementConfigs:e.map((e=>{return{...e,value:null,options:makeEmptySubdependencies(e.options),fieldDefinitions:makeEmptySubdependencies(e.fieldDefinitions),output:(t=e.output,null!=t?{...t,fieldDefinitions:makeEmptySubdependencies(t.fieldDefinitions)||[]}:null)}
var t}))}}function BenchlingAppConfigurationArrayRow({arrayName:e,elementDefinition:t,elements:n,minElements:i,maxElements:s,onChangeElements:r,updateArrayElementValidation:o}){const[l,c]=(0,a.useState)(n.length),[d,u]=(0,a.useState)(new Set)
function cannotAddElements(){return Boolean(s)&&n.length>=(null!=s?s:0)}return a.createElement("div",null,a.createElement("div",null,n&&n.map(((t,i)=>a.createElement(BenchlingAppConfigurationArrayElement,{arrayName:e,element:t,key:t.name,forceExpand:d.has(i),changeElement:e=>{!function changeElement(e,t){const a=[...n.slice(0,t),e,...n.slice(t+1)]
r(a)}(e,i)},removeElement:()=>{!function removeElement(e){const t=[...n.slice(0,e),...n.slice(e+1)]
r(t)
const a=new Set(d)
a.delete(e)
u(a)}(i)
o(e+t.name,null)},updateArrayElementValidation:o})))),a.createElement(F.pf,{tooltipTitle:cannotAddElements()?`Cannot add any more elements: maximum of ${s} reached`:""},a.createElement(w.Co,{buttonStyle:w.ZJ.SECONDARY_WHITE,size:w.qE.MINI,icon:"compose",text:"Add element",disabled:cannotAddElements(),onClick:function appendNewElement(){const e=l+1
c(e)
const a=e.toString(),i=[...n,makeNewBlankElement(t,a)]
r(i)
const s=new Set(d)
s.add(n.length)
u(s)}})))}var K=n(769784),Y=n(392663),X=n(751512),$=n(91092),z=n(954240),j=n(476604),Q=n(472347)
const ee=K.Ps`
  query BenchlingAppsDropdownQuery @skipAudit @engComponent(name: BENCHLING_APPS) {
    registries {
      id
      schemaFieldSelectors {
        name
        id
        ...HasArchiveRecordGraphQL
      }
    }
  }
  ${(0,$.f)("HasArchiveRecord").fragment}
`
function SchemaFieldSelectorInput({value:e,onChange:t,disabled:n}){const i=(0,X.IJ)(ee)
let s
if(i.type===X.NI.ERROR)return null
if(i.type===X.NI.PENDING)return a.createElement(j.b,null)
s=i.data.registries.map((e=>e.schemaFieldSelectors)).flat()
const r=0===s.length?[{name:"No dropdowns found"}]:[{name:"No dropdown",value:null},{name:"Dropdowns",isHeader:!0},...s.map((e=>({name:e.name,value:e.id})))]
return a.createElement(z.ZP,{displayName:function getSelectorDisplayName(e,t){if(null==e)return"No Dropdown Selected"
const n=t.find((t=>t.id===e))
return n?(0,Y.Z)(n):"Inaccessible dropdown"}(e,s),disabled:n,menu:a.createElement(Q.Z,{onSelect:t,optionDatas:r,selectedValue:e})})}var te=n(974913),ne=n(865486)
const ae=K.Ps`
  query AppConfigurationProcessTaskSchemaSelectorQuery @skipAudit {
    processTaskSchemas {
      name
      id
    }
  }
`
function AppConfigurationProcessTaskSchemaSelector(e){var t
const n=[{name:"No Workflow Task Schema",value:null},{name:"Workflow Task Schemas",isHeader:!0},...e.processTaskSchemas.map((({id:e,name:t})=>({name:t,value:e})))],i=null===(t=e.processTaskSchemas.find((t=>t.id===e.selectedProcessTaskSchemaId)))||void 0===t?void 0:t.name
return a.createElement(z.ZP,{menu:a.createElement(Q.Z,{width:ne.ZP.WIDTHS.FULL,optionDatas:n,onSelect:e.onChange}),displayName:i||"Select a Workflow Task Schema",disabled:e.disabled})}function QueryingAppConfigurationProcessTaskSchemaSelector(e){const t=(0,X.IJ)(ae)
if(t.type===X.NI.ERROR){te.ZP.error("Unable to query workflow task schemas. Try refreshing the page.")
return a.createElement("div",null)}return t.type===X.NI.PENDING?a.createElement(j.b,{suppressPadding:!0}):a.createElement(AppConfigurationProcessTaskSchemaSelector,{...e,processTaskSchemas:t.data.processTaskSchemas})}var ie=n(539362),se=n(908503)
const re=K.Ps`
  query AppConfigurationProcessTaskStatusSelectorQuery @skipAudit @engComponent(name: BENCHLING_APPS) {
    processTaskStatuses {
      ... on ProcessTaskStatusNode {
        id
        displayName
        statusType
      }
    }
  }
`
function AppConfigurationProcessTaskStatusSelector(e){var t
const n=[{name:"No Task Status",value:null},{name:"Statuses",isHeader:!0},...(0,se.GP)(e.processTaskStatuses).map((({id:e,displayName:t,statusType:n})=>({name:t,icon:ie.ny[n].icon,iconClassName:(0,k.iv)(ie.Gm[n]),value:e})))],i=null===(t=e.processTaskStatuses.find((t=>t.id===e.selectedTaskStatusId)))||void 0===t?void 0:t.displayName
return a.createElement(z.ZP,{menu:a.createElement(Q.Z,{width:ne.ZP.WIDTHS.FULL,optionDatas:n,onSelect:e.onChange}),displayName:i||"Select a Task Status",disabled:e.disabled})}function QueryingAppConfigurationProcessTaskStatusSelector(e){const t=(0,X.IJ)(re)
if(t.type===X.NI.ERROR){te.ZP.error("Unable to query workflow task statuses. Try refreshing the page.")
return a.createElement("div",null)}return t.type===X.NI.PENDING?a.createElement(j.b,null):a.createElement(AppConfigurationProcessTaskStatusSelector,{...e,processTaskStatuses:t.data.processTaskStatuses})}function ScalarEnumSelectorInput({value:e,isEditable:t,onChange:n,scalarEnum:i,requiredConfig:s}){return a.createElement(z.ZP,{displayName:null==e?"Select option":String(e),disabled:!t,menu:a.createElement(Q.Z,{onSelect:n,optionDatas:function getEnumDropdownOptions(e){let t=e.map((e=>({value:e,name:String(e)})))
t=o.default.sortBy(t,"name")
s||t.unshift({value:null,name:"No option"})
return t}(i),selectedValue:e})})}var oe=n(74801)
function getStringValueForDependency(e,t){if(null==e)return e;(0,l.Gp)("string"==typeof e,`Unexpected data type ${typeof e} for dependency config ${t}`)
return e.toString()}function singleValueToArrayValues(e){return e?[e]:[]}function withSingleIdToSelectedItemsArray(e){return t=>{const{id:n,onChange:i,...s}=t
return a.createElement(e,{...s,selectedItems:singleValueToArrayValues(n).map((e=>({id:e}))),onChange:e=>{i(function arrayValuesToSingleValue(e){var t;(0,l.Gp)(e.length<=1,`App config supports selecting one or zero values, got ${e.length} values`)
return null!==(t=e[0])&&void 0!==t?t:null}(e.map((e=>e.id))))}})}}const le=withSingleIdToSelectedItemsArray(m.m),ce=withSingleIdToSelectedItemsArray(C.H),de=withSingleIdToSelectedItemsArray(h.l)
function coerceEmptyStringToNullForSave(e){return""!==e?e:null}function coerceNullToEmptyStringForDisplay(e){return null!=e?e:""}function createInvalidInputError(e,t,n){return{type:oe.v.InvalidInputError,message:`${n} is not a valid ${t} value for ${e}.`}}function BenchlingAppEditor({type:e,subtype:t,name:n,value:s,requiredConfig:m,onChangeValue:h,onChangeElements:C,dependencyValidation:F,updateDependencyConfigValidation:w,updateArrayElementValidation:k,isEditable:x,schemaId:Z,elementDefinition:G,minElements:H=null,maxElements:W=null,scalarEnum:q=null,elements:V}){var J;(0,a.useEffect)((()=>{const t=F.errors,a=function getValidationErrors(e){var t
const n=[]
if(e.type===c.Az.boolean)return n
if(null!=e.value){e.type===c.Az.float&&Number.isNaN(Number(e.value))&&n.push(createInvalidInputError(e.name,e.type,e.value))
e.type!==c.Az.integer||Number.isInteger(e.value)||n.push(createInvalidInputError(e.name,e.type,e.value))
e.type!==c.Az.datetime||(0,M.rt)({textValue:String(e.value)})||n.push(createInvalidInputError(e.name,e.type,e.value))
e.type!==c.Az.date||(0,M.qb)({textValue:String(e.value)})||n.push(createInvalidInputError(e.name,e.type,e.value))}if(e.type===c.Az.array){e.minElements&&(null==e.elements&&e.minElements>0||null!=e.elements&&e.elements.length<e.minElements)&&n.push({type:oe.v.ConfigArrayNumberOfElementsError,message:`${e.name}: too few (${(null===(t=e.elements)||void 0===t?void 0:t.length)||0}), must be at least ${e.minElements}.`})
e.maxElements&&null!=e.elements&&e.elements.length>e.maxElements&&n.push({type:oe.v.ConfigArrayNumberOfElementsError,message:`${e.name}: too many (${e.elements.length}), must be no more than ${e.maxElements}.`})}if(null!=e.elements){const t=[],a=new Set
for(const n of e.elements)t.includes(n.name)?a.add(`'${n.name}'`):t.push(n.name)
a.size>0&&n.push({type:oe.v.DuplicateArrayNameError,message:`${e.name} array contains duplicate element names ${Array.from(a).join(", ")}`})}e.requiredConfig&&!e.value&&n.push({type:oe.v.RequiredConfigError,message:`${e.name} is required.`})
return n}({name:n,type:e,value:s,requiredConfig:m,elements:V,minElements:H,maxElements:W})
if(!r()(t,a)){const e=(0,E.Z)(F)
e.errors=a
w(e)}}),[F,n,e,s,m,V,H,W,q,w])
switch(e){case c.Az.array:return null!=G?a.createElement(BenchlingAppConfigurationArrayRow,{arrayName:n,elementDefinition:G,elements:V||[],minElements:H,maxElements:W,onChangeElements:C,updateArrayElementValidation:k}):a.createElement(a.Fragment,null)
case c.Az.dropdown:return a.createElement(SchemaFieldSelectorInput,{onChange:h,value:getStringValueForDependency(s,n),disabled:!x})
case c.Az.plate_schema:return a.createElement(y.Z,{onChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},selectedPlateSchemaId:getStringValueForDependency(s,n),shouldShowNoSchemaOption:!0})
case c.Az.container_schema:return a.createElement(A.ZP,{onChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},selectedContainerSchemaId:getStringValueForDependency(s,n),shouldShowNoSchemaOption:!0})
case c.Az.box_schema:return a.createElement(I.Z,{onChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},selectedBoxSchemaId:getStringValueForDependency(s,n),shouldShowNoSchemaOption:!0})
case c.Az.location_schema:return a.createElement(f.Z,{onChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},selectedLocationSchemaId:getStringValueForDependency(s,n),shouldShowNoSchemaOption:!0})
case c.Az.run_schema:return a.createElement(g.h5,{onAssayRunSchemaChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},selectedAssayRunSchemaId:getStringValueForDependency(s,n),showPreview:!1,shouldShowNoSchemaOption:!0})
case c.Az.request_schema:return a.createElement(_.Co,{selectedRequestSchemaId:getStringValueForDependency(s,n),isRequestSchemaValid:()=>!0,onRequestSchemaChange:e=>{var t
h(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null)},shouldShowNoSchemaOption:!0})
case c.Az.result_schema:return a.createElement(T.$n,{selectedSchemaId:getStringValueForDependency(s,n),isDisabled:!x,onChange:e=>{h(e?e.id:null)},shouldShowNoSchemaOption:!0})
case c.Az.entry_schema:case c.Az.entity_schema:{let i=null
i=e===c.Az.entry_schema?[d.ENTRY]:t?[c.zV[t]]:(0,u.getRegistrySupportedOligoAwareTypes)()
return a.createElement(v.ZP,{oligoAwareFolderItemTypes:i,onChange:e=>{h(e?e.id:null)},selectedTagSchemaId:getStringValueForDependency(s,n),allowNone:!0})}case c.Az.workflow_task_schema:return a.createElement(QueryingAppConfigurationProcessTaskSchemaSelector,{onChange:h,selectedProcessTaskSchemaId:getStringValueForDependency(s,n),disabled:!x})
case c.Az.registry:return a.createElement(S.Z,{registryId:getStringValueForDependency(s,n),onChange:e=>{var t,n
h(null!==(n=null===(t=e.target.value)||void 0===t?void 0:t.id)&&void 0!==n?n:null)}})
case c.Az.folder:return a.createElement(p.Z,{allowNone:!0,level:"read",value:getStringValueForDependency(s,n),showInventory:!0,onChange:e=>{h(e.target.value)},readOnly:!x,unsetOnFetchFail:!0})
case c.Az.entry:return a.createElement(de,{autoFocus:!1,id:getStringValueForDependency(s,n),onChange:h,disabled:!x})
case c.Az.worklist:return a.createElement(U.Z,{disabled:!x,onChange:e=>{e&&h(e.id)},worklistTypes:Object.values(B.FN)})
case c.Az.project:return a.createElement(D.Z,{allowNone:!0,enableRedesign:!0,level:"read",onProjectSelected:h,selectedProjectId:getStringValueForDependency(s,n)})
case c.Az.workflow_task_status:return a.createElement(QueryingAppConfigurationProcessTaskStatusSelector,{onChange:h,selectedTaskStatusId:getStringValueForDependency(s,n),disabled:!x})
case c.Az.dna_sequence:case c.Az.dna_oligo:case c.Az.aa_sequence:case c.Az.custom_entity:case c.Az.mixture:case c.Az.molecule:case c.Az.rna_oligo:case c.Az.rna_sequence:return a.createElement(le,{disabled:!x,autoFocus:!1,id:getStringValueForDependency(s,n),onChange:h,tagSchemaOrInterfaceId:Z,bioentityType:c.b8[e]})
case c.Az.box:case c.Az.container:case c.Az.location:case c.Az.plate:(0,l.Gp)(Object.values(d.StorableItem).includes(e),"Keep ")
return a.createElement(ce,{disabled:!x,storableTypes:[e],autoFocus:!1,id:getStringValueForDependency(s,n),onChange:h})
case c.Az.boolean:return a.createElement(R.Z,{isDisabled:!x,id:o.default.uniqueId("AppConfigurationCheckboxInput"),checked:null!==(J=s)&&void 0!==J&&J,onChange:e=>{h(e.target.checked)},label:""})
case c.Az.float:return q?a.createElement(ScalarEnumSelectorInput,{value:s,isEditable:x,onChange:h,scalarEnum:q,requiredConfig:m}):a.createElement(b.A,{isDisabled:!x,required:!1,validateInteger:!1,value:s,onChange:e=>{e.target.isValid?h(e.target.numericValue):h(e.target.value)}})
case c.Az.integer:return q?a.createElement(ScalarEnumSelectorInput,{value:s,isEditable:x,onChange:h,scalarEnum:q,requiredConfig:m}):a.createElement(b.A,{max:2147483647,min:-2147483648,isDisabled:!x,required:!1,validateInteger:!0,value:s,onChange:e=>{e.target.isValid?h(e.target.numericValue):h(e.target.value)}})
case c.Az.date:return a.createElement(O.Wr,{value:coerceNullToEmptyStringForDisplay(s),onChange:e=>{h(coerceEmptyStringToNullForSave(e))}})
case c.Az.datetime:return a.createElement(O.ZP,{value:coerceNullToEmptyStringForDisplay(s),onChange:e=>{h(coerceEmptyStringToNullForSave(e))},placeholder:"",autoFocus:!1,validDatetimeInputFormats:M.qM,datetimePresentationalFormat:M.qL,timeInputPlaceholder:"hh=mm AM/PM",timeInformalInputFormats:N.K9,timeFormalInputFormats:N.Ps,timePresentationalFormat:M.mx})
case c.Az.json:return a.createElement(i.ZP,{readOnly:!x,mode:"json",onChange:e=>{h(e)},value:coerceNullToEmptyStringForDisplay(s),editorProps:{$blockScrolling:!0}})
case c.Az.secure_text:return a.createElement(L.Z,{disabled:!x,onChange:e=>{h(e)},name:n,parentType:"configurations",value:coerceNullToEmptyStringForDisplay(s)})
case c.Az.text:default:return q?a.createElement(ScalarEnumSelectorInput,{value:s,isEditable:x,onChange:h,scalarEnum:q,requiredConfig:m}):a.createElement(P.Z,{disabled:!x,onChange:e=>{h(coerceEmptyStringToNullForSave(e.target.value))},value:coerceNullToEmptyStringForDisplay(s),dataTestAttrs:{component:"BenchlingAppEditor",element:"TextInput",key:n}})}}},711023:(e,t,n)=>{n.d(t,{Az:()=>s.Az,Kn:()=>a,MU:()=>l,_K:()=>isParentDependencyType,b8:()=>r,zV:()=>c})
var a,i=n(459830),s=n(256605)
!function(e){e.workflow_task_schema_output="workflow_task_schema_output"}(a||(a={}))
const r={[s.Az.dna_sequence]:i.SEQUENCE,[s.Az.dna_oligo]:i.OLIGO,[s.Az.aa_sequence]:i.PROTEIN,[s.Az.custom_entity]:i.BASIC_FOLDER_ITEM,[s.Az.mixture]:i.MIXTURE,[s.Az.molecule]:i.MOLECULE,[s.Az.rna_oligo]:i.OLIGO,[s.Az.rna_sequence]:i.RNA_SEQUENCE},o=(s.Az.boolean,s.Az.date,s.Az.datetime,s.Az.float,s.Az.integer,s.Az.secure_text,s.Az.text,s.Az.json,[s.Az.dropdown,s.Az.result_schema,s.Az.request_schema,s.Az.run_schema,s.Az.plate_schema,s.Az.box_schema,s.Az.location_schema,s.Az.container_schema,s.Az.entry_schema,s.Az.entity_schema,s.Az.workflow_task_schema])
function isParentDependencyType(e){return o.includes(e)}const l={[s.Az.result_schema]:"fieldDefinitions",[s.Az.request_schema]:"fieldDefinitions",[s.Az.run_schema]:"fieldDefinitions",[s.Az.plate_schema]:"fieldDefinitions",[s.Az.box_schema]:"fieldDefinitions",[s.Az.location_schema]:"fieldDefinitions",[s.Az.container_schema]:"fieldDefinitions",[s.Az.entry_schema]:"fieldDefinitions",[s.Az.entity_schema]:"fieldDefinitions",[s.Az.dropdown]:"options",[s.Az.workflow_task_schema]:"fieldDefinitions"},c={[s.aO.aa_sequence]:i.PROTEIN,[s.aO.dna_sequence]:i.SequenceSubtype.SEQUENCE,[s.aO.mixture]:i.MIXTURE,[s.aO.molecule]:i.MOLECULE,[s.aO.custom_entity]:i.BASIC_FOLDER_ITEM,[s.aO.dna_oligo]:i.SequenceSubtype.DNA_OLIGO,[s.aO.rna_oligo]:i.SequenceSubtype.RNA_OLIGO,[s.aO.rna_sequence]:i.SequenceSubtype.RNA_SEQUENCE}},971279:(e,t,n)=>{n.d(t,{L:()=>m,Z:()=>E})
var a=n(769784),i=n(440281),s=n.n(i),r=n(15655),o=n(459830),l=n(325740),c=n(91092),d=n(697134),u=n(766455),p=n(902246)
class BenchlingAppToolbarState extends s().Model{}const m=a.Ps`
  query getBenchlingAppFileStateQuery($benchlingAppId: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingApp(id: $benchlingAppId) {
      ... on BenchlingAppNode {
        ...BenchlingAppGraphQL
      }
    }
  }
  ${(0,c.f)("BenchlingApp").fragment}
`
class BenchlingAppFileState extends l.Z{static getQueryOptions(e){return{query:m,variables:{benchlingAppId:e}}}static dataToAttributes(e){if((0,d.CZ)(e.benchlingApp))return{}
const t=e.benchlingApp
return{benchlingApp:t,name:t.name,url:t.url}}static openFile(e){return super.openFile(e)}defaults(){return{...super.defaults(),toolbar:new BenchlingAppToolbarState,statusbar:new r.PM,hideTabNav:!0}}initialize(...e){super.initialize(...e)
const t=new u.Sq([new u.aL,new u.aL({active:!1})])
this.set({buffers:t})
t.addTab(new p.Z({benchlingAppId:this.id}),{active:!0})}editURL(){return this.get("url")}name(){return this.get("name")||"Loading..."}registerTitleAndURLSync(){this.on("change:name change:url",(()=>{this.syncTitleAndURL()}))}hasUnsavedChanges(){return!1}cleanUp(){super.cleanUp()}}BenchlingAppFileState.fileType=o.BENCHLING_APP
const E=BenchlingAppFileState},902246:(e,t,n)=>{n.d(t,{Z:()=>BenchlingAppTabState})
var a=n(766455)
class BenchlingAppTabState extends a.Xh{defaults(){return{...super.defaults(),title:"App",closeable:!1,preferenceKey:"benchling-app"}}}},223629:(e,t,n)=>{n.d(t,{Z:()=>BenchlingAppConfigurationRowSet})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(711023),l=n(730216),c=n(271359),d=n(877223)
function BenchlingAppConfigurationRowSet({configuration:e,updateConfiguration:t,configsValidation:n,updateConfigsValidation:i,updateArrayElementValidation:o}){return r.createElement("div",{className:s()((0,a.iv)(u.configCard))},e.map(((a,s)=>{var l,c
const u=getMaybeSubdependencies(a)
return r.createElement("div",{key:s,className:"u-spacing-top"},r.createElement(d.Z,{...a,value:a.value,elementDefinition:a.elementDefinition,minElements:a.minElements,maxElements:a.maxElements,scalarEnum:a.enum,onChangeValue:n=>{t(function handleSetParentConfigurationState(e,t,n){var a,i
const s=e[t]
let r=getMaybeSubdependencies(s),o=null!==(i=null===(a=s.output)||void 0===a?void 0:a.fieldDefinitions)&&void 0!==i?i:null
if(n!==s.value){null!=r&&(r=r.map((e=>({...e,value:null}))))
null!=o&&(o=o.map((e=>({...e,value:null}))))}const l={...s,value:n,[getSubdependencyKeyForType(s.type)]:r,output:o?{fieldDefinitions:o,__typename:"OutputFieldDefinitionNode"}:null}
return writeConfigValueAtIndex(e,t,l)}(e,s,n))},onChangeElements:n=>{const a=function handleSetElements(e,t,n){const a={...e[t],elements:n}
return writeConfigValueAtIndex(e,t,a)}(e,s,n)
t(a)},dependencyValidation:n[a.name],updateDependencyConfigValidation:e=>{updateDependencyConfigValidation(e,a.name,n,i)},updateArrayElementValidation:o,isEditable:!0,subdependencies:u,onChangeSubdependency:n=>{t(function handleSetSubdependencyConfigurationState(e,t,n){const a=e[t],i={...a,[getSubdependencyKeyForType(a.type)]:n}
return writeConfigValueAtIndex(e,t,i)}(e,s,n))},outputFields:null!==(c=null===(l=a.output)||void 0===l?void 0:l.fieldDefinitions)&&void 0!==c?c:null,onChangeOutputFields:n=>{t(function handleSetOutputFieldsConfigurationState(e,t,n){const a={...e[t],output:{fieldDefinitions:n,__typename:"OutputFieldDefinitionNode"}}
return writeConfigValueAtIndex(e,t,a)}(e,s,n))},elements:a.elements}))})))}function writeConfigValueAtIndex(e,t,n){return[...e.slice(0,t),{...n},...e.slice(t+1)]}const updateDependencyConfigValidation=(e,t,n,a)=>{const i=(0,l.Z)(n)
i[t]=e
a(i)}
function getMaybeSubdependencies(e){var t,n
return null!==(n=null!==(t=e.options)&&void 0!==t?t:e.fieldDefinitions)&&void 0!==n?n:null}function getSubdependencyKeyForType(e){return(0,o._K)(e)?o.MU[e]:"fieldDefinitions"}const u=a.mM.create({configCard:{marginTop:"10px",overflow:"scroll",paddingRight:"10px","::-webkit-scrollbar":{"-webkit-appearance":"none",width:"7px"},"::-webkit-scrollbar-thumb":{"border-radius":"4px","background-color":c.pF}}})},96957:(e,t,n)=>{n.d(t,{Z:()=>BenchlingAppSubdependencyTable})
var a=n(989526),i=n(711023),s=n(769784),r=n(751512),o=n(91092),l=n(697134),c=n(678150),d=n(64558),u=n(692013),p=n(615439),m=n.n(p),E=n(392663),h=n(232606),g=n(675649),S=n(730216),_=n(792209),T=n(497790),I=n(591427),A=n(271359),f=n(954240),y=n(361974),C=n(686836),R=n(476604),b=n(801455),N=n(134749),O=n(472347),L=n(808844),P=n(74801)
function LoadingBaseSubdependencyList({subdependencies:e,subdependencyType:t,parentdependencyType:n}){return a.createElement(BaseSubdependencyList,{subdependencies:e,onChange:d.ZT,updateDependencyConfigValidation:d.ZT,dependencyValidation:{errors:[],subdependencyValidation:{},outputSubdependencyValidation:{}},disabled:!1,isLoading:!0,subdependencyOptions:[],subdependencyType:t,parentdependencyType:n,isWorkflowOutput:!1})}const getReadableType=e=>{if(T.REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING.hasOwnProperty(e))return(0,L.kC)((0,L.E2)(T.REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING[e].type))
if(T.FIELD_TYPES_BY_TYPE_STRING.hasOwnProperty(e))return T.FIELD_TYPES_BY_TYPE_STRING[e].label;(0,h.hu)(T.REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING.hasOwnProperty(e)||T.FIELD_TYPES_BY_TYPE_STRING.hasOwnProperty(e),"internal type provided is not valid.",[e,T.REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING,T.FIELD_TYPES_BY_TYPE_STRING])
return"Never Reached"},generateConstraintError=(e,t)=>{const n=[]
if(null==t.fieldConstraints){(0,h.Gp)(null!=t.fieldConstraints,"field constraint was not found",t)
return"Field Constraints Mismatch."}if(null!=e.internalType){let a=t.fieldConstraints.internalType
"ft_file_link"===a&&null!=t.field&&(a=(0,T.getFolderItemType)(t.field))
if(a!==e.internalType){(0,h.Gp)(T.FIELD_TYPES_BY_TYPE_STRING.hasOwnProperty(e.internalType)||T.REQUIRED_LINK_FOLDER_ITEM_TYPES_BY_TYPE_STRING.hasOwnProperty(e.internalType),"expected field constraints to use an internal type",e.internalType)
const t=a&&getReadableType(a),i=getReadableType(e.internalType)
n.push(`is of type ${t} not ${i}`)}}null!=e.isRequired&&t.fieldConstraints.isRequired!==e.isRequired&&n.push(`is ${t.fieldConstraints.isRequired?"required":"not required"} when it should be ${e.isRequired?"required":"not required"}`)
null!=e.isMulti&&t.fieldConstraints.isMulti!==e.isMulti&&n.push(`is ${t.fieldConstraints.isMulti?"multi":"not multi"} when it should be ${e.isMulti?"multi":"not multi"}`)
return n.length>0?`${t.name}:\n• ${n.join("\n• ")}`:null},validateLinkedResource=({selectedValue:e,maybeConstraints:t,options:n,requiredConfig:a,name:i})=>{const s=[]
a&&!e&&s.push({type:P.v.RequiredConfigError,message:`${i} is required`})
if(!t||!e)return{errors:s}
const r=t,o=n.find((t=>t.id===e))
if(!o)return{errors:s}
const l=generateConstraintError(r,o)
null!=l&&s.push({type:P.v.FieldConstraintsError,message:l})
return{errors:s}}
function BaseSubdependencyList({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,isLoading:r,subdependencyOptions:o,subdependencyType:l,parentdependencyType:c,isWorkflowOutput:d=!1}){const p=(0,L.co)((0,g._6)(2,l)),h=[{name:`No ${l}`,value:null},{name:p,isHeader:!0}],T=d?n.outputSubdependencyValidation:n.subdependencyValidation;(0,a.useEffect)((()=>{const t=(0,S.Z)(n),a=d?t.outputSubdependencyValidation:t.subdependencyValidation,s=Object.assign(a,...e.map((e=>({[e.name]:validateLinkedResource({selectedValue:e.value,maybeConstraints:e.fieldConstraints,options:o,requiredConfig:e.requiredConfig,name:e.name})}))))
d?t.outputSubdependencyValidation=s:t.subdependencyValidation=s
m()(t,n)||i(t)}),[d,e,n,o,i])
function getOptionDisplayName(e,t){if(null==e)return`No ${l} selected`
const n=t.find((t=>t.id===e))
return n?(0,E.Z)(n):`Inaccessible ${l}`}function generatePopoverFields(e){var t
return{fields:[{key:"Description",value:null!==(t=e.description)&&void 0!==t?t:a.createElement("div",{className:(0,u.iv)(D.unset)},"None")},{key:"Required",value:e.fieldConstraints&&(null==e.fieldConstraints.isRequired?"Any":e.fieldConstraints.isRequired?"True":"False")},{key:"Multi-select",value:e.fieldConstraints&&(null==e.fieldConstraints.isMulti?"Any":e.fieldConstraints.isMulti?"True":"False")},{key:"Definition",value:e.fieldConstraints&&(null!=e.fieldConstraints.internalType?getReadableType(e.fieldConstraints.internalType):"Any")}]}}return a.createElement("div",{className:(0,u.iv)(D.container)},a.createElement("div",{className:"u-lr-split"},a.createElement(b.Z,{label:`App ${p}`,labelStyle:b.Z.STYLES.LABEL,className:(0,u.iv)(D.subdepsLabelLeft)}),a.createElement(b.Z,{label:c?`${c} ${p}`:`${p}`,labelStyle:b.Z.STYLES.LABEL,className:(0,u.iv)(D.subdepsLabelRight)})),e.map(((n,i)=>{var l,c
return a.createElement("div",{key:i,className:(0,u.iv)(D.row)},a.createElement("div",{className:"u-lr-split"},a.createElement("div",null,a.createElement(C.Z,{renderContent:()=>a.createElement(I.Z,{info:generatePopoverFields(n)}),placement:y.ZH.RIGHT},a.createElement(b.Z,{label:n.name,labelStyle:N.gF.SUBLABEL,isRequired:n.requiredConfig},n.name))),a.createElement("div",null,r?a.createElement(R.b,null):a.createElement(f.ZP,{displayName:getOptionDisplayName(n.value,o),disabled:s,menu:a.createElement(O.Z,{onSelect:n=>{!function handleOnSelect(n,a){const i=[...e.slice(0,a),{...e[a],value:n},...e.slice(a+1)]
t(i)}(n,i)},optionDatas:h.concat(o.map((e=>{const t=n.fieldConstraints?generateConstraintError(n.fieldConstraints,e):null,a=e.field?(0,_.Z)({field:e.field,schemaFieldSelectors:(i=e.field,i.schemaFieldSelectorId?[{name:i.name,id:i.schemaFieldSelectorId,schemaFieldSelectorOptions:[],allSchemaFieldSelectorOptions:[]}]:[]),ownerUrlId:""}).icon:void 0
var i
return{name:e.name,value:e.id,disabledMessage:null!=t?t:"",disabled:null!=t,icon:a}})).sort(((e,t)=>e.disabled===t.disabled?0:e.disabled?1:-1))),selectedValue:n.value}),buttonClassName:(0,u.iv)(D.subdepsDropdown),error:(c=(null===(l=T[n.name])||void 0===l?void 0:l.errors)||[],0===c.length?"":c.some((e=>e.type===P.v.RequiredConfigError))?"Field is required":"Linked field is invalid")}))))})))}const D=u.mM.create({row:{marginTop:"10px",padding:"10px 70px 0px 10px",borderTop:`1px solid ${A.tN}`},container:{marginTop:"20px"},subdepsLabelLeft:{margin:"0px 0px 0px 10px"},subdepsLabelRight:{marginBottom:"0px",width:"429px"},subdepsDropdown:{width:"360px"},unset:{color:A.TG}}),v="Schema"
function BaseSchemaSubdependencyInput({result:e,getSchemaFromResult:t,subdependencies:n,onChange:i,dependencyValidation:s,updateDependencyConfigValidation:o,disabled:d,fieldName:u="field",parentdependencyType:p="Schema",isWorkflowOutput:m}){if(e.type===r.NI.ERROR||e.type===r.NI.SKIPPED)return null
if(e.type===r.NI.PENDING)return a.createElement(LoadingBaseSubdependencyList,{subdependencies:n,subdependencyType:u,parentdependencyType:v})
const E=t(e)
if(null==E)return a.createElement(a.Fragment,null)
if((0,l.CZ)(E))return a.createElement(c.Z,{message:"Selected schema is inaccessible."})
const h=E.allFieldsJson.map((e=>({id:e.apiId,name:e.name,fieldConstraints:{internalType:e.fieldType,isMulti:e.isMulti,isRequired:e.isRequired},field:e})))
return a.createElement(BaseSubdependencyList,{subdependencies:n,onChange:i,dependencyValidation:s,updateDependencyConfigValidation:o,disabled:d,isLoading:!1,subdependencyOptions:h,subdependencyType:u,parentdependencyType:p,isWorkflowOutput:null!=m&&m})}const M=s.Ps`
  query ProcessTaskSchemaSubdependenciesQuery($id: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    processTaskSchema(id: $id) {
      ... on ProcessTaskSchemaNode {
        id
        allFieldsJson
        outputSchema {
          id
          allFieldsJson
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("InaccessibleInfo").fragment}
`
const B=s.Ps`
  query RequestSchemaSubdependencyInputQuery @skipAudit @engComponent(name: BENCHLING_APPS) {
    requestSchemas {
      ... on RequestSchemaNode {
        ...RequestSchemaGraphQL
      }
    }
  }
  ${(0,o.f)("RequestSchema").fragment}
`
const U=s.Ps`
  query ResultSchemaSubdependencyInputQuery($id: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    resultSchema(id: $id) {
      ... on ResultSchemaNode {
        ...ResultSchemaGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("ResultSchema").fragment}
  ${(0,o.f)("InaccessibleInfo").fragment}
`
const F=s.Ps`
  query RunSchemaSubdependencyInputQuery($id: StrictString!) @skipAudit @engComponent(name: BENCHLING_APPS) {
    runSchema(id: $id) {
      ... on RunSchemaNode {
        ...RunSchemaGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("RunSchema").fragment}
  ${(0,o.f)("InaccessibleInfo").fragment}
`
const w=s.Ps`
  query SchemaFieldSelectorOptionInputQuery($id: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    schemaFieldSelector(id: $id) {
      ... on SchemaFieldSelectorNode {
        ...SchemaFieldSelectorGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("SchemaFieldSelector").fragment}
  ${(0,o.f)("InaccessibleInfo").fragment}
`
const k=s.Ps`
  query StorableSchemaSubdependencyInputQuery($id: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    storableSchema(id: $id) {
      ... on StorableSchemaInterface {
        ...StorableSchemaGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("StorableSchema").fragment}
  ${(0,o.f)("InaccessibleInfo").fragment}
`
function StorableSchemaSubdependencyInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(k,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>e.data.storableSchema})}const x=s.Ps`
  query TagSchemaFieldInputQuery($id: StrictString!) @skipAudit {
    tagSchema(id: $id) {
      ... on TagSchemaNode {
        ...TagSchemaGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,o.f)("TagSchema").fragment}
  ${(0,o.f)("InaccessibleInfo").fragment}
`
function TagSchemaFieldInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(x,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>e.data.tagSchema})}const Z={[i.Az.dropdown]:function SchemaFieldSelectorOptionInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){let d=null
const u=(0,r.A4)(w,{skip:null==o,variables:{id:o}})
if(u.type===r.NI.ERROR)return null
if(u.type===r.NI.PENDING)return a.createElement(BaseSubdependencyList,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,isLoading:!0,subdependencyOptions:[],subdependencyType:"option",parentdependencyType:"Dropdown"})
if(u.type===r.NI.SKIPPED)return null
if((0,l.CZ)(u.data.schemaFieldSelector))return a.createElement(c.Z,{message:"Selected dropdown is inaccessible."})
d=u.data.schemaFieldSelector
return a.createElement(BaseSubdependencyList,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,isLoading:!1,subdependencyOptions:d.schemaFieldSelectorOptions,subdependencyType:"option",parentdependencyType:"Dropdown"})},[i.Az.result_schema]:function ResultSchemaSubdependencyInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(U,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>e.data.resultSchema})},[i.Az.request_schema]:function RequestSchemaSubdependencyInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(B,{skip:null==o})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>{const t=e.data.requestSchemas.find((e=>e.id===o))
return null!=t?t:null}})},[i.Az.run_schema]:function RunSchemaSubdependencyInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(F,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>e.data.runSchema})},[i.Az.entry_schema]:TagSchemaFieldInput,[i.Az.entity_schema]:TagSchemaFieldInput,[i.Az.box_schema]:StorableSchemaSubdependencyInput,[i.Az.container_schema]:StorableSchemaSubdependencyInput,[i.Az.location_schema]:StorableSchemaSubdependencyInput,[i.Az.plate_schema]:StorableSchemaSubdependencyInput,[i.Az.workflow_task_schema]:function ProcessTaskSchemaFieldInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const l=(0,r.A4)(M,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:l,getSchemaFromResult:e=>e.data.processTaskSchema,parentdependencyType:"Task"})},[i.Kn.workflow_task_schema_output]:function ProcessTaskSchemaOutputFieldInput({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o}){const c=(0,r.A4)(M,{skip:null==o,variables:{id:o}})
return a.createElement(BaseSchemaSubdependencyInput,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,result:c,getSchemaFromResult:e=>{const t=e.data.processTaskSchema
return(0,l.CZ)(t)?null:t.outputSchema},fieldName:"Output Field",parentdependencyType:"",isWorkflowOutput:!0})}}
function BenchlingAppSubdependencyTable({subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,type:r,parentDependencySelectedId:o}){const l=Z[r]
return a.createElement(l,{subdependencies:e,onChange:t,dependencyValidation:n,updateDependencyConfigValidation:i,disabled:s,parentDependencySelectedId:o})}},615937:(e,t,n)=>{n.d(t,{fj:()=>re,ZP:()=>CanvasContainer})
var a=n(769784),i=n(692013),s=n(989526),r=n(348920),o=n(751512),l=n(91092),c=n(697134),d=n(232606),u=n(256605),p=n(974913),m=n(129270),E=n(263137),h=n(446407),g=n(271359),S=n(801455)
function mapOverBlocks(e,t){return e.map((e=>e.type===u.Rb.SECTION?{...e,children:mapOverBlocks(e.children,t)}:t(e)))}function flatMapOverBlocks(e,t){return e.flatMap((e=>e.type===u.Rb.SECTION?flatMapOverBlocks(e.children,t):t(e)))}(0,n(147867).QS)({})
var _=n(59326),T=n(192978)
function SessionStatusContainer(e){const t=e.session,n=null==t?void 0:t.messages
return n?s.createElement("div",{className:(0,i.iv)(I.messagesWrapper)},s.createElement(_.Z,{messages:n.map((e=>(0,T.Ri)(e)))})):s.createElement(s.Fragment,null)}const I=i.mM.create({messagesWrapper:{marginTop:"12px"}})
var A=n(510335),f=n(260067)
const y={[u.bB.SUCCEEDED]:A.zI.SUCCESS,[u.bB.RUNNING]:A.zI.PRIMARY,[u.bB.FAILED]:A.zI.CRITICAL,[u.bB.TIMEOUT]:A.zI.CRITICAL,[u.bB.COMPLETED_WITH_WARNINGS]:A.zI.WARNING}
function SessionStatusPill(e){const t=e.status===u.bB.SUCCEEDED?"check":f.b[e.status].icon
return s.createElement(A.ZP,{icon:t,text:f.b[e.status].label,style:y[e.status]})}var C=n(64558),R=n(764403),b=n.n(R),N=n(683245),O=n.n(N),L=n(782279),P=n(635754),D=n.n(P),v=n(185268),M=n(461864),B=n(334148),U=n(453778),F=n(778223),w=n(759345),k=n(711023),x=n(65301),Z=n(993391),G=n(929123)
const H=function LabelWrapper(e){return s.createElement(G.Z,{style:{paddingLeft:"0px"}},e.label)},SearchInputWrapper=e=>{var t
const n=e.enabled&&e.canvasEnabled,a=((null===(t=e.blockValue)||void 0===t?void 0:t.values)||[]).map((e=>({id:e}))),handleChange=t=>{const n=new Set(t.flatMap((e=>e.id?e.id:[])))
e.onChangeValue(e.id,[...n])}
switch(e.itemType){case k.Az.dna_sequence:case k.Az.dna_oligo:case k.Az.aa_sequence:case k.Az.custom_entity:case k.Az.mixture:return s.createElement(x.m,{disabled:!n,autoFocus:!1,onChange:handleChange,tagSchemaOrInterfaceId:e.schemaId,bioentityType:k.b8[e.itemType],selectedItems:a,shouldAllowMultiple:!0})
case k.Az.box:case k.Az.container:case k.Az.location:case k.Az.plate:return s.createElement(Z.H,{disabled:!n,autoFocus:!1,onChange:handleChange,storableSchemaId:(null==e?void 0:e.schemaId)||void 0,storableTypes:[e.itemType],selectedItems:a,shouldAllowMultiple:!0})
default:(0,d.Gp)(!1,`Invalid Search Input Item type ${e.itemType}`)
return null}}
const W=function SearchInputMultiValueUiBlock(e){return s.createElement("div",null,s.createElement(H,{label:e.label}),s.createElement(SearchInputWrapper,{...e}))}
var q=n(687201),V=n(435191)
const J=function SelectorInputMultiValueUiBlock({blockValue:e,options:t,onChangeValue:n,id:a,enabled:i,canvasEnabled:r,label:o}){const[l,c]=(0,s.useState)(""),d=(null==e?void 0:e.values)||[],u=r&&i,handleRemove=e=>{n(a,d.filter((t=>t!==e)))}
return s.createElement("div",null,s.createElement(H,{label:o}),s.createElement(q.Z,{autoFocus:!1,scrollable:!0,optionDatas:(0,V.wd)(l,t.map((e=>({name:e,value:e})))),placeholder:"Select...",value:d,query:l,onQueryChange:e=>{c(e.target.value)},isMulti:!0,disabled:!u,onSelect:e=>{d.includes(e)?handleRemove(e):n(a,[...d,e])},onRemove:handleRemove}))}
const K=function SelectorInputUiBlock({value:e,options:t,onChangeValue:n,id:a,enabled:i,canvasEnabled:r,label:o}){const[l,c]=(0,s.useState)(""),d=r&&i,handleRemove=e=>{n(a,null)}
return s.createElement("div",null,s.createElement(H,{label:o}),s.createElement(q.Z,{autoFocus:!1,scrollable:!0,optionDatas:(0,V.wd)(l,t.map((e=>({name:e,value:e})))),placeholder:"Select...",value:e?[e]:[],query:l,onQueryChange:e=>{c(e.target.value)},isMulti:!1,disabled:!d,onSelect:t=>{t===e?handleRemove():n(a,t)
c("")},onRemove:handleRemove}))}
var Y=n(733435),X=n(725518),$=n(729913),z=n(298801),j=n(383628),Q=n(476604),ee=n(902368)
function TableLoading(){return s.createElement("div",{className:(0,i.iv)(te.tableLoadingBlock)},s.createElement("span",{className:(0,i.iv)(te.loadingText)},"Loading table..."),s.createElement(Q.b,null))}function TableLoadingOrFailed(e){return e.uploadStatus===u.K8.IN_PROGRESS?s.createElement(TableLoading,null):s.createElement(j.ZP,{bannerType:j.ct.WARNING,text:"Invalid dataset provided for table block"})}function TableUiBlock(e){return e.datasetId&&e.datasetUploadStatus===u.K8.SUCCEEDED?s.createElement(o.ZP,{query:Y.Oh,renderLoading:()=>s.createElement(TableLoading,null),variables:{dataFrameId:e.datasetId}},(({dataFrame:t})=>(0,c.CZ)(t)?null:s.createElement(TableUiBlockInner,{...e,dataframe:t.dataFrameJson}))):s.createElement(TableLoadingOrFailed,{uploadStatus:e.datasetUploadStatus})}function TableUiBlockInner(e){const[t,n]=(0,s.useState)({}),a=e.dataframe,i=ee.Z.getAdapter(),r={columns:a.columns,columnWidths:t},o=i.createTable({name:e.name,metadata:r,entryId:null,schemas:[],selectorsById:{}}),l=`${e.canvasId}-${e.id}`,c=(0,C.m8)(o.columns.map(((e,t)=>[t,a.columns[t].systemName]))),d=Object.keys(c).length
const[u,p]=(0,s.useState)(function buildInitialTableRows(){return a.rows.map(((e,t)=>{const n=i.getBlankRow(r,t,o.columns)
for(let t=0;t<d;t++){const a=c[t]
n.cells[t]={text:String(e[a])}}return n}))}())
o.rows=u
return s.createElement($.Z,{structuredTable:{...o,cid:l},cid:l,updateHandler:function handleTableChange(t){const s={}
for(const[e,n]of t.columns.entries())s[e]=n.width
n(s)
p(t.rows)
const r={...t,cid:l},o=(0,$.R)(r,null),c=(0,z.Z)(i.toTable(r).table,o,!1,r.columns.map((e=>(0,X.Z)({structuredTableColumn:e,schemas:r.schemas})||"unknown")))
e.onTableUpdate(c,e.userDefinedId,a.name)},hideFormulaBox:!0,includeUnsubmittedStatus:!1,canRename:!1,locked:!(e.enabled&&e.canvasEnabled)})}const te=i.mM.create({tableLoadingBlock:{border:`1px solid ${g.pF}`,padding:"16px",paddingTop:"25px",backgroundColor:`${g.bs}`},loadingText:{display:"block",textAlign:"center",fontStyle:"italic"}})
function ButtonUiBlock({userDefinedId:e,text:t,enabled:n,canvasEnabled:a,onCanvasSubmit:i}){return s.createElement(B.Co,{buttonStyle:B.ZJ.SECONDARY,size:B.qE.SMALL,text:t,disabled:!a||!n,onClick:()=>{i(e)}})}function TextInputUiBlock({id:e,value:t,enabled:n,canvasEnabled:a,placeholder:i,onChangeValue:r,label:o}){return s.createElement("div",null,s.createElement(H,{label:o}),s.createElement(w.Z,{disabled:!a||!n,onChange:t=>{r(e,t.target.value)},placeholder:null!=i?i:"",value:null!=t?t:""}))}function MarkdownUiBlock({value:e}){const t=L.renderToStaticMarkup(s.createElement(D(),null,e)),n=O().sanitize(t)
return s.createElement("div",{dangerouslySetInnerHTML:{__html:O().sanitize(n)}})}function SectionUiBlock({children:e,onCanvasSubmit:t,onChangeValue:n,onTableUpdate:a,canvasEnabled:r,canvasId:o}){return s.createElement("div",{className:b()("u-spacing-top u-flex-display",(0,i.iv)(ne.sectionUiBlock))},e.map(((e,i)=>s.createElement("div",{key:i,className:"u-spacing-right"},s.createElement(UiBlockWrapper,{block:e,onChangeValue:n,onCanvasSubmit:t,onTableUpdate:a,canvasEnabled:r,canvasId:o})))))}function ChipUiBlock({value:e}){return s.createElement(U.Z,{id:e,size:F.TK.SMALL})}function SearchInputUiBlock({value:e,itemType:t,schemaId:n,onChangeValue:a,id:i,enabled:r,canvasEnabled:o,label:l}){return s.createElement("div",null,s.createElement(H,{label:l}),s.createElement(v.ZP,{name:i,type:t,subtype:null,value:e,onChangeValue:function onChangeDropdown(e){a(i,e)},isEditable:r&&o,schemaId:n,requiredConfig:!1,dependencyValidation:{errors:[],subdependencyValidation:{},outputSubdependencyValidation:{}},updateDependencyConfigValidation:C.ZT,elements:null,elementDefinition:null,onChangeElements:C.ZT,updateArrayElementValidation:C.ZT}))}function DropdownUiBlock({value:e,dropdownId:t,onChangeValue:n,id:a,enabled:i,canvasEnabled:r,label:o}){const l=null==e?[]:[e]
return s.createElement("div",null,s.createElement(H,{label:o}),s.createElement(M.Z,{defaultValue:{schemaFieldSelectorOptionIds:l},onChange:e=>{1===e.schemaFieldSelectorOptionIds.length?n(a,e.schemaFieldSelectorOptionIds[0]):n(a,null)},shouldAllowMultiple:!1,schemaFieldSelectorId:t,disabled:!(i&&r)}))}function DropdownMultiValueUiBlock({dropdownId:e,onChangeValue:t,id:n,enabled:a,canvasEnabled:i,label:r,blockValue:o}){const l=(null==o?void 0:o.values)||[]
return s.createElement("div",null,s.createElement(H,{label:r}),s.createElement(M.Z,{defaultValue:{schemaFieldSelectorOptionIds:l},onChange:e=>{e.schemaFieldSelectorOptionIds.length>0?t(n,e.schemaFieldSelectorOptionIds):t(n,null)},shouldAllowMultiple:!0,schemaFieldSelectorId:e,disabled:!(a&&i)}))}function UiBlockWrapper({canvasId:e,block:t,onChangeValue:n,onCanvasSubmit:a,onTableUpdate:i,canvasEnabled:r}){switch(t.type){case u.Rb.TEXT_INPUT:return s.createElement(TextInputUiBlock,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.BUTTON:return s.createElement(ButtonUiBlock,{...t,onCanvasSubmit:a,canvasEnabled:r})
case u.Rb.MARKDOWN:return s.createElement(MarkdownUiBlock,{...t})
case u.Rb.CHIP:return s.createElement(ChipUiBlock,{...t})
case u.Rb.SEARCH_INPUT:return s.createElement(SearchInputUiBlock,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.SELECTOR_INPUT:return s.createElement(K,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.DROPDOWN:return s.createElement(DropdownUiBlock,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.SECTION:return s.createElement(SectionUiBlock,{...t,onChangeValue:n,onCanvasSubmit:a,onTableUpdate:i,canvasEnabled:r,canvasId:e})
case u.Rb.TABLE:return s.createElement(TableUiBlock,{...t,canvasId:e,onTableUpdate:i,canvasEnabled:r})
case u.Rb.DROPDOWN_MULTIVALUE:return s.createElement(DropdownMultiValueUiBlock,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.SELECTOR_INPUT_MULTIVALUE:return s.createElement(J,{...t,onChangeValue:n,canvasEnabled:r})
case u.Rb.SEARCH_INPUT_MULTIVALUE:return s.createElement(W,{...t,onChangeValue:n,canvasEnabled:r})
default:(0,d.Gp)(!1,`Invalid UI Block ${t}`)
return s.createElement("div",null)}}const ne=i.mM.create({sectionUiBlock:{alignItems:"flex-end"}}),ae=[u.Rb.TEXT_INPUT,u.Rb.SEARCH_INPUT,u.Rb.SELECTOR_INPUT,u.Rb.DROPDOWN,u.Rb.DROPDOWN_MULTIVALUE,u.Rb.SELECTOR_INPUT_MULTIVALUE,u.Rb.SEARCH_INPUT_MULTIVALUE]
function isUserInputBlock(e){return ae.includes(e.type)}function isMultiValueUserInputBlock(e){var t
return"UIBlockValueMulti"===(null===(t=null==e?void 0:e.blockValue)||void 0===t?void 0:t.__typename)}n(771398)
var ie=n(8747)
function updateBlocks(e,t,n){return mapOverBlocks(e,(function updateSingleBlock(e){return isUserInputBlock(e)&&e.id===t?isMultiValueUserInputBlock(e)?{...e,value:n,blockValue:{...e.blockValue,values:Array.isArray(n)?n:[]}}:{...e,value:n}:e}))}function extractUserInputMapping(e){return flatMapOverBlocks(e,(e=>{var t
return isUserInputBlock(e)?isMultiValueUserInputBlock(e)?[{id:e.userDefinedId,value:(null===(t=null==e?void 0:e.blockValue)||void 0===t?void 0:t.values)||null}]:[{id:e.userDefinedId,value:e.value}]:[]}))}function Canvas(e){const{id:t,benchlingApp:n,modifiedAt:a,enabled:r,session:o}=e.canvas,l=e.enabledOverride&&r,c=e.canvas.uiBlocks,[m,g]=(0,s.useState)(c),[S,_]=(0,s.useState)(!0),[T,I]=(0,s.useState)({}),A=function getTableStatusKey(e){let t=""
for(const n of e)n.type===u.Rb.TABLE&&(t+=`${n.userDefinedId}-${n.datasetId}-${n.datasetUploadStatus}|`)
return t}(c);(0,s.useEffect)((()=>{g(c)
_(!0)}),[a,A])
const updateBlock=(e,t)=>{g(updateBlocks(m,e,t))}
async function handleCanvasSubmit(e,t,n){const a=extractUserInputMapping(n),i=await function submitCanvas(e,t){return ie.s0({url:`/1/api/benchling-app-canvases/${e}/interaction`,data:t})}(e,{buttonId:t,blockUserInputs:a,plainTextTableMap:T})
"failure"===i.deliveryStatus&&p.ZP.error("Could not reach application. Please contact Benchling support if issue persists.")}const onTableUpdate=(e,t,n)=>{I({...T,[t]:{plainTextTable:e,dataFrameName:n}})},onCanvasSubmit=e=>{(0,d.Gp)(l,"Unexpected to handle canvas submission on disabled canvas.")
_(!1)
handleCanvasSubmit(t,e,m)}
return s.createElement("div",{className:(0,i.iv)(se.canvas),...(0,E.Z)(e.dataTestAttrs)},s.createElement("div",{className:"u-lr-split"},s.createElement("div",{className:(0,i.iv)(se.canvasTitle)},s.createElement("div",{className:(0,i.iv)(se.appNameTitle)},n.name),s.createElement(h.Z,{color:h.J.GRAY,className:"u-tiny-spacing-left"},"App")),o&&s.createElement(SessionStatusPill,{status:o.status})),o&&s.createElement(SessionStatusContainer,{session:o}),m.map(((e,n)=>s.createElement("div",{key:n,className:(0,i.iv)(se.blockContainer)},s.createElement(UiBlockWrapper,{canvasId:t,block:e,onChangeValue:updateBlock,onCanvasSubmit,onTableUpdate,canvasEnabled:l&&S})))))}function DefaultCanvasPlaceholder({benchlingAppName:e}){return s.createElement("div",{className:(0,i.iv)(se.canvas)},s.createElement("div",{className:(0,i.iv)(se.canvasTitle)},s.createElement("div",{className:(0,i.iv)(se.appNameTitle)},e),s.createElement(h.Z,{color:h.J.GRAY,className:"u-tiny-spacing-left"},"App")),s.createElement("div",{className:(0,i.iv)(se.blockContainer)},s.createElement(S.Z,{label:"Waiting for app...",labelStyle:S.Z.STYLES.LABEL})))}const se=i.mM.create({canvas:{padding:"16px",borderStyle:"solid",borderWidth:1,borderColor:g.pF},canvasTitle:{display:"flex",alignItems:"center"},appNameTitle:{...m.VM,fontWeight:m.KB},blockContainer:{marginTop:"20px",":first-child":{marginTop:0}}}),re=a.Ps`
  query GetCanvas($resourceId: StrictString!, $featureType: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingAppCanvas(resourceId: $resourceId, featureType: $featureType) {
      ...BenchlingAppCanvasGraphQL
    }
  }
  ${(0,l.f)("BenchlingAppCanvas").fragment}
`,oe=a.Ps`
  query GetCanvasNonPolling($resourceId: StrictString!, $featureType: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    benchlingAppCanvas(resourceId: $resourceId, featureType: $featureType) {
      ...BenchlingAppCanvasGraphQL
    }
  }
  ${(0,l.f)("BenchlingAppCanvas").fragment}
`,le=a.Ps`
  query GetResourceFeatureAssociation($resourceId: StrictString!, $featureType: StrictString!)
  @skipAudit
  @engComponent(name: BENCHLING_APPS) {
    resourceFeatureAssociation(resourceId: $resourceId, featureType: $featureType) {
      ...ResourceFeatureAssociationGraphQL
    }
  }
  ${(0,l.f)("ResourceFeatureAssociation").fragment}
`
function CanvasContainer(e){return s.createElement(o.ZP,{query:le,renderLoading:()=>s.createElement(s.Fragment,null),variables:{resourceId:e.resourceId,featureType:e.featureType}},((t,{refetch:n})=>{if((0,c.CZ)(t.resourceFeatureAssociation))return s.createElement(s.Fragment,null)
const a=t.resourceFeatureAssociation.appSummary.name
return s.createElement(CanvasRenderer,{...e,appName:a})}))}function CanvasRenderer(e){const[t,n]=(0,s.useState)(),onQueryComplete=e=>{n(e.benchlingAppCanvas)},a={resourceId:e.resourceId,featureType:e.featureType},l=(0,o.IJ)(re,{variables:a,pollInterval:r.ZP.BENCHLING_APP_CANVAS_POLLING_FREQUENCY_MS,renderCachedDataWhenRefetching:!0,onCompleted:onQueryComplete}),d=(0,o.IJ)(oe,{variables:a,renderCachedDataWhenRefetching:!0,onCompleted:onQueryComplete})
return d.type===o.NI.PENDING||d.type===o.NI.ERROR||l.type===o.NI.PENDING||l.type===o.NI.ERROR?s.createElement(DefaultCanvasPlaceholder,{benchlingAppName:e.appName}):s.createElement("div",{className:"canvasContainer"},t&&!(0,c.CZ)(t)?s.createElement("div",{className:(0,i.iv)(ce.canvasWrapper)},s.createElement(Canvas,{canvas:t,refetchCanvases:async()=>{await d.refetch()},enabledOverride:e.enabledOverride,dataTestAttrs:{component:"Canvas",element:"root"}})):s.createElement(DefaultCanvasPlaceholder,{benchlingAppName:e.appName}))}const ce=i.mM.create({canvasWrapper:{marginTop:"30px"}})},902368:(e,t,n)=>{n.d(t,{Z:()=>AppCanvasStructuredTableAdapter})
var a=n(399658),i=n(564058),s=n(269062),r=n(1456),o=n(453580),l=n(783851),c=n(851422)
class AppCanvasStructuredTableAdapter extends s.Z{static getAdapter(){return(0,r.getStructuredTableAdapters)().APP_CANVAS}getActionFunctions(e,t){return{secondary:[],overflow:[i.C]}}getBlankRowMetadata(e){return{}}getDisplayName(e){return"Canvas Table"}_getAllSupportedColumns({metadata:e}){return function convertColumns(e,t){var n
const i=[]
for(const[s,r]of e.entries()){const e=null!==(n=t[s])&&void 0!==n?n:o.cV
if(Object.values(a.Cb).includes(r.systemName))continue
const d=(0,l.Ao)({name:r.displayName,columnType:c.TableColumnType.STRING,width:e})
i.push(d)}return i}(e.columns,e.columnWidths)}toTable(e){return{...super.toTable(e),allowColumnEdits:!1,lockedDims:!0,allowNoRows:!0}}}},483318:(e,t,n)=>{n.d(t,{t:()=>validateCompleteBenchlingExpression})
var a=n(232606),i=n(648491),s=n(901113)
function validateCompleteBenchlingExpression(e){var t
if(null==e.type)return!1
if(e.type===i.p.CONSTANT_VALUE)return null!=e.itemType&&void 0!==e.value
if(e.type===i.p.CONTEXT_VARIABLE)return null!=e.itemType&&void 0!==e.contextKey
if(e.type===i.p.SCHEMA_LOOKUP)return null!=e.lookupConfig&&void 0!==e.schema&&null!=e.expression&&validateCompleteBenchlingExpression(e.expression)
if(e.type===i.p.FUNCTION)return null!=e.name&&null!=e.parameters&&(null===(t=e.parameters)||void 0===t?void 0:t.every((e=>null!=(null==e?void 0:e.name)&&null!=e.expression&&validateCompleteBenchlingExpression(e.expression))));(0,a.hu)(!1,`Found unexpected expression type ${(0,s.vE)(e.type)}`)
return!0}},709348:(e,t,n)=>{n.d(t,{$M:()=>N,EV:()=>g,Gu:()=>getDisplayNameFromFunctionSignature,Jt:()=>m,QP:()=>f,a9:()=>C,ay:()=>E,bl:()=>b,ht:()=>A,nz:()=>d,p3:()=>I,sS:()=>S,wy:()=>u,x1:()=>T,zo:()=>y})
var a,i=n(232606),s=n(53904),r=n(264867),o=n(379112)
!function(e){e.AND="AND"
e.OR="OR"
e.EQUALS="EQUALS"
e.NOT_EQUALS="NOT_EQUALS"
e.HAS_ONE_OF="HAS_ONE_OF"
e.HAS_ALL_OF="HAS_ALL_OF"
e.HAS_NONE_OF="HAS_NONE_OF"
e.EQUALS_IGNORE_ORDER="EQUALS_IGNORE_ORDER"
e.NUMERIC_EQUALS="NUMERIC_EQUALS"
e.NUMERIC_NOT_EQUALS="NUMERIC_NOT_EQUALS"
e.GT="GT"
e.GTE="GTE"
e.LT="LT"
e.LTE="LTE"
e.CONTAINS="CONTAINS"
e.NOT_CONTAINS="NOT_CONTAINS"
e.SET_TIME_ON_DATETIME="SET_TIME_ON_DATETIME_V1"
e.CALCULATE_DATETIME="CALCULATE_DATETIME_V1"
e.HAS_SCHEMA="HAS_SCHEMA"
e.NOT_HAS_SCHEMA="NOT_HAS_SCHEMA"}(a||(a={}))
const l={parameters:[{parameterName:"conditions",allowedType:o.vF[o.V6.LIST](r.i0.BOOLEAN),isRequired:!0}],returnType:r.i0.BOOLEAN},c=(a.AND,a.OR,{parameters:[{parameterName:"value1",allowedType:new s.H,isRequired:!0},{parameterName:"value2",allowedType:new s.H,isRequired:!0}],returnType:r.i0.BOOLEAN}),d={...c,functionName:a.EQUALS},u={...c,functionName:a.NOT_EQUALS},p={parameters:[{parameterName:"value1",allowedType:r.i0.BENCHLING_OBJECT,isRequired:!0},{parameterName:"value2",allowedType:r.i0.TEXT,isRequired:!0}],returnType:r.i0.BOOLEAN},m={...p,functionName:a.HAS_SCHEMA},E={...p,functionName:a.NOT_HAS_SCHEMA},h={parameters:[{parameterName:"list1",allowedType:o.vF[o.V6.LIST](new s.H),isRequired:!0},{parameterName:"list2",allowedType:o.vF[o.V6.LIST](new s.H),isRequired:!0}],returnType:r.i0.BOOLEAN},g={...h,functionName:a.HAS_ONE_OF},S=(a.HAS_ALL_OF,{...h,functionName:a.HAS_NONE_OF}),_=(a.EQUALS_IGNORE_ORDER,{parameters:[{parameterName:"value1",allowedType:o.vF[o.V6.UNION](r.i0.INTEGER,r.i0.DECIMAL),isRequired:!0},{parameterName:"value2",allowedType:o.vF[o.V6.UNION](r.i0.INTEGER,r.i0.DECIMAL),isRequired:!0}],returnType:r.i0.BOOLEAN}),T={..._,functionName:a.NUMERIC_EQUALS},I={..._,functionName:a.NUMERIC_NOT_EQUALS},A={..._,functionName:a.GT},f={..._,functionName:a.GTE},y={..._,functionName:a.LT},C={..._,functionName:a.LTE},R=(r.i0.DATETIME,r.i0.TEXT,r.i0.INTEGER,r.i0.INTEGER,r.i0.INTEGER,r.i0.DATETIME,a.SET_TIME_ON_DATETIME,r.i0.DATETIME,r.i0.BOOLEAN,r.i0.INTEGER,r.i0.INTEGER,r.i0.INTEGER,r.i0.INTEGER,r.i0.DATETIME,a.CALCULATE_DATETIME,{parameters:[{parameterName:"value1",allowedType:r.i0.TEXT,isRequired:!0},{parameterName:"value2",allowedType:r.i0.TEXT,isRequired:!0}],returnType:r.i0.BOOLEAN}),b={...R,functionName:a.CONTAINS},N={...R,functionName:a.NOT_CONTAINS},O={AND:"and",OR:"or",EQUALS:null,NOT_EQUALS:null,HAS_ONE_OF:"has one of",HAS_ALL_OF:"has all of",HAS_NONE_OF:"has none of",EQUALS_IGNORE_ORDER:"equals (ignoring order)",NUMERIC_EQUALS:"equals",NUMERIC_NOT_EQUALS:"does not equal",GT:"is greater than",GTE:"is greater than or equal to",LT:"is less than",LTE:"is less than or equal to",CONTAINS:"contains",NOT_CONTAINS:"does not contain",SET_TIME_ON_DATETIME_V1:"set time on date",CALCULATE_DATETIME_V1:"calculate date",HAS_SCHEMA:"is of schema",NOT_HAS_SCHEMA:"is not of schema"}
function getDisplayNameFromFunctionSignature(e,t){const n=e.functionName,s=O[n]
if(null==s)switch(n){case a.EQUALS:return t===r.i0.DROPDOWN_OPTION?"is":"equals"
case a.NOT_EQUALS:return t===r.i0.DROPDOWN_OPTION?"is not":"does not equal"
default:return"unimplemented display name"}(0,i.hu)(null!=s,"Cannot get display name for function")
return s}},992532:(e,t,n)=>{n.d(t,{i:()=>listBioentitiesAndBatchesWithSummaries})
var a=n(787004),i=n(947730),s=n(377249),r=n(709759),o=n(380490),l=n(166459),c=n(238504),d=n(480353),u=n(62315),p=n(136701)
async function listBioentitiesAndBatchesWithSummaries(e){const{ids:t,total:n,isExact:m,timedOut:E,fileSummariesById:h,scoresById:g,groups:S,nextToken:_}=await async function listBioentitiesAndBatchesCompleteResponse(e){const t=(0,d.DO)(e,u.Sc.BIOENTITIES_AND_BATCHES),{ids:n,total:m,isExact:E,timedOut:h,batches:g,fileSummariesById:S,permissionsByModelId:_,bioentityAliasInfosByBioentityId:T,correlationId:I,scoresById:A,groups:f,nextToken:y}=await p.gT(t)
c.handleBatchesLoaded(g);(0,l.getStore)().dispatch(r.IH(s.V.PERMISSIONS_BY_ITEM_ID,_));(0,l.getStore)().dispatch(o.wb(S))
i.Z.dispatch({actionType:a.yoq,bioentityAliasInfosById:T})
return{ids:n,total:m,isExact:E,timedOut:h,batches:g,fileSummariesById:S,permissionsByModelId:_,bioentityAliasInfosByBioentityId:T,correlationId:I,scoresById:A,groups:f,nextToken:y}}(e)
return{ids:t,total:n,isExact:m,timedOut:E,fileSummariesById:h,scoresById:g,groups:S,nextToken:_}}},69152:(e,t,n)=>{n.d(t,{Z:()=>requestFetchValidationExtras})
var a=n(964925),i=n(377249)
function requestFetchValidationExtras(e,{forceFetch:t}={forceFetch:!1}){a.z((0,i.H)(i.V.VALIDATION_EXTRAS_BY_BIOENTITY_ID),e,{forceFetch:t})}},955836:(e,t,n)=>{n.d(t,{A7:()=>T,B0:()=>_,BU:()=>F,Hy:()=>B,Ip:()=>C,KP:()=>R,L0:()=>y,M_:()=>P,Oj:()=>m,P8:()=>d,Pt:()=>N,RT:()=>I,Sb:()=>D,Sj:()=>v,Un:()=>s,WN:()=>L,Wy:()=>r,aV:()=>b,cG:()=>l,cl:()=>h,gO:()=>c,h8:()=>S,hR:()=>U,il:()=>M,jb:()=>O,lc:()=>f,m_:()=>p,p6:()=>w,sW:()=>o,sd:()=>g,uV:()=>E,y4:()=>u,yD:()=>A})
var a=n(531041)
const i=["V","H","D","B","S","W","K","M","Y","R","N"],s=[...i,...i.map((e=>e.toLowerCase()))]
var r,o,l,c
!function(e){e.DNA="DNA"
e.RNA="RNA"}(r||(r={}))
!function(e){e.NUCLEOTIDE="Nucleotide"
e.AA="AA"}(o||(o={}))
!function(e){e.FIVE="FIVE"
e.THREE="THREE"}(l||(l={}))
!function(e){e.NATURAL_BASES="Natural bases"
e.HELM="HELM"
e.IDT="IDT"
e.CUSTOM_SYNTAX="Custom notation"}(c||(c={}))
const d="-",u=new RegExp(d,"g")
var p
!function(e){e.primer3="primer3"
e.thermo="thermo"
e.xia="xia"}(p||(p={}))
const m={method:p.primer3,monovalentConc:50,dnaConc:250,divalentConc:0,dntpConc:0},E={method:p.primer3,dnaConc:50,monovalentConc:50,divalentConc:1.5,dntpConc:.6},h={method:p.primer3,dnaConc:null,monovalentConc:null,divalentConc:null,dntpConc:null},g={method:p.xia,dnaConc:null,monovalentConc:null,divalentConc:null,dntpConc:null},S={A:{dH:2300,dS:4.1},T:{dH:2300,dS:4.1},G:{dH:100,dS:-2.8},C:{dH:100,dS:-2.8},N:{dH:1200,dS:.65}},_={A:{A:{dH:-7900,dS:-22.2},T:{dH:-7200,dS:-20.4},G:{dH:-7800,dS:-21},C:{dH:-8400,dS:-22.4},N:{dH:-7200,dS:-22.4}},T:{A:{dH:-7200,dS:-21.3},T:{dH:-7900,dS:-22.2},G:{dH:-8500,dS:-22.7},C:{dH:-8200,dS:-22.2},N:{dH:-7200,dS:-22.7}},G:{A:{dH:-8200,dS:-22.2},T:{dH:-8400,dS:-22.4},G:{dH:-8e3,dS:-19.9},C:{dH:-9800,dS:-24.4},N:{dH:-8e3,dS:-24.4}},C:{A:{dH:-8500,dS:-22.7},T:{dH:-7800,dS:-21},G:{dH:-10600,dS:-27.2},C:{dH:-8e3,dS:-19.9},N:{dH:-7800,dS:-27.2}},N:{A:{dH:-7200,dS:-16.8},T:{dH:-7200,dS:-21.5},G:{dH:-7800,dS:-22},C:{dH:-8e3,dS:-21},N:{dH:-7200,dS:-22}}},T={A:{dH:3720,dS:10.5},U:{dH:3720,dS:10.5},G:{dH:0,dS:0},C:{dH:0,dS:0},N:{dH:1680,dS:5.25}},I={A:{A:{dH:-6820,dS:-19},U:{dH:-9380,dS:-20.5},G:{dH:-10480,dS:-27.1},C:{dH:-11400,dS:-29.5},N:{dH:-9520,dS:-24}},U:{A:{dH:-7690,dS:-20.5},U:{dH:-6820,dS:-19},G:{dH:-10440,dS:-26.9},C:{dH:-12440,dS:-32.5},N:{dH:-9348,dS:-24.7}},G:{A:{dH:-12440,dS:-32.5},U:{dH:-11400,dS:-29.5},G:{dH:-13390,dS:-32.7},C:{dH:-14880,dS:-36.9},N:{dH:-13028,dS:-32.9}},C:{A:{dH:-10440,dS:-26.9},U:{dH:-10480,dS:-27.1},G:{dH:-10640,dS:-26.7},C:{dH:-13390,dS:-32.7},N:{dH:-11238,dS:-28.4}},N:{A:{dH:-9848,dS:-24.7},U:{dH:-9520,dS:-24},G:{dH:-11238,dS:-28.4},C:{dH:-13028,dS:-32.9},N:{dH:-10784,dS:-27.5}}},A={A:"A",C:"C",G:"G",T:"T",R:"AG",Y:"CT",M:"AC",K:"GT",W:"AT",S:"CG",B:"CGT",D:"AGT",H:"ACT",V:"ACG",N:"ACGT"},f={A:"A",C:"C",G:"G",U:"U",R:"AG",Y:"CU",M:"AC",K:"GU",W:"AU",S:"CG",B:"CGU",D:"AGU",H:"ACU",V:"ACG",N:"ACGU"},y={A:["A"],C:["C"],G:["G"],T:["T"],U:["U"],R:["A","G","R"],Y:["C","T","Y"],M:["A","C","M"],K:["G","T","K"],W:["A","T","W"],S:["C","G","S"],B:["C","G","T","S","Y","K","B"],D:["A","G","T","R","W","K","D"],H:["A","C","T","M","W","Y","H"],V:["A","C","G","M","R","S","V"],N:["A","C","G","T","V","H","D","B","S","W","K","M","Y","R","N"]},C={...y,T:["T","U"],U:["U","T"],Y:["C","T","U","Y"],K:["G","T","U","K"],W:["A","T","U","W"],B:["C","G","T","U","S","Y","K","B"],D:["A","G","T","U","R","W","K","D"],H:["A","C","T","U","M","W","Y","H"],N:["A","C","G","T","U","V","H","D","B","S","W","K","M","Y","R","N"]},buildRegexMap=e=>a.default.object(Object.entries(e).map((([e,t])=>[e,1===t.length?t[0]:`[${t.join("")}]`]))),R=buildRegexMap(y),b=buildRegexMap(C),N=/^[ATGCUYRSWKMBDHVN]*$/i,O={A:"T",T:"A",G:"C",C:"G",Y:"R",R:"Y",S:"S",W:"W",K:"M",M:"K",B:"V",D:"H",H:"D",V:"B",N:"N",a:"t",t:"a",g:"c",c:"g",y:"r",r:"y",s:"s",w:"w",k:"m",m:"k",b:"v",d:"h",h:"d",v:"b",n:"n"},L={A:"U",U:"A",G:"C",C:"G",Y:"R",R:"Y",S:"S",W:"W",K:"M",M:"K",B:"V",D:"H",H:"D",V:"B",N:"N",a:"u",u:"a",g:"c",c:"g",y:"r",r:"y",s:"s",w:"w",k:"m",m:"k",b:"v",d:"h",h:"d",v:"b",n:"n"},P={...O,[d]:d},D={[r.DNA]:O,[r.RNA]:L},v={A:{A:{dH:-9100,dS:-24},T:{dH:-8600,dS:-23.9},G:{dH:-7800,dS:-20.8},C:{dH:-6500,dS:-17.3},R:{dH:-8450,dS:-22.4},Y:{dH:-7550,dS:-20.6},W:{dH:-8850,dS:-23.95},S:{dH:-7150,dS:-19.05},M:{dH:-7800,dS:-20.65},K:{dH:-8200,dS:-22.35},B:{dH:-7633.333,dS:-20.667},D:{dH:-8500,dS:-22.9},H:{dH:-8066.667,dS:-21.733},V:{dH:-7800,dS:-20.7},N:{dH:-8e3,dS:-21.5}},T:{A:{dH:-6e3,dS:-16.9},T:{dH:-9100,dS:-24},G:{dH:-5800,dS:-12.9},C:{dH:-5600,dS:-13.5},R:{dH:-5900,dS:-14.9},Y:{dH:-7350,dS:-18.75},W:{dH:-7550,dS:-20.45},S:{dH:-5700,dS:-13.2},M:{dH:-5800,dS:-15.2},K:{dH:-7450,dS:-18.45},B:{dH:-6833.333,dS:-16.8},D:{dH:-6966.667,dS:-17.933},H:{dH:-6900,dS:-18.133},V:{dH:-5800,dS:-14.433},N:{dH:-6625,dS:-16.825}},G:{A:{dH:-5600,dS:-13.5},T:{dH:-6500,dS:-17.3},G:{dH:-11e3,dS:-26.6},C:{dH:-11100,dS:-26.7},R:{dH:-8300,dS:-20.05},Y:{dH:-8800,dS:-22},W:{dH:-6050,dS:-15.4},S:{dH:-11050,dS:-26.65},M:{dH:-8350,dS:-20.1},K:{dH:-8750,dS:-21.95},B:{dH:-9533.333,dS:-23.533},D:{dH:-7700,dS:-19.133},H:{dH:-7733.333,dS:-19.167},V:{dH:-9233.333,dS:-22.267},N:{dH:-8550,dS:-21.025}},C:{A:{dH:-5800,dS:-12.9},T:{dH:-7800,dS:-20.8},G:{dH:-11900,dS:-27.8},C:{dH:-11e3,dS:-26.6},R:{dH:-8850,dS:-20.35},Y:{dH:-9400,dS:-23.7},W:{dH:-6800,dS:-16.85},S:{dH:-11450,dS:-27.2},M:{dH:-8400,dS:-19.75},K:{dH:-9850,dS:-24.3},B:{dH:-10233.333,dS:-25.067},D:{dH:-8500,dS:-20.5},H:{dH:-8200,dS:-20.1},V:{dH:-9566.667,dS:-22.433},N:{dH:-9125,dS:-22.025}},R:{A:{dH:-7350,dS:-18.75},T:{dH:-7550,dS:-20.6},G:{dH:-9400,dS:-23.7},C:{dH:-8800,dS:-22},R:{dH:-8375,dS:-21.225},Y:{dH:-8175,dS:-21.3},W:{dH:-7450,dS:-19.675},S:{dH:-9100,dS:-22.85},M:{dH:-8075,dS:-20.375},K:{dH:-8475,dS:-22.15},B:{dH:-8583.333,dS:-22.1},D:{dH:-8100,dS:-21.017},H:{dH:-7900,dS:-20.45},V:{dH:-8516.667,dS:-21.483},N:{dH:-8275,dS:-21.262}},Y:{A:{dH:-5900,dS:-14.9},T:{dH:-8450,dS:-22.4},G:{dH:-8850,dS:-20.35},C:{dH:-8300,dS:-20.05},R:{dH:-7375,dS:-17.625},Y:{dH:-8375,dS:-21.225},W:{dH:-7175,dS:-18.65},S:{dH:-8575,dS:-20.2},M:{dH:-7100,dS:-17.475},K:{dH:-8650,dS:-21.375},B:{dH:-8533.333,dS:-20.933},D:{dH:-7733.333,dS:-19.217},H:{dH:-7550,dS:-19.117},V:{dH:-7683.333,dS:-18.433},N:{dH:-7875,dS:-19.425}},W:{A:{dH:-7550,dS:-20.45},T:{dH:-8850,dS:-23.95},G:{dH:-6800,dS:-16.85},C:{dH:-6050,dS:-15.4},R:{dH:-7175,dS:-18.65},Y:{dH:-7450,dS:-19.675},W:{dH:-8200,dS:-22.2},S:{dH:-6425,dS:-16.125},M:{dH:-6800,dS:-17.925},K:{dH:-7825,dS:-20.4},B:{dH:-7233.333,dS:-18.733},D:{dH:-7733.333,dS:-20.417},H:{dH:-7483.333,dS:-19.933},V:{dH:-6800,dS:-17.567},N:{dH:-7312.5,dS:-19.162}},S:{A:{dH:-5700,dS:-13.2},T:{dH:-7150,dS:-19.05},G:{dH:-11450,dS:-27.2},C:{dH:-11050,dS:-26.65},R:{dH:-8575,dS:-20.2},Y:{dH:-9100,dS:-22.85},W:{dH:-6425,dS:-16.125},S:{dH:-11250,dS:-26.925},M:{dH:-8375,dS:-19.925},K:{dH:-9300,dS:-23.125},B:{dH:-9883.333,dS:-24.3},D:{dH:-8100,dS:-19.817},H:{dH:-7966.667,dS:-19.633},V:{dH:-9400,dS:-22.35},N:{dH:-8837.5,dS:-21.525}},M:{A:{dH:-7450,dS:-18.45},T:{dH:-8200,dS:-22.35},G:{dH:-9850,dS:-24.3},C:{dH:-8750,dS:-21.95},R:{dH:-8650,dS:-21.375},Y:{dH:-8475,dS:-22.15},W:{dH:-7825,dS:-20.4},S:{dH:-9300,dS:-23.125},M:{dH:-8100,dS:-20.2},K:{dH:-9025,dS:-23.325},B:{dH:-8933.333,dS:-22.867},D:{dH:-8500,dS:-21.7},H:{dH:-8133.333,dS:-20.917},V:{dH:-8683.333,dS:-21.567},N:{dH:-8562.5,dS:-21.762}},K:{A:{dH:-5800,dS:-15.2},T:{dH:-7800,dS:-20.65},G:{dH:-8400,dS:-19.75},C:{dH:-8350,dS:-20.1},R:{dH:-7100,dS:-17.475},Y:{dH:-8075,dS:-20.375},W:{dH:-6800,dS:-17.925},S:{dH:-8375,dS:-19.925},M:{dH:-7075,dS:-17.65},K:{dH:-8100,dS:-20.2},B:{dH:-8183.333,dS:-20.167},D:{dH:-7333.333,dS:-18.533},H:{dH:-7316.667,dS:-18.65},V:{dH:-7516.667,dS:-18.35},N:{dH:-7587.5,dS:-18.925}},B:{A:{dH:-5800,dS:-14.433},T:{dH:-7800,dS:-20.7},G:{dH:-9566.667,dS:-22.433},C:{dH:-9233.333,dS:-22.267},R:{dH:-7683.333,dS:-18.433},Y:{dH:-8516.667,dS:-21.483},W:{dH:-6800,dS:-17.567},S:{dH:-9400,dS:-22.35},M:{dH:-7516.667,dS:-18.35},K:{dH:-8683.333,dS:-21.567},B:{dH:-8866.667,dS:-21.8},D:{dH:-7722.222,dS:-19.189},H:{dH:-7611.111,dS:-19.133},V:{dH:-8200,dS:-19.711},N:{dH:-8100,dS:-19.958}},D:{A:{dH:-6900,dS:-18.133},T:{dH:-8066.667,dS:-21.733},G:{dH:-8200,dS:-20.1},C:{dH:-7733.333,dS:-19.167},R:{dH:-7550,dS:-19.117},Y:{dH:-7900,dS:-20.45},W:{dH:-7483.333,dS:-19.933},S:{dH:-7966.667,dS:-19.633},M:{dH:-7316.667,dS:-18.65},K:{dH:-8133.333,dS:-20.917},B:{dH:-8e3,dS:-20.333},D:{dH:-7722.222,dS:-19.989},H:{dH:-7566.667,dS:-19.678},V:{dH:-7611.111,dS:-19.133},N:{dH:-7725,dS:-19.783}},H:{A:{dH:-6966.667,dS:-17.933},T:{dH:-8500,dS:-22.9},G:{dH:-8500,dS:-20.5},C:{dH:-7700,dS:-19.133},R:{dH:-7733.333,dS:-19.217},Y:{dH:-8100,dS:-21.017},W:{dH:-7733.333,dS:-20.417},S:{dH:-8100,dS:-19.817},M:{dH:-7333.333,dS:-18.533},K:{dH:-8500,dS:-21.7},B:{dH:-8233.333,dS:-20.844},D:{dH:-7988.889,dS:-20.444},H:{dH:-7722.222,dS:-19.989},V:{dH:-7722.222,dS:-19.189},N:{dH:-7916.667,dS:-20.117}},V:{A:{dH:-6833.333,dS:-16.8},T:{dH:-7633.333,dS:-20.667},G:{dH:-10233.333,dS:-25.067},C:{dH:-9533.333,dS:-23.533},R:{dH:-8533.333,dS:-20.933},Y:{dH:-8583.333,dS:-22.1},W:{dH:-7233.333,dS:-18.733},S:{dH:-9883.333,dS:-24.3},M:{dH:-8183.333,dS:-20.167},K:{dH:-8933.333,dS:-22.867},B:{dH:-9133.333,dS:-23.089},D:{dH:-8233.333,dS:-20.844},H:{dH:-8e3,dS:-20.333},V:{dH:-8866.667,dS:-21.8},N:{dH:-8558.333,dS:-21.517}},N:{A:{dH:-6625,dS:-16.825},T:{dH:-8e3,dS:-21.5},G:{dH:-9125,dS:-22.025},C:{dH:-8550,dS:-21.025},R:{dH:-7875,dS:-19.425},Y:{dH:-8275,dS:-21.263},W:{dH:-7312.5,dS:-19.162},S:{dH:-8837.5,dS:-21.525},M:{dH:-7587.5,dS:-18.925},K:{dH:-8562.5,dS:-21.762},B:{dH:-8558.333,dS:-21.517},D:{dH:-7916.667,dS:-20.117},H:{dH:-7725,dS:-19.783},V:{dH:-8100,dS:-19.958},N:{dH:-8075,dS:-20.344}}},M={A:{A:27400,T:22800,G:25e3,C:21200,R:26200,Y:22e3,W:25100,S:23100,M:24300,K:23900,B:23e3,D:25066.666666666668,H:23800,V:24533.333333333332,N:24100},T:{A:23400,T:16800,G:19e3,C:16200,R:21200,Y:16500,W:20100,S:17600,M:19800,K:17900,B:17333.333333333332,D:19733.333333333332,H:18800,V:19533.333333333332,N:18850},G:{A:25200,T:2e4,G:21600,C:17600,R:23400,Y:18800,W:22600,S:19600,M:21400,K:20800,B:19733.333333333332,D:22266.666666666668,H:20933.333333333332,V:21466.666666666668,N:21100},C:{A:21200,T:15200,G:18e3,C:14600,R:19600,Y:14900,W:18200,S:16300,M:17900,K:16600,B:15933.333333333334,D:18133.333333333332,H:17e3,V:17933.333333333332,N:17250},R:{A:26300,T:21400,G:23300,C:19400,R:24800,Y:20400,W:23850,S:21350,M:22850,K:22350,B:21366.666666666668,D:23666.666666666668,H:22366.666666666668,V:23e3,N:22600},Y:{A:22300,T:16e3,G:18500,C:15400,R:20400,Y:15700,W:19150,S:16950,M:18850,K:17250,B:16633.333333333332,D:18933.333333333332,H:17900,V:18733.333333333332,N:18050},W:{A:25400,T:19800,G:22e3,C:18700,R:23700,Y:19250,W:22600,S:20350,M:22050,K:20900,B:20166.666666666668,D:22400,H:21300,V:22033.333333333332,N:21475},S:{A:23200,T:17600,G:19800,C:16100,R:21500,Y:16850,W:20400,S:17950,M:19650,K:18700,B:17833.333333333332,D:20200,H:18966.666666666668,V:19700,N:19175},M:{A:24300,T:19e3,G:21500,C:17900,R:22900,Y:18450,W:21650,S:19700,M:21100,K:20250,B:19466.666666666668,D:21600,H:20400,V:21233.333333333332,N:20675},K:{A:24300,T:18400,G:20300,C:16900,R:22300,Y:17650,W:21350,S:18600,M:20600,K:19350,B:18533.333333333332,D:21e3,H:19866.666666666668,V:20500,N:19975},B:{A:23266.666666666668,T:17333.333333333332,G:19533.333333333332,C:16133.333333333334,R:21400,Y:16733.333333333332,W:20300,S:17833.333333333332,M:19700,K:18433.333333333332,B:17666.666666666668,D:20044.444444444445,H:18911.11111111111,V:19644.444444444445,N:19066.666666666668},D:{A:25333.333333333332,T:19866.666666666668,G:21866.666666666668,C:18333.333333333332,R:23600,Y:19100,W:22600,S:20100,M:21833.333333333332,K:20866.666666666668,B:20022.222222222223,D:22355.555555555555,H:21177.777777777777,V:21844.444444444445,N:21350},H:{A:24e3,T:18266.666666666668,G:20666.666666666668,C:17333.333333333332,R:22333.333333333332,Y:17800,W:21133.333333333332,S:19e3,M:20666.666666666668,K:19466.666666666668,B:18755.555555555555,D:20977.777777777777,H:19866.666666666668,V:20666.666666666668,N:20066.666666666668},V:{A:24600,T:19333.333333333332,G:21533.333333333332,C:17800,R:23066.666666666668,Y:18566.666666666668,W:21966.666666666668,S:19666.666666666668,M:21200,K:20433.333333333332,B:19555.555555555555,D:21822.222222222223,H:20577.777777777777,V:21311.11111111111,N:20816.666666666668},N:{A:24300,T:18700,G:20900,C:17400,R:22600,Y:18050,W:21500,S:19150,M:20850,K:19800,B:19e3,D:21300,H:20133.333333333332,V:20866.666666666668,N:20325}},B={A:15400,T:8700,G:11500,C:7400,R:13450,Y:8050,W:12050,S:9450,M:11400,K:10100,B:9200,D:11866.667,H:10500,V:11433.333,N:10750}
var U
!function(e){e.STANDARD="STANDARD"
e.VERTEBRATE_MITOCHONDRIAL="VERTEBRATE_MITOCHONDRIAL"
e.YEAST_MITOCHONDRIAL="YEAST_MITOCHONDRIAL"
e.MOLD_PROTOZOAN_COELENTERATE_MITOCHONDRIAL_MYCOPLASMA_SPIROPLASMA="MOLD_PROTOZOAN_COELENTERATE_MITOCHONDRIAL_MYCOPLASMA_SPIROPLASMA"
e.INVERTEBRATE_MITOCHONDRIAL="INVERTEBRATE_MITOCHONDRIAL"
e.CILIATE_DASYCLADACEAN_HEXAMITA_NUCLEAR="CILIATE_DASYCLADACEAN_HEXAMITA_NUCLEAR"
e.ECHINODERM_FLATWORM_MITOCHONDRIAL="ECHINODERM_FLATWORM_MITOCHONDRIAL"
e.EUPLOTID_NUCLEAR="EUPLOTID_NUCLEAR"
e.BACTERIAL_ARCHAEAL_PLANT_PLASTID="BACTERIAL_ARCHAEAL_PLANT_PLASTID"
e.ALTERNATIVE_YEAST_NUCLEAR="ALTERNATIVE_YEAST_NUCLEAR"
e.ASCIDIAN_MITOCHONDRIAL="ASCIDIAN_MITOCHONDRIAL"
e.ALTERNATIVE_FLATWORM_MITOCHONDRIAL="ALTERNATIVE_FLATWORM_MITOCHONDRIAL"
e.CHLOROPHYCEAN_MITOCHONDRIAL="CHLOROPHYCEAN_MITOCHONDRIAL"
e.TREMATODE_MITOCHONDRIAL="TREMATODE_MITOCHONDRIAL"
e.SCENEDESMUS_OBLIQUUS_MITOCHONDRIAL="SCENEDESMUS_OBLIQUUS_MITOCHONDRIAL"
e.THRAUSTOCHYTRIUM_MITOCHONDRIAL="THRAUSTOCHYTRIUM_MITOCHONDRIAL"
e.RHABDOPLEURIDAE_MITOCHONDRIAL="RHABDOPLEURIDAE_MITOCHONDRIAL"
e.CANDIDATE_DIVISION_SR1_GRACILIBACTERIA="CANDIDATE_DIVISION_SR1_GRACILIBACTERIA"
e.PACHYSOLEN_TANNOPHILUS_NUCLEAR="PACHYSOLEN_TANNOPHILUS_NUCLEAR"
e.MESODINIUM_NUCLEAR="MESODINIUM_NUCLEAR"
e.PERITRICH_NUCLEAR="PERITRICH_NUCLEAR"
e.CEPHALODISCIDAE_MITOCHONDRIAL_UAA_TYR="CEPHALODISCIDAE_MITOCHONDRIAL_UAA_TYR"}(U||(U={}))
const F="MOLBIO_GENETIC_CODE",w=3},873488:(e,t,n)=>{n.d(t,{FE:()=>FragmentResults,Hn:()=>FragmentResult})
var a=n(440281),i=n.n(a),s=n(531041),r=n(598317),o=n(921554)
class FragmentResult extends i().Model{defaults(){return{end:null,endEnzymeID:null,fragmentID:null,index:null,originalBases:null,parent:null,parentVersion:null,primerPairID:null,start:null,startEnzymeID:null,versionId:null,start_sticky_end:null,end_sticky_end:null,color:null,homologyRegionOtherColor:null}}start(){return this.get("start")}end(){return this.get("end")}color(){return null!=this.get("color")?this.get("color"):null!=this.index()?o.vx[this.index()%o.vx.length]:null}homologyRegionOtherColor(){return this.get("homologyRegionOtherColor")}index(){return this.get("index")}primerPairID(){return this.get("primerPairID")}startEnzymeID(){return this.get("startEnzymeID")}endEnzymeID(){return this.get("endEnzymeID")}originalBases(){return this.get("originalBases")}parent(){return this.get("parent")}parentVersion(){return this.get("parentVersion")}enzymeFlanked(){return null!=this.startEnzymeID()&&null!=this.endEnzymeID()}primerFlanked(){return!this.enzymeFlanked()&&null!=this.primerPairID()}parse(e){s.default.extend(e,{fragmentID:e.fragment_id,parentVersion:e.parent_version,primerPairID:e.primer_pair_id,startEnzymeID:e.start_enzyme_id,endEnzymeID:e.end_enzyme_id,versionID:e.version_id,originalBases:e.original_bases})
return s.default.omit(e,"fragment_id","parent_version","primer_pair_id","start_enzyme_id","end_enzyme_id","version_id","original_bases")}toJSON(){const e=super.toJSON()
s.default.extend(e,{fragment_id:e.fragmentID,primer_pair_id:e.primerPairID,start_enzyme_id:e.startEnzymeID,end_enzyme_id:e.endEnzymeID,version_id:e.versionID,pair_index:e.pairIndex,original_bases:e.originalBases})
return s.default.omit(e,"fragmentID","primerPairID","startEnzymeID","endEnzymeID","parentVersion","versionID","pairIndex","parent","originalBases")}}class FragmentResults extends r.Z{static initClass(){this.prototype.model=FragmentResult
this.prototype.comparator="index"}parse(e){return s.default.map(e,(e=>new FragmentResult(e,{parse:!0})))}}FragmentResults.initClass()},98969:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(132814),i=n(317275),s=n(955836),r=n(183367)
class GapSequence extends r.T9{defaults(){return{...super.defaults(),writable:!0,permissions:{polymerFeaturesEditable:!0,polymerResiduesEditable:!0,writable:!0}}}initialize(e,t={}){super.initialize(e,t)
null!=t.alignedBases&&this._withGaps(t.alignedBases)
this._realToGap={}
this._gapToReal={}
this._calculateIndices()
return this.listenTo(this,"change:bases",this._calculateIndices.bind(this))}_calculateIndices(){let e=0
const t=this.bases()
for(let n=0;n<t.length;n++){const a=t[n]
this._gapToReal[n]=e
if(a!==s.P8){this._realToGap[e]=n
e+=1}}this._realToGap[e]=this.bases().length
this._gapToReal[this.bases().length]=e}_withGaps(e){const t=/-+/gi
let n
for(;n=t.exec(e);)this.insertBases(n.index,n[0])}cloneWithoutGaps(){const e=this.clone()
let t=0,n=0
for(;;){const a=this.bases().slice(t).match(`${s.P8}+`)
if(null==a)break
n+=a.index
t=a.index+t+a[0].length
e.deleteBases(n,n+a[0].length)}const a=new r.T9({...e.attributes})
a.id=this.id
return a}stopAllListeners(){this.stopListening()
this.trigger("stopAllListeners")}baseTable(){return s.M_}sync(){throw new Error("Gap sequence can't sync!")}toSaveable(){return this.cloneWithoutGaps()}gapToReal(e){return this._gapToReal[e]}realToGap(e){return this._realToGap[e]}realEndToGap(e){if(0===e){const e=this.gapToReal(this.length())-1
return a.mod(this.realToGap(e)+1,this.length())}return this.realToGap(e)}toJSON(e){const t=super.toJSON(e)
return(0,i.Z)(t,"id","bases","annotations","name","circular","color","parts","sequence_primers","sequence_type","translationGroups","translations")}}const o=GapSequence},883751:(e,t,n)=>{n.d(t,{FE:()=>Parts,Hn:()=>Part,QL:()=>Parts})
var a=n(531041),i=n(232606),s=n(598317),r=n(348920),o=n(955836),l=n(959415),c=n(436208),d=n(294538),u=n(703764),p=n(132814),m=n(271359),E=n(48047)
class Part extends l.sd{initialize(){(0,i.Gp)(null==this.get("raw_bases"),"Expected raw_bases on frontend parts to always be null")}defaults(){return{reverse:!1,complement:!1}}isFresh(){return Boolean(this.get("sequence_fresh"))}isDeleted(){return!this.get("sequence_exists")}isInSync(e){const t=E.slice(e.bases(),this.start(),this.end(),e.circular()),n=this.reversed()&&this.complemented()?E.revcomp(this.sequence().bases(),o.jb):this.sequence().bases()
return t.toLowerCase()===n.toLowerCase()}length(e){return p.length(this.start(),this.end(),e.length())}sequence(){return this.get("sequence")}reversed(){return Boolean(this.get("reverse"))}complemented(){return Boolean(this.get("complement"))}displayLabel(){return this.name()}name(e){null==e&&(e=!0)
const t=this.get("sequence")
let n=""
null!=t&&(n=t.name())
null==n&&(n="")
if(e){const e=[]
this.reversed()&&e.push("rev")
this.complemented()&&e.push("comp")
e.length>0&&(n=`${n} (${e.join(" ")})`)}return n}hover(){return!1}uid(){return this.cid}color(){return r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?m.pF:this.isDeleted()?"#F55":this.isFresh()?m.pF:"#FAA"}click(e,t=!1){const n=e.get("selection")
t?n.expandRange(this.start(),this.end()):n.select(this)}dblClick(e,t=!1){this.click(e,t)}clone(e,t){null==t&&(t={})
const n=new Part({start:this.get("start"),end:this.get("end"),sequence:this.get("sequence"),reverse:this.get("reverse"),complement:this.get("complement")})
if(t.revcomp){(0,i.hu)(null!=e,"Expected to receive container sequence length when cloning part with revcomp=true.")
const{start:t,end:a}=E.calculateRevcompForRangeFeature(e,n.start(),n.end())
n.set({start:t,end:a,reverse:!n.reversed(),complement:!n.complemented()})}return n}start(){return this.get("start")}end(){return this.get("end")}strand(){return 0}parse(e){const t=n(812651)
null!=e.sequence&&(e.sequence=new t.Sequence(e.sequence,{parse:!0}))
return e}toJSON(){const e=a.default.omit(super.toJSON(),"sequence")
e.sequence_id=this.get("sequence").get("id")
return e}toReactDict(){var e
const t=this.get("sequence")
return{name:this.name(!1),sequence:{id:t.get("id"),editURL:t.get("editURL"),folder:t.folder(),parts:t.get("parts").map((e=>e.toReactDict())),source:t.folder().source,tagSchema:null!==(e=t.get("tagSchema"))&&void 0!==e?e:null}}}type(){return"part"}}class Parts extends s.Z{static initClass(){this.prototype.model=Part
this.prototype.comparator="start"}getCount(){return this.length}initialize(){this.on("add remove reset",(()=>{this.setLayers()
this.trigger("change:bases")}))}partHasOverlaps(e){(0,i.Gp)(this.models.includes(e),"Expected to find part in this part collection")
return this.getSequencePartsBetween(e.start(),e.end()).length>1}getSequencePartsAt(e){const t=this.models.filter((t=>p.baseInRange(e,t.start(),t.end())))
r.ZP.PARTS_ENABLE_OVERLAPPING_PARTS||(0,i.Gp)(t.length<=1,"Found multiple overlapping parts")
return t}getSequencePartsBetween(e,t){return this.models.filter((n=>p.isRangeOverlap(n.get("start"),n.get("end"),e,t)))}getSequencePartsContainedWithin(e,t,n){return this.getSequencePartsBetween(t,n).filter((a=>p.isCircularRangeWithin(a.start(),a.end(),t,n,e)))}clone(e,t,n,a){null==a&&(a={})
let i=new Parts
const s=this.getSequencePartsContainedWithin(e,t,n)
if(0===s.length)return i
for(const e of Array.from(s))i.add(e.clone())
if(a.revcomp){const t=new Parts
for(const n of Array.from(i.models))t.add(n.clone(e,{revcomp:!0}))
i=t}return i}getUpdatedFeaturesFromPart(e,t,n,i){const s=[]
for(let r of Array.from(t.models)){if(r.end()<=r.start()&&0!==r.end())continue
r=r.clone()
r.set({fromSubPart:!0})
e.reversed()&&r.set({strand:d.a7[r.strand()]})
const t=e.sequence().length(),o=r.start(),l=0===r.end()?t:r.end(),c=e.reversed()?t-l:o,u=e.reversed()?t-o:l,m=p.mod(c+n,i),E=p.mod(u+n,i)
r.set({start:m})
r.set({end:E})
r.set({id:a.default.uniqueId(`${r.get("id")}_`)})
if(null!=r.get("bind_position")){let a=r.get("bind_position")
e.reversed()&&(a=t-a-1)
r.set("bind_position",p.mod(a+n,i))}s.push(r)}return s}getUpdatedFeatures(e,t){const n=new Set(t(e).models.map((e=>e.identityFingerprint()))),a=[]
for(const i of this.models){if(!i.isInSync(e))continue
const s=t(i.sequence()),r=this.getUpdatedFeaturesFromPart(i,s,i.start(),e.length())
for(const e of r){const t=e.identityFingerprint()
if(!n.has(t)){a.push(e)
n.add(t)}}}return a}getUpdatedTranslationGroupsFromParts(e){const t=new Set(e.translationGroups().map((e=>e.id))),n=[]
for(const a of this.models){if(!a.isInSync(e))continue
const i=a.sequence().translationGroups()
for(const e of i)if(!t.has(e.id)){n.push({...e,fromSubPart:!0})
t.add(e.id)}}return n}annotations(e){return this.getUpdatedFeatures(e,(e=>e.annotations()))}translations(e){return this.getUpdatedFeatures(e,(e=>e.translations()))}translationGroups(e){return this.getUpdatedTranslationGroupsFromParts(e)}sequencePrimers(e){return this.getUpdatedFeatures(e,(e=>e.sequencePrimers()))}setFullLayers(){const e=u.eo(this.models,{top:!1})
for(const{model:t,layer:n}of e)t.set(c.LINEAR_LAYER_FULL,n,{silent:!0})}setLayers(){this.setFullLayers()
this.trigger("layerChange")}toReactJSON(){return this.models.map((e=>e.toReactDict()))}}Parts.initClass()},957787:(e,t,n)=>{n.d(t,{F:()=>PrimerPairCollection,H:()=>PrimerPair})
var a=n(440281),i=n.n(a),s=n(232606),r=n(968653),o=n(48047)
class PrimerPair extends i().Model{defaults(){return{primer_fwd_id:null,primer_rev_id:null}}forwardPrimerId(){return this.get("primer_fwd_id")}reversePrimerId(){return this.get("primer_rev_id")}getPrimers(e){const t=this.forwardPrimerId(),n=this.reversePrimerId(),a=e.find((e=>e.id===t)),i=e.find((e=>e.id===n)),r=e.map((e=>e.id)).join(",");(0,s.hu)(null!=a,"Called getPrimers but forward was undefined",{id:t,existing:r});(0,s.hu)(null!=i,"Called getPrimers but reverse was undefined",{id:n,existing:r})
return[a,i]}productLength(e,t,n){const[a,i]=Array.from(this.getPrimers(e))
let s=o.productLength([a.start(),a.end()],[i.start(),i.end()],t,n)
s+=a.overhangBases().length+i.overhangBases().length
return s}validate(e){return null==e.primer_fwd_id?"Forward primer cannot be null":null==e.primer_rev_id?"Reverse primer cannot be null":void 0}}class PrimerPairCollection extends r.ZP{static initClass(){this.prototype.model=PrimerPair
this.prototype.attributeName="primer_pairs"}findPair(e,t){return this.find((n=>n.get("primer_fwd_id")===e.id&&n.get("primer_rev_id")===t.id))}batchName(){return"primerPairs"}}PrimerPairCollection.initClass()},183367:(e,t,n)=>{n.d(t,{FE:()=>SequenceCollection,Hn:()=>Sequence,T9:()=>Sequence})
var a=n(64558),i=n(440281),s=n.n(i),r=n(250965),o=n.n(r),l=n(531041),c=n(770188),d=n(232606),u=n(675649),p=n(348979),m=n(132814)
function deleteBases(e,t,n){const a=e.length(),i=t,s=0===n?a:n
if(i<s)replaceNonWrappingBases(e,i,s,"",a)
else{(0,d.hu)(e.circular(),"Expected circular sequence for replaceStart < replaceEnd")
const t=a-i+s
reindex(e,i)
replaceNonWrappingBases(e,0,t,"",a)}}function reindex(e,t){(0,d.hu)(0<=t&&t<=e.length(),`Reindex position out of sequence bounds: pos=${t}, sequence.length()=${e.length()}`)
e.set("bases",e.bases().slice(t)+e.bases().slice(0,t))
for(const n of getRangeFeatures(e)){const a=m.getReindexedPosition(n.get("start"),t,e.length()),i=m.getReindexedPosition(n.get("end"),t,e.length())
n.set({start:a,end:i})}for(const n of e.sequencePrimers().models){const a=m.getReindexedPosition(n.bindPosition(e),t,e.length())
n.setBindPosition(e,a,n.overhangLength())}}function replaceNonWrappingBases(e,t,n,a,i){(0,d.hu)(0<=t&&t<=n&&n<=i,`Expected 0 <= replaceStart <= replaceEnd <= sequence length, got replaceStart=${t}, replaceEnd=${n}, length=${i}`)
e.set("bases",e.bases().slice(0,t)+a+e.bases().slice(n))
const s=[...getRangeFeatures(e).filter((e=>function shouldDeleteRangeFeature(e,t,n,a,i){const s=e.get("start"),r=0===e.get("end")?i:e.get("end")
if(e instanceof p.Wb&&s===t&&r===n&&a>0)return!1
return s>=r?0===t&&n===i:t<=s&&r<=n}(e,t,n,a.length,i))),...e.sequencePrimers().models.filter((e=>function shouldDeletePrimer(e,t,n,a){const i=e.bindPosition({length:()=>a})
return t<=i&&i<n}(e,t,n,i)))]
for(const e of s)e.trigger("destroy",e,e.collection)
for(const s of getRangeFeatures(e))applyReplaceToRangeFeature(s,t,n,a.length,i)
for(const s of e.sequencePrimers().models)applyReplaceToPrimer(e,s,t,n,a.length,i)
e.set("modifiedNucleotides",e.modifiedNucleotides().map((e=>function applyReplaceToModifiedNucleotide(e,t,n,a){let i=e.position
if(t<=i&&i<n)return
const s=a-(n-t)
i>=n&&(i+=s)
return{...e,position:i}}(e,t,n,a.length))).filter((e=>Boolean(e))))}function getRangeFeatures(e){return[...e.annotations().models,...e.translations().models,...e.parts().models]}function applyReplaceToRangeFeature(e,t,n,a,i){let s=e.get("start"),r=0===e.get("end")?i:e.get("end")
t<s&&s<n&&(s=n)
t<r&&r<n&&(r=t)
const o=a-(n-t)
s>=n&&(s+=o)
r>t&&(r+=o)
s=m.mod(s,i+o)
r=m.mod(r,i+o)
e.set({start:s,end:r})}function applyReplaceToPrimer(e,t,n,a,i,s){let r=t.bindPosition({length:()=>s})
r>=a&&(r+=i-(a-n))
const o=t.overhangLength()
t.setBindPosition(e,r,o)}var E,h=n(294538),g=n(467607),S=n(17086),_=n(900306),T=n(199534),I=n(171705),A=n(279785),f=n(197229),y=n(497790),C=n(567e3),R=n(947216),b=n(955836),N=n(873488),O=n(883751),L=n(957787),P=n(407161),D=n(48047)
function getRejectedSaveXHRForValidationFailure(e){const t=e.validate();(0,d.Gp)(!1,`Validation error when trying to save sequence: ${t}`)
const n=o().Deferred(),a=n.promise()
a.client=a
n.reject({responseJSON:{devMessage:t}})
return a}!function(e){e.DIGEST="digest"
e.ALIGNMENT="alignment"}(E||(E={}))
class Sequence extends s().Model{static initClass(){this.prototype.urlRoot="/1/api/sequences"}defaults(){return{bases:"",type:"ds",name:"Untitled",color:null,offset5:0,offset3:0,circular:!1,startIndex:1,nucleotideType:b.Wy.DNA,annotations:new R.FE,translations:new p.FE,translationGroups:[],sequencePrimers:new P.FE,primerPairs:new L.F,fragmentResults:new N.FE,parts:new O.FE,unrecoverable:!1,modifiedNucleotides:[],canOpenSelectionContextMenu:!0}}leftOverhang(){return this.get("offset5")>0?"5'":this.get("offset5")<0?"3'":"blunt"}rightOverhang(){return this.get("offset3")>0?"5'":this.get("offset3")<0?"3'":"blunt"}latestVersionId(){return this.get("latestVersionId")}setLatestVersionId(e){this.set({latestVersionId:e})}createdAt(){return this.get("created_at")}circular(){return this.get("circular")}startIndex(){return this.get("startIndex")}annotations(){return this.get("annotations")}locked(){return this.get("locked")}translations(){return this.get("translations")}translationGroups(){return this.get("translationGroups")}sequencePrimers(){return this.get("sequencePrimers")}primerPairs(){return this.get("primerPairs")}modifiedNucleotides(){var e
return null!==(e=this.get("modifiedNucleotides"))&&void 0!==e?e:[]}name(){return this.get("name")}displayLabel(){return this.get("displayLabel")}isArchived(){return Boolean(this.get("archiveRecord"))}folder(){return this.get("folder")}parts(){return this.get("parts")}bases(){return this.get("bases")}nucleotideType(){return this.get("nucleotideType")}length(){return this.bases().length}finalized(){return this.get("finalized")}parents(){(0,d.Gp)(!1,"Usage of code we thought was dead.")
return this.get("parents")}fragmentResults(){return this.get("fragmentResults")}assembly(){return this.get("assembly")}assemblyType(){return function __guard__(e,t){return null!=e?t(e):void 0}(this.assembly(),(e=>e.method()))}baseTable(){return b.Sb[this.nucleotideType()]}canOpenSelectionContextMenu(){return this.get("canOpenSelectionContextMenu")}complexPolymerId(){return this.get("complexPolymerId")}_changeBases(){if(!S.U2("modifying"))return this.triggerBaseChange()}initialize(e,t){this.annotations().add(this.parts().annotations(this))
this.translations().add(this.parts().translations(this))
this.sequencePrimers().add(this.parts().sequencePrimers(this))
this.set("translationGroups",[...this.translationGroups(),...this.parts().translationGroups(this)])
if(this.has("3")&&this.has("5")){const blank=e=>void 0===e||" "===e
let e=0,t=0,n=!0,a=""
const i=Math.max(this.get("5").length,this.get("3").length)
for(let s=0;s<i;s++){const i=this.get("5")[s],r=this.get("3")[s]
if(blank(i)&&blank(r));else if(blank(i)){a+=D.complement(r,this.baseTable())
n?e-=1:t+=1}else if(blank(r)){a+=i
n?e+=1:t-=1}else{(0,d.hu)(i===D.complement(r,this.baseTable()),"complementary base mismatch")
n=!1
a+=i}}this.set({offset5:e,offset3:t,circular:!1,type:g.uS.DOUBLE_STRANDED})
this.set("bases",a)
this.unset("3")
this.unset("5")}this._changeBases()
this.on("change:parts",(function(){const e=this.previous("parts")
null!=e&&this.stopListening(e)
this.listenToParts()
this.parts().setLayers()
this._updatePartFeatures()}))
this.listenToParts()
this.on("change:type",(function(){return this._changeBases()}))
return this.listenTo(this,"change:sequencePrimers",(function(e,t){null!=this.previous("sequencePrimers")&&this.stopListening(this.previous("sequencePrimers"))
return this.listenTo(t,"remove",this._cleanPairs.bind(this))}))}listenToParts(){return this.listenTo(this.parts(),"change:bases",(function(){return this._changeBases()}))}_cleanPairs(){const e=this.sequencePrimers(),t=this.primerPairs(),n=this.primerPairs().filter((t=>{const n=e.find((e=>e.id===t.forwardPrimerId())),a=e.find((e=>e.id===t.reversePrimerId()))
return null!=n&&null!=a}))
return t.reset(n)}at(e){return this.bases()[e]}getSequencePartsAt(e){(0,d.hu)(0===this.length()||0<=e&&e<this.length(),"Unexpected position",{position:e,length:this.length()})
return this.parts().getSequencePartsAt(e)}partHasOverlaps(e){return this.parts().partHasOverlaps(e)}hasNullPhosphate(){return this.modifiedNucleotides().some((e=>!e.phosphateMonomerId))}tagSchemaHasTranscriptionLinkFields(){var e
const t=null===(e=this.get("tagSchema"))||void 0===e?void 0:e.allFields.filter((e=>e.fieldType===y.FieldType.TRANSCRIPTION_LINK))
return!!t&&t.length>0}canInsertAt(e){if(this.get("type")!==g.uS.OLIGO&&this.hasNullPhosphate()&&e===this.length())return!1
e===this.length()&&(e=0)
for(const t of this.parts().models)if(m.baseInExclusiveRange(e,t.start(),t.end()))return!1
return!0}isRegionEditable(e,t){return 0===this.parts().getSequencePartsBetween(e,t).length}search(e,t){return(0,T.y)(e,this.bases(),this.nucleotideType(),this.get("type"),this.circular(),t)}offsets(){return[this.get("offset5"),this.get("offset3")]}cutters(){return[this.get("_cutter5"),this.get("_cutter3")]}overhang5(){return this.bases().slice(0,Math.abs(this.get("offset5")))}overhang3(){return this.bases().slice(this.length()-Math.abs(this.get("offset3")),this.length())}topStrand(){const e=-Math.min(0,this.get("offset5")),t=this.length()-Math.max(0,this.get("offset3"))
return this.bases().slice(e,t)}getCuts(e,t=null){return(0,A.kh)(e,this.bases(),this.nucleotideType(),this.get("type"),this.circular(),t)}enzymeOverlap(e){const t=l.default.chain(e).map((function makeEnzymeEvents(e){return l.default.chain(this.search(e.matchingRegion)).map(((t,n)=>{const a=t.index,i=t.index+e.matchingRegion.length
return[["start",`${e.name}_${n}`,a],["end",`${e.name}_${n}`,i]]}),this).flatten(!0).value()}),this).flatten(!0).sortBy((e=>e[0])).sortBy((e=>e[2])).value()
let n=[],a=0,i=0,s=null
const r=[]
for(const e of Array.from(t)){if("start"===e[0]){n.push(e[1])
a=e[2]}else if("end"===e[0]){i=e[2]
n.length>1&&"end"!==s&&r.push({start:a%this.length(),end:i%this.length(),enzymes:n.map((e=>e.slice(0,e.lastIndexOf("_"))))})
n=n.filter((t=>t!==e[1]))}s=e[0]}return r}digest(e){let t,n;(0,d.hu)("ds"===this.get("type"),"digest can only be performed on ds dna")
const a=new SequenceCollection
if(0===this.length())return a
e.hasOwnProperty("matchingRegion")||D.digestableEnzyme(e)
const i=e,s=this.search(i.matchingRegion)
let r=[]
const o=[[i.matchingCut,i.offset]]
null!=i.cut2&&o.push([i.matchingCut2,i.offset2])
for(const[e,a]of Array.from(o))for(const o of Array.from(s)){[t,n]=Array.from(l.default.chain([e,e+a]).map((e=>-1===o.strand?i.matchingRegion.length-e:e)).sortBy((e=>e)).map((e=>m.mod(o.index+e,this.length()))).value())
r.push({left:t,right:n,offset:a})}r=l.default.sortBy(r,(e=>e.left))
const c=this.get("_startIndex"),u=null!=c?c:0,addFragment=(e,t,n,i,s,r)=>{a.add(this.slice(e,t).set({offset5:n,offset3:i,type:g.uS.DOUBLE_STRANDED,circular:!1,_startIndex:u+e,_cutter5:s,_cutter3:r}))}
if(0===r.length){const e=this.clone()
e.set({_startIndex:u,_cutter5:this.get("_cutter5"),_cutter3:this.get("_cutter3")})
a.add(e)
return a}const p=r[0],E=r[r.length-1]
if(this.circular()){const e=E.left,t=p.right
let n=this.residueSlice(e,t)
e!==t&&1===r.length&&(n+=this.residueSlice(t,t))
a.add({offset5:E.offset,offset3:p.offset,type:"ds",circular:!1,bases:n,_startIndex:u+e,_cutter5:i,_cutter3:i})}else{addFragment(0,p.right,this.get("offset5"),p.offset,this.get("_cutter5"),i)
addFragment(E.left,this.length(),E.offset,this.get("offset3"),i,this.get("_cutter3"))}for(let e=0;e<r.length-1;e++){const[t,n]=Array.from([r[e],r[e+1]])
addFragment(t.left,n.right,t.offset,n.offset,i,i)}return a}sanitizeFeatures(e){if(!e){for(const e of[this.annotations(),this.translations()])for(const t of e.models)t.start()>=t.end()&&0!==t.end()&&t.trigger("destroy",t,e)
const e=this.parts().models.filter((e=>m.isWrap(e.start(),e.end())))
for(const t of e)t.trigger("destroy",t,this.parts())
for(const e of this.sequencePrimers().models)e.setBindPosition(this,e.bindPosition(this),e.overhangLength())
for(const e of this.primerPairs().models){const[t,n]=e.getPrimers(this.sequencePrimers())
t.end()>n.end()&&e.trigger("destroy",e,this.primerPairs())}}}bindPosition(e){}_addModifiedNucleotides(e){const t=[...this.modifiedNucleotides(),...e].sort(((e,t)=>e.position-t.position))
this.set("modifiedNucleotides",t)
this.triggerBaseChange()}opSetAttrs(e){let t
if(e.hasOwnProperty("bases")){const t=D.sanitize(e.bases,this.nucleotideType())
this.set({bases:t,primerPairs:new L.F,sequencePrimers:new P.FE,translations:new p.FE,annotations:new R.FE})}e.hasOwnProperty("helm")&&(0,d.hu)(!1,"Sequence HELM updates must be done server-side.")
const n={}
if(e.hasOwnProperty("circular")){({circular:t}=e)
this.get("circular")!==t&&(n.circular=t)}e.hasOwnProperty("startIndex")&&(n.startIndex=e.startIndex)
null!=n.circular&&this.sanitizeFeatures(n.circular)
this.set(n)}opReindex(e){let t
const{current:n}=e,{desired:a}=e,i=this.length()
t=n>=a?n-a:i-(a-n)
this.suppressModify((function(){reindex(this,t)}))}opToggleCase({start:e,end:t,casing:n}){this.changeCase(e,t,n)}opExactReplaceBases({start:e,end:t,newBases:n}){this.exactReplaceBases(e,t,n)}opDelete(e){const{start:t}=e,{end:n}=e
this.deleteBases(t,n)}opInsert(e){const{pos:t}=e,n=D.sanitize(e.bases,this.nucleotideType())
this.insertBases(t,n)
if(e.modifiedNucleotides){const n=(0,_.Lm)(e.modifiedNucleotides,t)
this._addModifiedNucleotides(n)}}opReplaceRegion(e){const{start:t}=e,{end:n}=e,a=D.sanitize(e.bases,this.nucleotideType())
this.replaceBases(t,n,a)
if(e.modifiedNucleotides){const n=(0,_.Lm)(e.modifiedNucleotides,t)
this._addModifiedNucleotides(n)}}opCreatePartAndReplace(e){(0,d.hu)(!1,"opInsertPart called without implementation (respondDiff should be false)")}opInsertParts(e,{bases:t}){(0,d.hu)(null!=t,"opInsertParts called without bases")
this.insertBases(e.pos,t)}opInsertPart(e){(0,d.hu)(!1,"opInsertPart called without implementation (respondDiff should be false)")}opEditPart(e){(0,d.hu)(!1,"opEditPart called without implementation (respondDiff should be false)")}opDeletePart(e){const t=this.parts().get(e.part)
this.deleteBases(t.start(),t.end())}opReplaceRegionWithParts(e,{bases:t}){(0,d.hu)(null!=t,"opReplaceRegionWithParts called without bases")
this.replaceBases(e.start,e.end,t)}opSetSugarMod(e){(0,d.hu)(!1,"opSetSugarMod called without implementation (respondDiff should be false)")}opSetBaseMod(e){(0,d.hu)(!1,"opSetBaseMod called without implementation (respondDiff should be false)")}opSetPhosphateMod(e){(0,d.hu)(!1,"opSetPhosphateMod called without implementation (respondDiff should be false)")}opBulkSetMods(e){(0,d.hu)(!1,"opBulkSetMods called without implementation (respondDiff should be false)")}executeOperation(e,t){let n
const a={toggle_case:this.opToggleCase,exact_replace_bases:this.opExactReplaceBases,reindex:this.opReindex,del:this.opDelete,insert:this.opInsert,replace_region:this.opReplaceRegion,create_part_and_replace:this.opCreatePartAndReplace,insert_parts:this.opInsertParts,insert_part:this.opInsertPart,edit_part:this.opEditPart,delete_part:this.opDeletePart,replace_region_with_parts:this.opReplaceRegionWithParts,set_sugar_mod:this.opSetSugarMod,set_base_mod:this.opSetBaseMod,set_phosphate_mod:this.opSetPhosphateMod,bulk_set_mods:this.opBulkSetMods},i=this.opSetAttrs
for(const[i,s]of Object.entries(a))if(e.hasOwnProperty(i)){n=s.bind(this)
return n(e[i],t)}n=i.bind(this)
return n(e,t)}save(e,t,n){let a,i,s
if(null===e||"object"==typeof e){a=e
s=t}else{(a={})[e]=t
s={}}s=s||{}
if(!this.isNew()&&s.respondDiff){a.respondDiff=!0
s.save=!0
s.wait=!0
const e=l.default.once((()=>this.executeOperation(a,s)))
s.renderClient=e
i=super.save(a,s)
const t=o().Deferred()
if(!i)return getRejectedSaveXHRForValidationFailure(this)
i.client=t.promise()
const n=o().Deferred()
i.then(n.resolve,n.reject)
setTimeout((()=>{"rejected"===i.state()?n.reject():n.resolve()}),20)
n.done((()=>{e()}))
n.then(t.resolve,t.reject)}else{if(s.noteParts){i=super.save({...a,noteParts:s.noteParts},l.default.omit(s,"noteParts"))
this.unset("noteParts")}else i=super.save(...arguments)
if(!i)return getRejectedSaveXHRForValidationFailure(this)
i.client=i}return i}toJSON(e){null==e&&(e={})
l.default.defaults(e,{omitSubpartFeatures:!0})
const t=super.toJSON(e)
if(e.omitSubpartFeatures){t.annotations=t.annotations.reject((e=>e.fromSubPart()))
t.translations=t.translations.reject((e=>e.fromSubPart()))
t.sequencePrimers=t.sequencePrimers.reject((e=>e.fromSubPart()))}t.sequence_primers=t.sequencePrimers
t.primer_pairs=t.primerPairs
t.fragment_results=t.fragmentResults
t.modified_nucleotides=t.modifiedNucleotides
delete t.sequencePrimers
delete t.primerPairs
delete t.fragmentResults
delete t.modifiedNucleotides
return t}parse(e,t){(null!=t?t.save:void 0)&&(0,d.Gp)("function"==typeof t.renderClient,"Expected renderClient function to exist.")&&t.renderClient()
null!=e.annotations&&(e.annotations=new R.FE(e.annotations,{parse:!0,sequenceID:e.id}))
null!=e.translations&&(e.translations=new p.FE(e.translations,{parse:!0,sequenceID:e.id}))
if(null!=e.sequence_primers){e.sequencePrimers=new P.FE(e.sequence_primers,{parse:!0,sequenceID:e.id})
delete e.sequence_primers}else null!=e.sequencePrimers&&delete e.sequencePrimers
if(null!=e.primer_pairs){e.primerPairs=new L.F(e.primer_pairs,{parse:!0,sequenceID:e.id})
delete e.primer_pairs}else null!=e.primerPairs&&delete e.primerPairs
null!=e.parts&&(e.parts=new O.FE(e.parts.filter((e=>null!=e.sequence)),{parse:!0}))
if(null!=e.fragment_results){e.fragmentResults=new N.FE(e.fragment_results,{parse:!0})
delete e.fragment_results}null!=e.assembly&&(e.assembly=new c.Assembly(e.assembly,{parse:!0}))
if(e.modified_nucleotides){e.modifiedNucleotides=e.modified_nucleotides
delete e.modified_nucleotides}return e}_updatePartFeatures(){const e=this.parts(),t=this
this.annotations().batchModify((function(){this.remove(this.where({fromSubPart:!0}))
return this.add(e.annotations(t))}))
this.translations().batchModify((function(){this.remove(this.where({fromSubPart:!0}))
return this.add(e.translations(t))}))
const n=this.translationGroups().filter((({fromSubPart:e})=>!e))
this.set("translationGroups",[...n,...e.translationGroups(t)])
return this.sequencePrimers().batchModify((function(){this.remove(this.where({fromSubPart:!0}))
return this.add(e.sequencePrimers(t))}))}concat(e){const t=new R.FE
this.annotations().each((function(e){const n=e.clone()
0===n.get("end")&&n.set({end:this.length()})
n.unset("id")
return t.add(n)}),this)
e.get("annotations").each((function(e){const n=e.clone(this.length())
n.get("end")===this.length()&&n.set({end:0})
n.unset("id")
return t.add(n)}),this)
return new Sequence({annotations:t,bases:this.bases()+e.bases()}).set({offset5:this.isEmpty()?e.get("offset5"):this.get("offset5"),offset3:e.isEmpty()?this.get("offset3"):e.get("offset3")})}triggerBaseChange(){return this.trigger("change:bases",this,this.bases(),{partChange:!0})}changeCase(e,t,n){(0,d.hu)(null!=e&&null!=t,`Start (${e}) and end (${t}) must be defined for changeCase`)
if(t<=e){0!==t&&this.changeCase(0,t,n)
this.changeCase(e,this.length(),n)
return}const a=(()=>{switch(n){case"upper":return e=>e.toUpperCase()
case"lower":return e=>e.toLowerCase()
default:throw new Error("Illegal casing argument.")}})()
this.set("bases",this.bases().slice(0,e)+a(this.bases().slice(e,t))+this.bases().slice(t))}exactReplaceBases(e,t,n){(0,d.hu)(null!=e&&null!=t,`Start (${e}) and end (${t}) must be defined for exactReplaceBases`)
if(t<=e){0!==t&&this.exactReplaceBases(0,t,n.slice(this.length()-e,n.length))
this.exactReplaceBases(e,this.length(),n.slice(0,this.length()-e))}else{(0,d.hu)(0===this.parts().getSequencePartsBetween(e,t).length,"Invalid region to exact replace bases")
this.set("bases",this.bases().slice(0,e)+n+this.bases().slice(t))
this.set("modifiedNucleotides",this.modifiedNucleotides().filter((n=>n.position<e||n.position>=t)))}}insertBases(e,t){this.suppressModify((function(){!function insertBases(e,t,n){const a=e.length()
replaceNonWrappingBases(e,t,t,n,a)}(this,e,t)}))}deleteBases(e,t){return this.suppressModify((function(){deleteBases(this,e,t)}))}deletePart(e){return this.suppressModify((function(){deleteBases(this,e.start(),e.end())}))}reindexFeatures(e,t){const n=this.length()
return e.map((e=>({...e,start:m.getReindexedPosition(e.start,t,n),end:m.getReindexedPosition(e.end,t,n)})))}filterOutNotContainedFeatures(e,t){return e.filter((e=>e.start>=e.end&&e.end>0||e.start<t))}getBasesWithPrimerBases(e,t,n,a){const i=this.length()
if(null!=e&&null!=t&&m.isRangeOverlap(e.start(),e.end(),t.start(),t.end())){const n=m.length(t.start(),e.end(),i),a=D.revcomp(D.sanitize(t.bases(),this.nucleotideType()),this.baseTable()).substring(n)
return e.bases()+a}{let s,r,o,l
if(null!=e){o=D.sanitize(e.bases(),this.nucleotideType())
r=e.end()}else{o=""
r=n}if(null!=t){l=D.revcomp(D.sanitize(t.bases(),this.nucleotideType()),this.baseTable())
s=t.start()}else{l=""
s=a}return m.mod(r,i)!==m.mod(s,i)||null==e&&null==t?o+m.residueSlice(this.bases(),r,s,!0)+l:o+l}}padFeaturesAtStart(e,t,n){for(const a of e){a.start+=t
0!==a.end?a.end+=t:a.end=n+t
null!=a.bind_position&&(a.bind_position+=t)}}fixFeatureEnds(e,t){for(const n of e)0===n.end&&(n.end=t)}cleanFeatures(e,t){return e.map((e=>({...e,end:m.mod(e.end,t),fromSubPart:!1})))}filterAndClampAnnotations(e,t,n){const a=this.length()
let i=[]
if(e){const e=0===n?a:n
i=this.filterOutNotContainedFeatures(t,e)
i=i.flatMap((t=>{if(t.start<t.end)t.end>=e&&(t.end=e)
else{t.start>=e&&(t.start=0)
t.end>e&&(t.end=e)}if(t.end<=t.start&&t.end>0){const{id:e,...n}=t
return[{...n,start:0},{...n,end:0}]}return t}))
for(const e of i)(0,d.hu)(0<=e.start&&e.start<a&&0<=e.end&&e.end<a,`Invalid annotation indices: ${e.start}, ${e.end}, ${a}`)}else i=t.filter((e=>m.isRangeWithin(e.start,e.end,0,n)))
return i}filterWholeTranslationGroups(e,t,n,a){const i=this.length()
if(m.length(t,n,i)<b.p6)return[]
const s=[],r=n===i?0:n
for(const n of e){const{regions:e}=n,o=e[0].start,l=e[e.length-1].end
if(a){const e=0,a=m.getReindexedPosition(l,o,i),c=m.getReindexedPosition(t,o,i),d=m.getReindexedPosition(r,o,i)
m.isWrap(c,d)&&m.baseInRange(c,e,a)||s.push(n)}else m.isRangeWithin(o,l,t,r)&&s.push(n)}return s}clampTranslation(e,t,n,a){const i=this.length(),s=(b.p6-n)%b.p6
let r=e.start,o=e.end
if(1===e.strand){if(e.start<e.end)r+=a?s:0
else if(e.start>=t){const t=i-e.start+n
r=(b.p6-t%b.p6)%b.p6
r>=e.end&&(r=0)}o=Math.min(e.end,t)}else{if(e.end>=t){const a=e.end-t+n,i=t-(b.p6-a%b.p6)%b.p6
o=Math.min(e.end,i)}else o-=a?s:0
e.start>=e.end&&e.start>=t&&(r=0)}o>=t&&(o=0)
return{...e,start:r,end:o}}getTranslationRegionGroups(e){const t="none",n=(0,C.Z)(e,["start"]),i=(0,a.vM)(n,(e=>{var n
return null!==(n=e.translationGroupId)&&void 0!==n?n:t}))
let s=[]
for(const[e,n]of Object.entries(i))if(e===t){const e=n.map((e=>({groupId:null,regions:[e]})))
s=s.concat(e)}else s.push({groupId:Number.parseInt(e,10),regions:n})
return s}filterAndClampPartiallyContainedTranslations(e,t){let n=0
const a=this.length(),i=[],s=1===e[0].strand?e:e.reverse()
for(const e of s){const s=e.start>=e.end&&e.end>0||e.start<t,r=(m.length(e.start,e.end,a)+n)%b.p6,o=0===i.length
if(s){const s=this.clampTranslation(e,t,n,o),l=m.length(s.start,s.end,a);(!o||l>=r&&r>0||0===r&&l>=b.p6)&&i.push(s)}else if(!o)break
n=r}return(0,u.Sm)(i.map((e=>m.length(e.start,e.end,t))))>=b.p6?i:[]}handleTranslationsFromIndices(e,t,n,a){const i=this.length()
let s=[]
const r=this.getTranslationRegionGroups(t),o=this.filterWholeTranslationGroups(r,n,a,e),l=m.getReindexedPosition(a,n,i),c=o.map((({groupId:e,regions:t})=>({groupId:e,regions:this.reindexFeatures(t,n)})))
if(e){const e=0===l?i:l
for(const{regions:t}of c)s=s.concat(this.filterAndClampPartiallyContainedTranslations(t,e))
s=s.filter((e=>!m.isWrap(e.start,e.end)))
for(const e of s)(0,d.hu)(0<=e.start&&e.start<i&&0<=e.end&&e.end<i,`Invalid translation indices: ${e.start}, ${e.end}, ${i}`)}else s=c.flatMap((({regions:e})=>e))
return s}getNewNucleotideType(e,t,n){const a=(0,I.GM)(n||[null,null])
if(a)return a.nucleotideType()
if(e){if(t===g.uS.DOUBLE_STRANDED)return b.Wy.DNA
if(t===g.uS.SINGLE_STRANDED)return b.Wy.RNA;(0,d.Gp)(!1,"Cannot create new oligo from sequence selection")
return this.nucleotideType()}return this.nucleotideType()}filterAndReindexMods(e,t){const n=this.length()
return this.modifiedNucleotides().filter((n=>n.position>=e&&n.position<t)).map((t=>({...t,position:m.getReindexedPosition(t.position,e,n)})))}createFromIndices(e,t,n){var a,i
let s
null==n&&(n={})
const r=this.length(),o=this.parts().getSequencePartsContainedWithin(r,e,t).map((n=>D.clonePartAttributes(n.attributes,e,t,r))),l=n.parentVersionId,[c,d]=n.primers||[],u=n.primerBases&&(c&&m.isRangeWithin(c.start(),c.end(),e,t)||d&&m.isRangeWithin(d.start(),d.end(),e,t)),E=m.fullCircular(this.circular(),e,t,r)&&!u&&n.type!==g.uS.SINGLE_STRANDED,shouldRejectSubPartFeature=n=>{if(!n.fromSubPart())return!1
return this.parts().getSequencePartsAt(n.start()).some((n=>(0,m.isCircularRangeWithin)(n.start(),n.end(),e,t,r)))},featureIsOnReverseStrandOfOutput=e=>(null==n?void 0:n.reverseComplement)?1===e.strand():-1===e.strand(),h=n.annotations&&!n.reverseComplement?this.filterAndReindexMods(e,t):[]
let S=[],_=[]
if(n.annotations){let a=this.annotations().reject(shouldRejectSubPartFeature),i=this.translations().reject(shouldRejectSubPartFeature)
if(n.type===g.uS.SINGLE_STRANDED){a=this.annotations().reject(featureIsOnReverseStrandOfOutput)
i=this.translations().reject(featureIsOnReverseStrandOfOutput)}S=this.reindexFeatures(a.map((e=>e.toJSON())),e)
_=i.map((e=>e.toJSON()))
if(E)_=this.reindexFeatures(_,e)
else{const a=m.getReindexedPosition(t,e,r)
S=this.filterAndClampAnnotations(n.notcontained,S,a)
_=this.handleTranslationsFromIndices(n.notcontained,_,e,t)}}let T=[]
if(n.annotations){const n=this.sequencePrimers().filter((n=>{if(shouldRejectSubPartFeature(n))return!1
const a=t===r?0:t
return m.isRangeWithin(n.start(),n.end(),e,a)&&null!=n.id}))
for(const a of n){const n=D.cloneWrappableFeature(a,e,t,r)
T.push(n.toJSON())}}if(u){if(null!=c){const n=c.overhangBases().length,a=m.length(e,t,r)
this.padFeaturesAtStart(S,n,a)
this.padFeaturesAtStart(_,n,a)
this.padFeaturesAtStart(T,n,a)
this.padFeaturesAtStart(o,n,a)}s=this.getBasesWithPrimerBases(c,d,e,t)
if(null!=d){const e=s.length
this.fixFeatureEnds(S,e)
this.fixFeatureEnds(_,e)
this.fixFeatureEnds(T,e)}}else s=m.residueSlice(this.bases(),e,t,!0)
if(n.reverseComplement){s=D.revcomp(s,this.baseTable())
D.revcompFeatures(s.length,S)
D.revcompFeatures(s.length,_)
D.revcompFeatures(s.length,T)
D.revcompParts(s.length,o)}const[I,A]=m.modelRangeToDisplay(e,t,s.length,this.startIndex())
S=this.cleanFeatures(S,s.length)
_=this.cleanFeatures(_,s.length)
T=this.cleanFeatures(T,s.length)
const y=null!=n.type&&n.type!==this.get("type"),C=this.getNewNucleotideType(y,n.type,n.primers)
y&&(s=D.sanitize(s,C))
const b=new R.FE(S,{parse:!0}),N=new p.FE(_,{parse:!0}),L=new P.FE(T,{parse:!0}),v=null!=n.bases||y?new O.FE:new O.FE(o),M=new Set(_.map((e=>e.translationGroupId))),B=this.translationGroups().filter((e=>M.has(e.id)))
n.bases&&(s=n.bases)
let U=[]
n.tags&&(U=null===(a=this.get("tags"))||void 0===a?void 0:a.filter((e=>!(0,f.k)(e))))
const F=n.preserveIndices&&!E?this.startIndex()+e:1,w=new this.constructor({name:null!==(i=n.name)&&void 0!==i?i:`${this.name()} [${I}-${A}]`,bases:s,parts:v,type:n.type||this.get("type"),nucleotideType:C,sequencePrimers:L,circular:E,annotations:b,translations:N,translationGroups:B,tags:U,startIndex:F,parentVersionId:l,modifiedNucleotides:h})
if(u)for(const e of w.sequencePrimers().collect())(c&&e.id===c.id||d&&e.id===d.id)&&e.setOverhang(w,0)
return w}replaceBases(e,t,n){const a=m.isWrap(e,t)?0:e
this.suppressModify((function(){!function replaceWithBases(e,t,n,a){const i=e.length(),s=t,r=0===n?i:n
if(s<r)replaceNonWrappingBases(e,s,r,a,i)
else{(0,d.hu)(e.circular(),"Expected circular sequence for replaceStart < replaceEnd")
const t=i-s+r
reindex(e,s)
replaceNonWrappingBases(e,0,t,a,i)}}(this,e,t,n)}))
return a}suppressModify(e){return s().batchModify([this.annotations(),this.translations(),this.sequencePrimers()],this,(function(){S.gW({modifying:!0},this,e)
if(!S.U2("modifying"))return this.triggerBaseChange()}))}clone(){const e=this.slice().set({name:this.get("name"),circular:this.get("circular")})
e.annotations().reset(this.annotations().deepClone().models)
e.translations().reset(this.translations().deepClone().models)
return e}cloneReverseComplement(){const e=this.slice().set({name:this.get("name"),circular:this.get("circular"),offset5:this.get("offset3"),offset3:this.get("offset5")})
e.set({bases:D.revcomp(e.bases(),this.baseTable())})
const{length:t}=this.bases(),n=this.annotations().deepClone().models
n.forEach((e=>{const n=e.start(),a=e.end(),i=e.strand()
return e.set({start:(t-a)%t,end:(t-n)%t,strand:h.a7[i]})}))
e.get("annotations").reset(n)
const a=this.translations().deepClone().models
a.forEach((e=>{const n=e.start(),a=e.end(),i=e.strand()
return e.set({start:(t-a)%t,end:(t-n)%t,strand:h.CA[i]})}))
e.translations().reset(a)
return e}residueSlice(e,t,n){null==n&&(n=!1)
return e===t&&n?"":m.residueSlice(this.bases(),e,t,this.circular())}slice(e,t,n){null==e&&(e=0)
null==n&&(n=!1)
void 0===t&&(t=this.length());(0,d.hu)(e>=0&&t<=this.length(),`cannot slice out of bounds: start ${e}, end ${t}, length=${this.length()}`)
const a=n?D.revcomp(m.residueSlice(this.bases(),e,t,!0),this.baseTable()):m.residueSlice(this.bases(),e,t,!0),i=a.length
function revcompFeature(n){e=n.start()
t=n.end()
const a=n.strand()
n.set({start:i-t,end:(i-e)%i,strand:h.a7[a]})}const s=this.parts().getSequencePartsContainedWithin(this.length(),e,t).map((n=>D.clonePartAttributes(n.attributes,e,t,this.length())))
n&&D.revcompParts(i,s)
const r=new O.QL(s),o=new R.FE
for(const a of Array.from(this.annotations().filter((e=>!e.fromSubPart()))))if(m.isRangeWithin(a.start(),a.end(),e,t)){o.add(D.cloneWrappableFeature(a,e,t,this.length()))
n&&revcompFeature(a)}const l=new p.FE
for(const a of Array.from(this.translations().filter((e=>!e.fromSubPart))))if(m.isRangeWithin(a.start(),a.end(),e,t)){l.add(D.cloneWrappableFeature(a,e,t,this.length()))
n&&revcompFeature(a)}const c=new P.FE
for(const a of Array.from(this.sequencePrimers().filter((e=>!e.fromSubPart()))))if(m.isRangeWithin(a.start(),a.end(),e,t)){c.add(D.cloneWrappableFeature(a,e,t,this.length()))
n&&revcompFeature(a)}const u=Math.max(Math.abs(this.get("offset5"))-e,0)*D.sign(this.get("offset5")),E=Math.max(Math.abs(this.get("offset3"))-(this.length()-t),0)*D.sign(this.get("offset3")),g=new this.constructor({bases:a,parts:r,type:this.get("type"),nucleotideType:this.nucleotideType(),circular:!1,annotations:o,translations:l,sequencePrimers:c,offset5:u,offset3:E})
g.annotations().add(g.parts().annotations(g))
g.translations().add(g.parts().translations(g))
g.sequencePrimers().add(g.parts().sequencePrimers(g))
return g}async createTranslation(e,t,n){const a=await this.translations().betterCreate({start:e,end:t,strand:n},{fileUpdate:!0});(0,d.hu)(!1!==a,"Unexpected validation failure on translation creation.")
return a}async createTranslationIfNew(e,t,n){for(const a of this.translations().models)if(a.start()===e&&a.end()===t&&a.strand()===n)return
await this.createTranslation(e,t,n)}isRNASequence(){return this.get("type")===g.uS.SINGLE_STRANDED}isOligo(){return this.get("type")===g.uS.OLIGO}validate(){if(null==this.get("name")||0===this.get("name").length)return"name cannot be empty"
if("ss"===this.get("type")){if(this.nucleotideType()&&this.nucleotideType()!==b.Wy.RNA)return"ss sequences must be RNA"
if(0!==this.get("offset5")||0!==this.get("offset3"))return"ss sequences cannot have overhangs"
if(this.get("circular"))return"ss sequences cannot be circular"}else if("ds"===this.get("type")){if(this.nucleotideType()&&this.nucleotideType()!==b.Wy.DNA)return"ds sequences must be DNA"
if(Math.abs(this.get("offset5"))+Math.abs(this.get("offset3"))>this.length())return"overhang cannot be longer than sequence"}else{if("oligo"!==this.get("type"))return"incorrect strand type specified"
if(0!==this.get("offset5")||0!==this.get("offset3"))return"oligos cannot have overhangs"}}isEmpty(){return""===this.bases()}equal(e){return this.get("type")===e.get("type")&&D.normalize(this.bases())===D.normalize(e.bases())&&this.get("offset3")===e.get("offset3")&&this.get("offset5")===e.get("offset5")&&this.get("circular")===e.get("circular")}toSaveable(){return this}displayNames(){var e
const t=[this.get("displayLabel")]
if(null===(e=this.get("tagSchema"))||void 0===e?void 0:e.includeRegistryIdInChips){const e=this.get("bioentityAliasInfos"),n=null!=e?e.filter((e=>null!=e.registryCollectionOwner)).map((e=>e.alias)):[]
t.push(...n)}return t.join(", ")}}Sequence.initClass()
class SequenceCollection extends s().Collection{static initClass(){this.prototype.model=Sequence}equal(e){if(this.length!==e.length)return!1
for(const t of Array.from(this.models))if(1!==e.filter((e=>t.equal(e))).length)return!1
return!0}}SequenceCollection.initClass()},407161:(e,t,n)=>{n.d(t,{EV:()=>SearchPrimerCollection,FE:()=>SequencePrimerCollection,Hn:()=>SequencePrimer,uV:()=>f})
var a=n(440281),i=n.n(a),s=n(764403),r=n.n(s),o=n(989526),l=n(782279),c=n(926025),d=n(531041),u=n(232606),p=n(955836),m=n(48047),E=n(968653),h=n(294538),g=n(650858),S=n(467607),_=n(921554),T=n(900306),I=n(132814),A=n(808844)
const f=6,y={forward:"FWD",reverse:"REV",probe:"PROBE"}
class SequencePrimer extends i().Model{static initClass(){this.prototype.debouncedSave=(0,c.D)((function({done:e,fail:t,invalid:n}){const a=this.save({},{fileUpdate:!0})
if(a){null!=e&&a.done(e)
null!=t&&a.fail(t)}else"function"==typeof n&&n(this.validationError)}),500)}static generateName(e,t,n,a,i,s){const r=`${I.modelStartToDisplay(t,s)}-${I.modelEndToDisplay(n,i,s)} ${y[a]}`
return`${(0,A.fk)(e,g.Jb-r.length-10)} ${r}`}initialize(e,t){super.initialize(e,t)
this.on("change:nucleotideType",(e=>{(0,u.hu)(!this.get("primer_id"),"Toggling nucleotideType only supported for new oligos")
e.set({bases:m.sanitize(this.bases(),this.nucleotideType())})}))}defaults(){return{name:"",bases:"",color:_.wC(),start:0,end:1,strand:1,overhang_length:0,primer_id:null,displayLabel:"",nucleotideType:p.Wy.DNA,modifiedNucleotides:[]}}clone(e=0){const t=super.clone().set({start:this.start()+e,end:this.end()+e})
null!=t.get("bind_position")&&t.set("bind_position",t.get("bind_position")+e)
return t}start(){return this.get("start")}end(){return this.get("end")}bases(){return this.get("bases")}strand(){return this.get("strand")}name(){return this.get("name")}color(){return this.get("color")}modifiedNucleotides(){return this.get("modifiedNucleotides")}nucleotideType(){return this.get("nucleotideType")}length(){return this.bases().length}displayLabel(){return this.get("displayLabel")||this.name()}identityFingerprint(){return`${this.start()}:${this.end()}:${this.strand()}:${this.get("primer_api_id")}`}folder(){return"object"==typeof this.get("folder")?this.get("folder"):{name:this.get("folder"),api_identifier:this.get("folder_api_id"),url:this.get("folder_url")}}fromSubPart(){var e
return null!==(e=this.get("fromSubPart"))&&void 0!==e&&e}editable(){return null!=this.id&&!this.fromSubPart()}referencesExistingOligo(){return Boolean(this.get("primer_id"))}bindingBases(){return this.bases().substring(this.get("overhang_length"))}hasOverhang(){return this.get("overhang_length")>0}overhangBases(){return this.bases().substring(0,this.get("overhang_length"))}overhangLength(){return this.get("overhang_length")}overhangEdge(e=null){let t
t=1===this.strand()?this.start()-this.overhangLength():this.end()+this.overhangLength()
if(!e||!e.length())return t
if(!e.circular()){if(t<0||t>=e.length())return null
if(-1===this.strand()&&0===this.end()&&this.overhangLength()>0)return null}return I.mod(t,e.length())}bindPosition(e){return I.primerBindPosition(this.strand(),this.start(),this.end(),e.length())}strandAwareStartPosition(e){return 1===this.strand()?this.start():I.mod(this.end()-1,e.length())}setOverhang(e,t){const{start:n,end:a,overhang_length:i}=this._bindPositionInfo(e,this.bindPosition(e),t,this.strand(),this.bases())
this.set({start:n,end:a,overhang_length:i})}reverse(e){const{start:t,end:n,overhang_length:a}=this._bindPositionInfo(e,this.bindPosition(e),this.get("overhang_length"),h.CA[this.strand()],this.bases())
this.set({strand:h.CA[this.strand()],start:t,end:n,overhang_length:a})}changeBases(e,t){const{start:n,end:a,overhang_length:i}=this._bindPositionInfo(e,this.bindPosition(e),this.get("overhang_length"),this.strand(),t)
this.set({start:n,end:a,overhang_length:i,bases:t,modifiedNucleotides:[]})}setBindPosition(e,t,n,a={}){const{keepOverhang:i}=a,{start:s,end:r,overhang_length:o}=this._bindPositionInfo(e,t,n,this.strand(),this.bases())
i?this.set({start:s,end:r}):this.set({start:s,end:r,overhang_length:o})}_bindPositionInfo(e,t,n,a,i){let s,r
if(0===i.length)return{start:t,end:t,overhang_length:0}
n=Math.min(n,i.length-1)
n=Math.max(n,i.length-e.length())
e.get("circular")||(n=1===a?Math.max(i.length-t-1,n):Math.max(i.length-(e.length()-t),n))
if(-1===a){r=t
s=I.mod(t+(i.length-n),e.length())}else{r=I.mod(t-(i.length-n)+1,e.length())
s=I.mod(t+1,e.length())}return{start:r,end:s,overhang_length:n}}_complementTable(){return p.Sb[this.nucleotideType()]}basesHtml(e){const t=(0,T.dA)(this.bases(),this.modifiedNucleotides(),this.nucleotideType(),S.uS.OLIGO),n=this,a=this.baseMatchingStatuses(e.get("_sequence"))
return l.renderToStaticMarkup(o.createElement(o.Fragment,null,o.createElement("span",{className:"prime five-prime"},"5' "),Array.from(t).map(((e,t)=>o.createElement("span",{key:t,className:r()({"primer-base-overhang":t<n.overhangLength(),"primer-base-match":t>=n.overhangLength()&&a[t],"primer-base-no-match":t>=n.overhangLength()&&!a[t]})},e))),o.createElement("span",{className:"prime three-prime"}," 3'")))}validBases(){return this.length()>=f}validate(e){return 0===e.name.length?"Primer name cannot be empty.":e.bases&&0!==e.bases.length?this.validBases()?m.isValidSequence(e.bases,this.nucleotideType())?e.start<0?"Start must be >= 0.":e.end<0?"End must be >= 0.":null===e.color?"Color must be specified.":e.folder_api_id?void 0:"Folder must be specified":"Invalid bases.":`Binding site must be at least ${f} bases long.`:"Bases cannot be empty."}mismatchedIndices(e){const t=[]
this.baseMatchingStatuses(e).forEach(((e,n)=>{e||t.push(n)}))
if(1===this.strand())return t
t.reverse()
return t.map((e=>this.length()-e-1))}meltingTemperature(){return m.meltingTemperature(this.bindingBases(),this.nucleotideType())}baseMatchingStatuses(e){if(0===e.length())return Array(this.bases().length).fill(!0)
const t=e.bases(),n=m.sanitize(this.bases(),e.nucleotideType()),a=this.strandAwareStartPosition(e)
return Array.from(n).map(((n,i)=>{if(i<this.overhangLength())return!0
const s=I.mod(a+(i-this.overhangLength())*this.strand(),e.length()),r=e.nucleotideType()===p.Wy.DNA?p.jb:p.WN,o=1===this.strand()?t[s]:m.complement(t[s],r)
return m.matchWithDegeneracy(o,n.toUpperCase())}))}}SequencePrimer.initClass()
class SequencePrimerCollection extends E.ZP{static initClass(){this.prototype.model=SequencePrimer
this.prototype.attributeName="primers"}batchName(){return"sequencePrimers"}}SequencePrimerCollection.initClass()
class SearchPrimerCollection extends i().Collection{static initClass(){this.prototype.url="/1/api/oligos/search"
this.prototype.model=SequencePrimer}parse(e){return e.map((e=>({...d.default.omit(e,"id","api_id"),primer_id:e.id,primer_api_id:e.api_id})))}}SearchPrimerCollection.initClass()},776015:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(440281),i=n.n(a)
class SequenceRegion extends i().Model{fromSubPart(){return this.get("fromSubPart")}editable(){return!this.fromSubPart()}defaults(){return{start:0,end:0,fromSubPart:!1}}start(){return this.get("start")}end(){return this.get("end")}clone(e=0){return super.clone().set({start:this.start()+e,end:this.end()+e})}parse(e){delete e.start_offset
delete e.end_offset
delete e.start_part_id
delete e.end_part_id
return e}allowFullReplace(){return!1}}const s=SequenceRegion},348979:(e,t,n)=>{n.d(t,{FE:()=>TranslationCollection,Hn:()=>Translation,Wb:()=>Translation})
var a=n(531041),i=n(968653),s=n(776015)
class Translation extends s.Z{defaults(){return a.default.extend(super.defaults(),{strand:1})}strand(){return this.get("strand")}translationGroupId(){return this.get("translationGroupId")}allowFullReplace(){return!0}identityFingerprint(){return`${this.start()}:${this.end()}:${this.strand()}`}}class TranslationCollection extends i.ZP{static initClass(){this.prototype.model=Translation
this.prototype.attributeName="translations"}batchName(){return"translations"}deepClone(e=0){const t=new TranslationCollection
this.each((n=>t.add(n.clone(e))))
return t}}TranslationCollection.initClass()},282346:(e,t,n)=>{n.d(t,{_:()=>reverseStrandOrfsWithStartCodon,s:()=>forwardStrandOrfsWithStartCodon})
var a=n(531041),i=n(955836),s=n(45717),r=n(48047)
function sequenceSearch(e,t,n){let a,i
const{regex:s,onStartCodon:r,onStopCodon:o,transform:l}=n
for(;null!=(a=s.exec(e));){const e=s.lastIndex-3
s.lastIndex=e+1
i=l(e)
null!=a[1]?r(i):o(i)}t&&e.length>=3&&[[e.length-2,e.slice(-2)+e.slice(0,1)],[e.length-1,e.slice(-1)+e.slice(0,2)]].forEach(((...e)=>{const[t,n]=Array.from(e[0])
if(null!=(a=s.exec(n))){i=l(t)
null!=a[1]?r(i):o(i)}}))}function forwardStrandOrfsWithStartCodon(e,t,n){let i
const r=[],o=[[],[],[]],l=[null,null,null],c={}
sequenceSearch(e,t,{regex:new RegExp(`(${n})|(${s.DNA_STOP_CODONS.join("|")})`,"gi"),transform:e=>e,onStartCodon(e){o[e%3].push(e)},onStopCodon(e){const t=e%3
null==l[t]&&(l[t]=e)
if(o[t].length){c[e]={strand:1,startCodon:n,endPosition:e,startPositions:o[t]}
o[t]=[]
r.push(c[e])}}})
if(t){i=e.length%3
l.forEach(((e,t)=>{let s=o[(t+i)%3]
if(null==e)return
const l=a.default.sortedIndex(s,e+3)
s=s.slice(l)
if(s.length){if(null==c[e]){c[e]={strand:1,startCodon:n,endPosition:e,startPositions:[]}
r.push(c[e])}c[e].startPositions.splice(0,0,...Array.from(s))}}))}else o.forEach(((e,t)=>{e.length&&r.push({strand:1,startCodon:n,endPosition:null,startPositions:e})}))
return r}function reverseStrandOrfsWithStartCodon(e,t,n){let o
const l=[],c=[[],[],[]],d=[null,null,null],u={}
sequenceSearch(e,t,{regex:new RegExp(`(${r.revcomp(n,i.jb)})|(${s.DNA_STOP_CODONS.map((e=>r.revcomp(e,i.jb))).join("|")})`,"gi"),transform:t=>(t+2)%e.length,onStopCodon(e){d[e%3]=e},onStartCodon(e){const t=e%3,a=d[t]
if(null!=a){if(null==u[a]){u[a]={strand:-1,startCodon:n,endPosition:a,startPositions:[]}
l.push(u[a])}u[a].startPositions.push(e)}else c[t].push(e)}})
if(t){o=e.length%3
c.forEach(((e,t)=>{const i=d[(t+o)%3]
if(null==i)return
const s=a.default.sortedIndex(e,i-2)
if((e=e.slice(0,s)).length){if(null==u[i]){u[i]={strand:-1,startCodon:n,endPosition:i,startPositions:[]}
l.push(u[i])}u[i].startPositions.push(...Array.from(e||[]))}}))}else c.forEach(((e,t)=>{e.length&&l.push({strand:-1,startCodon:n,endPosition:null,startPositions:e})}))
return l}},125585:(e,t,n)=>{n.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})
var a=n(989526),i=n(661978),s=n(256605),r=n(336489),o=n(378045),l=n(113505),c=n(372721),d=n(749278)
const __WEBPACK_DEFAULT_EXPORT__=e=>{var t,n,u,p,m,E,h,g,S,_
return a.createElement(d.Z,{importItemWord:"table row",importType:c.pt.STRUCTURED_TABLE,initialSettings:{initialContainerSchemaId:null!==(t=e.containerSchemaId)&&void 0!==t?t:null,initialTagSchemaId:null!==(n=e.tagSchemaId)&&void 0!==n?n:null,initialResultSchemaId:null!==(u=e.resultSchemaId)&&void 0!==u?u:null,initialProcessTaskSchemaId:null!==(p=e.processTaskSchemaId)&&void 0!==p?p:null,initialProcessOutputSchemaId:null!==(m=e.processOutputSchemaId)&&void 0!==m?m:null,initialPlateSchemaId:null!==(E=e.plateSchemaId)&&void 0!==E?E:null,initialBoxSchemaId:null!==(h=e.boxSchemaId)&&void 0!==h?h:null},onImportFromSpreadsheet:()=>{i.Bg((t=>{e.onRequestSubmit(t)}))},onRequestClose:i.Mr,panes:(g=e.spreadsheetColumnTypes,S=e.writableSchemaFieldIds,_=e.resultSchemaId,[{paneKey:c.y$.UPLOAD_SPREADSHEET,configuration:l.Z.configure({})},{paneKey:c.y$.MAP_COLUMN_NAMES,configuration:r.Z.configure({shouldResolveLinkColumns:!1,getValidColumnTypes:()=>g,getRequiredColumnsError:()=>null,getValidSchemaFieldIds:()=>S,onValidateSpreadsheet:()=>{i.Bt()},..._?{savedMappingsConfig:{enableSavedMappings:!0,uploadFlow:s.A$.ADD_ROWS_TO_RESULTS_TABLE}}:{}})},{paneKey:c.y$.SHOW_ERRORS,configuration:o.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!1})}]),title:"Import into table"})}},880759:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(989526),i=n(57665),s=n(629656),r=n(336489),o=n(378045),l=n(934109),c=n(113505),d=n(661978),u=n(372721),p=n(749278),m=n(74161)
class BulkCreateBoxesFlow extends a.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:u.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:l.Z.configure({schemaSelectorClass:i.Z,schemaIdAccessorKey:"boxSchemaId",showProjectSelector:!0})},{paneKey:u.y$.UPLOAD_SPREADSHEET,configuration:c.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-boxes.png"})},{paneKey:u.y$.MAP_COLUMN_NAMES,configuration:r.Z.configure({getValidColumnTypes:()=>[...u.f4,u.BA.BOX_SCHEMA_FIELD,u.BA.IGNORE],getRequiredColumnsError(e){const t=(0,m.FX)(e)
return t||(e.some((({type:e})=>e!==u.BA.IGNORE))?null:"At least one column must be specified.")},onValidateSpreadsheet:d.uE})},{paneKey:u.y$.SHOW_ERRORS,configuration:o.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){s.bA(u.qF,a.createElement(BulkCreateBoxesFlow,{...e,onRequestClose:d.Mr}))}render(){return a.createElement(p.Z,{importItemWord:"box",importType:u.pt.BOXES,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:d.R_,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import boxes"})}}const E=BulkCreateBoxesFlow},42305:(e,t,n)=>{n.d(t,{Z:()=>BulkCreateContainersFlow})
var a=n(989526),i=n(404565),s=n(487761),r=n(629656),o=n(336489),l=n(378045),c=n(934109),d=n(113505),u=n(661978),p=n(372721),m=n(749278),E=n(74161),h=n(344991)
class BulkCreateContainersFlow extends a.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:p.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:c.Z.configure({schemaSelectorClass:i.ZP,schemaIdAccessorKey:"containerSchemaId",showProjectSelector:!0})},{paneKey:p.y$.UPLOAD_SPREADSHEET,configuration:d.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-containers.png"})},{paneKey:p.y$.MAP_COLUMN_NAMES,configuration:o.Z.configure({getValidColumnTypes:()=>[...p.V9,p.BA.NUMBER_OF_CONTAINERS,p.BA.CONTAINER_SCHEMA_FIELD,...p.lj,...p.At,...E.PZ(),p.BA.IGNORE],getRequiredColumnsError(e){const t=h.s(e,!1)
if(t)return t
const n=h.Js(e,!0)
if(n)return n
const a=e.some((({type:e})=>p.Mk.includes(e))),i=e.some((({type:e})=>p.lj.includes(e)))
if(a&&!i)return`Source must be specified with ${(0,s.Z)(!1)}.`
const r=E.FX(e)
return r||(e.some((({type:e})=>e!==p.BA.IGNORE))?null:"At least one column must be specified.")},onValidateSpreadsheet:u.oR})},{paneKey:p.y$.SHOW_ERRORS,configuration:l.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){r.bA(p.qF,a.createElement(BulkCreateContainersFlow,{...e,onRequestClose:u.Mr}))}render(){return a.createElement(m.Z,{importItemWord:"container",importType:p.pt.CONTAINERS,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:u.E_,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import containers"})}}},189143:(e,t,n)=>{n.d(t,{Z:()=>O})
var a=n(989526),i=n(531041),s=n(915241),r=n(348920),o=n(171457),l=n(459830),c=n(252394),d=n(5245),u=n(132814),p=n(776105),m=n(276281),E=n(629656),h=n(556543),g=n(539317),S=n(778877),_=n(336489),T=n(378045),I=n(113505),A=n(661978),f=n(372721),y=n(749278),C=n(939092),R=n(74161),b=n(344991)
const N=[f.BA.FILENAME]
function entityTypeIsNucleotideSequence(e){return Object.values(l.SequenceSubtype).includes(e)}class BulkCreateInventoryFilesFlow extends a.Component{constructor(){super(...arguments)
this._shouldShowSchemaSelector=()=>!this.props.schemalessCreationEntityType||!this.props.isSchemaRequired
this._shouldHaveResidues=e=>null!=e.tagSchemaId&&C.A(e)||h.E1(this.props.schemalessCreationEntityType)
this._canHaveMods=(e,t)=>{if(null!=e.tagSchemaId){const t=C.My(e)
if(t)return(0,c.ij)(t)}return r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&null!=t&&u.subtypeSupportsChemicalMods(t)}
this._getPanes=()=>i.default.compact([{paneKey:f.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION,configuration:o.Z.configure({showRegistries:!1,showInventory:!0,shouldShowSchemaSelector:this._shouldShowSchemaSelector(),getEnabledOptions:S.d,onDestinationFolderChange:this.props.onFolderChange,folderSelectorLabel:"Import location"})},{paneKey:f.y$.UPLOAD_SPREADSHEET,configuration:I.Z.configure({getExampleImageURL:({selectedSchemaIds:e})=>{if(!this._shouldShowSchemaSelector())return""
const t=C.My(e)
return C.oW(t)},onUploadSuccessAnalyticsCallback:(e,t)=>{entityTypeIsNucleotideSequence(e)&&(0,d.Fp)(e,t,s.j.SUCCESS)},onUploadFailAnalyticsCallback:(e,t,n)=>{entityTypeIsNucleotideSequence(e)&&(0,d.Fp)(e,t,s.j.FAILURE,n)}})},{paneKey:f.y$.MAP_COLUMN_NAMES,configuration:_.Z.configure({getValidColumnTypes:({selectedSchemaIds:e,options:t,schemalessCreationEntityType:n})=>{if(!this._shouldShowSchemaSelector())return i.default.compact([...N,...C.Oo(this._shouldHaveResidues(e),this._canHaveMods(e,n)),...this._chemicalStructureColumns(e,n),f.BA.DESCRIPTION,f.BA.IGNORE])
const a=t[f.JY.IMPORT_CONTAINERS]?[...f.V9,f.BA.NUMBER_OF_CONTAINERS,f.BA.CONTAINER_SCHEMA_FIELD,...f.At,...R.PZ()]:[]
return i.default.compact([...N,...C.Oo(this._shouldHaveResidues(e),this._canHaveMods(e,n)),...this._chemicalStructureColumns(e,n),...f.p5,t[f.JY.IMPORT_BATCHES]&&f.BA.BATCH_SCHEMA_FIELD,...a])},getRequiredColumnsError:(e,{selectedSchemaIds:t,schemalessCreationEntityType:n})=>{const a=b.Js(e,!1)
if(a)return a
const i=C.xR(e,this._shouldHaveResidues(t),this._canHaveMods(t,n))
if(i)return i
const s=C.Vp(e,this._shouldHaveChemicalStructure(t,n),!0)
return s||C.lx(N,e,t,!0,n)},onValidateSpreadsheet:A.yh,customHandleGoToNextPaneFn:e=>{if(C.IN(e.fileData.columns)){A.jB()
A.mX()}else{e.onValidateSpreadsheet()
A.bm(f.y$.SHOW_ERRORS)}}})},{paneKey:f.y$.MAP_DERIVED_COLUMNS,configuration:{columnTransformConfigs:f.MW,derivedColumnsKey:f.ju.BULK_CREATE,onUpdateDerivedColumns:A.Xx,onValidateSpreadsheet:A.yh}},{paneKey:f.y$.SHOW_ERRORS,configuration:T.Z.configure({customHandleGoToPrevPaneFn:e=>{e.derivedColumnsData.state===f.PX.COMPLETED&&e.derivedColumnsData.derivedColumns&&e.derivedColumnsData.derivedColumns.length>0?A.$s():A.bm(f.y$.MAP_COLUMN_NAMES)},enableReplaceLinkWithText:!0,enableSkipErrors:!0})}])}static open(e){E.bA(f.qF,a.createElement(BulkCreateInventoryFilesFlow,{...e}))}componentDidMount(){(0,p.Z)()&&m.$r()}_shouldHaveChemicalStructure(e,t){return r.ZP.CHEMISTRY_ENABLE_MOLECULE&&(null!=e.tagSchemaId&&C.Ek(e)||t===l.MOLECULE)}_chemicalStructureColumns(e,t){return this._shouldHaveChemicalStructure(e,t)?f.AQ:[]}render(){const e=null!=this.props.schemalessCreationEntityType&&[l.SequenceSubtype.DNA_OLIGO,l.SequenceSubtype.RNA_OLIGO].includes(this.props.schemalessCreationEntityType)
return a.createElement(y.Z,{footer:this._shouldShowSchemaSelector()&&a.createElement(g.Z,null),importType:f.pt.INVENTORY_FILES,initialSettings:{initialFolder:this.props.initialFolder,initialSchemalessCreationEntityType:this.props.schemalessCreationEntityType,initialRawText:e?"Name\tBases\n":""},onImportFromSpreadsheet:()=>{A.P9({onSubmitSpreadsheetCallback:d.Ow})},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:this.props.title,isSchemaRequired:this.props.isSchemaRequired})}}BulkCreateInventoryFilesFlow.defaultProps={onRequestClose:A.Mr,title:"Import entities from spreadsheet",isSchemaRequired:!0}
const O=BulkCreateInventoryFilesFlow},765549:(e,t,n)=>{n.d(t,{Z:()=>S})
var a=n(602652),i=n.n(a),s=n(989526),r=n(74161),o=n(537076),l=n(848300),c=n(629656),d=n(336489),u=n(378045),p=n(934109),m=n(113505),E=n(661978),h=n(372721),g=n(749278)
class BulkCreateLocationsFlow extends s.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:h.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:p.Z.configure({schemaSelectorClass:l.Z,schemaIdAccessorKey:"locationSchemaId",showProjectSelector:!1})},{paneKey:h.y$.UPLOAD_SPREADSHEET,configuration:m.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-locations-v2.png"})},{paneKey:h.y$.MAP_COLUMN_NAMES,configuration:d.Z.configure({getValidColumnTypes:()=>[...h.f4,h.BA.LOCATION_SCHEMA_FIELD,...(0,r.U6)(),h.BA.IGNORE],getRequiredColumnsError:e=>e.some((({type:e})=>e!==h.BA.IGNORE))?null:"At least one column must be specified.",onValidateSpreadsheet:E._6})},{paneKey:h.y$.SHOW_ERRORS,configuration:u.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){c.bA(h.qF,s.createElement(BulkCreateLocationsFlow,{...e,onRequestClose:E.Mr}))}render(){return s.createElement(g.Z,{importItemWord:"location",importType:h.pt.LOCATIONS,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:E.pf,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import locations"})}}BulkCreateLocationsFlow.propTypes={initialRegistry:o.REGISTRY_SHAPE,onRequestClose:i().func.isRequired}
const S=BulkCreateLocationsFlow},177157:(e,t,n)=>{n.d(t,{Z:()=>BulkCreatePlatesFlow})
var a=n(989526),i=n(23553),s=n(629656),r=n(336489),o=n(378045),l=n(934109),c=n(113505),d=n(661978),u=n(372721),p=n(749278),m=n(74161)
class BulkCreatePlatesFlow extends a.Component{static open(e){s.bA(u.qF,a.createElement(BulkCreatePlatesFlow,{...e,onRequestClose:d.Mr}))}_getPanes(){return[{paneKey:u.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:l.Z.configure({schemaSelectorClass:i.Z,schemaIdAccessorKey:"plateSchemaId",showProjectSelector:!0})},{paneKey:u.y$.UPLOAD_SPREADSHEET,configuration:c.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-plates.png"})},{paneKey:u.y$.MAP_COLUMN_NAMES,configuration:r.Z.configure({getValidColumnTypes:()=>[...u.f4,u.BA.PLATE_SCHEMA_FIELD,u.BA.IGNORE],getRequiredColumnsError(e){const t=m.FX(e)
return t||(e.some((({type:e})=>e!==u.BA.IGNORE))?null:"At least one column must be specified.")},onValidateSpreadsheet:d.Y$})},{paneKey:u.y$.SHOW_ERRORS,configuration:o.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}render(){return a.createElement(p.Z,{importItemWord:"plate",importType:u.pt.PLATES,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:d.Qz,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Import plates"})}}},639292:(e,t,n)=>{n.d(t,{Z:()=>_})
var a=n(602652),i=n.n(a),s=n(989526),r=n(74161),o=n(537076),l=n(57665),c=n(629656),d=n(336489),u=n(378045),p=n(934109),m=n(113505),E=n(661978),h=n(372721),g=n(749278),S=n(939092)
class BulkUpdateBoxesFlow extends s.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:h.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:p.Z.configure({schemaSelectorClass:l.Z,schemaIdAccessorKey:"boxSchemaId",showProjectSelector:!1})},{paneKey:h.y$.UPLOAD_SPREADSHEET,configuration:m.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-boxes.png"})},{paneKey:h.y$.MAP_COLUMN_NAMES,configuration:d.Z.configure({getValidColumnTypes:()=>[...h.f4,h.BA.BOX_SCHEMA_FIELD,...(0,r.Vh)(),h.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){const n=[h.BA.BARCODE],a=S.lx(n,e,t,!1)
return a||(e.some((({type:e})=>e!==h.BA.BARCODE))?null:"At least one other field is required.")},onValidateSpreadsheet:E.yq})},{paneKey:h.y$.SHOW_ERRORS,configuration:u.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){c.bA(h.qF,s.createElement(BulkUpdateBoxesFlow,{...e,onRequestClose:E.Mr}))}render(){return s.createElement(g.Z,{importItemWord:"box",importType:h.pt.UPDATE_BOXES,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:E.cn,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Bulk update boxes"})}}BulkUpdateBoxesFlow.propTypes={initialRegistry:o.REGISTRY_SHAPE,onRequestClose:i().func.isRequired}
const _=BulkUpdateBoxesFlow},111489:(e,t,n)=>{n.d(t,{Z:()=>BulkUpdateContainersFlow})
var a=n(989526),i=n(336489),s=n(378045),r=n(934109),o=n(113505),l=n(661978),c=n(372721),d=n(749278),u=n(939092),p=n(74161),m=n(404565),E=n(629656)
class BulkUpdateContainersFlow extends a.Component{static open(e){E.bA(c.qF,a.createElement(BulkUpdateContainersFlow,{...e,onRequestClose:l.Mr}))}_getPanes(){return[{paneKey:c.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:r.Z.configure({schemaSelectorClass:m.ZP,schemaIdAccessorKey:"containerSchemaId",showProjectSelector:!1})},{paneKey:c.y$.UPLOAD_SPREADSHEET,configuration:o.Z.configure()},{paneKey:c.y$.MAP_COLUMN_NAMES,configuration:i.Z.configure({getValidColumnTypes:()=>[...c.V9,c.BA.CONTAINER_SCHEMA_FIELD,c.BA.FINAL_QUANTITY_VALUE,c.BA.QUANTITY_UNITS,...(0,p.PZ)(),...(0,p.Vh)(),c.BA.IGNORE],getRequiredColumnsError(e,t){const n=e.some((({type:e})=>e===c.BA.BARCODE)),a=e.some((({type:e})=>e===c.BA.PARENT_STORABLE_BARCODE)),i=u.lx([c.BA.BARCODE],e,t.selectedSchemaIds,!1),s=u.lx([c.BA.PARENT_STORABLE_BARCODE],e,t.selectedSchemaIds,!1)
if(!n&&!a)return i
if(n&&i)return i
if(a&&s)return s
const r=(0,u.r6)(e,[[c.BA.PARENT_STORABLE_BARCODE,c.BA.PARENT_STORABLE_GRID_COORDINATES]])
if(!a&&r)return r
return!(n&&a)&&e.every((({type:e})=>[c.BA.IGNORE,c.BA.BARCODE,c.BA.PARENT_STORABLE_BARCODE,c.BA.PARENT_STORABLE_GRID_COORDINATES].includes(e)))?"At least one column to update must be specified.":null},onValidateSpreadsheet:l.hb})},{paneKey:c.y$.SHOW_ERRORS,configuration:s.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}render(){return a.createElement(d.Z,{importItemWord:"container",importType:c.pt.UPDATE_CONTAINERS,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:l.q2,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Update containers"})}}},319168:(e,t,n)=>{n.d(t,{_:()=>openBulkUpdateLocationsFlow})
var a=n(989526),i=n(336489),s=n(378045),r=n(934109),o=n(113505),l=n(661978),c=n(372721),d=n(749278),u=n(939092),p=n(74161),m=n(848300),E=n(502633)
function openBulkUpdateLocationsFlow(e){(0,E.Z)(BulkUpdateLocationsFlow,{...e,onRequestClose:l.Mr,modalKey:c.qF})}function BulkUpdateLocationsFlow(e){return a.createElement(d.Z,{importItemWord:"location",importType:c.pt.UPDATE_LOCATIONS,initialSettings:{initialRegistry:e.initialRegistry},onImportFromSpreadsheet:l.pO,analyticsMetadata:{actionOrigin:e.actionOrigin},onRequestClose:e.onRequestClose,panes:[{paneKey:c.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:r.Z.configure({schemaSelectorClass:m.Z,schemaIdAccessorKey:"locationSchemaId",showProjectSelector:!1})},{paneKey:c.y$.UPLOAD_SPREADSHEET,configuration:o.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-update-locations.png"})},{paneKey:c.y$.MAP_COLUMN_NAMES,configuration:i.Z.configure({getValidColumnTypes:()=>[...c.f4,c.BA.LOCATION_SCHEMA_FIELD,...(0,p.U6)(),...(0,p.Vh)(),c.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){const n=[c.BA.BARCODE],a=u.lx(n,e,t,!1)
return a||(e.some((({type:e})=>e!==c.BA.BARCODE&&e!==c.BA.IGNORE))?null:"At least one other field is required.")},onValidateSpreadsheet:l.FI})},{paneKey:c.y$.SHOW_ERRORS,configuration:s.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}],title:"Bulk update locations"})}},54491:(e,t,n)=>{n.d(t,{Z:()=>_})
var a=n(602652),i=n.n(a),s=n(989526),r=n(74161),o=n(537076),l=n(23553),c=n(629656),d=n(336489),u=n(378045),p=n(934109),m=n(113505),E=n(661978),h=n(372721),g=n(749278),S=n(939092)
class BulkUpdatePlatesFlow extends s.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:h.y$.SET_STORABLE_IMPORT_SETTINGS,configuration:p.Z.configure({schemaSelectorClass:l.Z,schemaIdAccessorKey:"plateSchemaId",showProjectSelector:!1})},{paneKey:h.y$.UPLOAD_SPREADSHEET,configuration:m.Z.configure({getExampleImageURL:()=>"/static/img/spreadsheet-import-example-create-plates.png"})},{paneKey:h.y$.MAP_COLUMN_NAMES,configuration:d.Z.configure({getValidColumnTypes:()=>[...h.f4,h.BA.PLATE_SCHEMA_FIELD,...(0,r.Vh)(),h.BA.IGNORE],getRequiredColumnsError(e,{selectedSchemaIds:t}){const n=[h.BA.BARCODE],a=S.lx(n,e,t,!1)
return a||(e.some((({type:e})=>e!==h.BA.BARCODE))?null:"At least one other field is required.")},onValidateSpreadsheet:E.DK})},{paneKey:h.y$.SHOW_ERRORS,configuration:u.Z.configure({enableReplaceLinkWithText:!0,enableSkipErrors:!0})}]}static open(e){c.bA(h.qF,s.createElement(BulkUpdatePlatesFlow,{...e,onRequestClose:E.Mr}))}render(){return s.createElement(g.Z,{importItemWord:"plate",importType:h.pt.UPDATE_PLATES,initialSettings:{initialRegistry:this.props.initialRegistry},onImportFromSpreadsheet:E.jd,analyticsMetadata:{actionOrigin:this.props.actionOrigin},onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:"Bulk update plates"})}}BulkUpdatePlatesFlow.propTypes={initialRegistry:o.REGISTRY_SHAPE,onRequestClose:i().func.isRequired}
const _=BulkUpdatePlatesFlow},119059:(e,t,n)=>{n.d(t,{Z:()=>ColumnTypeDropdown})
var a=n(764403),i=n.n(a),s=n(989526),r=n(531041),o=n(232606),l=n(348920),c=n(861825),d=n(487761),u=n(197229),p=n(497790),m=n(866219),E=n(556543),h=n(372721),g=n(939092)
class ColumnTypeDropdown extends s.Component{constructor(){super(...arguments)
this.FIELD_TYPE_NAMES=r.default.object(r.default.values(p.FIELD_TYPES).map((e=>[e.type,e.label])))}_getDefaultColumnTypeDisplayName(e){if(e.type===h.BA.SAMPLE_GROUP_SCHEMA_FIELD){const t=c.jh[e.sampleType]
return`Set ${e.schemaField.name} ${t}`}if(this._isSchemaField(e.type))return e.schemaField.displayName
if(e.type===h.BA.DATA_TABLE_MATCHER){return`Match ${e.tableColumnName in h.zw?h.zw[e.tableColumnName]:e.tableColumnName}`}if(e.type===h.BA.DATA_TABLE_VALUE)return`Set ${e.tableColumnName}`
if(e.type===h.BA.CUSTOM_MOD_SYNTAX){(0,o.hu)(void 0!==e.customSyntaxName,"Expected customSyntaxName to be set")
return e.customSyntaxName}return this.getMenuItemName(e.type)}_getUnitSymbolTextIfEnabled(e){const t=null==e?void 0:e.unitSymbol
return l.ZP.UNITS_ENABLE_UNIT_DICTIONARY&&null!=t?` (${t})`:null}_getColumnTypeDisplayName(e){const t=this._getDefaultColumnTypeDisplayName(this.props.column),n=this._getUnitSymbolTextIfEnabled(this.props.column.schemaField)
return null!=n?`${t}${n}`:t}_sampleLinkSubmenuOption(e,t,n,a){return{key:`${n.name}-${a}`,name:`Set ${n.name} ${c.jh[a]}`,handleOnClick:()=>{this.props.onChangeColumn(e,t,{newSchemaField:n,newSampleType:a})}}}_getSampleGroupSchemaFieldSubmenuOptions(e,t,n){return(0,o.Gp)(null!=n,"No schema found for SAMPLE_GROUP_SCHEMA_FIELD columnType")?r.default.flatten(n.fields.map((n=>{if(!(0,o.Gp)(null!=n.requiredLink,`Field with id=${n.id} has no requiredLink`))return[]
const a=n.requiredLink.sampleType
return[this._sampleLinkSubmenuOption(e,t,n,a),this._sampleLinkSubmenuOption(e,t,n,c.mh)]}))):[]}_getEditableFields(e,t){const n=u.a(e),a=new Set([p.FIELD_TYPES.ASSAY_RUN_LINK.type,p.FIELD_TYPES.ASSAY_REQUEST_LINK.type,p.FIELD_TYPES.ASSAY_RESULT_LINK.type,p.FIELD_TYPES.BLOB_LINK.type])
return n.filter((e=>!a.has(e.fieldType)&&h.rV.includes(e.fieldType)&&(!this.props.getValidSchemaFieldIds||this.props.getValidSchemaFieldIds(t).includes(e.apiId))))}_getDataTableMatcherSubmenuOptions(e,t){if(!(0,o.Gp)(null!=this.props.tableColumnNames,"Expected a non-null tableColumnNames if DATA_TABLE_MATCHER is available.")||!(0,o.Gp)(null!=this.props.dataTableKeyFields,"Expected a non-null dataTableKeyFields if DATA_TABLE_MATCHER is available."))return null
return[...this.props.dataTableKeyFields.map((n=>({name:`Match ${h.zw[n]}`,key:n,handleOnClick:()=>{this.props.onChangeColumn(e,t,{newTableColumnName:n})}}))),...this.props.tableColumnNames.map((n=>({name:`Match ${n}`,key:n,handleOnClick:()=>{this.props.onChangeColumn(e,t,{newTableColumnName:n})}})))]}_getDataTableValueSubmenuOptions(e,t){return(0,o.Gp)(null!=this.props.tableColumnNames,"Expected a non-null tableColumnNames if DATA_TABLE_VALUE is available.")?this.props.tableColumnNames.map((n=>({name:`Set ${n}`,key:n,handleOnClick:()=>{this.props.onChangeColumn(e,t,{newTableColumnName:n})}}))):null}_getSchema(e){return h.ix.includes(e)?g.m9(e,this.props.selectedSchemaIds):null}_getSubmenuOptions(e,t){if(t===h.BA.CUSTOM_MOD_SYNTAX)return[l.ZP.MODBIO_CUSTOM_SYNTAX_NAMES.map((n=>({name:n,handleOnClick:()=>{this.props.onChangeColumn(e,t,{newCustomSyntaxName:n})}})))]
const n=this._getSchema(t)
if(t===h.BA.SAMPLE_GROUP_SCHEMA_FIELD)return[this._getSampleGroupSchemaFieldSubmenuOptions(e,t,n)]
if(n){const a=this._getEditableFields(n,e)
if(0===a.length)return[[{disabled:!0,name:"No editable fields defined for schema"}]]
return[a.map((n=>{const a=E.Iv(n.fieldType),r=this._getUnitSymbolTextIfEnabled(n)
return{name:s.createElement("span",null,n.displayName,s.createElement("span",{className:i()("spreadsheetColumnsTable-field-type",{"spreadsheetColumnsTable-bioentity-link-field":a})},a&&"* ",this.FIELD_TYPE_NAMES[n.fieldType],r)),handleOnClick:()=>{this.props.onChangeColumn(e,t,{newSchemaField:n})}}}))]}return t===h.BA.DATA_TABLE_MATCHER?[this._getDataTableMatcherSubmenuOptions(e,t)]:t===h.BA.DATA_TABLE_VALUE?[this._getDataTableValueSubmenuOptions(e,t)]:null}_isSchemaField(e){return g.RJ(e)===h.BA.SCHEMA_FIELD}_isDataTableField(e){return[h.BA.DATA_TABLE_VALUE,h.BA.DATA_TABLE_MATCHER].includes(e)}_isNonClickableColumnType(e){return this._isSchemaField(e)||this._isDataTableField(e)||e===h.BA.CUSTOM_MOD_SYNTAX}_getHandleOnClick(e,t){return this._isNonClickableColumnType(t)?null:()=>{this.props.onChangeColumn(e,t,{})}}_getMenuItemsForColumnTypes(e,t){return e.map((e=>({name:this.getMenuItemName(e),sortOrder:h.Ef[e],submenu:this._getSubmenuOptions(t,e),handleOnClick:this._getHandleOnClick(t,e)})))}_hasNewBarcodeColumn(){const e=r.default.intersection(this.props.columnTypes,h.Kh)
return l.ZP.INVENTORY_ENABLE_EDIT_BARCODES&&e.length>1}getMenuItemName(e){return this._hasNewBarcodeColumn()&&e===h.BA.BARCODE?"Current barcode":this.props.getMenuItemName(e)}_getMenuItemsForColumn(e){const t=r.default.intersection(this.props.columnTypes,h.Kh),n=this._hasNewBarcodeColumn()?t:[],a=r.default.intersection(this.props.columnTypes,h.lj),i=r.default.intersection(this.props.columnTypes,h.Qi),s=r.default.intersection(this.props.columnTypes,h.YG),o=r.default.intersection(this.props.columnTypes,h.At),l=r.default.intersection(this.props.columnTypes,h.Ci),c=r.default.intersection(this.props.columnTypes,h.vz),u=r.default.intersection(this.props.columnTypes,h.J$),p=r.default.without(this.props.columnTypes,...n,...a,...i,...s,...o,...l,...c,...u),m=this._getMenuItemsForColumnTypes(p,e)
n.length&&m.push({name:"Barcode",sortOrder:h.Ef[n[0]],submenu:[this._getMenuItemsForColumnTypes(n,e)],handleOnClick:null})
a.length&&m.push({name:"Source",sortOrder:h.Ef[a[0]],submenu:[this._getMenuItemsForColumnTypes(a,e)],handleOnClick:null})
i.length&&m.push({name:"Destination",sortOrder:h.Ef[i[0]],submenu:[this._getMenuItemsForColumnTypes(i,e)],handleOnClick:null})
u.length&&m.push({name:"Optional entity types",sortOrder:h.Ef[u[0]],submenu:[this._getMenuItemsForColumnTypes(u,e)],handleOnClick:null})
s.length&&m.push({name:"Stored in",key:"storage",sortOrder:h.Ef[s[0]],submenu:[this._getMenuItemsForColumnTypes(s,e)],handleOnClick:null})
o.length&&m.push({name:r.default.intersection(o,h.HJ).length?`${(0,d.Z)()}/Concentration`:(0,d.Z)(),sortOrder:h.Ef[o[0]],submenu:[this._getMenuItemsForColumnTypes(o,e)],handleOnClick:null})
l.length&&m.push({name:"Ingredient component entity",sortOrder:h.Ef[l[0]],submenu:[this._getMenuItemsForColumnTypes(l,e)],handleOnClick:null})
c.length&&m.push({name:"Ingredient component lot",sortOrder:h.Ef[c[0]],submenu:[this._getMenuItemsForColumnTypes(c,e)],handleOnClick:null})
return[m.sort(((e,t)=>e.sortOrder-t.sortOrder)).map((e=>{const{sortOrder:t,...n}=e
return n}))]}render(){return s.createElement(m.Z,{displayName:this._getColumnTypeDisplayName(this.props.column),items:this._getMenuItemsForColumn(this.props.columnIdx),menuClassName:"bulk-import--column-type-dropdown",className:this.props.className,dataTestAttrs:{component:"SpreadsheetColumnsTable",element:"columnTypeDropdown"}})}}},749278:(e,t,n)=>{n.d(t,{Z:()=>ae})
var a=n(602652),i=n.n(a),s=n(989526),r=n(468943),o=n(634489),l=n(171471),c=n(537076),d=n(133832),u=n(17086),p=n(676159),m=n(661978),E=n(372721),h=n(232606),g=n(468991),S=n(467177),_=n(432128),T=n(56063),I=n(675649),A=n(125440),f=n(103593),y=n(102176),C=n(205986),R=n(59860),b=n(334148),N=n(514674),O=n(728282),L=n(531346),P=n(889234),D=n(216101),v=n(368734),M=n(778877)
function ownKeys(e,t){var n=Object.keys(e)
if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e)
t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}
return _extends.apply(this,arguments)}function _defineProperty(e,t,n){(t=function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e
var n=e[Symbol.toPrimitive]
if(void 0!==n){var a=n.call(e,t||"default")
if("object"!=typeof a)return a
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n
return e}class ChooseImportIntoRegistryModalPane extends s.Component{constructor(...e){super(...e)
_defineProperty(this,"_handleRegistryChange",(e=>{const t=e.target.value
m.y$({registryImportSettings:{registry:t}})}))
_defineProperty(this,"_handleTagSchemaChange",(e=>{(0,h.hu)(null!=e,"TagSchemaSelector returned null for the tagSchema")
m.y$({selectedTagSchemaId:e.id})}))
_defineProperty(this,"_handleInOrgCollectionChange",(()=>{m.y$({registryImportSettings:{inOrgCollection:!this.props.inOrgCollection}})}))
_defineProperty(this,"_handleInUserCollectionChange",(()=>{m.y$({registryImportSettings:{inUserCollection:!this.props.inUserCollection}})}))
_defineProperty(this,"_handleDestinationFolderChange",(e=>{m.y$({selectedDestination:{folderId:e.target.value,registryId:null}})}))
_defineProperty(this,"_handleLabelingStrategyChange",(e=>{m.y$({registryImportSettings:{labelingStrategy:e}})}))
_defineProperty(this,"_openNewSchemaPage",(()=>{this.props.modalProps.onRequestClose()
I.c4(null,D.getCreateTagSchemaUrl(this.props.registry.s_owner.url_identifier,this.props.registry.id))}))
_defineProperty(this,"schemaPopoverContent",(()=>s.createElement("div",null,s.createElement("p",null,"Schemas let you define new entity types. You can edit existing schemas and add new ones in your registry settings."))))
_defineProperty(this,"_isAtleastOneCollectionSelected",(()=>this.props.inOrgCollection||this.props.inUserCollection))}render(){const e=this.props.selectedDestination?this.props.selectedDestination.folderId:null
return s.createElement(C.ZP,_extends({enableRedesign:!1,buttons:[{key:"next-from-choose-spreadsheet-btn",text:"Next",style:b.ZJ.SECONDARY,onClick:m.mX,disabled:!(this.props.registry&&this.props.selectedSchemaIds.tagSchemaId&&this._isAtleastOneCollectionSelected()&&this.props.labelingStrategy&&L.Z.isComplete(e)&&(!this.props.options[E.JY.IMPORT_CONTAINERS]||this.props.selectedSchemaIds.containerSchemaId)),dataTestAttrs:{component:"UploadSpreadsheetModal",element:"footerButton",key:v.Z.NEXT}}]},this.props.modalProps),s.createElement(R.Z,null,s.createElement(f.Z,{xs:6},s.createElement("div",{className:"form-group"},s.createElement("label",null,"Registry"),s.createElement(P.Z,{onChange:this._handleRegistryChange,registryId:this.props.registry?this.props.registry.id:null}))),s.createElement(f.Z,{xs:6},s.createElement("div",{className:"form-group"},s.createElement("label",null,"Schema"),s.createElement(A.Z,{renderContent:this.schemaPopoverContent,iconClassName:"bulkImportModal-helpIcon u-tiny-spacing-left"}),s.createElement(N.ZP,{oligoAwareFolderItemTypes:(0,c.getRegistrySupportedOligoAwareTypes)(),requiredPermissions:[T.wj],onChange:this._handleTagSchemaChange,registryId:this.props.registry&&this.props.registry.id,selectedTagSchemaId:this.props.selectedSchemaIds.tagSchemaId}),this.props.registry&&D.hasSettingsAccess(this.props.registry)&&s.createElement("div",{className:"u-tiny-spacing-top"},"Don't see the schema you're looking for?",s.createElement("br",null),s.createElement("a",{onClick:this._openNewSchemaPage},"Create a new one"),".")))),s.createElement("div",null,this.props.registry&&!this.props.registry.disablePersonalCollections&&s.createElement("div",{className:"form-group"},s.createElement("label",null,"Collection"),!this._isAtleastOneCollectionSelected()&&s.createElement("span",{className:"u-danger-color u-tiny-spacing-left"},"Please select at least one"),s.createElement(R.Z,null,s.createElement(f.Z,{sm:6},s.createElement("label",null,s.createElement("input",{type:"checkbox",onChange:this._handleInUserCollectionChange,checked:this.props.inUserCollection}),"My collection")),s.createElement(f.Z,{sm:6},s.createElement("label",null,s.createElement("input",{type:"checkbox",onChange:this._handleInOrgCollectionChange,checked:this.props.inOrgCollection}),"Organization collection")))),s.createElement(R.Z,null,s.createElement(f.Z,{xs:12},s.createElement(y.Z,null,s.createElement(L.Z,{folderId:e,onChange:this._handleDestinationFolderChange}),this.props.selectedSchemaIds.tagSchemaId&&s.createElement("div",{className:"u-small-spacing-top"},s.createElement(O.Z,{labelingStrategy:this.props.labelingStrategy,labelingStrategies:this.props.labelingStrategyOptions,onChange:this._handleLabelingStrategyChange,tagSchemaIds:[this.props.selectedSchemaIds.tagSchemaId]}))))),s.createElement(M.Z,{enabledOptions:(0,M.d)({options:this.props.options,selectedSchemaIds:this.props.selectedSchemaIds}),options:this.props.options,selectedSchemaIds:this.props.selectedSchemaIds})))}}_defineProperty(ChooseImportIntoRegistryModalPane,"propTypes",_objectSpread(_objectSpread({modalProps:E.R9.modalProps},E.Vc),{},{options:i().objectOf(i().bool).isRequired,selectedDestination:E.R9.selectedDestination}))
const B=ChooseImportIntoRegistryModalPane
var U=n(171457),F=n(687919)
function ImportInstrumentDataModalPane(e){return s.createElement(F.ZP,{connectionSchemaId:e.connectionSchemaId,onRequestSubmit:t=>{m.Q0(t[0],e.delimiter)
m.bm(e.nextPaneKey)},allowMultiple:!1,onRequestClose:e.modalProps.onRequestClose,automationOutputFileConfig:e.automationOutputFileConfig})}var w=n(336489),k=n(692013),x=n(144601),Z=n(497790),G=n(129270),H=n(476604),W=n(767807),q=n.n(W),V=n(271359),J=n(119059),K=n(939092)
function DerivedColumnsTable({columnTransformConfigs:e,columns:t,derivedColumns:n,forInventoryFileCreate:a,getValidSchemaFieldIds:i,importType:r,onUpdateDerivedColumns:o,schemalessCreationEntityType:l,selectedSchemaIds:c,tableColumnNames:d}){return s.createElement("table",{className:"table"},s.createElement("thead",null,s.createElement("tr",{className:(0,k.iv)(Y.text)},s.createElement("th",null,"Column Name"),s.createElement("th",null,"Sample Data"),s.createElement("th",null,"Action"))),s.createElement("tbody",null,n.map(((u,p)=>{const m=e.filter((e=>e.columnTransform===u.columnTransform));(0,h.hu)(1===m.length,"Expected to find only one matching column transform config.")
const E=m[0].sampleDataRenderer
return s.createElement("tr",{key:p},s.createElement("td",{className:(0,k.iv)(Y.nameColumn)},s.createElement("span",{className:(0,k.iv)(Y.text)},function findColumnNames(e,t){return e.filter((e=>t.includes(e.type))).map((e=>e.name)).join(",")}(t,Object.keys(u.exampleValues[0].originalValues)))),s.createElement("td",{className:"bulk-import--column-text-column"},s.createElement(E,{derivedValue:u.exampleValues[0].value,originalValues:u.exampleValues[0].originalValues,columnTransform:u.columnTransform}),s.createElement("span",{className:(0,k.iv)(Y.similarRowsText)},`${(u.numRowsWithDerivedValues-1).toString()} of your other rows ${u.numRowsWithDerivedValues-1==1?"has":"have"} similar data.`)),s.createElement("td",{className:"bulk-import--column-type-column"},s.createElement(J.Z,{className:null,column:u,columnIdx:p,columns:n,columnTypes:u.allowedColumnTypes,dataTableKeyFields:[],getMenuItemName:e=>(0,K.Ts)(e,c,a,l),getValidSchemaFieldIds:i,importType:r,onChangeColumn:(e,t,{newSchemaField:a,newTableColumnName:i,newSampleType:s}={})=>{const r=q()(n,{[e]:{type:{$set:t},schemaField:{$set:a},tableColumnName:{$set:i},sampleType:{$set:s}}})
o(r)},selectedSchemaIds:c,tableColumnNames:d})))}))))}const Y=k.mM.create({nameColumn:{width:"100px"},text:{color:V.pp,FONT_PROXIMA_13:G.cf},similarRowsText:{color:V.pp,...G.nS,fontSize:11}})
class MapDerivedColumnsModalPane extends s.Component{static configure({columnTransformConfigs:e,derivedColumnsKey:t,onUpdateDerivedColumns:n,onValidateSpreadsheet:a}){return{columnTransformConfigs:e,derivedColumnsKey:t,onUpdateDerivedColumns:n,onValidateSpreadsheet:a}}_renderModalContents(){switch(this.props.derivedColumnsData.state){case E.PX.STARTED:case E.PX.FAILED:return s.createElement("div",{className:"text-center"},s.createElement("div",{className:"u-small-padding"},s.createElement(H.Z,null),s.createElement("p",{className:"faded u-text-uppercase"},"Checking your spreadsheet for additional mappings...")))
case E.PX.COMPLETED:{const e=this.props.derivedColumnsData[this.props.derivedColumnsKey],t=e.map((e=>{const t=this.props.columnTransformConfigs.filter((t=>t.columnTransform===e.columnTransform));(0,h.hu)(1===t.length,"Expected to find only one matching column transform config.")
return s.createElement("p",{className:(0,k.iv)(X.paragraphText),key:t[0].columnTransform},t[0].helpText)}))
return s.createElement(s.Fragment,null,s.createElement("p",{className:(0,k.iv)(X.headerText)},"Would you like to structure the following data as part of the import?"),s.createElement("p",{className:(0,k.iv)(X.paragraphText)},"This data will be lost if it is not captured in this step of the import."),t,s.createElement(DerivedColumnsTable,{columns:this.props.fileData.columns,columnTransformConfigs:this.props.columnTransformConfigs,derivedColumns:e,forInventoryFileCreate:this.props.forInventoryFileCreate,getValidSchemaFieldIds:t=>e[t].compatibleSchemaFieldIds||[],importType:this.props.importType,onUpdateDerivedColumns:this.props.onUpdateDerivedColumns,selectedSchemaIds:this.props.selectedSchemaIds,schemalessCreationEntityType:this.props.schemalessCreationEntityType,tableColumnNames:this.props.tableColumnNames}),e.some((e=>{var t
return(null===(t=e.schemaField)||void 0===t?void 0:t.fieldType)===Z.FieldType.BIOENTITY_LINK}))&&s.createElement("div",{className:"form-group"},s.createElement("label",null,"Look for linked items in:"),s.createElement(x.Z,{onSelectFolders:e=>{const t=e.map((e=>e.api_identifier))
m.y$({linkFolderIds:t})},selectedFolderIds:this.props.linkFolderIds,showInventory:!0})))}default:(0,h.hu)(!1,"Unexpected TaskState")
return null}}render(){if(this.props.derivedColumnsData.state===E.PX.FAILED||this.props.derivedColumnsData.state===E.PX.COMPLETED&&0===this.props.derivedColumnsData[this.props.derivedColumnsKey].length){this.props.onValidateSpreadsheet()
m.mX()}return s.createElement(C.ZP,{enableRedesign:!1,buttons:[{key:"back",text:"Back",onClick:m.$s},{key:"next",text:"Next",style:b.ZJ.SECONDARY,onClick:()=>{this.props.onValidateSpreadsheet()
m.mX()},disabled:this.props.derivedColumnsData.state!==E.PX.COMPLETED||this.props.derivedColumnsData[this.props.derivedColumnsKey].some((e=>!e.type))}],...this.props.modalProps},this._renderModalContents())}}const X=k.mM.create({headerText:{...G.cf,fontWeight:"bold"},paragraphText:{...G.nS,fontSize:11}})
var $=n(378045),z=n(934109),j=n(113505)
const{LANGUAGE_PREFERENCE_KEY:Q,SPREADSHEET_IMPORT_LANGUAGE_TAG:ee}=g.ZP
class SpreadsheetBulkImportModal extends s.Component{constructor(){super(...arguments)
this._getSharedModalProps=()=>({closeableOnBackgroundClick:!1,closeableOnEscapeKey:!1,enableRedesign:!0,title:this.props.title,footer:this.props.footer,onRequestClose:this.props.onRequestClose})}render(){var e
const t=this.props.panes.findIndex((({paneKey:e})=>e===this.props.paneKey)),n=this.props.panes[t]
switch(n.paneKey){case E.y$.SET_IMPORT_SETTINGS_FOR_DESTINATION:{const e=K.dO(this.props.importType,this.props.options),{getEnabledOptions:t,showRegistries:a,showInventory:i,shouldShowSchemaSelector:r,onDestinationFolderChange:o,folderSelectorLabel:l,folderSelectorPopoverContent:c}=n.configuration
return s.createElement(U.Z,{getEnabledOptions:t,showRegistries:a,showInventory:i,shouldShowSchemaSelector:r,selectedDestination:this.props.selectedDestination,isLoading:e&&this.props.isBatchSchemaLoading,modalProps:this._getSharedModalProps(),options:this.props.options,selectedSchemaIds:this.props.selectedSchemaIds,onDestinationFolderChange:o,schemalessCreationEntityType:this.props.schemalessCreationEntityType,isSchemaRequired:this.props.isSchemaRequired,folderSelectorLabel:l,folderSelectorPopoverContent:c})}case E.y$.SET_IMPORT_SETTINGS_FOR_REGISTRY:return s.createElement(B,{selectedSchemaIds:this.props.selectedSchemaIds,...this.props.registryImportSettings,selectedDestination:this.props.selectedDestination,modalProps:this._getSharedModalProps(),options:this.props.options})
case E.y$.SET_STORABLE_IMPORT_SETTINGS:return s.createElement(z.Z,{...n.configuration,modalProps:this._getSharedModalProps(),...this.props.registryImportSettings,selectedSchemaIds:this.props.selectedSchemaIds})
case E.y$.UPLOAD_SPREADSHEET:return s.createElement(j.Z,{getExampleImageURL:n.configuration.getExampleImageURL,onUploadSuccessAnalyticsCallback:n.configuration.onUploadSuccessAnalyticsCallback,onUploadFailAnalyticsCallback:n.configuration.onUploadFailAnalyticsCallback,errorMessage:this.props.fileData&&this.props.fileData.errorMessage,file:this.props.file,importEntityType:K.nU(this.props.selectedSchemaIds,this.props.schemalessCreationEntityType),importItemWord:this.props.importItemWord,importSourceType:this.props.importSourceType,importType:this.props.importType,isFirstPane:0===t||n.configuration.hideBackButton,languageTag:_.Z.get(ee)||_.Z.get(Q),modalProps:this._getSharedModalProps(),options:this.props.options,rawText:this.props.rawText,selectedBatchSchema:this.props.selectedBatchSchema,selectedSchemaIds:this.props.selectedSchemaIds,uploadState:this.props.fileData&&this.props.fileData.state})
case E.y$.MAP_COLUMN_NAMES:return s.createElement(w.Z,{customHandleGoToNextPaneFn:n.configuration.customHandleGoToNextPaneFn,getValidColumnTypes:n.configuration.getValidColumnTypes,getRequiredColumnsError:n.configuration.getRequiredColumnsError,onValidateSpreadsheet:n.configuration.onValidateSpreadsheet,getValidSchemaFieldIds:n.configuration.getValidSchemaFieldIds,shouldResolveLinkColumns:n.configuration.shouldResolveLinkColumns,linkItemsFolderSelectorLabel:n.configuration.linkItemsFolderSelectorLabel,linkItemsFolderSelectorDescription:n.configuration.linkItemsFolderSelectorDescription,schemalessCreationEntityType:null!==(e=this.props.schemalessCreationEntityType)&&void 0!==e?e:void 0,fileData:this.props.fileData,forInventoryFileCreate:this.props.forInventoryFileCreate,importType:this.props.importType,linkFolderIds:this.props.linkFolderIds,modalProps:this._getSharedModalProps(),options:this.props.options,registryImportSettings:this.props.registryImportSettings,selectedSchemaIds:this.props.selectedSchemaIds,tableColumnNames:this.props.tableColumnNames,dataTableKeyFields:this.props.dataTableKeyFields,_timeLimit:this.props._timeLimit,savedMappingsConfig:n.configuration.savedMappingsConfig})
case E.y$.MAP_DERIVED_COLUMNS:return s.createElement(MapDerivedColumnsModalPane,{columnTransformConfigs:n.configuration.columnTransformConfigs,derivedColumnsData:this.props.derivedColumnsData,derivedColumnsKey:n.configuration.derivedColumnsKey,fileData:this.props.fileData,forInventoryFileCreate:this.props.forInventoryFileCreate,importType:this.props.importType,linkFolderIds:this.props.linkFolderIds,modalProps:this._getSharedModalProps(),onUpdateDerivedColumns:n.configuration.onUpdateDerivedColumns,onValidateSpreadsheet:n.configuration.onValidateSpreadsheet,schemalessCreationEntityType:this.props.schemalessCreationEntityType,selectedSchemaIds:this.props.selectedSchemaIds,tableColumnNames:this.props.tableColumnNames})
case E.y$.MAP_OUTPUT_FILE_COLUMNS:return s.createElement(S.ZP,{...n.configuration,modalProps:this._getSharedModalProps(),uploadedFileData:this.props.fileData})
case E.y$.INSTRUMENT_DATA:return s.createElement(ImportInstrumentDataModalPane,{...n.configuration,modalProps:this._getSharedModalProps()})
case E.y$.SHOW_ERRORS:return s.createElement($.Z,{customHandleGoToPrevPaneFn:n.configuration.customHandleGoToPrevPaneFn,derivedColumnsData:this.props.derivedColumnsData,enableReplaceLinkWithText:n.configuration.enableReplaceLinkWithText,enableSkipErrors:n.configuration.enableSkipErrors,errorData:this.props.errorData,importType:this.props.importType,isLastPane:t===this.props.panes.length-1,modalProps:this._getSharedModalProps(),options:this.props.options,onImport:this.props.importFromSpreadsheet,selectedSchemaIds:this.props.selectedSchemaIds})
default:(0,h.hu)(!1,"Unrecognized pane state!")
return null}}}SpreadsheetBulkImportModal.defaultProps={isSchemaRequired:!0}
const te=SpreadsheetBulkImportModal
var ne=n(234868)
class SpreadsheetBulkImportModalContainerConnector extends o.C{constructor(){super(...arguments)
this.shouldSubscribeToRedux=!1
this.stores=[ne.ZP,p.Z]}enhanceProps(){const e=this.spreadsheetBulkImportStore().getState(),{tagSchemaId:t}=e.selectedSchemaIds,n=t?this.sampleSchemaStore().getBatchSchema(t):null
return{storeState:e,isBatchSchemaLoading:Boolean(t&&this.sampleSchemaStore().isTagSchemaLoading(t)),selectedBatchSchema:n}}}class SpreadsheetBulkImportModalContainer extends s.Component{constructor(){super(...arguments)
this.trackEventWithModule=(e,t=!1)=>{var n,a,i
const s=(0,E.WU)(this.props.importType),o=null===(n=this.props.storeState.fileData)||void 0===n?void 0:n.columns.some((e=>e.type===E.BA.STORABLE_NAME)),l=[E.BA.FILENAME,E.BA.NEW_BIOENTITY_NAME],c=null===(a=this.props.storeState.fileData)||void 0===a?void 0:a.columns.some((e=>l.includes(e.type))),d={...null!==(i=this.props.analyticsMetadata)&&void 0!==i?i:{},importType:this.props.importType,modalType:"spreadsheet_import",...t&&{includedStorableNameColumn:o,includedEntityNameColumn:c}}
null!=s&&r.gx(e,s,d)}
this.handleImportFromSpreadsheet=()=>{var e
u.S8({analyticsMetadata:null!==(e=this.props.analyticsMetadata)&&void 0!==e?e:{}},null,this.props.onImportFromSpreadsheet)
this.trackEventWithModule(l.U9.SUBMITTED_MODAL,!0)
this.props.onRequestClose()}
this.handleOnRequestClose=()=>{this.trackEventWithModule(l.U9.CLOSED_MODAL)
this.props.onRequestClose()}}componentDidMount(){m.oM({importType:this.props.importType,panes:this.props.panes,...this.props.initialSettings})
this.trackEventWithModule(l.U9.OPENED_MODAL)}render(){return null===this.props.storeState.importType?null:s.createElement(te,{onRequestClose:this.handleOnRequestClose,importFromSpreadsheet:this.handleImportFromSpreadsheet,importItemWord:this.props.importItemWord,title:this.props.title,footer:this.props.footer,isBatchSchemaLoading:this.props.isBatchSchemaLoading,selectedBatchSchema:this.props.selectedBatchSchema,isSchemaRequired:this.props.isSchemaRequired,...this.props.storeState})}}SpreadsheetBulkImportModalContainer.propTypes={footer:i().node,importItemWord:i().string.isRequired,importType:i().string.isRequired,initialSettings:i().shape({initialBatchSchemaId:i().string,initialContainerSchemaId:i().string,initialSchemalessCreationEntityType:i().oneOf(c.SCHEMALESS_BULK_IMPORT_SUPPORTED_OLIGO_AWARE_TYPES),initialFolder:i().shape({folderId:i().string.isRequired,registryId:i().string}),initialRegistry:c.REGISTRY_SHAPE,initialResultSchemaId:i().string,initialTagSchemaId:i().string,initialTableColumnNames:i().arrayOf(i().string.isRequired),initialSampleGroupSchemaId:i().string,initialProcessTaskSchemaId:i().string,initialProcessOutputSchemaId:i().string,initialPlateSchemaId:i().string,initialBoxSchemaId:i().string,initialPaneKey:i().oneOf(Object.values(E.y$))}),onImportFromSpreadsheet:i().func.isRequired,onRequestClose:i().func.isRequired,panes:i().arrayOf(i().shape({paneKey:i().string.isRequired,configuration:i().object})).isRequired,storeState:i().shape({errorData:i().shape({itemNameErrors:E.R9.errors,registryErrors:E.R9.errors,registryWarnings:E.R9.errors,otherErrors:E.R9.errors,otherWarnings:E.R9.errors,tagErrors:E.R9.errors,state:i().oneOf([E.PX.STARTED,E.PX.FAILED,E.PX.COMPLETED])}),derivedColumnsData:E.$D,file:i().shape({name:i().string.isRequired}),fileData:i().shape({url:i().string,columns:i().arrayOf(E.R9.column),errorMessage:i().string,state:i().oneOf([E.PX.STARTED,E.PX.FAILED,E.PX.COMPLETED])}),forInventoryFileCreate:i().bool.isRequired,importType:i().oneOf(Object.values(E.pt)),importSourceType:i().oneOf(Object.values(E.l5)).isRequired,rawText:i().string,selectedDestination:E.R9.selectedDestination,linkFolderIds:i().arrayOf(i().string),options:i().objectOf(i().bool).isRequired,paneKey:i().oneOf(Object.values(E.y$)),registryImportSettings:E.R9.registryImportSettings,schemalessCreationEntityType:i().oneOf(c.SCHEMALESS_BULK_IMPORT_SUPPORTED_OLIGO_AWARE_TYPES),selectedSchemaIds:E.R9.selectedSchemaIds,tableColumnNames:i().arrayOf(i().string.isRequired),dataTableKeyFields:i().arrayOf(i().oneOf(E.F6).isRequired),_timeLimit:i().number,title:i().string}).isRequired,isBatchSchemaLoading:i().bool.isRequired,selectedBatchSchema:d.ZK,isSchemaRequired:i().bool,analyticsMetadata:i().object}
SpreadsheetBulkImportModalContainer.defaultProps={importItemWord:"Benchling file",isSchemaRequired:!0}
const ae=SpreadsheetBulkImportModalContainerConnector.connect(SpreadsheetBulkImportModalContainer)},301251:(e,t,n)=>{n.d(t,{Z:()=>SpreadsheetBulkImportOption})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(125440),l=n(661978)
function SpreadsheetBulkImportOption(e){return r.createElement("div",{className:s()(e.className,(0,a.iv)(c.optionDiv))},r.createElement("label",{className:s()("u-normal-font-weight",(0,a.iv)(c.optionLabel),{"u-faded":e.isDisabled})},r.createElement("input",{type:"checkbox",disabled:e.isDisabled,onChange:t=>{e.onChange?e.onChange(t):l.Ov({[e.name]:t.target.checked})},checked:e.isChecked}),e.text),e.helpContent&&r.createElement(o.Z,{renderContent:()=>e.helpContent,iconClassName:"u-tiny-spacing-left"}))}SpreadsheetBulkImportOption.defaultProps={isDisabled:!1}
const c=a.mM.create({optionDiv:{display:"flex"},optionLabel:{display:"flex",alignItems:"center"}})},234868:(e,t,n)=>{n.d(t,{ZP:()=>R})
var a=n(64558),i=n(767807),s=n.n(i),r=n(615439),o=n.n(r),l=n(531041),c=n(468943),d=n(232606),u=n(787004),p=n(537076),m=n(947730),E=n(391028),h=n(432128),g=n(776105),S=n(690331),_=n(676159),T=n(75804),I=n(335609),A=n(556543),f=n(372721),y=n(939092)
function _optionSchemaPreferenceKey(e,t){return`bulk_import.${e}-${t}`}const C={derivedColumns:null,state:null}
class SpreadsheetBulkImportStore extends E.Z{resetState(){this.importType=null
this.panes=[]
this.paneKey=null
this.file=null
this.rawText=""
this.fileData=null
this.derivedColumnsData=C
this.monomerMapping=null
this.errorData=null
this._timeLimit=null
this._resetSelectedSchemaIds()
this.schemalessCreationEntityType=null
this.selectedDestination=null
this.linkFolderIds=[]
this.registryImportSettings={registry:null,inOrgCollection:!1,inUserCollection:!1,labelingStrategy:null,labelingStrategyOptions:[],projectId:null}
this.tableColumnNames=[]
this.dataTableKeyFields=[]
this.options=l.default.mapObject(l.default.invert(f.JY),(()=>!1))
this.shouldCloseOnRequest=!0}getState(){return{forInventoryFileCreate:this._isForInventoryFileCreate(),importSourceType:this._getImportSourceType(),importType:this.importType,derivedColumnsData:this.derivedColumnsData,errorData:this.errorData,file:this.file,fileData:this.fileData,linkFolderIds:this.linkFolderIds,monomerMapping:this.monomerMapping,options:this.options,panes:this.panes,paneKey:this.paneKey,rawText:this.rawText,registryImportSettings:this.registryImportSettings,schemalessCreationEntityType:this.schemalessCreationEntityType,selectedDestination:this.selectedDestination,selectedSchemaIds:{tagSchemaId:this.selectedTagSchemaId,batchSchemaId:this.selectedBatchSchemaId,containerSchemaId:this.selectedContainerSchemaId,plateSchemaId:this.selectedPlateSchemaId,boxSchemaId:this.selectedBoxSchemaId,locationSchemaId:this.selectedLocationSchemaId,sampleGroupSchemaId:this.selectedSampleGroupSchemaId,resultSchemaId:this.selectedResultSchemaId,processTaskSchemaId:this.selectedProcessTaskSchemaId,processOutputSchemaId:this.selectedProcessOutputSchemaId},tableColumnNames:this.tableColumnNames,dataTableKeyFields:this.dataTableKeyFields,_timeLimit:this._timeLimit,shouldCloseOnRequest:this.shouldCloseOnRequest}}_resetSelectedSchemaIds(){this.selectedTagSchemaId=null
this.selectedBatchSchemaId=null
this.selectedContainerSchemaId=null
this.selectedPlateSchemaId=null
this.selectedBoxSchemaId=null
this.selectedLocationSchemaId=null
this.selectedSampleGroupSchemaId=null
this.selectedResultSchemaId=null
this.selectedProcessTaskSchemaId=null
this.selectedProcessOutputSchemaId=null}_resetOptionsFromPreferences(e){const t={}
l.default.each(f.Pp,(n=>{t[n]=h.Z.get(_optionSchemaPreferenceKey(n,e))||!1}))
this.options={...this.options,...t}}_setPreferenceForOptions(e){Object.keys(e).forEach((t=>{const n=e[t]
f.Pp.includes(t)&&this.selectedTagSchemaId&&h.Z.set(_optionSchemaPreferenceKey(t,this.selectedTagSchemaId),n)}))}_getImportSourceType(){return h.Z.get(f.tB.SOURCE_TYPE)||f.l5.SPREADSHEET}_removeSpreadsheet(){(0,d.hu)(this.paneKey===f.y$.UPLOAD_SPREADSHEET,"Can only remove spreadsheet from the upload pane.")
this.file=null
this.fileData=null
this.derivedColumnsData=C}_setPrevPane(){const e=this.panes.findIndex((({paneKey:e})=>e===this.paneKey))-1,t=this.panes[e].paneKey;(0,d.hu)(null!=t,"Invalid pane!")
this.paneKey=t
c.j("bulk_spreadsheet","set_prev",{importType:this.importType,pane:this.paneKey,schemalessCreationEntityType:this.schemalessCreationEntityType,schemaEntityType:this.selectedTagSchemaId?(0,A.E5)((0,y.My)(this.getState().selectedSchemaIds)):null,tagSchemaId:this.selectedTagSchemaId})}_setNextPane(){const e=this.panes.findIndex((({paneKey:e})=>e===this.paneKey))+1,t=this.panes[e].paneKey;(0,d.hu)(null!=t,"Invalid pane!")
this.paneKey=t
c.j("bulk_spreadsheet","set_next",{importType:this.importType,pane:this.paneKey,schemalessCreationEntityType:this.schemalessCreationEntityType,schemaEntityType:this.selectedTagSchemaId?(0,A.E5)((0,y.My)(this.getState().selectedSchemaIds)):null,tagSchemaId:this.selectedTagSchemaId})}_setPaneByKey(e){(0,d.hu)(-1!==this.panes.findIndex((({paneKey:t})=>t===e)),"Invalid pane!")
this.paneKey=e
c.j("bulk_spreadsheet","set_pane",{importType:this.importType,pane:this.paneKey,schemalessCreationEntityType:this.schemalessCreationEntityType,schemaEntityType:this.selectedTagSchemaId?(0,A.E5)((0,y.My)(this.getState().selectedSchemaIds)):null,tagSchemaId:this.selectedTagSchemaId})}_settingsFromRegistry(e){if(!e)return{}
const t={registry:e}
if(e.disablePersonalCollections){t.inOrgCollection=!0
t.inUserCollection=!1}t.labelingStrategy=null
return t}_setDefinedSettings(e){const t=this.getState().selectedSchemaIds
Object.assign(this,(0,a.cg)(e))
o()(t,this.getState().selectedSchemaIds)||this._recomputeGuessedColumnTypes()}_updateImportSettings(e){const{linkFolderIds:t,schemalessCreationEntityType:n,selectedDestination:a,selectedTagSchemaId:i,selectedContainerSchemaId:r,selectedPlateSchemaId:l,selectedBoxSchemaId:c,selectedLocationSchemaId:d,selectedSampleGroupSchemaId:u,selectedResultSchemaId:p,selectedProcessTaskSchemaId:m,selectedProcessOutputSchemaId:E,registryImportSettings:h}=e
this._setDefinedSettings({linkFolderIds:t,schemalessCreationEntityType:n,selectedDestination:a,selectedContainerSchemaId:r,selectedPlateSchemaId:l,selectedBoxSchemaId:c,selectedLocationSchemaId:d,selectedSampleGroupSchemaId:u,selectedResultSchemaId:p,selectedProcessTaskSchemaId:m,selectedProcessOutputSchemaId:E})
if(void 0!==i){this._setDefinedSettings({selectedTagSchemaId:i,selectedBatchSchemaId:this._getRecomputedBatchSchemaId(i)})
this.registryImportSettings={...this.registryImportSettings,...this._getRecomputedLabelingStrategySettings(i)}
this._resetOptionsFromPreferences(i)}if(h){const e=h.registry
o()(e,this.registry)||this._resetSelectedSchemaIds()
const t=Object.assign((0,I.Z)(h,"inOrgCollection","inUserCollection","labelingStrategy","projectId"),this._settingsFromRegistry(e))
this.registryImportSettings=s()(this.registryImportSettings,{$merge:t})}}_updateColumns(e){this.fileData=s()(this.fileData,{columns:{$set:e}})}_updateDerivedColumns(e){this.derivedColumnsData.derivedColumns=e}_getRecomputedBatchSchemaId(e){if(!(0,y.eh)(this.importType)&&!this.options[f.JY.IMPORT_BATCHES])return null
const t=_.Z.getBatchSchema(e)
return t?t.id:null}_getRecomputedLabelingStrategySettings(e){if(!e)return{labelingStrategy:p.LABELING_STRATEGIES.IDS_FROM_NAMES,labelingStrategyOptions:[p.LABELING_STRATEGIES.IDS_FROM_NAMES]}
const t=T.Z.getTagSchemaById(e),n=S.r(p.SPREADSHEET_LABELING_STRATEGIES,t,this.registryImportSettings.registry)
return{labelingStrategy:S.Gg(n,[e]),labelingStrategyOptions:n}}_getValidColumnTypes(){const{configuration:e}=this.panes.find((e=>e.configuration&&"getValidColumnTypes"in e.configuration&&e.configuration.getValidColumnTypes instanceof Function))
return e.getValidColumnTypes({selectedSchemaIds:this.getState().selectedSchemaIds,registryImportSettings:this.registryImportSettings,options:this.options,dataTableKeyFields:this.dataTableKeyFields,schemalessCreationEntityType:this.schemalessCreationEntityType}).filter((e=>(0,g.Z)()||![f.BA.BATCH_NAME,f.BA.INPUT_BATCH_NAME,f.BA.BATCH_SCHEMA_FIELD].includes(e)))}_completeFileDataUpload({columnNames:e,url:t}){const n=this._getValidColumnTypes(),{tableColumnNames:a,dataTableKeyFields:i}=this.getState()
this.fileData={url:t,columns:(0,y.qJ)(this.importType,n,e,this.getState().selectedSchemaIds,{tableColumnNames:a,dataTableKeyFields:i}),state:f.PX.COMPLETED}}_completeFindDerivedColumns({derivedColumnsResponse:e}){const t=Object.keys(e).map((t=>({columnTransform:t,allowedColumnTypes:e[t].columnTypes,name:t,numRowsWithDerivedValues:e[t].numRowsWithDerivedValues,exampleValues:e[t].exampleValues,compatibleSchemaFieldIds:e[t].compatibleSchemaFieldIds})))
this.derivedColumnsData={...this.derivedColumnsData,derivedColumns:(0,y.JE)(t,this.getState().selectedSchemaIds),state:f.PX.COMPLETED}}_recomputeGuessedColumnTypes(){if(this.fileData&&this.fileData.columns){const e=this._getValidColumnTypes(),t=this.fileData.columns.map((({name:e})=>e)),{tableColumnNames:n,dataTableKeyFields:a}=this.getState()
this._updateColumns((0,y.qJ)(this.importType,e,t,this.getState().selectedSchemaIds,{tableColumnNames:n,dataTableKeyFields:a}))}}_isForInventoryFileCreate(){switch(this.importType){case f.pt.INVENTORY_FILES:case f.pt.REGISTRY_ENTITIES:return!0
default:return!1}}payloadHandler(e){switch(e.actionType){case u.vhR:m.Z.waitFor([_.Z.dispatchIndex])
this._setDefinedSettings({selectedBatchSchemaId:this._getRecomputedBatchSchemaId(this.selectedTagSchemaId)})
this.emitChange()
break
case u.Xoe:(0,d.hu)(Object.values(f.pt).includes(e.importType),`Invalid importType specified: ${e.importType}`)
this.panes=e.panes
this.paneKey=e.initialPaneKey||this.panes[0].paneKey
this.importType=e.importType
if(e.initialRegistry){const t={inOrgCollection:!1,inUserCollection:!0,labelingStrategy:null,labelingStrategyOptions:[],...this._settingsFromRegistry(e.initialRegistry)}
this.registryImportSettings={...this.registryImportSettings,...t}}e.initialFolder&&(this.selectedDestination=e.initialFolder)
e.initialBatchSchemaId&&(this.selectedBatchSchemaId=e.initialBatchSchemaId)
e.initialContainerSchemaId&&(this.selectedContainerSchemaId=e.initialContainerSchemaId)
e.initialTagSchemaId&&(this.selectedTagSchemaId=e.initialTagSchemaId)
e.initialSampleGroupSchemaId&&(this.selectedSampleGroupSchemaId=e.initialSampleGroupSchemaId)
e.initialResultSchemaId&&(this.selectedResultSchemaId=e.initialResultSchemaId)
e.initialPlateSchemaId&&(this.selectedPlateSchemaId=e.initialPlateSchemaId)
e.initialBoxSchemaId&&(this.selectedBoxSchemaId=e.initialBoxSchemaId)
e.initialProcessTaskSchemaId&&(this.selectedProcessTaskSchemaId=e.initialProcessTaskSchemaId)
e.initialProcessOutputSchemaId&&(this.selectedProcessOutputSchemaId=e.initialProcessOutputSchemaId)
e.initialTableColumnNames&&(this.tableColumnNames=e.initialTableColumnNames)
e.initialDataTableKeyFields&&(this.dataTableKeyFields=e.initialDataTableKeyFields)
e.initialSchemalessCreationEntityType&&(this.schemalessCreationEntityType=e.initialSchemalessCreationEntityType)
e.initialRawText&&(this.rawText=e.initialRawText)
c.j("bulk_spreadsheet","begin",{importType:this.importType,schemalessCreationEntityType:this.schemalessCreationEntityType})
this.emitChange()
break
case u.$kk:this.options={...this.options,...e.options}
this._setPreferenceForOptions(e.options)
this.emitChange()
break
case u.XVG:this._updateImportSettings(e)
this.emitChange()
break
case u.qvg:this._timeLimit=e._timeLimit
this.emitChange()
break
case u.$5t:h.Z.set(f.tB.SOURCE_TYPE,e.value)
this.emitChange()
break
case u.RcB:this._setPrevPane()
this.paneKey===f.y$.UPLOAD_SPREADSHEET&&this._getImportSourceType()===f.l5.RAW_TEXT&&this._removeSpreadsheet()
this.emitChange()
break
case u.o9i:this._setNextPane()
this.emitChange()
break
case u.vDg:this._setPaneByKey(e.paneKey)
this.emitChange()
break
case u.v6I:this.rawText=e.rawText
this.emitChange()
break
case u.xQ7:this.file=e.file
this.fileData={url:"",columns:[],state:f.PX.STARTED}
this.emitChange()
break
case u.P8y:if(e.file!==this.file)break
this.fileData={url:"",columns:[],errorMessage:e.errorMessage,state:f.PX.FAILED}
this.emitChange()
break
case u.B4k:{if(e.file!==this.file)break
const{columnNames:t,url:n}=e
this._completeFileDataUpload({columnNames:t,url:n})
this.emitChange()
break}case u.cPA:this._updateColumns(e.columns)
this.emitChange()
break
case u.gAV:this._removeSpreadsheet()
this.emitChange()
break
case u.dDi:this.errorData={...f.$M,state:f.PX.STARTED}
this.emitChange()
break
case u.Cjn:this._updateDerivedColumns(e.derivedColumns)
this.emitChange()
break
case u.Jvl:this.derivedColumnsData.state=f.PX.STARTED
this.emitChange()
break
case u.bco:{const{derivedColumnsResponse:t}=e
this._completeFindDerivedColumns({derivedColumnsResponse:t})
this.emitChange()
break}case u.FLh:this.derivedColumnsData={derivedColumns:null,state:f.PX.FAILED}
this.emitChange()
break
case u.oO_:if(!this.fileData||this.fileData.url!==e.url)break
this.errorData={...f.$M,state:f.PX.FAILED}
this.emitChange()
break
case u.ddK:if(!this.fileData||this.fileData.url!==e.url)break
this.errorData={itemNameErrors:e.itemNameErrors||[],registryErrors:e.registryErrors||[],registryWarnings:e.registryWarnings||[],otherErrors:e.otherErrors||[],otherWarnings:e.otherWarnings||[],tagErrors:e.tagErrors||[],state:f.PX.COMPLETED}
c.j("bulk_spreadsheet","validation_completed",{importType:this.importType,schemalessCreationEntityType:this.schemalessCreationEntityType,schemaEntityType:this.selectedTagSchemaId?(0,A.E5)((0,y.My)(this.getState().selectedSchemaIds)):null,tagSchemaId:this.selectedTagSchemaId,filenameErrorCount:this.errorData.itemNameErrors.length,otherErrorCount:this.errorData.otherErrors.length,otherWarningCount:this.errorData.otherWarnings.length,registryErrorCount:this.errorData.registryErrors.length,tagErrorCount:this.errorData.tagErrors.length})
this.emitChange()
break
case u.W0q:this.resetState()
this.emitChange()
break
case u.kPx:this.shouldCloseOnRequest=e.shouldCloseOnRequest
this.emitChange()
break
case u.gD7:this.monomerMapping=e.monomerMapping
this.emitChange()}return!0}}const R=new SpreadsheetBulkImportStore(m.Z)},939092:(e,t,n)=>{n.d(t,{A:()=>shouldHaveResidues,A3:()=>doesImportTypeSupportClearingSampleRoles,AM:()=>getDuplicateColumnTypesError,DA:()=>isSequenceSchema,EB:()=>getErrorMessages,Ek:()=>shouldHaveChemicalStructure,H3:()=>getSampleControlRolesPropagationWarning,Hu:()=>getDerivedColumnsMapping,IN:()=>shouldCheckDerivedColumns,Iw:()=>getSampleTypesByColumnName,JE:()=>getDerivedColumnsWithGuessedTypes,Lp:()=>getRowsToSkip,My:()=>getTagSchema,On:()=>pluckColumnType,Oo:()=>getPolymerColumnTypes,Pf:()=>canApplyReplaceLinkWithText,RJ:()=>getColumnTypeToSendToServer,Ts:()=>getFieldName,Vp:()=>getErrorForChemicalStructureColumns,_A:()=>canUseExistingContainers,cp:()=>isForUpdateFieldsWithCustomFields,dO:()=>isBatchSchemaRequired,eh:()=>isImportTypeForSamples,fT:()=>canOverrideTimeout,hU:()=>getSchemaFieldIdsByColumnName,ii:()=>canUseNonEmptyContainers,jD:()=>getMoleculeColumnTypes,k$:()=>colNumToExcelId,lY:()=>getFormattedErrors,lx:()=>getRequiredFieldError,m9:()=>getSchemaFromColumnType,mD:()=>findDuplicateColumn,mk:()=>getTableColumnNamesByColumnName,nU:()=>getImportEntityType,oW:()=>getExampleImageURLForTagSchema,qJ:()=>amendWithGuessedType,r6:()=>getDependentColumnTypesError,sH:()=>getFieldHelpText,tF:()=>isForUpdateFields,wx:()=>hasErrors,xR:()=>getErrorForCreatingPolymer,xd:()=>getDuplicateTagNameError,y5:()=>hasUnresolvedErrors,y8:()=>canUseSamplesWithStatusWarnings})
var a=n(989526),i=n(531041),s=n(232606),r=n(348920),o=n(675649),l=n(459830),c=n(861825),d=n(977043),u=n(273155),p=n(477956),m=n(194170),E=n(432128),h=n(611764),g=n(925451),S=n(224921),_=n(676159),T=n(197229),I=n(497790),A=n(788836),f=n(75804),y=n(36424),C=n(808844),R=n(317275),b=n(556543),N=n(372721)
const O={[N.BA.INPUT_CONCENTRATION_VALUE]:/((source)? (batch|entity))? ?(conc|concs|concentration|concentrations)$/i,[N.BA.INPUT_CONCENTRATION_UNITS]:/((source)? (batch|entity))? ?(conc unit|conc units|concentration unit|concentration units)$/i,[N.BA.STAGE_RUN_SAMPLE_NAME]:/\s*(sample)s?\s*/i,[N.BA.STAGE_RUN_NAME]:/\s*(stage run)s?\s*/i,[N.BA.REGISTRATION_TABLE_EXISTING_BIOENTITY]:/^(entity)\s*$/i,[N.BA.FILENAME]:/\s*((entity|sample) name|name)s?\s*/i,[N.BA.BATCH_NAME]:/\s*(source\s+)?(batch|sample)( id)?s?\s*/i,[N.BA.INPUT_BATCH_NAME]:/\s*(name|(source\s+)?batch( id)?)s?\s*/i,[N.BA.INPUT_BIOENTITY_LABEL]:/\s*((source\s+)?entity( name)?)s?\s*/i,[N.BA.NUMBER_OF_CONTAINERS]:/\s*((num(ber)?\s*(of)?)\s+(container)s?)\s*/i,[N.BA.BARCODE]:/^((current |old )?barcode|container( barcode)?)s?/i,[N.BA.NEW_BARCODE]:/^((final |new )barcode)s?/i,[N.BA.INPUT_CONTAINER_BARCODE]:/\s*(((source|input)\s+)container( barcode)?)s?\s*/i,[N.BA.OUTPUT_CONTAINER_BARCODE]:/\s*(((dest(ination)?|output)\s+)container( barcode)?)s?\s*/i,[N.BA.OUTPUT_GRID_BARCODE]:/\s*(dest(ination)? (matrix\s+)?(plate|box)( barcode)?)s?\s*/i,[N.BA.OUTPUT_GRID_COORDINATES]:/\s*(dest(ination)? (position|well|coordinate))s?\s*/i,[N.BA.INPUT_GRID_BARCODE]:/\s*(((source|input)\s+)?(plate|box)( barcode)?)s?\s*/i,[N.BA.INPUT_GRID_COORDINATES]:/\s*(source ([cw]ell|position))s?\s*/i,[N.BA.TRANSFER_QUANTITY]:/^\s*(?!.*final)(transfer)?\s*(vol|amt|qty|volume|amount|quantity|mass)\s*/i,[N.BA.FINAL_QUANTITY_VALUE]:/\s*(final)?\s*(vol|amt|qty|volume|amount|quantity|mass)\s*/i,[N.BA.QUANTITY_UNITS]:/\s*((vol|amt|qty|volume|amount|mass|quantity)?\s*unit)s?\s*/i,[N.BA.DESCRIPTION]:/\s*(note|description|desc|info|information)s?\s*/i,[N.BA.RESIDUES]:/\s*(amino\s*acids|bases|residues|sequence)s?\s*/i,[N.BA.HELM]:/\s*(helm)\s*/i,[N.BA.IDT]:/\s*(idt)\s*/i,[N.BA.STORABLE_NAME]:/\s*(name)s?\s*/i,[N.BA.PARENT_STORABLE_GRID_COORDINATES]:/\s*((parent)?(storage|plate|box)?\s*(position|well|coordinate))s?\s*/i,[N.BA.PARENT_STORABLE_BARCODE]:/\s*(((parent)?(storage|plate|location|box)? barcode)s?|(storage|plate|location|box)s?)(?!.*(capacity|quantity|children|schema))\s*/i,[N.BA.SAMPLE_OWNERS]:/\s*(sample )?(owner)s?\s*/i,[N.BA.SAMPLE_RESTRICTION_STATUS]:/\s*(sample )?(restriction )?status\s*/i,[N.BA.SAMPLE_AUTHORIZED_USERS]:/\s*((sample )?(authorized|restricted) (sample )?user)s?\s*/i,[N.BA.ALLOWS_NON_LOCATION_CHILDREN]:/\s*(allow|allows) ((non |non-)location )?(children|box|plate|container|inventory)s?\s*/i,[N.BA.LOCATION_CAPACITY]:/\s*(location )?(capacity|limit|quantity)\s*/i,[N.BA.ALLOWED_CHILD_STORABLE_SCHEMAS]:/\s*((allowed)?( child|children)?\s*(inventory|container|plate|box)? schema)s?\s*/i,[N.BA.INGREDIENT_MIXTURE_LABEL]:/^\s*mixture\s*/i,[N.BA.INGREDIENT_COMPONENT_BIOENTITY_LABEL]:/\s*component\s*/i,[N.BA.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL]:/\s*(new |updated )component\s*/i,[N.BA.INGREDIENT_CATALOG_IDENTIFIER]:/\s*catalog\s*/i,[N.BA.INGREDIENT_AMOUNT]:/\s*(amount|amt|volume|mass)\s*/i,[N.BA.INGREDIENT_UNITS]:/\s*units?\s*/i,[N.BA.INGREDIENT_COMPONENT_LOT_TEXT]:/\s*(source|(component )?lot) text\s*/i,[N.BA.INGREDIENT_COMPONENT_LOT_BIOENTITY_LABEL]:/\s*(component )?lot entity\s*/i,[N.BA.INGREDIENT_COMPONENT_LOT_CONTAINER_BARCODE]:/\s*(component )?lot container\s*/i,[N.BA.INGREDIENT_NOTES]:/\s*(notes?|comments?)\s*/i,[N.BA.PROCESS_TASK_ASSIGNEE]:/\s*assignee\s*/i,[N.BA.PROCESS_TASK]:/\s*task\s*/i,[N.BA.SMILES]:/\s*(smiles)\s*/i,[N.BA.MOLFILE]:/\s*(molfile)\s*/i},L={[N.BA.INPUT_CONTAINER_BARCODE]:/\s*(dest(ination)?|output)\s*/i,[N.BA.OUTPUT_CONTAINER_BARCODE]:/\s*(source|input)\s*/i,[N.BA.PARENT_STORABLE_BARCODE]:/\s*container\s*/i,[N.BA.TRANSFER_QUANTITY]:/\s*unit\s*/i,[N.BA.FINAL_QUANTITY_VALUE]:/\s*unit\s*/i,[N.BA.INGREDIENT_COMPONENT_BIOENTITY_LABEL]:/\s*(new |updated |component (lot|text))\s*/i,[N.BA.INGREDIENT_UPDATED_COMPONENT_BIOENTITY_LABEL]:/\s*component (lot|text)\s*/i,[N.BA.BARCODE]:/\s*name\s*/i,[N.BA.FILENAME]:/\s*container\s*/i},P={[N.Mn.IDT_3MOD]:/\s*3\s*(prime|')?\s*(modification|mod|linker|conjugate|handle)\s*/i,[N.Mn.IDT_5MOD]:/\s*5\s*(prime|')?\s*(modification|mod|linker|conjugate|handle)\s*/i,[N.Mn.CHEMICAL_STRUCTURE_SALTS]:/\s*(salt)\s*/i}
function _normalize(e){return e.toLowerCase().replace(/\s/g,"")}function _guessTypeForColumnType(e,t,n){if(n){const a=n.get(e)
if(a)return{type:t,schemaField:a}}return null}function _guessTypeFromColumnNameRegexes(e,t){var n,a
for(const i of Object.keys(O))if(e.includes(i)&&(!L.hasOwnProperty(i)||!(null===(n=L[i])||void 0===n?void 0:n.test(t)))&&(null===(a=O[i])||void 0===a?void 0:a.test(t)))return{type:i}
return null}function _getMessageSpan(e,t){return a.createElement("span",null,a.createElement(y.Z,{icon:t,className:"u-tiny-spacing-right"}),e)}function getTagSchema(e){return f.Z.getTagSchemaById(e.tagSchemaId)}function getSchemaFromColumnType(e,t){switch(e){case N.BA.SCHEMA_FIELD:return getTagSchema(t)
case N.BA.BATCH_SCHEMA_FIELD:return function getBatchSchema(e){return _.Z.getBatchSchema(e.tagSchemaId)}(t)
case N.BA.CONTAINER_SCHEMA_FIELD:return function getContainerSchema(e){return _.Z.getContainerSchema(e.containerSchemaId)}(t)
case N.BA.PLATE_SCHEMA_FIELD:return function getPlateSchema(e){return _.Z.getPlateSchema(e.plateSchemaId)}(t)
case N.BA.LOCATION_SCHEMA_FIELD:return function getLocationSchema(e){return _.Z.getLocationSchema(e.locationSchemaId)}(t)
case N.BA.SAMPLE_GROUP_SCHEMA_FIELD:return function getSampleGroupSchema(e){return S.Z.getSampleGroupSchema(e.sampleGroupSchemaId)}(t)
case N.BA.RESULT_SCHEMA_FIELD:return function getResultSchema(e){return S.Z.getAssaySchema(e.resultSchemaId)}(t)
case N.BA.PROCESS_TASK_SCHEMA_FIELD:return function getProcessTaskSchema(e){return(0,g.Z)(e.processTaskSchemaId)}(t)
case N.BA.PROCESS_OUTPUT_SCHEMA_FIELD:return function getProcessOutputSchema(e){return(0,h.Z)(e.processOutputSchemaId)}(t)
default:(0,s.hu)(e===N.BA.BOX_SCHEMA_FIELD,"Unexpected schema field column type")
return function getBoxSchema(e){return _.Z.getBoxSchema(e.boxSchemaId)}(t)}}function getExampleImageURLForTagSchema(e){if(e)switch(e.folderItemType){case l.PROTEIN:return"/static/img/spreadsheet-import-example-protein.png"
case l.SEQUENCE:return"/static/img/spreadsheet-import-example-sequence.png"}return"/static/img/spreadsheet-import-example.png"}function shouldHaveResidues(e){const t=getTagSchema(e)
return Boolean(t&&b.E1(t.folderItemType))}function shouldHaveChemicalStructure(e){const t=getTagSchema(e)
return Boolean(t&&b.T5(t.folderItemType))}function isSequenceSchema(e){const t=f.Z.getTagSchemaById(e)
return null!=t&&b.Zy(t)}function _getFieldByName(e){if(!e)return new Map
const t=function _filterUniqueObjects(e,t){const n=new Set,a=new Set
e.forEach((e=>{n.has(t(e))?a.add(t(e)):n.add(t(e))}))
return e.filter((e=>!a.has(t(e))))}(T.a(e),(e=>e.displayName))
return new Map(t.map((e=>[_normalize(e.displayName),e])))}function getDerivedColumnsWithGuessedTypes(e,t){return e.map((e=>{const n={...e,type:N.BA.IGNORE}
if(e.allowedColumnTypes.includes(N.BA.SCHEMA_FIELD)){const a=getSchemaFromColumnType(N.BA.SCHEMA_FIELD,t),i=e.compatibleSchemaFieldIds||[],s=(a?a.fields.filter((e=>i.includes(e.apiId))):[]).filter((t=>P[e.columnTransform].test(t.name)))
if(s.length>0){n.type=N.BA.SCHEMA_FIELD
n.schemaField=s[0]}}return n}))}function amendWithGuessedType(e,t,n,a,o){const l=new Map
t.filter((e=>N.ix.includes(e))).forEach((e=>{l.set(e,_getFieldByName(getSchemaFromColumnType(e,a)))}))
return n.map(((n,a)=>{let d=e===N.pt.UPDATE_MIXTURE_INGREDIENTS?function _guessTypeForMixtureIngredients(e,t){var n
if(!t)return null
for(const a of e){(0,s.hu)(a===N.BA.IGNORE||O.hasOwnProperty(a),"Column types should have regexes defined.")
if((!L.hasOwnProperty(a)||!L[a].test(t))&&(null===(n=O[a])||void 0===n?void 0:n.test(t)))return{type:a}}return null}(t,n):function _guessType(e,t,n,a,o){if(!t.length)return{type:N.BA.IGNORE}
const l=_normalize(t)
if(e.includes(N.BA.SAMPLE_GROUP_SCHEMA_FIELD)){let t=null
l.includes("container")&&(t=_normalize(l.replace("container","")))
for(const[n,i]of a){const a=_guessTypeForColumnType(l,n,i)
if(a){(0,s.hu)(null!=a.schemaField.requiredLink&&(0,I.isRequiredLinkSample)(a.schemaField.requiredLink),"Expected to receive a sample group schema field")
return{...a,sampleType:a.schemaField.requiredLink.sampleType}}if(t){const a=_guessTypeForColumnType(t,n,i)
if(a&&e.includes(N.BA.SAMPLE_GROUP_SCHEMA_FIELD))return{...a,sampleType:c.mh}}}}const d=_guessTypeFromColumnNameRegexes(i.default.intersection(e,N.YT),t)
if(null!=d)return d
for(const[e,t]of a){const n=_guessTypeForColumnType(l,e,t)
if(n)return n}if(e.includes(N.BA.DATA_TABLE_MATCHER)){const{dataTableKeyFields:e}=o
for(const t of e)if(_normalize(N.zw[t])===l)return{type:N.BA.DATA_TABLE_MATCHER,tableColumnName:t}}if(e.includes(N.BA.DATA_TABLE_VALUE)){const{tableColumnNames:e}=o
for(const t of e)if(_normalize(t)===l)return{type:N.BA.DATA_TABLE_VALUE,tableColumnName:t}}if(e.includes(N.BA.CUSTOM_MOD_SYNTAX))for(const e of r.ZP.MODBIO_CUSTOM_SYNTAX_NAMES)if(_normalize(e)===l)return{type:N.BA.CUSTOM_MOD_SYNTAX,customSyntaxName:e}
const u=_guessTypeFromColumnNameRegexes(e,t)
if(null!=u)return u
if(0===n){const t=[N.BA.STAGE_RUN_SAMPLE_NAME,N.BA.FILENAME,N.BA.BATCH_NAME,N.BA.STAGE_RUN_NAME,N.BA.BARCODE,N.BA.REGISTRATION_TABLE_EXISTING_BIOENTITY,N.BA.INPUT_CONTAINER_BARCODE,N.BA.INPUT_GRID_BARCODE,N.BA.INPUT_BIOENTITY_LABEL,N.BA.INPUT_BATCH_NAME,N.BA.PARENT_STORABLE_BARCODE].filter((t=>e.includes(t)))
if(t.length)return{type:t[0]}}return e.includes(N.BA.CUSTOM_FIELD)?{type:N.BA.CUSTOM_FIELD}:null}(t,n,a,l,o)
if(!d||!t.includes(d.type)){(0,s.hu)(t.includes(N.BA.IGNORE),`Must specify IGNORE as a possible column type when a column might not have a guess: ${n}`)
d={type:N.BA.IGNORE}}return i.default.extend({name:n},d)}))}function pluckColumnType(e){return e.map((({type:e})=>e))}function getColumnTypeToSendToServer(e){return N.ix.includes(e)?N.BA.SCHEMA_FIELD:e}function getSchemaFieldIdsByColumnName(e){const t={}
for(const n of e)getColumnTypeToSendToServer(n.type)===N.BA.SCHEMA_FIELD&&(t[n.name]=n.schemaField.id)
return t}function getTableColumnNamesByColumnName(e){const t={}
for(const n of e)[N.BA.DATA_TABLE_MATCHER,N.BA.DATA_TABLE_VALUE].includes(n.type)&&(t[n.name]=n.tableColumnName)
return t}function getSampleTypesByColumnName(e){return i.default.object(e.filter((e=>e.type===N.BA.SAMPLE_GROUP_SCHEMA_FIELD)).map((e=>[e.name,e.sampleType])))}function findDuplicateColumn(e,t){for(let n=0;n<e.length;n++)for(let a=n+1;a<e.length;a++)if(t(e[n],e[a]))return e[n]
return null}function getDuplicateTagNameError(e){const t=e.filter((({type:e})=>e===N.BA.CUSTOM_FIELD)).map((({name:e})=>e)),n=e.filter((({type:e})=>getColumnTypeToSendToServer(e)===N.BA.SCHEMA_FIELD&&e!==N.BA.SAMPLE_GROUP_SCHEMA_FIELD)),a=new Set
for(const e of n)if(null!=e.schemaField){if(a.has(e.schemaField.name))return`Only one "${e.schemaField.name}" schema field is allowed.`
if(t.includes(e.schemaField.name))return`Schema field "${e.schemaField.name}" conflicts with a custom field with the same name.`
a.add(e.schemaField.name)}return null}function getDuplicateColumnTypesError(e){const t=i.default.values(N.BA).filter((e=>![N.BA.CUSTOM_FIELD,N.BA.DESCRIPTION,N.BA.ALIAS,N.BA.SCHEMA_FIELD,N.BA.BATCH_SCHEMA_FIELD,N.BA.CONTAINER_SCHEMA_FIELD,N.BA.PLATE_SCHEMA_FIELD,N.BA.BOX_SCHEMA_FIELD,N.BA.LOCATION_SCHEMA_FIELD,N.BA.SAMPLE_GROUP_SCHEMA_FIELD,N.BA.RESULT_SCHEMA_FIELD,N.BA.PROCESS_TASK_SCHEMA_FIELD,N.BA.PROCESS_OUTPUT_SCHEMA_FIELD,N.BA.IGNORE,N.BA.DATA_TABLE_MATCHER,N.BA.DATA_TABLE_VALUE].includes(e)))
for(const n of t)if(e.filter((({type:e})=>e===n)).length>1)return`There must be exactly one "${N.zw[n]}" field.`
return null}function getDependentColumnTypesError(e,t){const n=e.map((({type:e})=>e))
for(const a of t)if(e.some((({type:e})=>a.includes(e)))&&!a.every((e=>n.includes(e)))){const e=a.map((e=>`"${N.zw[e]}"`)),t=a.length>2?"all":"both"
return`${(0,C.Dw)(e)} must ${t} be specified.`}return null}function canApplyReplaceLinkWithText(e){return e!==N.Ol.INVALID_SELECTOR_OPTIONS&&N.cF.includes(e)}function canUseExistingContainers(e){return e===N.Ol.FOUND_EXISTING_CONTAINER}function canUseNonEmptyContainers(e){return e===N.Ol.NON_EMPTY_CONTAINER}function canUseSamplesWithStatusWarnings(e){return e===N.Ol.FOUND_SAMPLE_WITH_NONBLOCKING_STATUS_WARNING||e===N.Ol.DEPRECATED_FOUND_SAMPLE_WITH_STATUS_WARNING}function getErrors(e){return i.default.flatten(Object.values((0,R.Z)(e,"itemNameErrors","tagErrors","registryErrors","registryWarnings","otherErrors","otherWarnings")))}function hasErrors(e){const t=getErrors(e)
return Boolean(t.length)}function getUnresolvedErrors(e,t){const{itemNameErrors:n,tagErrors:a,registryErrors:i,otherErrors:s}=e,r=t[N.JY.REPLACE_LINK_WITH_TEXT]?a.filter((e=>!canApplyReplaceLinkWithText(e.errorCode))):a
return getErrors({itemNameErrors:n.filter((e=>{const n=!N.TQ.includes(e.errorCode)
switch(e.errorCode){case N.Ol.NON_EMPTY_CONTAINER:return n&&!t[N.JY.USE_NON_EMPTY_CONTAINERS]
case N.Ol.FOUND_EXISTING_CONTAINER:return n&&!t[N.JY.USE_EXISTING_CONTAINERS]
case N.Ol.FOUND_SAMPLE_WITH_NONBLOCKING_STATUS_WARNING:case N.Ol.DEPRECATED_FOUND_SAMPLE_WITH_STATUS_WARNING:return n&&!t[N.JY.USE_SAMPLES_WITH_STATUS_WARNINGS]
default:return n}})),tagErrors:r,registryErrors:i,registryWarnings:[],otherErrors:s,otherWarnings:[]})}function hasUnresolvedErrors(e,t){const n=getUnresolvedErrors(e,t)
return Boolean(n.length)}function getRowsToSkip(e,t){if(!e||e.state!==N.PX.COMPLETED)return[]
const n=getUnresolvedErrors(e,t).map((e=>e.row))
return i.default.uniq(n)}const D={[N.Ol.INVALID_STRUCTURED_TABLE_TAG_VALUE]:e=>`Invalid value for field ${e.fieldName}: "${e.invalidTypedValue?(0,m.Gh)(e.invalidTypedValue):""}"`}
function getErrorMessages(e,t){const{itemNameErrors:n,tagErrors:a,registryErrors:i,registryWarnings:r,otherErrors:o,otherWarnings:l}=e,c=new Map
!function addItemNameErrorMessages(e,t,n){t.forEach((({row:t,errorMessage:a,errorCode:i})=>{const s=n[N.JY.USE_EXISTING_CONTAINERS]&&canUseExistingContainers(i)||n[N.JY.USE_NON_EMPTY_CONTAINERS]&&canUseNonEmptyContainers(i)||n[N.JY.USE_SAMPLES_WITH_STATUS_WARNINGS]&&canUseSamplesWithStatusWarnings(i)||!1,r=!N.TQ.includes(i)
e.has(t)||e.set(t,[])
const o={message:a,resolved:s,icon:r?"error":"warning"},l=e.get(t)
l?l.push(o):e.set(t,[o])}))}(c,n,t)
!function addTagErrorMessages(e,t,n){t.forEach((({row:t,errorMessage:a,errorCode:i})=>{const s=n[N.JY.REPLACE_LINK_WITH_TEXT]&&canApplyReplaceLinkWithText(i)||!1
e.has(t)||e.set(t,[])
e.get(t).push({message:a,resolved:s,icon:"error"})}))}(c,a,t)
!function addOtherErrorMessages(e,t){t.forEach((t=>{const{row:n,errorCode:a,errorMessage:i}=t
let s
s=D[a]?D[a](t):i
e.has(n)||e.set(n,[])
e.get(n).push({message:s,resolved:!1,icon:"error"})}))}(c,o)
!function addOtherWarningMessages(e,t){t.forEach((t=>{e.has(t.row)||e.set(t.row,[])
e.get(t.row).push({message:t.errorMessage,resolved:!1,icon:"warning"})}))}(c,l)
if(!hasUnresolvedErrors({itemNameErrors:n,registryErrors:[],registryWarnings:[],otherErrors:o,otherWarnings:l,tagErrors:a},t)){r.forEach((({row:e,errorCode:t,errorMessage:n})=>{(0,s.hu)(t===N.Ol.REGISTRY_ERROR,"Expected to receive RowErrorCode.REGISTRY_ERROR")
c.has(e)||c.set(e,[])
c.get(e).push({message:n,icon:"warning",resolved:!1})}))
i.forEach((({row:e,errorCode:t,errorMessage:n})=>{(0,s.hu)(t===N.Ol.REGISTRY_ERROR,"Expected to receive RowErrorCode.REGISTRY_ERROR")
c.has(e)||c.set(e,[])
c.get(e).push({message:n,icon:"error",resolved:!1})}))}return c}function getFormattedErrors(e,t){const n=getErrorMessages(e,t),s=[]
for(const[e,t]of n){const[n,r]=i.default.partition(t,i.default.property("resolved"))
s.push({row:e,unresolvedMessage:r.map(((t,n)=>a.createElement("div",{key:`${e}|${n}`},_getMessageSpan(t.message,t.icon),a.createElement("br",null)))),resolvedMessage:n.map(((t,n)=>a.createElement("div",{key:`${e}|${n}`},_getMessageSpan(t.message,t.icon),a.createElement("br",null))))})}return i.default.sortBy(s,"row")}function colNumToExcelId(e){let t,n="",a=e+1
for(;a>0;){t=(a-1)%26
n=String.fromCharCode(65+t)+n
a=Math.floor((a-t)/26)}return n}function getFieldName(e,t,n,a){var i
if(e===N.BA.FILENAME&&n)return a?`${(0,C.kC)((0,C.E2)(a))} name`:"Entity name"
if(e===N.BA.RESIDUES){const e=getTagSchema(t),n=null!==(i=null==e?void 0:e.folderItemType)&&void 0!==i?i:a
if(n)return o._6(0,(0,C.kC)(d.vN(n)))}return n&&[N.BA.STORABLE_NAME,N.BA.BARCODE].includes(e)?(0,C.kC)(`Container ${N.zw[e]}`.toLowerCase()):N.zw[e]}function getFieldHelpText(e,t,n){var a
if(e===N.BA.RESIDUES){const e=getTagSchema(t),i=null!==(a=null==e?void 0:e.folderItemType)&&void 0!==a?a:n
if(i)return`The ${o._6(0,d.vN(i))} for the ${(0,C.E2)(i)}.`}(0,s.Gp)(N.Hf.hasOwnProperty(e),`Expected a description for column type ${e}`)
return N.Hf[e]}function getErrorForCreatingPolymer(e,t,n){const a=e.filter((({type:e})=>e===N.BA.RESIDUES)).length,i=e.filter((({type:e})=>e===N.BA.HELM)).length,s=e.filter((({type:e})=>e===N.BA.IDT)).length,l=e.filter((({type:e})=>e===N.BA.CUSTOM_MOD_SYNTAX)).length
if(n){const e=['"Bases"','"HELM"',r.ZP.MOLBIO_ENABLE_IDT_SYNTAX&&'"IDT"',r.ZP.MODBIO_ENABLE_CUSTOM_SYNTAXES&&'"Custom Notation"'].filter((e=>Boolean(e)))
if(0===o.Sm([a,i,s,l]))return`One column of type ${(0,C.Dw)(e,"or")} is required.`
if(a>1)return'There cannot be more than one "Bases" field.'
if(i>1)return'There cannot be more than one "HELM" field.'
if(s>1)return'There cannot be more than one "IDT" field.'
if(l>1)return'There cannot be more than one "Custom Notation" field.'
if(o.Sm([a,i,s,l])>1)return`Only one of columns ${(0,C.Dw)(e)} can be specified.`}else if(t){if(0===a)return'A column of type "Bases" is required.'
if(a>1)return'There cannot be more than one "Bases" field.'}return null}function getErrorForChemicalStructureColumns(e,t,n=!1){if(t){const t=e.filter((({type:e})=>e===N.BA.SMILES)).length,a=e.filter((({type:e})=>e===N.BA.MOLFILE)).length
if(n&&0===o.Sm([t,a]))return'One column of type "SMILES" or "Molfile" is required.'
if(t>1)return'There cannot be more than one "SMILES" field.'
if(a>1)return'There cannot be more than one "Molfile" field.'
if(o.Sm([t,a])>1)return'Only one of columns "SMILES" and "Molfile" can be specified.'}return null}function getPolymerColumnTypes(e,t){return i.default.compact([e&&N.BA.RESIDUES,t&&N.BA.HELM,t&&r.ZP.MOLBIO_ENABLE_IDT_SYNTAX&&N.BA.IDT,t&&r.ZP.MODBIO_ENABLE_CUSTOM_SYNTAXES&&r.ZP.MODBIO_CUSTOM_SYNTAX_NAMES.length>0&&N.BA.CUSTOM_MOD_SYNTAX])}function getMoleculeColumnTypes(e){return r.ZP.CHEMISTRY_ENABLE_MOLECULE&&e?N.AQ:[]}function getRequiredFieldError(e,t,n,a,i){for(const s of e){let e=null
const r=t.filter((({type:e})=>e===s)).length,o=getFieldName(s,n,a,i)
0===r?e=`A column of type "${o}" is required.`:r>1&&(e=`There must be exactly one "${o}" field.`)
if(e)return e}return null}function getSampleControlRolesPropagationWarning(e,t){if(r.ZP.INVENTORY_ENABLE_SAMPLE_CONTROL_FEATURES!==p.F.V1||null==e)return null
if(!e.some((({type:e})=>N.$h.includes(e))))return null
const n=t===N.pt.TRANSFER_STORABLES?"those of the destination containers":"the created containers"
return`Any sample owners and ${(0,u.EX)()} of the source containers will be added to ${n}.`}function isImportTypeForSamples(e){return[N.pt.SAMPLES,N.pt.UPDATE_SAMPLES].includes(e)}function isForUpdateFields(e){return[N.pt.UPDATE_BIOENTITIES,N.pt.UPDATE_SAMPLES,N.pt.UPDATE_CONTAINERS,N.pt.UPDATE_PLATES,N.pt.UPDATE_BOXES,N.pt.UPDATE_LOCATIONS].includes(e)}function isForUpdateFieldsWithCustomFields(e){return[N.pt.UPDATE_BIOENTITIES,N.pt.UPDATE_SAMPLES].includes(e)}function doesImportTypeSupportClearingSampleRoles(e){return[N.pt.UPDATE_CONTAINERS,N.pt.TRANSFER_STORABLES].includes(e)}function isBatchSchemaRequired(e,t){return isImportTypeForSamples(e)||t[N.JY.IMPORT_BATCHES]}function canOverrideTimeout(){const e=A.Z.currentUser()
return E.Z.get(N.tB.CAN_OVERRIDE_TIMEOUT)||e&&e.admin}function getDerivedColumnsMapping(e){const t={}
for(const n of e)t[n.columnTransform]=n.type
return t}function shouldCheckDerivedColumns(e){return e.some((({type:e})=>N.xQ.includes(e)))}function getImportEntityType(e,t){const n=getTagSchema(e),a=null!=n?(0,b.E5)(n):null
return null!=t?t:a}},520497:(e,t,n)=>{n.d(t,{Z:()=>ChemicalStructureSaltsSampleData})
var a=n(692013),i=n(989526),s=n(271359)
function ChemicalStructureSaltsSampleData(e){return i.createElement("div",null,i.createElement("span",{className:(0,a.iv)(r.derivedValue)},e.derivedValue),i.createElement("br",null))}const r=a.mM.create({derivedValue:{color:s.Rl,fontWeight:"bold"}})},111911:(e,t,n)=>{n.d(t,{Z:()=>TerminalProbesSampleData})
var a=n(692013),i=n(989526),s=n(232606),r=n(955836),o=n(271359),l=n(808844),c=n(372721)
function TerminalProbesSampleData(e){var t
const n=e.columnTransform===c.Mn.IDT_3MOD?r.cG.THREE:r.cG.FIVE,o=null!==(t=e.originalValues[c.BA.CUSTOM_MOD_SYNTAX])&&void 0!==t?t:e.originalValues[c.BA.IDT];(0,s.hu)(void 0!==o,"Expected to find IDT or Custom Notation column in original values")
const u=(0,l.fk)(o,23,n===r.cG.FIVE?l.U5.BACK:l.U5.FRONT),p=u.indexOf(e.derivedValue);(0,s.hu)(-1!==p,"Terminal probe not found in original string.")
return i.createElement("p",{className:(0,a.iv)(d.paragraph)},i.createElement("span",{className:(0,a.iv)(d.derivedValue)},e.derivedValue),` from "${u.slice(0,p)}`,i.createElement("span",{className:(0,a.iv)(d.highlight)},e.derivedValue),`${u.slice(p+e.derivedValue.length,u.length)}"`)}const d=a.mM.create({derivedValue:{color:o.Rl,fontWeight:"bold"},highlight:{background:"rgba(235, 135, 21, 0.2)"},paragraph:{color:o.pp}})},778877:(e,t,n)=>{n.d(t,{Z:()=>_,d:()=>getEnabledBioentityImportOptions})
var a=n(989526),i=n(531041),s=n(814099),r=n(323539),o=n(955836),l=n(234868),c=n(459830),d=n(291689),u=n(776105),p=n(404565),m=n(808844),E=n(661978),h=n(372721),g=n(301251),S=n(939092)
function getInputContainableType({options:e,selectedSchemaIds:t}){if(e[h.JY.IMPORT_BATCHES])return c.BATCH
const n=(0,S.My)(t)
return n&&n.isContainable?c.BIOENTITY_MIXIN:null}function getEnabledBioentityImportOptions({options:e,selectedSchemaIds:t,schemalessCreationEntityType:n}){const a=[],{tagSchemaId:i}=t,o=(0,S.My)(t);(0,u.Z)()&&o&&o.batchSchemaId&&a.push(h.JY.IMPORT_BATCHES);(0,r.cr)({feature:s.TD.INVENTORY_IMPORT})&&getInputContainableType({options:e,selectedSchemaIds:t})&&a.push(h.JY.IMPORT_CONTAINERS);(null!=i&&(0,S.DA)(i)||n===c.SequenceSubtype.SEQUENCE)&&a.push(h.JY.ARE_SEQUENCES_CIRCULAR)
return a}function ImportBatchesOption(e){return a.createElement(g.Z,{helpContent:a.createElement("div",null,"If this option is selected, a batch will be created for each entity."),isChecked:e.options[h.JY.IMPORT_BATCHES],name:h.JY.IMPORT_BATCHES,text:"Create batches with entities"})}class ImportContainersOption extends a.Component{constructor(){super(...arguments)
this._handleChangeContainerSchema=e=>{E.y$({selectedContainerSchemaId:e.id})}}render(){const{options:e,selectedSchemaIds:t}=this.props,{containerSchemaId:n,tagSchemaId:i}=t,s=getInputContainableType(this.props)||c.BATCH
return a.createElement("div",null,a.createElement(g.Z,{helpContent:a.createElement("div",null,"If this option is selected, the new ",(0,m.B_)(s)," will be transferred to containers. If the containers do not exist, they will be created."),isChecked:e[h.JY.IMPORT_CONTAINERS],name:h.JY.IMPORT_CONTAINERS,text:`Transfer ${(0,m.B_)(s)} to new or existing containers`}),i&&e[h.JY.IMPORT_CONTAINERS]&&a.createElement(p.ZP,{onChange:this._handleChangeContainerSchema,registryId:(0,S.My)(t).registryId,selectedContainerSchemaId:n,shouldShowNoSchemaOption:!1}))}}class BioentityImportOptions extends a.Component{UNSAFE_componentWillReceiveProps(e){i.default.difference(this.props.enabledOptions,e.enabledOptions).forEach((e=>{this.props.options[e]&&E.Ov({[e]:!1})}))}shouldShowNucleotideTypeToggle(){switch(l.ZP.getState().schemalessCreationEntityType){case c.SequenceSubtype.SEQUENCE:case c.SequenceSubtype.RNA_SEQUENCE:case c.SequenceSubtype.DNA_OLIGO:case c.SequenceSubtype.RNA_OLIGO:return!0
default:return!1}}handleNucleotideTypeToggleChange(e){const t=l.ZP.getState().schemalessCreationEntityType
t===c.SequenceSubtype.SEQUENCE||t===c.SequenceSubtype.RNA_SEQUENCE?E.y$({schemalessCreationEntityType:c.LONG_SEQUENCE_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE[e]}):t!==c.SequenceSubtype.DNA_OLIGO&&t!==c.SequenceSubtype.RNA_OLIGO||E.y$({schemalessCreationEntityType:c.OLIGO_NUCLEOTIDE_TYPE_TO_SEQUENCE_SUBTYPE[e]})}render(){const e=this.props.enabledOptions.includes(h.JY.IMPORT_BATCHES),t=this.props.enabledOptions.includes(h.JY.IMPORT_CONTAINERS),n=l.ZP.getState().schemalessCreationEntityType
return a.createElement("div",null,this.shouldShowNucleotideTypeToggle()&&a.createElement(d.l,{nucleotideType:n===c.SequenceSubtype.SEQUENCE||n===c.SequenceSubtype.DNA_OLIGO?o.Wy.DNA:o.Wy.RNA,onChangeSelection:e=>{this.handleNucleotideTypeToggleChange(e)}}),this.props.enabledOptions.includes(h.JY.ARE_SEQUENCES_CIRCULAR)&&a.createElement("div",{className:"u-moderate-spacing-bottom"},a.createElement("label",null,"DNA Sequence settings"),a.createElement(g.Z,{helpContent:a.createElement("div",null,"If this option is selected, imported DNA sequences will be circular. If not, imported DNA sequences will be linear."),isChecked:this.props.options[h.JY.ARE_SEQUENCES_CIRCULAR],name:h.JY.ARE_SEQUENCES_CIRCULAR,text:"Import circular DNA sequences"})),(e||t)&&a.createElement("label",null,"Import samples"),e&&a.createElement(ImportBatchesOption,{options:this.props.options}),t&&a.createElement(ImportContainersOption,{options:this.props.options,selectedSchemaIds:this.props.selectedSchemaIds}))}}const _=BioentityImportOptions},336489:(e,t,n)=>{n.d(t,{Z:()=>$})
var a=n(692013),i=n(989526),s=n(232606),r=n(348920),o=n(459830),l=n(144601),c=n(256605),d=n(273155),u=n(477956),p=n(922805),m=n(776105),E=n(216101),h=n(75804),g=n(166310),S=n(383628),_=n(954587),T=n(334148),I=n(676113),A=n(205986),f=n(808844),y=n(556543),C=n(368734),R=n(769784),b=n(751512),N=n(91092),O=n(954240),L=n(476604),P=n(865486),D=n(924982)
const v=R.Ps`
  query SpreadsheetColumnsMappingDropdownQuery(
    $tagSchemaId: StrictString
    $assaySchemaId: StrictString
    $uploadFlow: StrictString
  ) @skipAudit {
    spreadsheetColumnsMappings(
      tagSchemaId: $tagSchemaId
      assaySchemaId: $assaySchemaId
      uploadFlow: $uploadFlow
    ) {
      ... on SpreadsheetColumnsMappingNode {
        ...SpreadsheetColumnsMappingGraphQL
      }
    }
  }
  ${(0,N.f)("SpreadsheetColumnsMapping").fragment}
`
const M=function QueryingSpreadsheetColumnsMappingDropdown(e){var t,n
const a=(0,b.IJ)(v,{variables:{tagSchemaId:e.tagSchemaId,assaySchemaId:e.assaySchemaId,uploadFlow:e.uploadFlow}})
switch(a.type){case b.NI.ERROR:return null
case b.NI.PENDING:return i.createElement(L.b,null)
case b.NI.SUCCESS:{const s=a.data.spreadsheetColumnsMappings.map(((t,n)=>i.createElement(D.Z,{key:n,value:t,onSelect:e.handleSelect},t.name)))
return i.createElement(O.ZP,{displayName:null!==(n=null===(t=e.selectedMapping)||void 0===t?void 0:t.name)&&void 0!==n?n:"Select a mapping",menu:i.createElement(P.ZP,{height:P.ZP.HEIGHTS.MEDIUM,width:P.ZP.WIDTHS.MEDIUM},s)})}default:(0,s.Gp)(!1,"Unhandled query result type")
return null}}
var B=n(661978),U=n(372721),F=n(301251),w=n(939092),k=n(767807),x=n.n(k),Z=n(531041),G=n(672725),H=n(314670)
function getColumnErrors(e,t,n){if(e.errorMessage)return[e.errorMessage]
const{columns:a}=e
if(!a)return[]
const i=t(a,n)
if(i)return[i]
const s=[],r=w.AM(a)
r&&s.push(r)
const o=w.xd(a)
o&&s.push(o)
return s}function getWarningMessage(e,t){return e.type===U.BA.CUSTOM_FIELD?"Custom fields will not appear on all entities of this schema. Consider adding this field to the schema.":null}class ColumnErrorsBanner extends i.Component{render(){const e=getColumnErrors(this.props.fileData,this.props.getRequiredColumnsError,this.props.requiredColumnsErrorState),t=function getColumnWarnings(e,t){return e.columns?Z.default.chain(e.columns).map((e=>getWarningMessage(e))).compact().uniq().value():[]}(this.props.fileData,this.props.importType)
return e.length||t.length?i.createElement("div",{className:"errorBanner u-small-spacing-bottom"},e.map(((e,t)=>i.createElement("div",{className:"u-flex-display",key:`error-${t}`},i.createElement(G.Z,{className:"u-mini-spacing-right u-flex-none"}),i.createElement("div",null,e)))),t.map(((e,t)=>i.createElement("div",{className:"u-flex-display",key:`warning-${t}`},i.createElement(H.Z,{className:"u-mini-spacing-right u-flex-none"}),i.createElement("div",null,e))))):null}}const W=ColumnErrorsBanner
var q=n(125440),V=n(361974),J=n(119059)
class SpreadsheetColumnsTable extends i.Component{constructor(){super(...arguments)
this._getMenuItemName=e=>w.Ts(e,this.props.selectedSchemaIds,this.props.forInventoryFileCreate,this.props.schemalessCreationEntityType)
this._getMenuItemHelpText=e=>w.sH(e,this.props.selectedSchemaIds,this.props.schemalessCreationEntityType)
this._getPopoverContent=()=>{const e=this.props.columnTypes.map(((e,t)=>i.createElement("p",{key:t},i.createElement("strong",null,this._getMenuItemName(e),": "),this._getMenuItemHelpText(e))))
return i.createElement("div",null,i.createElement("p",null,"This is how each cell in a column will be interpreted."),e)}
this._handleChangeColumn=(e,t,{newSchemaField:n,newTableColumnName:a,newSampleType:i,newCustomSyntaxName:s}={})=>{const r=x()(this.props.columns,{[e]:{type:{$set:t},schemaField:{$set:n},tableColumnName:{$set:a},sampleType:{$set:i},customSyntaxName:{$set:s}}})
this.props.setColumns(r)}
this.renderTableBodyContents=()=>this.props.columns?this.props.columns.map(((e,t)=>i.createElement("tr",{key:t},i.createElement("td",{className:"bulk-import--column-text-column"},i.createElement("span",{className:"bulk-import--table-text"},w.k$(t))),i.createElement("td",{className:"bulk-import--column-text-column"},i.createElement("span",{className:"bulk-import--table-text"},e.name)),i.createElement("td",{className:"bulk-import--column-type-column"},i.createElement(J.Z,{className:getWarningMessage(e,this.props.importType)?"selectDropdown--warning":null,column:e,columnIdx:t,columns:this.props.columns,columnTypes:this.props.columnTypes,dataTableKeyFields:this.props.dataTableKeyFields,getMenuItemName:this._getMenuItemName,getValidSchemaFieldIds:this.props.getValidSchemaFieldIds,importType:this.props.importType,onChangeColumn:this._handleChangeColumn,selectedSchemaIds:this.props.selectedSchemaIds,tableColumnNames:this.props.tableColumnNames}))))):i.createElement("tr",null,i.createElement("td",{className:"text-center",colSpan:2},i.createElement("div",{className:"u-small-padding"},i.createElement(L.Z,null))))}render(){return i.createElement("table",{className:"table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,"Column"),i.createElement("th",null,"Column Name"),i.createElement("th",null,"Column Type",i.createElement(q.Z,{renderContent:this._getPopoverContent,iconClassName:"bulkImportModal-helpIcon u-tiny-spacing-left",placement:V.ZH.BOTTOM})))),i.createElement("tbody",null,this.renderTableBodyContents()))}}const K=SpreadsheetColumnsTable
var Y=n(299082)
function getHelpTextForDeleteEmptyFields(e){const t=["Schema Field values"]
e===U.pt.UPDATE_BIOENTITIES&&t.push("bioentity contents")
w.cp(e)&&t.push("Custom Fields")
return`If this option is selected, ${(0,f.Dw)(t)} will be cleared from empty cells. Otherwise, empty cells are ignored.`}class MapColumnNamesModalPane extends i.Component{constructor(){super(...arguments)
this.state={allFolders:null,selectedMapping:null,spreadsheetColumnsMappingWarnings:new Set}
this._handleSelectorLoadAllFolders=e=>{this.setState({allFolders:e})
const t=e.filter((e=>E.isRegistry(e.source)))
1===t.length&&B.y$({linkFolderIds:[t[0].api_identifier]})}
this._handleSelectLinkFolders=e=>{const t=e.map((e=>e.api_identifier))
B.y$({linkFolderIds:t})}
this._handleSetTimeLimit=e=>{B.ui(60*e.target.numericValue)}
this._handleGoToNextPane=()=>{if(this.props.customHandleGoToNextPaneFn)this.props.customHandleGoToNextPaneFn(this.props)
else{this.props.onValidateSpreadsheet()
B.mX()}}
this._getSchemaFieldFromId=(e,t)=>{const n=null==e?void 0:e.allFields
return null==n?void 0:n.find((e=>e.apiId===t))}
this._handleSelectSpreadsheetMappings=e=>{var t,n
const a=e.individualColumnMappings
this.setState({selectedMapping:e})
const i={}
for(const e of a)i[e.columnName]={type:e.columnType,schemaFieldId:(null===(t=e.schemaField)||void 0===t?void 0:t.apiId)?null===(n=e.schemaField)||void 0===n?void 0:n.apiId:null}
const s=this._getValidColumnTypes(),r=this.props.fileData.columns.map((e=>e.name)),o=[],l=new Set
for(const e of r)if(Object.keys(i).includes(e))if(i[e].type===c.yT.SCHEMA_FIELD){const t=(0,w.m9)(U.BA[c.yT.SCHEMA_FIELD],this.props.selectedSchemaIds),n=this._getSchemaFieldFromId(t,a.find((t=>t.columnName===e)).schemaField.apiId)
if(n)o.push({name:e,type:i[e].type,schemaField:n})
else{l.add(`Column name "${e}" matches a schema field that is not available. Defaulted to ignore; please select the intended column type.`)
o.push({name:e,type:U.BA.IGNORE})}}else if(s.includes(U.BA[i[e].type]))o.push({name:e,type:i[e].type})
else{l.add(`Column type "${i[e].type}" that matches column name "${e}" is not an available column type. Defaulted to ignore; please select the intended column type.`)
o.push({name:e,type:U.BA.IGNORE})}else{o.push({name:e,type:U.BA.IGNORE})
l.add(`No saved column type found matching column name "${e}". Defaulted to ignore; please select the intended column type.`)}Object.keys(i).every((e=>r.includes(e)))||l.add("Some saved column mappings were not applied. Check to make sure all intended columns are listed.")
B.Bx(o)
this.setState({spreadsheetColumnsMappingWarnings:l})}
this._getValidColumnTypes=()=>this.props.getValidColumnTypes({registryImportSettings:this.props.registryImportSettings,selectedSchemaIds:this.props.selectedSchemaIds,options:this.props.options,dataTableKeyFields:this.props.dataTableKeyFields,schemalessCreationEntityType:this.props.schemalessCreationEntityType}).filter((e=>(0,m.Z)()||![U.BA.BATCH_NAME,U.BA.INPUT_BATCH_NAME,U.BA.BATCH_SCHEMA_FIELD].includes(e)))
this._hasLinkColumns=()=>this.props.fileData.columns&&this.props.fileData.columns.some((e=>w.RJ(e.type)===U.BA.SCHEMA_FIELD&&y.Iv(e.schemaField.fieldType)))
this._isWaitingForLinkFoldersToLoad=()=>!(!this.props.shouldResolveLinkColumns||!this._hasLinkColumns())&&null==this.state.allFolders
this.shouldDisplayFolderSelector=()=>this.props.importType===U.pt.UPDATE_MIXTURE_INGREDIENTS||this.props.shouldResolveLinkColumns&&this._hasLinkColumns()
this.shouldDisplaySavedMappingsDropdown=()=>r.ZP.REGISTRY_ENABLE_SPREADSHEET_COLUMNS_MAPPING&&Boolean(this.props.savedMappingsConfig)
this.shouldDisplaySavedMappingsWarnings=()=>r.ZP.REGISTRY_ENABLE_SPREADSHEET_COLUMNS_MAPPING&&this.state.spreadsheetColumnsMappingWarnings.size>0
this.shouldDisplayUpdateExistingColumnsBanner=()=>w.tF(this.props.importType)&&this.props.fileData.columns&&this.props.fileData.columns.some((e=>[U.BA.CUSTOM_FIELD,U.BA.SCHEMA_FIELD].includes(w.RJ(e.type))))
this.sampleControlPropagationWarning=()=>{const e=w.H3(this.props.fileData.columns,this.props.importType)
return e?i.createElement("div",{className:"u-small-spacing-bottom"},i.createElement(g.Z,{key:"sample-control"},e)):null}
this.shouldDisplayMonomerMapping=()=>{var e
const t=this.props.selectedSchemaIds.tagSchemaId,n=t&&h.Z.getTagSchemaById(t),a=Boolean(n&&(n.sequenceType===c.Ts.RNA_SEQUENCE||n.sequenceType===c.Ts.RNA_OLIGO)),i=this.props.schemalessCreationEntityType===o.SequenceSubtype.RNA_SEQUENCE||this.props.schemalessCreationEntityType===o.SequenceSubtype.RNA_OLIGO,s=[U.pt.INVENTORY_FILES,U.pt.REGISTRY_ENTITIES,U.pt.UPDATE_BIOENTITIES].includes(this.props.importType),l=null===(e=this.props.fileData.columns)||void 0===e?void 0:e.find((e=>e.type===U.BA.RESIDUES))
return Boolean(r.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES&&(a||i)&&s&&l)}}static configure({getValidColumnTypes:e,getRequiredColumnsError:t,onValidateSpreadsheet:n,getValidSchemaFieldIds:a,shouldResolveLinkColumns:i=!0,linkItemsFolderSelectorLabel:r="Look for linked items in:",linkItemsFolderSelectorDescription:o="Choose any folders that we should search in to find your item links. Entities that will be created from the spreadsheet are considered automatically.",customHandleGoToNextPaneFn:l,savedMappingsConfig:c}){(0,s.hu)(null!=e&&null!=t&&null!=n,"MapColumnNamesModalPane is incorrectly configured.")
return{getValidColumnTypes:e,getRequiredColumnsError:t,onValidateSpreadsheet:n,getValidSchemaFieldIds:a,shouldResolveLinkColumns:i,linkItemsFolderSelectorLabel:r,linkItemsFolderSelectorDescription:o,customHandleGoToNextPaneFn:l,savedMappingsConfig:c}}render(){var e,t
const n={options:this.props.options,registryImportSettings:this.props.registryImportSettings,selectedSchemaIds:this.props.selectedSchemaIds,dataTableKeyFields:this.props.dataTableKeyFields,schemalessCreationEntityType:this.props.schemalessCreationEntityType}
return i.createElement(A.ZP,{enableRedesign:!1,buttons:[{key:"back",text:"Back",onClick:B.$s},{key:"next",text:"Next",style:T.ZJ.SECONDARY,onClick:this._handleGoToNextPane,disabled:this.props.fileData.state!==U.PX.COMPLETED||this._isWaitingForLinkFoldersToLoad()||getColumnErrors(this.props.fileData,this.props.getRequiredColumnsError,n).length>0,dataTestAttrs:{component:"MapColumnNamesModal",element:"footerButton",key:C.Z.NEXT}}],...this.props.modalProps},this.shouldDisplaySavedMappingsDropdown()&&i.createElement(i.Fragment,null,i.createElement("div",{className:(0,a.iv)(X.dropdownTitle)},"Import column mapping"),i.createElement(M,{assaySchemaId:null!==(e=this.props.selectedSchemaIds.resultSchemaId)&&void 0!==e?e:null,tagSchemaId:null!==(t=this.props.selectedSchemaIds.tagSchemaId)&&void 0!==t?t:null,uploadFlow:this.props.savedMappingsConfig.uploadFlow,handleSelect:this._handleSelectSpreadsheetMappings,selectedMapping:this.state.selectedMapping})),i.createElement("p",null,"Here's how we interpreted your spreadsheet header. Does this look correct?"),i.createElement(K,{forInventoryFileCreate:this.props.forInventoryFileCreate,columnTypes:this._getValidColumnTypes(),columns:this.props.fileData.columns,importType:this.props.importType,setColumns:B.Bx,selectedSchemaIds:this.props.selectedSchemaIds,tableColumnNames:this.props.tableColumnNames,dataTableKeyFields:this.props.dataTableKeyFields,getValidSchemaFieldIds:this.props.getValidSchemaFieldIds,schemalessCreationEntityType:this.props.schemalessCreationEntityType}),i.createElement(W,{fileData:this.props.fileData,getRequiredColumnsError:this.props.getRequiredColumnsError,importType:this.props.importType,requiredColumnsErrorState:n}),this.shouldDisplaySavedMappingsWarnings()&&i.createElement("div",{className:"u-small-spacing-bottom"},Array.from(this.state.spreadsheetColumnsMappingWarnings).map(((e,t)=>i.createElement(_.Z,{key:t},e)))),this.sampleControlPropagationWarning(),this.shouldDisplayUpdateExistingColumnsBanner()&&i.createElement("div",{className:"u-small-padding-bottom"},i.createElement(S.ZP,{bannerType:S.ct.INFO,supportingInfo:"The values in your uploaded spreadsheet will overwrite any existing values in the selected fields."})),this.shouldDisplayFolderSelector()&&i.createElement("div",{className:"form-group"},i.createElement("label",null,this.props.linkItemsFolderSelectorLabel),i.createElement("div",{className:"faded u-small-padding-bottom"},this.props.linkItemsFolderSelectorDescription),i.createElement(l.Z,{onLoadAllFolders:this._handleSelectorLoadAllFolders,onSelectFolders:this._handleSelectLinkFolders,selectedFolderIds:this.props.linkFolderIds,showInventory:!0})),this.props.importType===U.pt.UPDATE_BIOENTITIES&&i.createElement(F.Z,{helpContent:i.createElement("div",null,"If this option is selected, all existing aliases for matching entities will be deleted."),isChecked:this.props.options[U.JY.DELETE_EXISTING_ALIASES],name:U.JY.DELETE_EXISTING_ALIASES,text:"Delete existing aliases from matching entities"}),w.tF(this.props.importType)&&i.createElement(F.Z,{helpContent:i.createElement("div",null,getHelpTextForDeleteEmptyFields(this.props.importType)),isChecked:this.props.options[U.JY.DELETE_EMPTY_FIELDS],name:U.JY.DELETE_EMPTY_FIELDS,text:"Delete or clear values for empty cells"}),this.props.importType===U.pt.UPDATE_MIXTURE_INGREDIENTS&&i.createElement(F.Z,{helpContent:i.createElement("div",null,"If this option is selected, empty cells for Catalog Identifier, Source, and Amount columns will clear those same values on existing ingredients. Otherwise, empty cells are ignored."),isChecked:this.props.options[U.JY.CLEAR_INGREDIENT_FIELDS_FOR_EMPTY_CELLS],name:U.JY.CLEAR_INGREDIENT_FIELDS_FOR_EMPTY_CELLS,text:"Clear ingredient fields for empty cells"}),(0,p.Eq)(u.F.V2)&&w.A3(this.props.importType)&&i.createElement(F.Z,{helpContent:i.createElement("div",null,`If this option is selected, empty cells will result in\n                  ${(0,d.EX)()} and sample owners\n                  being cleared${this.props.importType===U.pt.TRANSFER_STORABLES?" from destination containers":""}. Otherwise, empty cells are ignored.`),isChecked:this.props.options[U.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS],name:U.JY.CLEAR_SAMPLE_ROLES_FOR_EMPTY_CELLS,text:`Clear ${(0,d.EX)()} and sample owners for empty cells`}),this.shouldDisplayMonomerMapping()&&i.createElement(Y.Z,{onSetMonomerMapping:B.C5,sectionHeader:i.createElement("div",{className:"u-small-spacing-bottom"},"Additionally, please specify how Benchling should interpret the nucleotide bases in your spreadsheet.")}),w.fT()&&i.createElement("div",{className:"u-small-spacing-top"},i.createElement("span",null,"Optionally set a time limit, up to 30 minutes, for the import flow."),i.createElement(I.Z,{max:U.nq,onChange:this._handleSetTimeLimit,placeholder:"Time limit (minutes)",value:this.props._timeLimit?this.props._timeLimit/60:this.props._timeLimit})))}}const X=a.mM.create({dropdownTitle:{fontWeight:600}}),$=MapColumnNamesModalPane},299082:(e,t,n)=>{n.d(t,{Z:()=>MonomerMappingForm})
var a=n(989526),i=n(348920),s=n(256605),r=n(751512),o=n(256039),l=n(610641),c=n(818382)
function MonomerMappingTable({adenineMonomerId:e,cytosineMonomerId:t,guanineMonomerId:n,uracilMonomerId:r,onSetMonomerMapping:c,sectionHeader:d,disabled:u}){const[p,m]=(0,a.useState)({[s.TF.A]:e,[s.TF.C]:t,[s.TF.G]:n,[s.TF.U]:r});(0,a.useEffect)((()=>{c(p)}),[p,c])
return a.createElement(a.Fragment,null,d,a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("strong",null,"Nucleotide Base")),a.createElement("td",null,a.createElement("strong",null,"Interpret as")))),a.createElement("tbody",null,[["A / a",s.TF.A],["C / c",s.TF.C],["G / g",s.TF.G],["U / u",s.TF.U]].map((([e,t])=>a.createElement("tr",{key:e},a.createElement("td",{style:{width:"20%"}},e),a.createElement("td",null,a.createElement("div",{style:{width:"250px"}},a.createElement(l.FG,{fullWidth:!0,nameMaxLength:30,nucleotideComponent:o.Zp.BASE,filterMonomersPredicate:e=>i.ZP.MOLBIO_ENABLE_UT_FLEXIBILITY&&t===s.TF.U?[s.TF.U,s.TF.T].includes(e.naturalAnalogue):e.naturalAnalogue===t,selectedMonomerId:p[t],updateSelectedMonomerId:e=>{m({...p,[t]:e})},disabled:u})))))))))}function MonomerMappingForm({onSetMonomerMapping:e,monomerMapping:t,disabled:n,sectionHeader:i}){return a.createElement(r.ZP,{query:o.V,renderLoading:r.ZP.DEFAULT_RENDER_LOADING},(r=>a.createElement(MonomerMappingTable,{adenineMonomerId:(0,c.SE)(s.TF.A,r.monomers,t),cytosineMonomerId:(0,c.SE)(s.TF.C,r.monomers,t),guanineMonomerId:(0,c.SE)(s.TF.G,r.monomers,t),uracilMonomerId:(0,c.SE)(s.TF.U,r.monomers,t),onSetMonomerMapping:e,disabled:n,sectionHeader:i})))}},378045:(e,t,n)=>{n.d(t,{Z:()=>y})
var a=n(989526),i=n(477956),s=n(922805),r=n(432128),o=n(288108),l=n(383628),c=n(334148),d=n(476604),u=n(205986),p=n(368734),m=n(661978),E=n(372721),h=n(301251),g=n(939092),S=n(692013),_=n(253397),T=n(273155),I=n(28500),A=n(808844)
function ValidationErrors(e){var t,n
let i=e,s=!1,r=!1,o=new Set,c=[]
if((null===(t=e.errorData)||void 0===t?void 0:t.state)!==E.PX.FAILED&&(null===(n=e.errorData)||void 0===n?void 0:n.otherWarnings)){const t=e.errorData.otherWarnings.filter((e=>e.errorCode===E.Ol.SAMPLE_CONTROLS_IMPLICITLY_CHANGED)),n=e.errorData.otherWarnings.filter((e=>e.errorCode===E.Ol.NAME_TEMPLATE_USAGE_WARNING)),a=e.errorData.otherWarnings.filter((e=>e.errorCode!==E.Ol.SAMPLE_CONTROLS_IMPLICITLY_CHANGED&&e.errorCode!==E.Ol.NAME_TEMPLATE_USAGE_WARNING))
if(a.length<e.errorData.otherWarnings.length){i={...e,errorData:{...e.errorData,otherWarnings:a}}
s=t.length>0
r=n.length>0
o=function getImplicitlyChangedSampleControlColumns(e){const t=e.flatMap((e=>"string"==typeof e.sampleControlColumnType?[e.sampleControlColumnType]:[]))
return new Set(t)}(t)
c=function getNameTemplateUsageInfos(e){return[...new Set(e.flatMap((e=>"string"==typeof e.itemType?[e.itemType]:[])))].map((t=>({itemType:t,overrodeCustomNames:e.filter((e=>e.itemType===t)).some((e=>"boolean"==typeof e.overrodeCustomName&&e.overrodeCustomName))})))}(n)}}const d=[...o.has(E.BA.SAMPLE_RESTRICTION_STATUS)?["restriction status"]:[],...o.has(E.BA.SAMPLE_OWNERS)?["sample owners"]:[],...o.has(E.BA.SAMPLE_AUTHORIZED_USERS)?[(0,T.EX)()]:[]]
return a.createElement(a.Fragment,null,s&&a.createElement("div",{className:(0,S.iv)(f.marginBottom15px)},a.createElement(l.ZP,{bannerType:l.ct.INFO,text:"Sample controls for some destination containers will be updated",supportingInfo:`You didn't specify all sample control fields in your spreadsheet. By default we'll add any existing sample controls from a source container to its destination container for unspecified fields${d.length>0?` (${(0,A.Dw)(d)})`:""}.`})),r&&c.map((({itemType:e,overrodeCustomNames:t})=>a.createElement("div",{className:(0,S.iv)(f.marginBottom15px),key:e},a.createElement(I.Z,{isPlural:!0,itemDescription:e,supportingInfo:t&&`The values specified in the ${e} name column for these items will be ignored.`})))),a.createElement(_.Z,{...i}))}const f=S.mM.create({marginBottom15px:{marginBottom:"15px"}})
class ShowErrorsModalPane extends a.Component{constructor(){super(...arguments)
this.getResolvableErrorSettings=()=>[{type:E.JY.REPLACE_LINK_WITH_TEXT,errorType:E.nX.TAG_ERRORS,renderCondition:this.props.enableReplaceLinkWithText,filter:g.Pf,text:"Use text value for any linked items that cannot be matched."},{type:E.JY.USE_EXISTING_CONTAINERS,errorType:E.nX.ITEM_NAME_ERRORS,renderCondition:!0,filter:g._A,text:"Transfer samples into existing containers"},{type:E.JY.USE_NON_EMPTY_CONTAINERS,errorType:E.nX.ITEM_NAME_ERRORS,renderCondition:!0,filter:g.ii,text:"Transfer samples into non-empty containers"},{type:E.JY.USE_SAMPLES_WITH_STATUS_WARNINGS,errorType:E.nX.ITEM_NAME_ERRORS,renderCondition:!0,filter:g.y8,text:(0,s.Eq)(i.F.V3)?"Override availability warnings":"Override authorization / availability warnings"}]
this.resolvableErrorStatuses=()=>this.getResolvableErrorSettings().reduce(((e,t)=>{e[t.type]=this.props.options[t.type]
return e}),{})
this.errorDataIsCompleted=e=>e.state===E.PX.COMPLETED
this.hasUnresolvedErrors=()=>null!=this.props.errorData&&this.errorDataIsCompleted(this.props.errorData)&&g.y5(this.props.errorData,this.resolvableErrorStatuses())
this.hasValidationPassed=()=>!(!this.props.errorData||this.props.errorData.state!==E.PX.COMPLETED)&&(this.props.options[E.JY.SKIP_ERRORS]||!this.hasUnresolvedErrors())
this.hasIncompleteErrors=()=>null!=this.props.errorData&&this.props.errorData.state===E.PX.COMPLETED
this.shouldShowOption=(e,t)=>this.errorDataIsCompleted(this.props.errorData)&&this.props.errorData[t].some((({errorCode:t})=>e(t)))
this.shouldShowSkipErrors=()=>r.Z.get(E.tB.SKIP_SPREADSHEET_ERRORS_ENABLED)||r.Z.get(E.tB.SOURCE_TYPE)===E.l5.SDF
this.getUnresolvedErrorsHelpText=()=>r.Z.get(E.tB.SKIP_SPREADSHEET_ERRORS_ENABLED)?" The rows without errors will be imported and you will receive an email with the omitted rows.":null
this.handleImportFromSpreadsheet=()=>{this.props.onImport()}}static configure({enableReplaceLinkWithText:e,enableSkipErrors:t,customHandleGoToPrevPaneFn:n}){return{enableReplaceLinkWithText:e,enableSkipErrors:t,customHandleGoToPrevPaneFn:n}}render(){var e,t,n,i,s
const r=this.props.isLastPane?"Import":"Next"
return a.createElement(u.ZP,{enableRedesign:!1,buttons:[{key:"back-from-error-pane-btn",text:"Back",onClick:()=>{this.props.customHandleGoToPrevPaneFn?this.props.customHandleGoToPrevPaneFn(this.props):m.$s()}},{key:"next-from-error-pane-btn",text:r,style:this.props.isLastPane?c.ZJ.PRIMARY:c.ZJ.SECONDARY,onClick:this.props.isLastPane?this.handleImportFromSpreadsheet:m.mX,disabled:!this.hasValidationPassed(),dataTestAttrs:{component:"ShowErrorsModal",element:"footerButton",key:this.props.isLastPane?p.Z.IMPORT:p.Z.NEXT}}],...this.props.modalProps},(null===(e=this.props.errorData)||void 0===e?void 0:e.state)===E.PX.STARTED?a.createElement("div",{className:"text-center"},a.createElement("div",{className:"u-small-padding"},a.createElement(d.Z,null)),a.createElement("p",{className:"faded u-text-uppercase"},"Validating...")):a.createElement("div",null,a.createElement(ValidationErrors,{spreadsheetType:_.u.SPREADSHEET,errorData:this.props.errorData,nextButtonText:r,resolvableErrorStatuses:this.resolvableErrorStatuses(),selectedTagSchemaId:null===(t=this.props.selectedSchemaIds)||void 0===t?void 0:t.tagSchemaId}),this.props.importType===E.pt.SAMPLES&&a.createElement("div",null,"Once samples are imported, check the popup message to copy a list of created sample names to the clipboard. We will also email you a list of created sample names."),a.createElement("div",{className:"showErrorsPane-options"},this.hasIncompleteErrors()&&this.getResolvableErrorSettings().map(((e,t)=>e.renderCondition&&this.shouldShowOption(e.filter,e.errorType)&&a.createElement(h.Z,{isChecked:this.props.options[e.type],name:e.type,text:e.text,key:t})))),this.props.enableSkipErrors&&(null===(n=this.props.errorData)||void 0===n?void 0:n.state)===E.PX.COMPLETED&&this.hasUnresolvedErrors()&&a.createElement("div",{className:"u-small-spacing-top"},a.createElement(l.ZP,{bannerType:l.ct.ERROR,text:"There are unresolved errors in your spreadsheet.",supportingInfo:this.shouldShowSkipErrors()&&a.createElement(h.Z,{className:"u-small-spacing-top",isChecked:this.props.options[E.JY.SKIP_ERRORS],name:E.JY.SKIP_ERRORS,text:a.createElement("span",null,a.createElement("b",null,"Skip rows with unresolved errors."),this.getUnresolvedErrorsHelpText())})})),(null===(s=null===(i=this.props.errorData)||void 0===i?void 0:i.registryWarnings)||void 0===s?void 0:s.some((e=>e.hasOwnProperty("primaryDuplicateItemApiId"))))&&a.createElement(o.Z,null,a.createElement("a",null,"What happens when my duplicate entities get merged?")),this.props.derivedColumnsData.state===E.PX.FAILED&&a.createElement(l.ZP,{bannerType:l.ct.WARNING,text:"We encountered an error while checking for additional mappings.",supportingInfo:"You can proceed with import, but note that data may be lost."})))}}const y=ShowErrorsModalPane},934109:(e,t,n)=>{n.d(t,{Z:()=>E})
var a=n(989526),i=n(232606),s=n(889234),r=n(416320),o=n(826516),l=n(103593),c=n(59860),d=n(334148),u=n(205986),p=n(368734),m=n(661978)
function _getSelectedSchemaIdAccessorKey(e){return`selected${e.charAt(0).toUpperCase()}${e.substr(1)}`}class StorableImportSettingsModalPane extends a.Component{constructor(){super(...arguments)
this._handleChangeRegistry=e=>{const t=e.target.value
m.y$({registryImportSettings:{registry:t}})}
this._handleChangeSchema=e=>{m.y$({[_getSelectedSchemaIdAccessorKey(this.props.schemaIdAccessorKey)]:e.id})}
this._handleChangeProject=({sourceId:e})=>{m.y$({registryImportSettings:{projectId:e}})}}static configure({schemaSelectorClass:e,schemaIdAccessorKey:t,showProjectSelector:n}){(0,i.hu)(e&&t&&null!=n,"StorableImportSettingsModalPane is incorrectly configured.")
return{schemaSelectorClass:e,schemaIdAccessorKey:t,showProjectSelector:n}}render(){var e,t
const n=this.props.registry?this.props.registry.id:null,i=_getSelectedSchemaIdAccessorKey(this.props.schemaIdAccessorKey),E=r.D9(null!==(e=this.props.projectId)&&void 0!==e?e:null)||!this.props.showProjectSelector,h=this.props.registry&&this.props.selectedSchemaIds[this.props.schemaIdAccessorKey]&&E
return a.createElement(u.ZP,{enableRedesign:!1,buttons:[{key:"next-from-choose-spreadsheet-btn",text:"Next",style:d.ZJ.SECONDARY,onClick:m.mX,disabled:!h,dataTestAttrs:{component:"StorableImportSettingsModalPane",key:p.Z.NEXT}}],...this.props.modalProps},a.createElement(c.Z,null,a.createElement(l.Z,{xs:6},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Registry"),a.createElement(s.Z,{onChange:this._handleChangeRegistry,registryId:n}))),this.props.registry&&a.createElement(l.Z,{xs:6},a.createElement("div",{className:"form-group"},a.createElement("label",null,"Schema"),a.createElement(this.props.schemaSelectorClass,{onChange:this._handleChangeSchema,registryId:this.props.registry.id,shouldShowNoSchemaOption:!1,[i]:this.props.selectedSchemaIds[this.props.schemaIdAccessorKey]})))),a.createElement(c.Z,null,a.createElement(l.Z,{xs:6},this.props.showProjectSelector&&a.createElement(o.p9,{onStorableChange:this._handleChangeProject,registryId:n,selectedSourceId:null!==(t=this.props.projectId)&&void 0!==t?t:null}))))}}const E=StorableImportSettingsModalPane},572578:(e,t,n)=>{n.d(t,{Z:()=>d})
var a=n(764403),i=n.n(a),s=n(602652),r=n.n(s),o=n(989526),l=n(263137),c=n(801455)
function UploadRawTextForm({autoFocus:e,error:t,exampleImageURL:n,helpText:a,label:s,onTextAreaChange:r,text:d}){return o.createElement("div",null,o.createElement("p",null,"Enter comma-, semicolon-, or tab-separated text below. Pasting from Excel is supported."),a,o.createElement("img",{className:"bulkImportModal-spreadsheetPreviewImage",src:n}),o.createElement("div",null,s&&o.createElement(c.Z,{className:"u-small-spacing-top",isRequired:!0,label:s,labelStyle:c.Z.STYLES.LABEL}),o.createElement("textarea",{autoFocus:e,className:i()("bulkImportModal-textarea",{"u-border-danger":Boolean(t)}),onChange:r,rows:5,value:d||"",...(0,l.Z)({component:"UploadRawTextForm",element:"textarea"})}),o.createElement("div",{className:i()("u-danger-color",{"u-spacing-bottom":!t})},t)))}UploadRawTextForm.propTypes={autoFocus:r().bool.isRequired,error:r().string,exampleImageURL:r().string.isRequired,helpText:r().node,label:r().string,onTextAreaChange:r().func.isRequired,text:r().string}
UploadRawTextForm.defaultProps={autoFocus:!1}
const d=UploadRawTextForm},134299:(e,t,n)=>{n.d(t,{Z:()=>UploadSpreadsheetForm})
var a=n(989526),i=n(890711),s=n(185837),r=n(18378),o=n(372721)
function UploadSpreadsheetForm({exampleImageURL:e,file:t,fileWord:n,helpText:l,onRemoveFile:c,onSelectFile:d}){return a.createElement("div",null,l?a.createElement("p",null,l):a.createElement("p",null,"Upload a file to import into Benchling",e&&" (example below)",". The first row should specify column headers, which must be unique. Each row after that should specify a"," ",n,"."),a.createElement("img",{className:"bulkImportModal-spreadsheetPreviewImage",src:e}),a.createElement("div",{className:"form-group"},t?a.createElement(s.Z,null,a.createElement(r.Z,{file:t,onRequestRemove:c})):a.createElement(i.Z,{accept:o.xF,multiple:!1,onSelectFiles:d,className:"bulkImportModal-spreadsheetChooser"})))}},113505:(e,t,n)=>{n.d(t,{Z:()=>B})
var a=n(64558),i=n(989526),s=n(531041),r=n(232606),o=n(348920),l=n(459830),c=n(468991),d=n(111770),u=n(432128),p=n(383628),m=n(102176),E=n(334148),h=n(205986),g=n(251658),S=n(368734),_=n(661978),T=n(372721),I=n(939092),A=n(954240),f=n(865486),y=n(924982)
function ImportSourceTypeSelector(e){return i.createElement(A.ZP,{displayName:T.b7[e.importSourceType],menu:i.createElement(f.ZP,{height:f.ZP.HEIGHTS.MEDIUM,width:f.ZP.WIDTHS.FULL},[T.l5.SPREADSHEET,T.l5.RAW_TEXT,...e.isSdfAllowed?[T.l5.SDF]:[]].map((t=>i.createElement(y.Z,{key:t,value:t,onSelect:e.onSelect,dataTestAttrs:{component:"ImportSourceTypeSelector",element:"option",key:t}},T.b7[t])))),dataTestAttrs:{component:"ImportSourceTypeSelector",element:"root"}})}var C=n(125440),R=n(613118),b=n(677677),N=n(943726)
function SpreadsheetLocaleSelector(e){const t=new Date(R.U4)
return i.createElement(m.Z,null,i.createElement("label",null,"Data locale"),i.createElement(C.Z,{renderContent:()=>i.createElement(N.Z,{includeIgnoreIfExcelText:!1}),iconClassName:"u-mini-spacing-left"}),i.createElement(b.Vk,{languageTag:e.languageTag,date:t,onSelect:t=>{e.onChange(t)}}))}var O=n(572578),L=n(890711),P=n(185837),D=n(18378)
function UploadSDFForm({file:e,onRemoveFile:t,onSelectFile:n}){return i.createElement("div",null,i.createElement("p",null,"Upload a SD file containing molecules. All metadata will be parsed from the SD file in addition to a molfile and the name parsed from the molfile for each molecule."),i.createElement("div",{className:"form-group"},e?i.createElement(P.Z,null,i.createElement(D.Z,{file:e,onRequestRemove:t})):i.createElement(L.Z,{accept:T.L8,multiple:!1,onSelectFiles:n,className:"bulkImportModal-sdfChooser"})))}var v=n(134299)
const{SPREADSHEET_IMPORT_LANGUAGE_TAG:M}=c.ZP
class UploadSpreadsheetModalPane extends i.Component{constructor(e){super(e)
this._getExampleImageURL=()=>this.props.getExampleImageURL({selectedSchemaIds:this.props.selectedSchemaIds})
this._filename_implies_excel=e=>T.Yr.some((t=>e.endsWith(t)))
this._handleChangeImportSource=e=>{_.ml(e)}
this._handleChangeSpreadsheetLocale=e=>{this.state.languageTag!==e&&(0,d.QX)("bnch.localization.spreadsheet_locale_updated_count")
this.setState({languageTag:e,isSettingLanguageTag:!0})
u.Z.set(M,e).then((()=>{this.setState({isSettingLanguageTag:!1})}))}
this._handleRemoveSpreadsheet=()=>{_.pc()}
this._handleUploadAndParseSpreadsheet=e=>{_.oD(e,{onSuccessAnalyticsCallback:()=>{this.props.onUploadSuccessAnalyticsCallback(this.props.importEntityType,this.props.importSourceType)
this.setState({isUploadingExcel:this._filename_implies_excel(e.name)})},onFailAnalyticsCallback:e=>{this.props.onUploadFailAnalyticsCallback(this.props.importEntityType,this.props.importSourceType,e)}})}
this._handleUploadAndParseSDF=e=>{_.k6(e)}
this._handleOnTextAreaChange=e=>{_.Ts(e.target.value)}
this._handleClickNextButton=()=>{if(this.props.importSourceType===T.l5.RAW_TEXT){const e=(0,g.Cb)(this.props.rawText)
e.name=T.AF
const t=new File([e],e.name,{type:e.type})
_.oD(t,{onSuccessAnalyticsCallback:()=>{this.props.onUploadSuccessAnalyticsCallback(this.props.importEntityType,this.props.importSourceType)},onFailAnalyticsCallback:e=>{this.props.onUploadFailAnalyticsCallback(this.props.importEntityType,this.props.importSourceType,e)}})}_.mX()}
this._excelSpecificHelpText=()=>i.createElement(p.ZP,{bannerType:p.ct.INFO,text:"Numbers and dates in .xlsx files will be imported from raw values.",supportingInfo:'These can be imported safely regardless of their display format, so long as they are stored as a "number" or "date" in excel'})
this._spreadsheetLocaleSelectorOrText=()=>{if(this.props.importSourceType===T.l5.SPREADSHEET){if(this.props.uploadState!==T.PX.COMPLETED)return i.createElement(i.Fragment,null)
if(this.state.isUploadingExcel)return this._excelSpecificHelpText()}return i.createElement(SpreadsheetLocaleSelector,{languageTag:this.state.languageTag,onChange:this._handleChangeSpreadsheetLocale})}
this.state={languageTag:this.props.languageTag,isSettingLanguageTag:!1,isUploadingExcel:!1}}static configure({getExampleImageURL:e=(()=>"/static/img/spreadsheet-import-example.png"),onUploadSuccessAnalyticsCallback:t=a.ZT,onUploadFailAnalyticsCallback:n=a.ZT,hideBackButton:i=!1}={}){return{getExampleImageURL:e,onUploadSuccessAnalyticsCallback:t,onUploadFailAnalyticsCallback:n,hideBackButton:i}}render(){const e=I.dO(this.props.importType,this.props.options),t=this.props.importEntityType===l.MOLECULE,n=!this.props.rawText&&this.props.uploadState!==T.PX.COMPLETED||e&&!this.props.selectedBatchSchema||this.state.isSettingLanguageTag
this.props.importSourceType!==T.l5.SDF||t||_.ml(T.uF)
return i.createElement(h.ZP,{enableRedesign:!1,buttons:s.default.compact([!this.props.isFirstPane&&{key:"back",text:"Back",onClick:_.$s},{key:"next",text:this.props.uploadState===T.PX.STARTED?"Loading...":"Next",style:E.ZJ.SECONDARY,onClick:this._handleClickNextButton,disabled:n,dataTestAttrs:{component:"UploadSpreadsheetModal",element:"footerButton",key:this.props.uploadState===T.PX.STARTED?S.Z.LOADING:S.Z.NEXT}}]),...this.props.modalProps},i.createElement("label",null,"Import from"),i.createElement(m.Z,null,i.createElement(ImportSourceTypeSelector,{importSourceType:this.props.importSourceType,isSdfAllowed:t,onSelect:this._handleChangeImportSource})),(()=>{switch(this.props.importSourceType){case T.l5.RAW_TEXT:return i.createElement(O.Z,{autoFocus:!0,exampleImageURL:this._getExampleImageURL(),helpText:`The first row should specify column headers, which must be unique.\n                     Each row after that should specify a ${this.props.importItemWord}.`,onTextAreaChange:this._handleOnTextAreaChange,text:this.props.rawText})
case T.l5.SDF:return i.createElement(UploadSDFForm,{file:this.props.file,onRemoveFile:this._handleRemoveSpreadsheet,onSelectFile:this._handleUploadAndParseSDF})
default:(0,r.hu)(this.props.importSourceType===T.l5.SPREADSHEET,"Unexpected import source type.")
return i.createElement(v.Z,{exampleImageURL:this._getExampleImageURL(),file:this.props.file,fileWord:this.props.importItemWord,onRemoveFile:this._handleRemoveSpreadsheet,onSelectFile:this._handleUploadAndParseSpreadsheet})}})(),o.ZP.NAV_ENABLE_LOCALE_AWARE_PARSING_FOR_SPREADSHEET_UPLOAD&&this._spreadsheetLocaleSelectorOrText(),this.props.uploadState===T.PX.FAILED&&this.props.errorMessage&&i.createElement("div",{className:"u-danger-color"},this.props.errorMessage),e&&(()=>{const e=this.props.importType===T.pt.UPDATE_SAMPLES?"update":"create"
return null==this.props.selectedBatchSchema?i.createElement("span",null,"No batch schema was found. Please create one first."):i.createElement("span",null,"Each row in the uploaded spreadsheet will ",e," a Batch")})())}}const B=UploadSpreadsheetModalPane},253397:(e,t,n)=>{n.d(t,{Z:()=>S,u:()=>a})
var a,i=n(692013),s=n(602652),r=n.n(s),o=n(989526),l=n(232606),c=n(661978),d=n(372721),u=n(432128),p=n(263137),m=n(334148),E=n(709691),h=n(717235),g=n(939092)
!function(e){e.SPREADSHEET="SPREADSHEET"
e.STRUCTURED_TABLE="STRUCTURED_TABLE"}(a||(a={}))
function getSpreadsheetIndexOffset(e){switch(e){case a.SPREADSHEET:return 2
case a.STRUCTURED_TABLE:return 1
default:throw new Error(`Unexpected spreadsheet type ${e}`)}}const ValidationErrorRow=({spreadsheetType:e,rowIndex:t,unresolvedMessage:n,resolvedMessage:a})=>o.createElement("tr",{key:t},o.createElement("td",{className:"text-right"},t+getSpreadsheetIndexOffset(e)),o.createElement("td",{className:"u-width-full"},o.createElement("div",{className:(0,i.iv)(_.errorText)},n.length>0&&n,o.createElement("span",{className:"faded u-strike-through"},a))))
function _getTSVErrors(e,t){const n=[]
n.push(["Row #","Message","Status"])
for(const[a,i]of t)for(const t of i){let i
if(t.resolved)i="Resolved"
else if("warning"===t.icon)i="Warning"
else{(0,l.hu)(!t.resolved&&"error"===t.icon,"Unexpected error message status")
i="Error"}n.push([`${a+getSpreadsheetIndexOffset(e)}`,t.message,i])}return h.VB(n,"\t")}function ValidationErrorsTableContainer(e){return o.createElement("table",{className:"bulkImportModal-table table table-striped selectable",...(0,p.Z)({component:"BulkImportModal",element:"table"})},o.createElement("colgroup",null,o.createElement("col",{style:{width:60}}),o.createElement("col",null)),o.createElement("thead",{className:"bulkImportModal-table-head"},o.createElement("tr",null,o.createElement("th",{className:"text-right"},"Row #"),o.createElement("th",null,"Message"),null!=e.copyableErrors&&o.createElement("th",null,o.createElement(E.Z,{value:e.copyableErrors},o.createElement("a",null,"Copy errors"))),function showInvalidMoleculeDownload(){var t
return(null===(t=e.errorData)||void 0===t?void 0:t.state)===d.PX.COMPLETED&&g.y5(e.errorData,e.resolvableErrorStatuses)&&u.Z.get(d.tB.SOURCE_TYPE)===d.l5.SDF}()&&o.createElement("th",null,o.createElement(m.Co,{buttonStyle:m.ZJ.LINK,text:"Download invalid molecules",onClick:()=>{c.sI(e.resolvableErrorStatuses)}})))),o.createElement("tbody",{className:"bulkImportModal-table-body"},e.children))}function FailedValidationErrorsTable(){return o.createElement(ValidationErrorsTableContainer,{copyableErrors:null,errorData:null,resolvableErrorStatuses:{}},o.createElement("tr",null,o.createElement("td",null),o.createElement("td",{className:"u-width-full"},"An error occurred while importing the file. Please try again.")))}function EmptyValidationErrorsTable(e){const t=e.nextButtonText?o.createElement(o.Fragment,null,"There were no errors, click ",o.createElement("strong",null,e.nextButtonText)," to continue."):o.createElement(o.Fragment,null,"There were no errors.")
return o.createElement(ValidationErrorsTableContainer,{copyableErrors:null,errorData:null,resolvableErrorStatuses:{}},o.createElement("tr",null,o.createElement("td",null),o.createElement("td",{className:"u-width-full"},t)))}function ValidationErrorsTable(e){const{spreadsheetType:t,errorData:n,nextButtonText:a,resolvableErrorStatuses:i}=e
if(!n)return null
if(n.state===d.PX.FAILED)return o.createElement(FailedValidationErrorsTable,null)
if(!g.wx(n))return o.createElement(EmptyValidationErrorsTable,{nextButtonText:null!=a?a:null})
const s=g.EB(n,i)
if(!(0,l.Gp)(g.wx(n),"Expected simple validation errors table to have errors"))return null
const r=g.lY(n,i)
return o.createElement(ValidationErrorsTableContainer,{copyableErrors:_getTSVErrors(t,s),errorData:n,resolvableErrorStatuses:i},r.map((({row:e,unresolvedMessage:n,resolvedMessage:a})=>o.createElement(ValidationErrorRow,{key:e,spreadsheetType:t,rowIndex:e,resolvedMessage:a,unresolvedMessage:n}))))}ValidationErrorsTable.propTypes={spreadsheetType:r().oneOf(Object.values(a)).isRequired,errorData:d.R9.errorData,nextButtonText:r().string,resolvableErrorStatuses:r().objectOf(r().bool).isRequired,selectedTagSchemaId:r().string}
const S=ValidationErrorsTable,_=i.mM.create({errorText:{whiteSpace:"pre-wrap",overflowWrap:"anywhere",maxHeight:100,overflowY:"auto"}})},577347:(e,t,n)=>{n.d(t,{Z:()=>_})
var a=n(989526),i=n(232606),s=n(396213),r=n(301141),o=n(208029),l=n(497790),c=n(629656),d=n(336489),u=n(378045),p=n(113505),m=n(661978),E=n(372721),h=n(749278),g=n(939092),S=n(789179)
class BulkAddRowsToDataTableFlow extends a.Component{constructor(){super(...arguments)
this._isStageRunSampleLinkTable=()=>r.Zq(this.props.dataTableConfig)===s.zC.STAGE_RUN_SAMPLE_LINK_TABLE
this._getKeyColumnTypes=()=>{const e=[]
this.props.dataTableConfig.linkType===l.FIELD_TYPES.BATCH_LINK.type?e.push(E.BA.BATCH_NAME):this.props.dataTableConfig.linkType===l.FIELD_TYPES.BIOENTITY_LINK.type&&e.push(E.BA.FILENAME)
this._isStageRunSampleLinkTable()&&e.push(E.BA.STAGE_RUN_NAME)
return e}
this._getPanes=()=>{const e=this._isStageRunSampleLinkTable(),t=this._getKeyColumnTypes()
return[{paneKey:E.y$.UPLOAD_SPREADSHEET,configuration:p.Z.configure({getExampleImageURL:()=>g.oW(null)})},{paneKey:E.y$.MAP_COLUMN_NAMES,configuration:d.Z.configure({getValidColumnTypes(){e&&(0,i.Gp)(t.length>0,`Expected at least one key field if importing into a stage entry ${o.D6.result_table}`)
return[...t,E.BA.DATA_TABLE_VALUE,E.BA.IGNORE]},getRequiredColumnsError(e){if(t.includes(E.BA.FILENAME)){if(0===e.filter((({type:e})=>e===E.BA.FILENAME)).length)return`At least one "${E.zw[E.BA.FILENAME]}" field is required.`}if(t.includes(E.BA.BATCH_NAME)){if(0===e.filter((({type:e})=>e===E.BA.BATCH_NAME)).length)return`At least one "${E.zw[E.BA.BATCH_NAME]}" field is required.`}const n=e.map((({tableColumnName:e})=>e)).filter((e=>e))
return new Set(n).size<n.length?"Each column must be selected at most once.":null},onValidateSpreadsheet:()=>{m._c(this.props.fileId,this.props.dataTableConfig)}})},{paneKey:E.y$.SHOW_ERRORS,configuration:u.Z.configure({enableReplaceLinkWithText:!1,enableSkipErrors:!1})}]}
this._handleImportFromSpreadsheet=()=>{m.cS(this.props.fileId,this.props.dataTableConfig,this.props.onImportRows)}}static open(e){c.bA(E.qF,a.createElement(BulkAddRowsToDataTableFlow,{...e,onRequestClose:m.Mr}))}render(){return a.createElement(h.Z,{importType:E.pt.DATA_TABLE,initialSettings:{initialTableColumnNames:(0,S.z)(this.props.dataTableConfig)},onImportFromSpreadsheet:this._handleImportFromSpreadsheet,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:`Import into ${o.D6.result_table}`})}}const _=BulkAddRowsToDataTableFlow},572009:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(989526),i=n(208029),s=n(629656),r=n(336489),o=n(378045),l=n(113505),c=n(661978),d=n(372721),u=n(749278),p=n(939092)
class CreateRunResultsFlow extends a.Component{constructor(){super(...arguments)
this._getPanes=()=>[{paneKey:d.y$.UPLOAD_SPREADSHEET,configuration:l.Z.configure({getExampleImageURL:()=>p.oW(null)})},{paneKey:d.y$.MAP_COLUMN_NAMES,configuration:r.Z.configure({getValidColumnTypes:()=>[d.BA.RESULT_SCHEMA_FIELD,d.BA.IGNORE],getRequiredColumnsError:()=>null,onValidateSpreadsheet:()=>{c.Ei(this.props.assayRunId,this.props.resultSchema.id)}})},{paneKey:d.y$.SHOW_ERRORS,configuration:o.Z.configure({enableReplaceLinkWithText:!1,enableSkipErrors:!1})}]
this._handleImportFromSpreadsheet=()=>{c.pz(this.props.assayRunId,this.props.resultSchema.id,(()=>{this.props.onImportRows()}))}
this.render=()=>a.createElement(u.Z,{importType:d.pt.RUN_RESULTS,initialSettings:{initialResultSchemaId:this.props.resultSchema.id},onImportFromSpreadsheet:this._handleImportFromSpreadsheet,onRequestClose:this.props.onRequestClose,panes:this._getPanes(),title:`Import ${i.D6.results} into ${i.D6.run}`})}static open(e){s.bA(d.qF,a.createElement(CreateRunResultsFlow,{...e,onRequestClose:c.Mr}))}}const m=CreateRunResultsFlow},789179:(e,t,n)=>{n.d(t,{z:()=>getColumnNamesForImport})
var a=n(725518),i=n(407307),s=n(896986)
function getColumnNamesForImport(e){return e.columns.filter((t=>{const n=(0,s.eI)(e.assaySchema,t)
return!n||!(0,i.Z)(n)})).map((t=>(0,a.Z)({structuredTableColumn:t,schemas:[e.assaySchema]}))).filter((e=>null!=e))}},320727:(e,t,n)=>{n.d(t,{ZP:()=>_})
var a=n(769784),i=n(692013),s=n(989526),r=n(232606),o=n(256605),l=n(751512),c=n(91092),d=n(334148),u=n(271359),p=n(476604),m=n(601790)
const E=["Column Name","Column Type"]
const h={[o.A$.BULK_CREATE_AND_REGISTER_ENTITIES]:"Import entities into registry",[o.A$.BULK_UPDATE_ENTITIES]:"Bulk update entities",[o.A$.ADD_ROWS_TO_RESULTS_TABLE]:"Import into results table"},g=a.Ps`
  query SpreadsheetColumnsMappingQuery(
    $tagSchemaId: StrictString
    $assaySchemaId: StrictString
    $uploadFlow: StrictString
  ) @skipAudit {
    spreadsheetColumnsMappings(
      tagSchemaId: $tagSchemaId
      assaySchemaId: $assaySchemaId
      uploadFlow: $uploadFlow
    ) {
      ... on SpreadsheetColumnsMappingNode {
        ...SpreadsheetColumnsMappingGraphQL
      }
    }
  }
  ${(0,c.f)("SpreadsheetColumnsMapping").fragment}
`
function SpreadsheetColumnsMappingTableHeader(e){const t=s.createElement("div",{className:"simpleDivTable-header"},s.createElement((()=>s.createElement("div",{className:"simpleDivTable-headerCell"},s.createElement("div",{className:"u-small-spacing-bottom"},s.createElement("span",{className:(0,i.iv)(S.spreadsheetColumnsMappingHeaderTitle)},e.title)),s.createElement("div",{className:(0,i.iv)(S.spreadsheetColumnsMappingHeaderContent)},h[e.content]))),null),s.createElement((()=>s.createElement("div",{className:"simpleDivTable-headerCell"},s.createElement("div",{className:"u-text-align-right"},s.createElement("div",{className:"buttonToolbar"},s.createElement(d.Co,{buttonStyle:d.ZJ.TERTIARY_GRAY,size:d.qE.MINI,className:"filter",icon:"copy",onClick:()=>{}}),s.createElement(d.Co,{buttonStyle:d.ZJ.TERTIARY_GRAY,size:d.qE.MINI,className:"alignment-previous-mismatch",icon:"edit",onClick:()=>{},disabled:!1}),s.createElement(d.Co,{buttonStyle:d.ZJ.TERTIARY_GRAY,size:d.qE.MINI,className:"filter",icon:"delete",onClick:()=>{}}))))),null))
return s.createElement("div",null,t)}function SpreadsheetColumnMappingTable(e){return s.createElement(s.Fragment,null,s.createElement(SpreadsheetColumnsMappingTableHeader,{title:e.headerData.title,content:e.headerData.content}),s.createElement(m.iA,{numRows:2,getRowClassName:()=>"simpleTable-row--empty"},s.createElement(m.sg,{renderCell:e=>s.createElement(m.bL,{className:(0,i.iv)(S.spreadsheetColumnsMappingLeftmostColumn)},E[e])}),function createTableColumns(e){return e.map(((e,t)=>s.createElement(m.sg,{key:t,renderCell:t=>Object.values(e)[t]})))}(e.columnData)))}function SpreadsheetMappingsSettings(e){const t=[]
for(const n of e.spreadsheetColumnsMappings){const a=n.individualColumnMappings.map((({columnType:t,columnName:n,schemaField:a})=>{var i
const s=e.schemaFields.find((e=>e.apiId===(null==a?void 0:a.apiId)))
return{name:null!==(i=null==s?void 0:s.displayName)&&void 0!==i?i:n,type:t}})),i={title:n.name,content:n.uploadFlow}
t.push({columnData:a,headerData:i})}const n=t.map(((e,t)=>s.createElement(SpreadsheetColumnMappingTable,{key:t,columnData:e.columnData,headerData:e.headerData})))
return s.createElement("div",{className:"settingsPage-contentWrapper"},n)}const S=i.mM.create({spreadsheetColumnsMappingLeftmostColumn:{position:"sticky",left:"0px",backgroundColor:u.bs,zIndex:2,boxShadow:`inset 0px 0px 0px -1px ${u.tN}`,textAlign:"center",fontWeight:"bold",color:"#5C7C83",width:"156px"},spreadsheetColumnsMappingHeaderContent:{fontWeight:"lighter",color:"#5C7C83"},spreadsheetColumnsMappingHeaderTitle:{fontWeight:600,color:"#344043"}}),_=function QueryingSpreadsheetColumnsMappingsSettings(e){(0,r.Gp)(Boolean(e.tagSchemaId)!==Boolean(e.assaySchemaId),"Expects exactly one of tagSchemaId or assaySchemaId")
const t=(0,l.IJ)(g,{variables:{tagSchemaId:e.tagSchemaId,assaySchemaId:e.assaySchemaId}})
switch(t.type){case l.NI.ERROR:return null
case l.NI.PENDING:return s.createElement(p.b,null)
case l.NI.SUCCESS:{const n=t.data.spreadsheetColumnsMappings
return s.createElement("div",null,s.createElement(d.Co,{buttonStyle:d.ZJ.TERTIARY_WHITE,size:d.qE.MEDIUM,className:"alignment-previous-mismatch",text:"Create a mapping",onClick:()=>{}}),s.createElement(SpreadsheetMappingsSettings,{schemaFields:e.schemaFields,spreadsheetColumnsMappings:n}))}default:(0,r.Gp)(!1,"Unhandled query result type")
return null}}},74161:(e,t,n)=>{n.d(t,{FX:()=>getRequiredParentStorableError,PZ:()=>getSampleControlRolesColumns,U6:()=>getLocationCapacityConfigColumns,Vh:()=>getNewBarcodeColumn})
var a=n(348920),i=n(372721),s=n(939092),r=n(477956),o=n(922805)
function getRequiredParentStorableError(e){return a.ZP.ENABLE_REQUIRED_PARENT_STORABLE?s.lx([i.BA.PARENT_STORABLE_BARCODE],e,{},!1):null}function getSampleControlRolesColumns(){return(0,o.Eq)(r.F.V2)?[i.BA.SAMPLE_RESTRICTION_STATUS,i.BA.SAMPLE_AUTHORIZED_USERS,i.BA.SAMPLE_OWNERS]:[]}function getNewBarcodeColumn(){return a.ZP.INVENTORY_ENABLE_EDIT_BARCODES?[i.BA.NEW_BARCODE]:[]}function getLocationCapacityConfigColumns(){return a.ZP.INVENTORY_ENABLE_LOCATION_CAPACITY?[i.BA.ALLOWS_NON_LOCATION_CHILDREN,i.BA.LOCATION_CAPACITY,i.BA.ALLOWED_CHILD_STORABLE_SCHEMAS]:[]}},659623:(e,t,n)=>{n.d(t,{U:()=>create})
var a=n(8747),i=n(982899)
function create(e){const t={tagSchemaId:e.tagSchemaId,folderId:e.outputFolderId,basicFolderItemSpecs:i.tn(e,{forServer:!0})}
return a.by({contentType:"application/json",data:JSON.stringify(t),dataType:"json",type:"POST",url:"/1/api/bulk-workflows/basic-folder-items/create"})}},982899:(e,t,n)=>{n.d(t,{BN:()=>l,kd:()=>createBioentityLinkSpec,tD:()=>createBulkAntibody,tn:()=>getBasicFolderItemSpecs})
var a=n(767807),i=n.n(a),s=n(531041),r=n(317275),o=n(40563)
function createBulkAntibody(){return{step:o.h8.BULK_TRANSLATION,tagSchemaId:void 0,antibodyNamePrefix:"",outputFolderId:void 0,bioentityLinkSpecs:[],inputFiles:[],inputFilesLoading:!1,isCreating:!1}}function createBioentityLinkSpec(e,t){return{tagSchemaField:e,files:t.filter((t=>t.tagSchema&&e.requiredLink&&function hasTagSchemaField(e){return void 0!==e.tagSchema||void 0!==e.tagSchema}(e.requiredLink)&&e.requiredLink.tagSchema&&t.tagSchema.id===e.requiredLink.tagSchema.id))}}function getBasicFolderItemSpecs(e,{forServer:t=!1}){if(!e.bioentityLinkSpecs.length)return[]
const n=e.bioentityLinkSpecs.map((e=>e.files.length)),a=s.default.min(n),i=[]
for(let n=0;n<a;n++){const a=`${e.antibodyNamePrefix}${n+1}`,o=s.default.object(e.bioentityLinkSpecs.map((e=>{const a=e.tagSchemaField.name,i=e.files[n]
return[a,t?{targetFiles:[(0,r.Z)(i,"id")]}:{targetFiles:[(0,r.Z)(i,"id","name")],value:i.name}]})))
i.push({name:a,tags:o})}return i}const l={update:(e,t)=>i()(e,{$merge:t})}},746312:(e,t,n)=>{n.d(t,{Z:()=>m})
var a=n(767807),i=n.n(a),s=n(615439),r=n.n(s),o=n(232606),l=n(787004),c=n(947730),d=n(391028),u=n(826242),p=n(470294)
class BulkAssemblyStore extends d.Z{resetState(){this.assembly=p.OH()}getAssembly(){return this.assembly}_hasChangedFrom(e){return!r()(i()(e,{meta:{$set:void 0}}),i()(this.assembly,{meta:{$set:void 0}}))}payloadHandler(e){switch(e.actionType){case l.f64:this.assembly=p.BN.setTopology(this.assembly,e.topology)
this.emitChange()
break
case l.lH4:this.assembly=p.BN.addSlot(this.assembly)
this.emitChange()
break
case l.NXc:{const{slotIdx:t,dataSourceId:n}=e
this.assembly=p.BN.setSlotDataSource(this.assembly,t,n)
this.emitChange()
break}case l.cln:{const{slotIdx:t,updates:n}=e
this.assembly=p.BN.updateSlot(this.assembly,t,n)
this.emitChange()
break}case l.rFs:{const{slotIdx:t}=e
this.assembly=p.BN.removeSlot(this.assembly,t)
this.emitChange()
break}case l.eOY:this.assembly=p.BN.nextSlot(this.assembly)
this.emitChange()
break
case l.hp9:this.assembly=p.BN.previousSlot(this.assembly)
this.emitChange()
break
case l.zDY:{const{dataSourceId:t,updates:n}=e
this.assembly=p.BN.updateDataSource(this.assembly,t,n)
this.emitChange()
break}case l.ysr:{const{slotIdx:t}=e
this.assembly=p.BN.activateStep(this.assembly,t)
this.emitChange()
break}case l.jf_:{const{slotIdx:t,dataSourceType:n}=e
this.assembly=p.BN.resetSlotDataSource(this.assembly,t,n)
this.emitChange()
break}case l.e2W:this.assembly=p.BN.updateForRun(this.assembly)
this.emitChange()
break
case l.MeZ:this.assembly=p.BN.updateForCompletedRun(this.assembly)
this.emitChange()
break
case l.D4T:this.assembly=p.BN.updateForFailedRun(this.assembly)
this.emitChange()
break
case l.S1t:{const{tagSchemaId:t}=e
this.assembly=p.BN.setTagSchemaId(this.assembly,t)
this.emitChange()
break}case l.UIB:this.assembly=p.BN.resetSchemaFields(this.assembly)
this.emitChange()
break
case l.AsR:{const{useWorklist:t}=e
this.assembly=p.BN.setUseSequenceWorklist(this.assembly,t)
this.emitChange()
break}case l.SBb:{const{useWorklist:t}=e
this.assembly=p.BN.setUsePrimerWorklist(this.assembly,t)
this.emitChange()
break}case l.C5z:{const{useWorklist:t}=e
this.assembly=p.BN.setUseFragmentWorklist(this.assembly,t)
this.emitChange()
break}case l.KAU:{const{newOrExisting:t}=e
this.assembly=p.BN.setSequenceWorklistFormType(this.assembly,t)
this.emitChange()
break}case l.lPQ:{const{newOrExisting:t}=e
this.assembly=p.BN.setPrimerWorklistFormType(this.assembly,t)
this.emitChange()
break}case l.A2F:{const{newOrExisting:t}=e
this.assembly=p.BN.setFragmentWorklistFormType(this.assembly,t)
this.emitChange()
break}case l.xfN:{const{existingWorklistId:t}=e
this.assembly=p.BN.setSequenceWorklistId(this.assembly,t)
this.emitChange()
break}case l.kkc:{const{existingWorklistId:t}=e
this.assembly=p.BN.setPrimerWorklistId(this.assembly,t)
this.emitChange()
break}case l.wsz:{const{existingWorklistId:t}=e
this.assembly=p.BN.setFragmentWorklistId(this.assembly,t)
this.emitChange()
break}case l.VwH:{const{newWorklistInfo:t}=e
this.assembly=p.BN.setNewSequenceWorklistInfo(this.assembly,t)
this.emitChange()
break}case l.pbN:{const{newWorklistInfo:t}=e
this.assembly=p.BN.setNewPrimerWorklistInfo(this.assembly,t)
this.emitChange()
break}case l.oru:{const{newWorklistInfo:t}=e
this.assembly=p.BN.setNewFragmentWorklistInfo(this.assembly,t)
this.emitChange()
break}case l.TLb:{const{folderId:t}=e
this.assembly=p.BN.setSequenceFolderId(this.assembly,t)
this.emitChange()
break}case l.Zx_:{const{folderId:t}=e
this.assembly=p.BN.setPrimerFolderId(this.assembly,t)
this.emitChange()
break}case l.rPS:{const{folderId:t}=e
this.assembly=p.BN.setFragmentFolderId(this.assembly,t)
this.emitChange()
break}case l.qUk:(0,o.hu)(this.assembly.meta.state!==u.rs.ASSEMBLING,"User unexpectedly tried to reset assembly with assembly in progress")
this.assembly=p.OH()
this.emitChange()
break
case l.viz:this.assembly=p.zg(this.assembly)
this.emitChange()
break
case l.F0Q:this.assembly=p.BN.updateForValidation(this.assembly)
this.emitChange()
break
case l.UK0:if(this._hasChangedFrom(e.assembly))break
this.assembly=p.BN.updateForCompletedValidation(this.assembly,e.summary)
this.emitChange()
break
case l.YKb:if(this._hasChangedFrom(e.assembly))break
this.assembly=p.BN.updateForFailedValidation(this.assembly)
this.emitChange()}return!0}}const m=new BulkAssemblyStore(c.Z)},345640:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(531041),i=n(841996),s=n(675649),r=n(787004),o=n(465428),l=n(947730),c=n(974913)
const d={fetchFiles(e,t,n={}){s.Gh("CalendarActions.fetchFiles",(()=>{l.Z.dispatch({actionType:r.O$N})
return o.SX(e,t,n).done((e=>{l.Z.dispatch({actionType:r.eUJ,files:e})})).fail((e=>{c.ZP.notifyError(e)
l.Z.dispatch({actionType:r.q9n})}))}))},fetchRequests(e,t,n={}){s.Gh("CalendarActions.fetchRequests",(()=>{l.Z.dispatch({actionType:r.b8o})
return o.SU(e,t,n).done((e=>{l.Z.dispatch({actionType:r.kVJ,requests:e})})).fail((e=>{c.ZP.notifyError(e)
l.Z.dispatch({actionType:r.g5h})}))}))},fetchProcessTasks(e,t,n={}){s.Gh("CalendarActions.fetchRequests",(()=>{l.Z.dispatch({actionType:r.YA9})
return o.Zj(e,t,n).done((e=>{l.Z.dispatch({actionType:r.uGT,processTasks:e})})).fail((e=>{c.ZP.notifyError(e)
l.Z.dispatch({actionType:r.Twj})}))}))},fetchEntries(e,t,n={}){s.Gh("CalendarActions.fetchEntries",(()=>{l.Z.dispatch({actionType:r.OGV})
return o.c1(e,t,n).done((e=>{Object.keys(e).forEach((t=>{e[t]=a.default.unique(e[t],(e=>e.id))}))
l.Z.dispatch({actionType:r.Y5B,entries:e})})).fail((e=>{c.ZP.notifyError(e)
l.Z.dispatch({actionType:r.DtT})}))}))},updateEntryTask(e,t,n,a){i.Z.invalidate(t)
l.Z.dispatch({actionType:r.rL8,date:e,entryId:t,notePartProvenanceId:n,completed:a})},deselectCalendarItem(){l.Z.dispatch({actionType:r.XZ5})},selectCalendarItem(e,t){l.Z.dispatch({actionType:r.XeB,itemId:e,date:t})},navigateDate(e){l.Z.dispatch({actionType:r.TTX,visibleDate:e})},changeView(e){l.Z.dispatch({actionType:r.bOw,view:e})
d.closeCreatePopover()},toggleProjectHidden(e){l.Z.dispatch({actionType:r.SJn,projectId:e})},updateFilteredMembers(e,t){l.Z.dispatch({actionType:r.vhe,memberIds:e,shouldHide:t})},updateToday(){l.Z.dispatch({actionType:r.x0y})},dayMouseDown(e){l.Z.dispatch({actionType:r.md0,date:e})},dayMouseOver(e){l.Z.dispatch({actionType:r.hmO,date:e})},dayMouseUp(e,t){l.Z.dispatch({actionType:r.ntb,x:e,y:t})},closeCreatePopover(){l.Z.dispatch({actionType:r.PIX})}},u=d},449108:(e,t,n)=>{n.d(t,{w:()=>scheduleLayers})
var a=n(531041),i=n(232606),s=n(348049)
function scheduleLayers(e){const t=[[]],n=[null],r=a.default.sortBy(e,(e=>s.ZP.getItemDate(e).unix()))
for(let e=0;e<r.length;e++){const a=r[e],o=s.ZP.getItemDate(a),l=s.ZP.getItemNumDays(a);(0,i.hu)(null!=o,"Must have a date field")
const c=(()=>{for(let e=0;e<n.length;e++){const t=n[e]
if(null==t||!t.isAfter(o))return e}t.push([])
return t.length-1})()
t[c].push(a)
n[c]=o.clone().add(l,"days")}return t}},519862:(e,t,n)=>{n.d(t,{Z:()=>ChemSearchButton})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(704527),l=n(334148),c=n(271359),d=n(124640),u=n(502633),p=n(822248)
function ChemSearchButton({className:e,onUpdateFilters:t,searchParams:n,toggleHighlightParams:i}){const c=(0,p.ZP)(n),[E,h]=(0,r.useState)(!1)
return r.createElement(l.Co,{buttonStyle:l.ZJ.TERTIARY_WHITE,className:s()((0,a.iv)(m.button),e,{[(0,a.iv)(m.buttonHover)]:Boolean(E)}),size:l.qE.SMALL,icon:d.m.SmallMolecule,onClick:async()=>{const e=await(0,u.Z)(o.Z,{initialMol:c,toggleHighlightParams:i,searchParams:n})
e&&(0,p.tP)(e)&&t((0,p.H0)(n,e).filters)},onMouseOver:()=>{h(!0)},onMouseOut:()=>{h(!1)},dataTestAttrs:{component:"ChemSearchButton",element:"root"}})}const m=a.mM.create({button:{border:"none",borderRadius:"2px",margin:"2px",height:"24px",padding:"2px 6px"},buttonHover:{backgroundColor:c.tN}})},921517:(e,t,n)=>{n.d(t,{Z:()=>ChemSearchChip})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(704527),l=n(769784),c=n(68380),d=n(229329)
const u=l.ZP`
  query MoleculeImagePopoverQuery($mol: StrictString!) @skipAudit @engComponent(name: CHEMISTRY) {
    moleculeImage(mol: $mol) {
      ... on SVGNode {
        base64Svg
      }
      ...Error
    }
  }
  ${c.IC.fragment}
`
function MoleculeImagePopover(e){var t
const n=(0,c.VZ)(e.moleculeImage)?e.moleculeImage.message:r.createElement("img",{src:`data:image/svg+xml;base64,${e.moleculeImage.base64Svg}`}),i=(null===(t=e.toggleHighlightParams)||void 0===t?void 0:t.showToggleHighlightOption)?r.createElement(d.Z,{id:"toggleHighlightOption",checked:e.toggleHighlightParams.shouldHighlightSubstructure,onChange:t=>{e.toggleHighlightParams.setShouldHighlightSubstructure(t.target.checked)},label:"Highlight substructure in search results."}):null
return r.createElement("div",{className:(0,a.iv)(p.popoverContentWrapper)},i,n)}const p=a.mM.create({popoverContentWrapper:{textAlign:"center"}})
var m=n(751512),E=n(974913),h=n(62315),g=n(778223),S=n(271359),_=n(361974),T=n(124640),I=n(502633),A=n(822248)
function ChemSearchChip({className:e,onUpdateFilters:t,searchParams:n,toggleHighlightParams:i,mol:l,filterError:c}){const d=(0,m.IJ)(u,{variables:{mol:l}})
d.type===m.NI.ERROR&&E.ZP.error("Failed to create image for query molecule. Please try again.")
const p={...i,showToggleHighlightOption:i.showToggleHighlightOption&&(0,A.wX)(n)},S=d.type===m.NI.SUCCESS?r.createElement(MoleculeImagePopover,{toggleHighlightParams:p,moleculeImage:d.data.moleculeImage}):null
return r.createElement(g.ZP,{className:s()(c?(0,a.iv)(f.chipInvalid):(0,a.iv)(f.chipValid),(0,a.iv)(f.chip),e),size:g.TK.TABLE_CELL,text:(0,A.r)(n),icon:T.m.SmallMolecule,key:"chemSearchChip",onClick:async()=>{const e=await(0,I.Z)(o.Z,{initialMol:l,toggleHighlightParams:i,searchParams:n})
e&&(0,A.tP)(e)&&t((0,A.H0)(n,e).filters)},onRemove:()=>{t(n.filters.filter((e=>e.key!==h.Vm.CHEMICAL_STRUCTURE)))},popoverContent:c?null:S,popoverPlacement:_.ZH.BOTTOM,tooltipTitle:c})}const f=a.mM.create({chip:{marginRight:"0px"},chipValid:{backgroundColor:S.ip,color:S.t0},chipInvalid:{backgroundColor:S.Nl,color:S.Rl}})},704527:(e,t,n)=>{n.d(t,{Z:()=>ChemSearchModal})
var a=n(692013),i=n(989526),s=n(306258),r=n(822248),o=n(719878),l=n(432128),c=n(62315),d=n(271359),u=n(252658),p=n(102176),m=n(334148),E=n(954240),h=n(73374),g=n(229329),S=n(801455),_=n(865486),T=n(924982),I=n(198210)
function ChemSearchModalOptions({highlightChecked:e,setHighlightChecked:t,chemSearchOperator:n,setChemSearchOperator:o,minSimilarity:l,setMinSimilarity:d,toggleHighlightParams:u,className:f}){const y=i.createElement("div",{className:(0,a.iv)(A.searchTypeToggle)},i.createElement(I.Z,{isFullWidth:!0,size:m.qE.SMALL,options:c.RQ.map((e=>({id:e,buttonProps:{text:s.l3[e]}}))),selection:n,onChangeSelection:e=>{o(e)}})),C=u.showToggleHighlightOption&&i.createElement("label",null,i.createElement(g.Z,{checked:e,id:"toggleHighlightOption",onChange:e=>{t(e.target.checked)},label:"Highlight substructure in search results."})),R=s.wr.map((e=>i.createElement(T.Z,{dataTestAttrs:{component:"ChemSearchModalOptions",element:"option",key:`${e}`},value:e,onSelect:d,key:e},(0,r.bT)(e)))),b=i.createElement(p.Z,null,i.createElement(S.Z,{label:"Similarity score"}),i.createElement(E.ZP,{className:(0,a.iv)(A.similaritySearchOptions),displayName:(0,r.bT)(l),menu:i.createElement(_.ZP,{height:_.ZP.HEIGHTS.MEDIUM,width:_.ZP.WIDTHS.SMALL,value:l},R)}),i.createElement("p",{className:(0,a.iv)(A.explanationText)},"Similarity searches are performed using"," ",i.createElement("a",{className:(0,a.iv)(A.explanationTextLink),href:"https://jcheminf.biomedcentral.com/articles/10.1186/s13321-015-0069-3",target:"_blank",rel:"noopener noreferrer"},"Tanimoto similarity"),"."))
return i.createElement("div",{className:f},i.createElement(h.Dx,null,"Specify search options"),y,i.createElement("div",{className:(0,a.iv)(A.searchOptions)},n===c.EF.SUBSTRUCTURE?C:b))}const A=a.mM.create({searchOptions:{paddingTop:12},searchTypeToggle:{paddingTop:12},explanationText:{paddingTop:12,color:d.pp},explanationTextLink:{color:d.pp,textDecorationLine:"underline"},similaritySearchOptions:{width:"50%"}})
function ChemSearchModal({initialMol:e,onRequestSubmit:t,onRequestClose:n,toggleHighlightParams:d,searchParams:p}){var m
const[E,h]=(0,i.useState)(e),[g,S]=(0,i.useState)(d.shouldHighlightSubstructure),[_,T]=(0,i.useState)((0,r.j4)(p)),[I,A]=(0,i.useState)(null!==(m=l.Z.get(s.dK.MIN_SIMILARITY))&&void 0!==m?m:s.Zx)
return i.createElement(u._,{enableRedesign:!0,title:"Chemical structure search",buttons:[{text:"Search",submit:!0,dataTestAttrs:{component:"ChemSearchModal",element:"submit"}}],onRequestClose:n,onRequestSubmit:()=>{l.Z.set(s.dK.CHEM_SEARCH_TYPE,_)
d.showToggleHighlightOption&&d.setShouldHighlightSubstructure(g)
if(_===c.EF.SIMILARITY){l.Z.set(s.dK.MIN_SIMILARITY,I)
t({chemicalStructureQuery:E,chemSearchOperator:_,minSimilarity:I})}else t({chemicalStructureQuery:E,chemSearchOperator:_})},expandHeight:!0,scrollable:!0},i.createElement("div",{className:(0,a.iv)(f.chemicalDrawer)},i.createElement(o.kp,{onMoleculeChange:h,initialValue:E,mode:o.Ub.STANDARD})),i.createElement(ChemSearchModalOptions,{highlightChecked:g,setHighlightChecked:S,chemSearchOperator:_,setChemSearchOperator:T,minSimilarity:I,setMinSimilarity:A,toggleHighlightParams:d,className:(0,a.iv)(f.searchOptions)}))}const f=a.mM.create({chemicalDrawer:{flex:1,display:"flex",minHeight:500,paddingBottom:12},searchOptions:{paddingTop:12,borderTop:`1px solid ${d.tN}`}})},822248:(e,t,n)=>{n.d(t,{H0:()=>updateChemSearchParams,ZP:()=>extractMolQuery,Zx:()=>shouldShowChemSearchColumnsFirst,_e:()=>isChemSearch,bT:()=>getSimilarityOptionLabel,j4:()=>getDefaultChemSearchOperator,r:()=>getChemSearchChipLabel,tP:()=>isCompleteChemSearchParams,tp:()=>getChemSearchFolderItemListingExtras,wX:()=>isSubstructureSearch})
var a=n(306258),i=n(459830),s=n(432128),r=n(62315),o=n(68526),l=n(379346)
function extractMolQuery(e){for(const t of e.filters)if((0,r.kP)(t)&&t.format===r.hf.MOL)return t.value
return null}function isCompleteChemSearchParams(e){return null!=e.chemicalStructureQuery}function updateChemSearchParams(e,t){const{chemicalStructureQuery:n,chemSearchOperator:a,minSimilarity:s}=t
return(0,o.WN)(e,[{key:r.Vm.TYPES,operator:r.EF.IS_ONE_OF,value:[i.MOLECULE]},{key:r.Vm.CHEMICAL_STRUCTURE,operator:a,format:r.hf.MOL,value:n,minSimilarity:s}])}function getChemSearchOperator(e){for(const t of e.filters)if((0,r.kP)(t))return t.operator
return null}function isSubstructureSearch(e){return getChemSearchOperator(e)===r.EF.SUBSTRUCTURE}function shouldShowChemSearchColumnsFirst(e){return e.every((e=>l.ZP.isMolecule(e.id)))}function isSimilaritySearch(e){return getChemSearchOperator(e)===r.EF.SIMILARITY}function isChemSearch(e){return isSubstructureSearch(e)||isSimilaritySearch(e)}function getChemSearchFolderItemListingExtras(e,t,n,a){return isChemSearch(e)?{substructureQuery:isSubstructureSearch(e)?t:null,shouldHighlightSubstructure:n,searchScoresById:null==a?void 0:a.scoresById}:null}function getSimilarityOptionLabel(e){return`>=${100*e}%`}function getDefaultChemSearchOperator(e){var t
return isSimilaritySearch(e)?r.EF.SIMILARITY:isSubstructureSearch(e)?r.EF.SUBSTRUCTURE:null!==(t=s.Z.get(a.dK.CHEM_SEARCH_TYPE))&&void 0!==t?t:r.EF.SUBSTRUCTURE}function getChemSearchChipLabel(e){let t=""
isSubstructureSearch(e)&&(t="Substructure Search")
isSimilaritySearch(e)&&(t="Similarity Search")
return t}},159057:(e,t,n)=>{n.d(t,{X:()=>bulkFetchChemDrawStoichiometryData})
var a=n(771398)
function bulkFetchChemDrawStoichiometryData(e){return a.s0({url:"/1/api/chemistry:bulk-fetch-chemdraw-stoichiometry-data",data:{noteLinkedObjectIds:e}})}},793834:(e,t,n)=>{n.d(t,{J:()=>getMarvinFromIFrameNode})
function getMarvinFromIFrameNode(e){const t=e.contentWindow
return t?t.marvin:null}},595177:(e,t,n)=>{n.d(t,{h:()=>updateMoleculeVersion,t:()=>a})
var a
!function(e){e.CHEMISTRY_UPDATE_MOLECULE_VERSION="CHEMISTRY_UPDATE_MOLECULE_VERSION"}(a||(a={}))
function updateMoleculeVersion(e,t){return{type:a.CHEMISTRY_UPDATE_MOLECULE_VERSION,moleculeId:e,moleculeVersionId:t}}},181319:(e,t,n)=>{n.d(t,{Y8:()=>C,ZP:()=>MoleculeChemicalStructure})
var a=n(692013),i=n(769784),s=n(989526),r=n(382857),o=n(348920),l=n(306258),c=n(719878),d=n(744093),u=n(189790),p=n(578401),m=n(252658),E=n(883026)
function EditChemicalStructureModal({moleculeId:e,expectedCurrentVersionId:t,initialChemicalStructure:n,onRequestClose:a,onRequestSubmit:i}){const[r,h,g]=(0,c.xY)(n),[S,_]=(0,s.useState)(!1),T=h===r||S
return s.createElement(m._,{onRequestClose:a,onRequestSubmit:async function updateMoleculeChemicalStructure(){_(!0)
try{await(0,E.jI)(p.ae(e,t,l.c6.MOLFILE,h),"Updating molecule...")
i()}catch(e){_(!1)
throw e}},startMaximized:!0,title:"Edit chemical structure",buttons:[{disabled:T,submit:!0,text:"Save"}]},s.createElement(u.Z,{initialSketcherValue:r,onSketcherValueChange:g,mode:o.ZP.CHEMISTRY_ENABLE_MARVIN_BRACKET_TOOL?c.Ub.BASIC_SEARCH:c.Ub.STANDARD,inputFormat:o.ZP.CHEMISTRY_ENABLE_MOLFILE_V3000?null:d.hI.MOL,outputFormat:o.ZP.CHEMISTRY_ENABLE_MOLFILE_V3000?d.hI.MOLV3:d.hI.MOL}))}var h=n(751512),g=n(91092),S=n(697134),_=n(263137),T=n(334148),I=n(476604),A=n(502633)
const f=i.ZP`
  query MoleculeChemicalStructureLatestVersionQuery(
    $moleculeId: StrictString!
    $substructureQuery: StrictString
    $shouldHighlight: StrictBoolean
  ) @skipAudit @engComponent(name: CHEMISTRY) {
    molecule(id: $moleculeId) {
      ... on MoleculeNode {
        id
        archiveRecord {
          ...ArchiveRecordGraphQL
        }
        name
        molfile
        currentVersion {
          id
          imageData(referenceSubstructure: $substructureQuery, shouldHighlight: $shouldHighlight) {
            ... on SVGNode {
              base64Svg
            }
            ... on ErrorNode {
              message
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,g.f)("ArchiveRecord").fragment}
  ${(0,g.f)("InaccessibleInfo").fragment}
`,y=i.ZP`
  query MoleculeChemicalStructureByVersionQuery(
    $moleculeId: StrictString!
    $moleculeVersionId: StrictString!
    $substructureQuery: StrictString
    $shouldHighlight: StrictBoolean
  ) @skipAudit @engComponent(name: CHEMISTRY) {
    molecule(id: $moleculeId) {
      ... on MoleculeNode {
        id
        archiveRecord {
          ...ArchiveRecordGraphQL
        }
        name
        molfile
        currentVersion {
          id
        }
        version(versionId: $moleculeVersionId) {
          id
          imageData(referenceSubstructure: $substructureQuery, shouldHighlight: $shouldHighlight) {
            ... on SVGNode {
              base64Svg
            }
            ... on ErrorNode {
              message
            }
          }
        }
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,g.f)("ArchiveRecord").fragment}
  ${(0,g.f)("InaccessibleInfo").fragment}
`
var C
!function(e){e.FULL_SIZE="FULL_SIZE"
e.ITEM_LISTING_SIZE="ITEM_LISTING_SIZE"}(C||(C={}))
function MoleculeChemicalStructureContents(e){if(e.isInaccessible)return s.createElement("div",null,"You do not have access to view this molecule. Please ask your administrator for access.")
const t="SVGNode"===e.imageData.__typename?e.imageData.base64Svg:null,n="ErrorNode"===e.imageData.__typename?e.imageData.message:null,i=e.size===C.FULL_SIZE?(0,a.iv)(R.maxHeightMaxWidth):e.size===C.ITEM_LISTING_SIZE?(0,a.iv)(R.listingSize):""
return s.createElement("div",{className:(0,a.iv)(R.panelContent)},s.createElement("div",{className:(0,a.iv)(R.header)},e.editable&&s.createElement(T.Co,{buttonStyle:T.ZJ.SECONDARY,icon:"edit",size:T.qE.SMALL,text:"Edit",onClick:()=>(0,A.Z)(EditChemicalStructureModal,{moleculeId:e.moleculeId,expectedCurrentVersionId:e.currentVersionId,initialChemicalStructure:e.molfile}),disabled:e.currentVersionId!==e.selectedVersionId||e.isArchived,dataTestAttrs:{component:"MoleculeChemicalStructure",element:"editButton"}})),null!=t&&s.createElement("img",{...(0,_.Z)({component:"MoleculeChemicalStructure",element:"chemicalStructure"}),className:i,src:`data:image/svg+xml;base64,${t}`}),null!=n&&s.createElement("div",null,n))}function MoleculeChemicalStructure(e){return s.createElement(h.ZP,{query:e.moleculeVersionId?y:f,variables:e.moleculeVersionId?{moleculeId:e.moleculeId,moleculeVersionId:e.moleculeVersionId,substructureQuery:e.substructureQuery,shouldHighlight:e.shouldHighlightSubstructure}:{moleculeId:e.moleculeId,substructureQuery:e.substructureQuery,shouldHighlight:e.shouldHighlightSubstructure},renderLoading:()=>s.createElement(I.b,null)},(({molecule:t})=>s.createElement(MoleculeChemicalStructureContents,{moleculeId:t.id,currentVersionId:t.currentVersion.id,selectedVersionId:e.moleculeVersionId?e.moleculeVersionId:t.currentVersion.id,molfile:t.molfile,imageData:e.moleculeVersionId?t.version.imageData:t.currentVersion.imageData,size:e.size,isInaccessible:(0,S.CZ)(t),editable:e.editable,isArchived:(0,r.ZP)(t)})))}const R=a.mM.create({panelContent:{display:"flex",flexDirection:"column"},header:{width:"100%",marginBottom:"24px",display:"flex",justifyContent:"flex-end"},maxHeightMaxWidth:{height:"100%",width:"100%"},listingSize:{height:200,width:200}})},774613:(e,t,n)=>{n.d(t,{Z:()=>MoleculeChemicalStructureTabState})
var a=n(766455)
class MoleculeChemicalStructureTabState extends a.Xh{defaults(){return{...super.defaults(),title:"Chemical Structure",closeable:!1,preferenceKey:"molecule-chemical-structure"}}}},143885:(e,t,n)=>{n.d(t,{ZP:()=>MoleculeFileState,b2:()=>C})
var a=n(769784),i=n(440281),s=n.n(i),r=n(531041),o=n(468943),l=n(348920),c=n(598464),d=n(595177),u=n(774613),p=n(835476),m=n(15655),E=n(171471),h=n(459830),g=n(776065),S=n(679726),_=n(514927),T=n(873340),I=n(91092),A=n(87636),f=n(432128),y=n(166459)
const C=a.Ps`
  query MoleculeFileQuery($fileId: StrictString!) @engComponent(name: CHEMISTRY) {
    molecule(id: $fileId) @audit(msg: "Opened molecule {name}") {
      ... on MoleculeNode {
        name
        currentVersion {
          id
        }
        isContainedInComplexPolymer
        ...BaseFolderItemFileGraphQL
      }
      ...InaccessibleInfoGraphQL
    }
  }
  ${(0,I.f)("BaseFolderItemFile").fragment}
  ${(0,I.f)("InaccessibleInfo").fragment}
`
class Molecule extends T.Z{getQueryWrapper(){return{query:C}}queryVariables(){return{fileId:this.id}}getGraphQLFolderItemFromQueryData(e){return e.molecule}getUpdatedQueryData(e){return{molecule:{...this.graphQLFolderItem(),...e}}}setBanner(){c.j0(this.graphQLFolderItem().id,this.graphQLFolderItem().currentVersion.id)?this.isArchived()?this.setBannerText("Editing disabled on archived molecule."):this.graphQLFolderItem().isContainedInComplexPolymer?this.setBannerText("Editing chemical structure is disabled because molecule is contained in complex polymer."):this.allowChemicalStructureEdits()?this.setBannerText(null):this.setBannerText("Editing chemical structure is disabled due to insufficient permissions."):this.setBannerText("Editing disabled on previous versions.")}allowChemicalStructureEdits(){return this.writable()&&!this.graphQLFolderItem().isContainedInComplexPolymer}allowEditsToNote(){return this.writable()&&c.j0(this.graphQLFolderItem().id,this.graphQLFolderItem().currentVersion.id)}duplicate(){S.Z.openForCopy({showInventory:!0},(e=>{g.Z.copyAndOpenItem(this.id,e)}))}}class MoleculeHistoryPanelState extends s().Model{}class MoleculeInformationPanelState extends s().Model{}class MoleculeToolbarState extends s().Model{defaults(){return{moleculeHistoryPanelState:new MoleculeHistoryPanelState,moleculeInformationPanelState:new MoleculeInformationPanelState}}}class MoleculeFileState extends _.Z{static initClass(){this.fileType=h.MOLECULE
this.Model=Molecule}hasMetadata(){return!0}defaults(){return r.default.extend(super.defaults(),{toolbar:new MoleculeToolbarState,statusbar:new m.o0})}initialize(e,t){super.initialize(e,t);(0,A.Z)(this.buffers(),this.metadataTab,this.noteTab,this.resultsTab,this.storageTab,this.childEntityTabs,this.embeddedDashboardTab,this.relevantItemsTab)
if(l.ZP.CHEMISTRY_ENABLE_MOLECULE){const e=new u.Z({moleculeId:this.model().id,molecule:this.get("molecule")})
this.buffers().at(0).tabs().add(e)
e.set({active:!0})
if(!l.ZP.CHEMISTRY_HIDE_PHYSICOCHEMICAL_PROPERTIES_TAB||!this.model().isRegistered()){const e=new p.Z({moleculeId:this.model().id})
this.buffers().at(0).tabs().add(e)}o.L9(E.Cj.VIEWED_MOLECULE,{moleculeId:this.get("id"),moleculeVersionId:this.get("molecule").graphQLFolderItem().currentVersion.id})}(0,y.getStore)().dispatch((0,d.h)(this.get("id"),this.get("molecule").graphQLFolderItem().currentVersion.id))
const n=(0,y.getStore)().subscribe(this.get("molecule").setBanner.bind(this.get("molecule")))
this.set({reduxUnsubscribe:n})
const a=f.Z.get(this.getSplitWorkspacePreferenceKey())
this.setIsWorkspaceSplit(null==a||a)}isRegistryItem(){return!0}cleanUp(){super.cleanUp()
this.get("reduxUnsubscribe")()}}MoleculeFileState.initClass()},835476:(e,t,n)=>{n.d(t,{Z:()=>MoleculePhysicochemicalPropertiesTabState})
var a=n(766455)
class MoleculePhysicochemicalPropertiesTabState extends a.Xh{defaults(){return{...super.defaults(),title:"Physicochemical Properties",closeable:!1,preferenceKey:"molecule-physicochemical-properties"}}}},440265:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(930420),i=n(595177)
const s={}
const r=(0,a.Z)({moleculeVersionUIs:function reduceMoleculeVersionUIs(e=s,t){return t.type===i.t.CHEMISTRY_UPDATE_MOLECULE_VERSION?{...e,[t.moleculeId]:{...e[t.moleculeId],moleculeVersionId:t.moleculeVersionId}}:e}})},852375:(e,t,n)=>{n.d(t,{Z:()=>CollaborationManagementModal,o:()=>SavingCollaborationManagementModal})
var a=n(576118),i=n(989526),s=n(751512),r=n(974913),o=n(87209),l=n(205986),c=n(315727),d=n(33572),u=n(895640)
function CollaborationManagementModal(e){var t,n,s,r,o
const[u,p]=i.useState(e.collaborations),m=null===(n=null===(t=e.policeable)||void 0===t?void 0:t.currentUserPermissions.admin)||void 0===n||n,E=!0===e.saving?e.saving:!m
return i.createElement(l.ZP,{title:`Manage Access to ${e.policeableName}`,onRequestSubmit:m?async()=>{e.setCollaborations(u)
null!=e.onRequestSubmit&&await e.onRequestSubmit(u)}:void 0,onRequestClose:()=>{e.onRequestClose()},closeable:!1,buttons:[{cancel:!0,text:m?"Discard changes":"Close",disabled:e.saving,dataTestAttrs:{component:"CollaborationManagementModal",element:"cancelButton"}},...m?[{submit:!0,text:null!==(s=e.submitButtonText)&&void 0!==s?s:"Done",disabled:E,dataTestAttrs:{component:"CollaborationManagementModal",element:"submitButton"}}]:[]],dataTestAttrs:{component:"CollaborationManagementModal",element:"modal"}},i.createElement(c.gY,{policeable:e.policeable,collaborations:u,ancestorCollaborations:e.ancestorCollaborations,setCollaborations:p,renderAuditorColumn:e.renderAuditorColumn,onLeave:["ProjectNode","RegistryNode","FolderNode"].includes(null!==(o=null===(r=e.policeable)||void 0===r?void 0:r.__typename)&&void 0!==o?o:"")?t=>d.je(e.policeable.id,t.party.id).then((()=>{var t
e.onRequestClose()
null===(t=e.onUpdate)||void 0===t||t.call(e)})).catch((e=>e.isCanceled?(0,a.doesNotReject)(e):(0,a.rejects)(e))).finally((()=>{var t
null===(t=e.refetch)||void 0===t||t.call(e)})):void 0,isReadOnly:E,modalRender:!0}))}function SavingCollaborationManagementModal(e){var t
const[n,a]=(0,u.Z)(e.policeableId),[l,c]=i.useState(!1)
i.useEffect((()=>{n.queryResultType===s.NI.PENDING?o.$Z():o.Cp()}),[n.queryResultType])
if(n.queryResultType===s.NI.ERROR){r.ZP.error("Could not load collaborators; try reloading the page.")
return i.createElement(i.Fragment,null)}return n.queryResultType!==s.NI.SUCCESS?i.createElement(i.Fragment,null):i.createElement(CollaborationManagementModal,{...n,...a,renderAuditorColumn:null!==(t=e.renderAuditorColumn)&&void 0!==t&&t,submitButtonText:"Save",saving:l,onRequestClose:e.onRequestClose,onRequestSubmit:async t=>{var n
c(!0)
await e.onRequestSubmit(t).catch((e=>{r.ZP.notifyError(e)
c(!1)}))
await(null===(n=a.refetch)||void 0===n?void 0:n.call(a))
o.Cp()},policeableName:n.policeable.name})}},573736:(e,t,n)=>{n.d(t,{$w:()=>OwnerPolicyInfo,Hn:()=>A,P6:()=>OverflowMenuCell,V5:()=>PolicyDropdown,oC:()=>InheritedPolicyInfo,ur:()=>PartyCell})
var a=n(692013),i=n(764403),s=n.n(i),r=n(989526),o=n(263174),l=n(443626),c=(n(788836),n(263137),n(309718)),d=n(396669),u=n(334148),p=n(271359),m=n(954240),E=n(361974),h=n(920672),g=n(36424),S=n(297020),_=n(413714),T=n(472347),I=(n(685370),n(808844))
const A="None"
function PolicyDropdown(e){var t,n
const a=[...e.allowNone?[{name:A,value:A}]:[],...e.policies.map((e=>({name:e.name,value:e.id})))],i=null!==(n=null===(t=e.policies.find((t=>t.id===e.policyId)))||void 0===t?void 0:t.name)&&void 0!==n?n:A
return r.createElement(m.ZP,{disabled:e.isReadOnly,buttonSize:e.buttonSize,menu:r.createElement(T.Z,{width:S.zL.LARGE,height:S.Bl.MEDIUM,optionDatas:a,onSelect:e.onChangePolicy,selectedValue:e.policyId}),displayName:i,shouldEllipsize:!0,dataTestAttrs:{component:"SelectDropdown",element:"input",key:"policy"}})}function InheritedPolicyInfo(e){let t="lock",n="No Access",i="This policy is inherited from an item you do not have access to."
if("InaccessibleInfoNode"!==e.policeable.__typename){t=e.policeable.type
n=e.policeable.name
i=`This policy is inherited from the ${(0,I.E2)(e.policeable.type)}. Changes to this access must be done on that ${(0,I.E2)(e.policeable.type)}.`}return r.createElement(r.Fragment,null,r.createElement("div",{className:s()(e.hasTopSpacing&&"u-small-padding-top")},e.policyName),r.createElement("div",{className:s()((0,a.iv)(f.inheritedResourceRow))},"From"," ",r.createElement(h.Z,{text:i,placement:E.ZH.BOTTOM},r.createElement("span",{className:s()((0,a.iv)(f.inheritedResource))},r.createElement(g.Z,{icon:t})," ",n))))}function OwnerPolicyInfo({policeable:e,policyName:t,hasTopSpacing:n}){return r.createElement(r.Fragment,null,t&&r.createElement("div",{className:s()(n&&"u-small-padding-top")},t),r.createElement("div",{className:(0,a.iv)(f.inheritedResourceRow)},"From"," ",r.createElement("span",{className:(0,a.iv)(f.inheritedResource)},null!=e&&"InaccessibleInfoNode"!==e.__typename&&(0,I.co)((0,I.E2)(e.type))," ","Owner")))}function PartyCell(e){return r.createElement("div",{className:(0,a.iv)(f.partyCell)},e.groupRole===o.OrganizationPermissionRole.ADMIN?r.createElement("div",{className:(0,a.iv)(f.groupAdminName)},"Admins of ",r.createElement("strong",null,(0,l.a)(e.party))):r.createElement("div",{className:(0,a.iv)(f.avatarWithName)},r.createElement(d.X,{avatarInfo:e.party,shape:null!=e.groupRole?c.o.SQUARE:c.o.CIRCLE,size:c.D.NEWSMALL,showTooltip:!1,wrapName:!0})))}function OverflowMenuCell(e){return r.createElement("div",null,e.menuOptions.length>0&&e.isDirectCollaborator&&r.createElement(_.Z,{buttonProps:{buttonStyle:u.ZJ.TRANSPARENT,size:u.qE.SMALL,textColor:p.Rl},options:e.menuOptions}))}const f=a.mM.create({adminRowCell:{borderTop:"none"},inheritedResourceRow:{fontSize:11},inheritedResource:{color:p.pp,overflowWrap:"break-word",wordWrap:"break-word"},partyCell:{whiteSpace:"pre-wrap",overflowWrap:"break-word",wordWrap:"break-word",overflow:"hidden",textOverflow:"ellipsis"},avatarWithName:{fontWeight:"bold"},groupAdminName:{paddingLeft:25,fontSize:14}})},669324:(e,t,n)=>{n.d(t,{Z:()=>q})
var a=n(767807),i=n.n(a),s=n(989526),r=n(531041),o=n(232606),l=n(56063),c=n(106664),d=n(348920),u=n(459830),p=n(741522),m=n(974913),E=n(263137),h=n(102176),g=n(929123),S=n(334148),_=n(319675),T=n(220798),I=n(379346),A=n(257846)
class AddCollaboratorFormGroup extends s.Component{constructor(){super(...arguments)
this.state={isInvitingCollaborator:!1,text:""}
this.inviteCollaborator=e=>{this.setState({isInvitingCollaborator:!0})
p.Z.addCollaborator(this.props.ownableId,{entity_id:e}).done((()=>{m.ZP.success(`Successfully invited ${e}`)})).fail(m.ZP.notifyError).always((()=>{this._isMounted&&this.setState({isInvitingCollaborator:!1})}))}
this._allowInvites=()=>null!=this.props.ownableId&&I.ZP.apiIdToType(this.props.ownableId)===u.SOURCE&&d.ZP.ENABLE_USER_SIGNUPS
this.canInviteQueryAsEmail=()=>this._allowInvites()&&A.Z.isValidEmail(this.state.text)
this._filterCollaborators=(e,t)=>t.filter((e=>!this.props.existingCollaboratorIds.includes(e.id)))
this._handleSubmit=({entity:e,email:t})=>{if(e)this.props.addPartyAsCollaborator(e)
else{(0,o.hu)(t&&null!=this.props.ownableId,"should have entity or both email and ownableId to add collaborator")
this.inviteCollaborator(t)}}
this._handleChangeInput=e=>{this.setState({text:e})}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){let e="Add collaborator"
this.state.isInvitingCollaborator?e="Inviting collaborator":this.canInviteQueryAsEmail()&&(e="Invite collaborator")
return s.createElement(h.Z,null,s.createElement(g.Z,null,this.props.labelText||"Manage collaborators"),s.createElement("div",{className:"input-group u-width-full"},s.createElement("div",{className:"collaborator-search-container",...(0,E.Z)({component:"AddCollaboratorFormGroup",element:"root"})},s.createElement(_.$,{allowEmails:this._allowInvites(),allowBenchlingApps:d.ZP.ENABLE_BENCHLING_APPS,buttonProps:{buttonStyle:S.ZJ.PRIMARY,disabled:this.state.isInvitingCollaborator,size:S.qE.MEDIUM,text:e},filterOptions:this._filterCollaborators,onChangeInput:this._handleChangeInput,onSubmit:this._handleSubmit,size:T.I.MEDIUM}))))}}const f=AddCollaboratorFormGroup
var y=n(692013),C=n(764403),R=n.n(C),b=n(199821),N=n(443626),O=n(954240),L=n(865486),P=n(924982),D=n(602652),v=n.n(D),M=n(933388),B=n(788836),U=n(868710),F=n(36424),w=n(685370)
const k="NONE"
class PolicyDropdown extends s.Component{constructor(){super(...arguments)
this.handleChangePolicy=e=>{e!==k?this.props.onChangePolicy({[this.props.policyKey]:e}):this.props.onChangePolicy({[this.props.policyKey]:null})}}render(){const e=this.props.value?this.props.policies.find((e=>e.id===this.props.value)):null,t=e?(0,b.Z)(e):k
return s.createElement(O.ZP,{disabled:this.props.isReadOnly,displayName:t,menu:s.createElement(L.ZP,{height:L.ZP.HEIGHTS.MEDIUM,width:L.ZP.WIDTHS.FULL,scrollable:!0,value:t},this.props.allowNone&&s.createElement(P.Z,{value:k,onSelect:this.handleChangePolicy},k),this.props.policies.map((e=>s.createElement(P.Z,{key:e.id,value:e.id,onSelect:this.handleChangePolicy},(0,b.Z)(e))))),dataTestAttrs:{component:"SelectDropdown",element:"input",key:"policy"}})}}class CollaboratorRowView extends s.Component{constructor(){super(...arguments)
this._handleChangePolicy=e=>{this.props.onChangeCollaboratorPolicy(this.props.collaborator.id,e)}
this._handleRemoveCollaborator=()=>{this.props.onRemoveCollaborator(this.props.collaborator.id)}
this._handleLeave=async()=>{await Promise.resolve(w.iG("Leave",`Are you sure you want to remove ${(0,N.a)(this.props.collaborator)} as a collaborator? This action cannot be undone.`,S.ZJ.NEGATIVE,{promiseCompatible:!0,enableRedesign:!0}))&&this.props.onLeave(this.props.collaborator.id)}
this._canLeave=()=>{const e=B.Z.currentUser()
return!!e&&(this.props.collaborator.id===e.id||e.organizationIds.includes(this.props.collaborator.id)||e.teamIds.includes(this.props.collaborator.id))}}render(){const e={isReadOnly:this.props.isReadOnly,policies:this.props.policies,onChangePolicy:this._handleChangePolicy}
return[s.createElement("tr",{key:"row",...(0,E.Z)({component:"CollaboratorRowView",element:"root"})},s.createElement("td",{className:(0,y.iv)(Z.partyCell)},s.createElement("strong",null,(0,N.a)(this.props.collaborator))),s.createElement("td",null,(0,l.Ne)(this.props.collaborator)?s.createElement(PolicyDropdown,{...e,allowNone:!1,policyKey:(0,c.pc)(this.props.collaborator),value:(0,c.Bi)(this.props.collaborator)}):s.createElement(PolicyDropdown,{...e,allowNone:!0,policyKey:(0,c.km)(this.props.collaborator),value:(0,c.ME)(this.props.collaborator)})),this.props.renderExtraColumns&&this.props.renderExtraColumns(this.props.collaborator.id),!(this.props.isReadOnly||this.props.collaborator.owner)&&s.createElement("td",null,s.createElement(F.Z,{icon:"trash-can",className:"removeCollaborator u-faded",onClick:this._handleRemoveCollaborator,dataTestAttrs:{component:"CollaboratorRowView",element:"removeCollaboratorButton"}})),this.props.isReadOnly&&this.props.onLeave&&this._canLeave()?s.createElement("td",null,s.createElement(U.ZP,{title:"Leave"},s.createElement(F.Z,{icon:"trash-can",className:"removeCollaborator u-faded",onClick:this._handleLeave}))):s.createElement("td",null)),!(0,l.Ne)(this.props.collaborator)&&s.createElement("tr",{key:"admin-role-row"},s.createElement("td",{className:R()((0,y.iv)(Z.adminRowCell),(0,y.iv)(Z.partyCell))},"Admins of ",(0,N.a)(this.props.collaborator)),s.createElement("td",{className:(0,y.iv)(Z.adminRowCell)},s.createElement(PolicyDropdown,{...e,allowNone:!1,policyKey:(0,c.W_)(this.props.collaborator),value:(0,c.b7)(this.props.collaborator)?(0,c.b7)(this.props.collaborator):(0,c.ME)(this.props.collaborator)})))]}}CollaboratorRowView.propTypes={collaborator:l.fN,isReadOnly:v().bool.isRequired,onChangeCollaboratorPolicy:v().func.isRequired,onLeave:v().func,onRemoveCollaborator:v().func.isRequired,policies:v().arrayOf(M.gG.isRequired).isRequired,renderExtraColumns:v().func}
const x=CollaboratorRowView,Z=y.mM.create({adminRowCell:{borderTop:"none"},partyCell:{overflowWrap:"break-word",wordWrap:"break-word"}}),G="NO_PERMISSION"
class OwnerRowView extends s.Component{constructor(){super(...arguments)
this.handleChangeOwnerDataPolicy=e=>{const t=e!==G?e:null
this.props.onChangeOwnerPolicy(t)}}render(){var e,t,n
const a=null===(e=this.props.policies)||void 0===e?void 0:e.find((e=>{var t
return e.id===(null===(t=this.props.ownerInfo)||void 0===t?void 0:t.memberDataPolicyId)}))
return s.createElement("tr",null,s.createElement("td",{className:(0,y.iv)(H.partyCell)},(null===(t=this.props.ownerInfo)||void 0===t?void 0:t.type)===u.ORGANIZATION&&"Members of ",s.createElement("strong",null,(0,N.a)(this.props.owner))),s.createElement("td",null,(null===(n=this.props.ownerInfo)||void 0===n?void 0:n.type)===u.USER?"ADMIN":s.createElement(O.ZP,{displayName:a?(0,b.Z)(a):k,disabled:this.props.isReadOnly,menu:s.createElement(L.ZP,{height:L.ZP.HEIGHTS.MEDIUM,width:L.ZP.WIDTHS.FULL,scrollable:!0,value:a?(0,b.Z)(a):G},s.createElement(P.Z,{value:G,onSelect:this.handleChangeOwnerDataPolicy},"NONE"),this.props.policies.map((e=>s.createElement(P.Z,{key:e.id,value:e.id,onSelect:this.handleChangeOwnerDataPolicy},(0,b.Z)(e)))))})),this.props.renderExtraColumns&&this.props.renderExtraColumns(this.props.owner.id),!this.props.isReadOnly&&s.createElement("td",null),s.createElement("td",null))}}function CreatorRowView(e){return s.createElement("tr",null,s.createElement("td",{className:(0,y.iv)(H.partyCell)},s.createElement("strong",null,"Schema Creator")),s.createElement("td",null,e.creatorPolicy.name))}class CollaboratorsFormGroup extends s.Component{render(){return s.createElement(h.Z,null,s.createElement(g.Z,null,"Collaborators"),s.createElement("table",{className:R()((0,y.iv)(H.table),"library-collaborators table table-hover u-no-spacing-bottom")},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{className:(0,y.iv)(H.partyCell)},"User",d.ZP.ENABLE_BENCHLING_APPS?" / App":""," / Organization",d.ZP.ENABLE_TEAMS?" / Team":""),s.createElement("th",{className:(0,y.iv)(H.permissionsCell)},"Access policies"),this.props.renderExtraColumnHeaders&&this.props.renderExtraColumnHeaders(),!this.props.isReadOnly&&s.createElement("th",null),s.createElement("th",null))),this.props.owner&&s.createElement("tbody",null,s.createElement(OwnerRowView,{isReadOnly:this.props.isReadOnly,owner:this.props.owner,ownerInfo:this.props.ownerInfo,onChangeOwnerPolicy:this.props.onChangeOwnerPolicy,policies:this.props.policies,renderExtraColumns:this.props.renderExtraColumns})),this.props.creatorRowPropsGroup&&this.props.creatorRowPropsGroup.showSchemaCreatorRow&&s.createElement("tbody",null,s.createElement(CreatorRowView,{creatorPolicy:this.props.creatorRowPropsGroup.creatorPolicy})),s.createElement("tbody",null,(()=>{const e=[]
this.props.collaborators.forEach(((t,n)=>{this.props.owner&&t.id===this.props.owner.id||e.push(s.createElement(x,{isReadOnly:this.props.isReadOnly,key:n,collaborator:t,onChangeCollaboratorPolicy:this.props.onChangeCollaboratorPolicy,onLeave:this.props.onLeave,onRemoveCollaborator:this.props.onRemoveCollaborator,policies:this.props.policies,renderExtraColumns:this.props.renderExtraColumns}))}))
return e})())))}}const H=y.mM.create({table:{tableLayout:"fixed"},partyCell:{width:"35%",overflowWrap:"break-word",wordWrap:"break-word"},permissionsCell:{width:"35%"}}),W=CollaboratorsFormGroup
class CollaboratorsSection extends s.Component{constructor(){super(...arguments)
this._handleChangeOwnerDataPolicy=e=>{(0,o.hu)(void 0!==this.props.owner&&void 0!==this.props.ownerInfo,"Owner and ownerInfo must be defined.");(0,o.hu)(this.props.ownerInfo.type===u.ORGANIZATION,"Owner must be organization to change owner permission.")
const t={ownerInfo:i()(this.props.ownerInfo,{$merge:{memberDataPolicyId:e}})},n=B.Z.currentUser()
r.default.some(this.props.collaborators,(e=>e.id===n.id))||(t.collaborators=i()(this.props.collaborators,{$push:[{dataPolicyId:this.props.getAdminPolicyId(this.props.policies),...n}]}))
this.props.onUpdate(t)}
this._handleChangeCollaboratorPolicy=(e,t)=>{this.props.onUpdate({collaborators:this.props.collaborators.map((n=>{if(n.id!==e)return n
const a=i()(n,{$merge:t})
if((0,l.Ne)(a))return a;(0,c.ME)(a)||(0,c.t3)(a,this.props.policyType,(0,c.b7)(a)||this.props.getDefaultPolicyId(this.props.policies))
return a}))})}
this._handleAddPartyAsCollaborator=e=>{var t
if(this.props.collaborators.some((t=>t.id===e.id)))return!1
if(this.props.owner&&(null===(t=this.props.owner)||void 0===t?void 0:t.id)===e.id)return!1
const n={...e}
if((0,l.Ne)(n))(0,c.SK)(n,this.props.policyType,this.props.getDefaultPolicyId(this.props.policies))
else{const e=n.type!==l.El.TEAM||d.ZP.POLICIES_DEFAULT_TEAM_ADMINS_TO_COLLABORATOR?null:this.props.getAdminPolicyId(this.props.policies);(0,c.t3)(n,this.props.policyType,e);(0,c.oc)(n,this.props.policyType,this.props.getDefaultPolicyId(this.props.policies))}this.props.onUpdate({collaborators:i()(this.props.collaborators,{$push:[n]})})
return!0}
this._handleRemoveCollaborator=e=>{this.props.onUpdate({collaborators:this.props.collaborators.filter((t=>t.id!==e))})}
this.renderAuditorColumnHeader=()=>s.createElement("th",null,"Auditor")
this._handleChangeCollaboratorAuditorStatus=(e,t)=>{const n=t.target.checked
this.props.onUpdate({collaborators:this.props.collaborators.map((t=>t.id!==e?t:i()(t,{$merge:{auditor:n}})))})}
this.renderAuditorColumn=e=>{var t
const n=!!this.props.owner&&e===(null===(t=this.props.owner)||void 0===t?void 0:t.id),a=r.default.findWhere(this.props.collaborators,{id:e})
if(n&&this.props.ownerInfo&&this.props.ownerInfo.type!==u.USER)return s.createElement("td",null)
if(!n&&-1===[u.USER,u.TEAM].indexOf(a.type))return s.createElement("td",null)
const i=n||this.props.collaborators.some((t=>Boolean(e===t.id&&t.auditor))),o=!n&&a.type===u.TEAM&&!(0,c.ME)(a),l=this._handleChangeCollaboratorAuditorStatus.bind(this,e)
return s.createElement("td",null,s.createElement("input",{type:"checkbox",checked:i,onChange:l,disabled:n||this.props.isReadOnly||o}))}}render(){const e=this.props.collaborators.map((e=>e.id))
this.props.owner&&e.push(this.props.owner.id)
return s.createElement("div",{className:"well",...(0,E.Z)({component:"CollaboratorsSection",element:"root"})},!this.props.isReadOnly&&s.createElement(f,{addPartyAsCollaborator:this._handleAddPartyAsCollaborator,existingCollaboratorIds:e,ownableId:this.props.policeableId,labelText:this.props.labelText}),this.props.renderDescription&&this.props.renderDescription(),s.createElement(W,{owner:this.props.owner,ownerInfo:this.props.ownerInfo,onChangeOwnerPolicy:this._handleChangeOwnerDataPolicy,onChangeCollaboratorPolicy:this._handleChangeCollaboratorPolicy,onLeave:this.props.onLeave,onRemoveCollaborator:this._handleRemoveCollaborator,policies:this.props.policies,creatorRowPropsGroup:this.props.creatorRowPropsGroup,isReadOnly:this.props.isReadOnly,collaborators:this.props.collaborators,renderExtraColumns:this.props.enableAuditors?this.renderAuditorColumn:null,renderExtraColumnHeaders:this.props.enableAuditors?this.renderAuditorColumnHeader:null}))}}CollaboratorsSection.defaultProps={enableAuditors:!1}
const q=CollaboratorsSection},956915:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(989526),i=n(212300),s=n(69934),r=n(505258),o=n(56063),l=n(669324)
function _getAdminDataPolicyId(e){return(0,r.Uj)(e).id}function _getDefaultDataPolicyId(e){return(0,r.Kh)(e).id}const c=(0,i.$j)((function mapStateToProps(e){return{dataPolicies:(0,s.Z)(e.models.policies.dataPolicies)}}))((function OwnableCollaboratorsSection({enableAuditors:e=!1,...t}){t.collaborators.map((e=>e.id)).push(t.owner.id)
return a.createElement(l.Z,{getAdminPolicyId:_getAdminDataPolicyId,getDefaultPolicyId:_getDefaultDataPolicyId,collaborators:t.collaborators,policies:t.dataPolicies,isReadOnly:t.isReadOnly,enableAuditors:e,policeableId:t.ownableId,onLeave:t.onLeave,onUpdate:t.onUpdate,owner:t.owner,ownerInfo:t.ownerInfo,policyType:o.Mi.DATA})}))},33572:(e,t,n)=>{n.d(t,{ZN:()=>openSavingCollaborationManagementModal,je:()=>removeCollaborator})
var a=n(581210),i=n(232606),s=n(609630),r=n(832821),o=n(56063),l=n(348920),c=n(852375),d=n(897100),u=n(502633),p=n(257846),m=n(771398)
const E={removeCollaborator:(e,t,n)=>m.WY({url:`${n}/${e}/collaborators/${t}`}),updateCollaborations:(e,t,n)=>m.Ry({url:`${n}/${e}/collaborations`,data:{collaborations:t}})}
function removeCollaborator(e,t){const n=(0,a.tQ)({id:e})
return async function updatePoliceableWithDataModifications(e,t){let n=null
await(0,s.GE)({changeSummary:`1 ${p.Z.toSentenceCase(t)} will be modified`,onRequestClose:()=>{},onRequestSubmit:async()=>{n=await e()}},l.ZP.PROJECT_FOLDER_ENABLE_DATA_MODIFICATIONS,{module:"PROJECT_FOLDER",actionOrigin:"collaboration_management_modal",modifiedAction:"MODIFY",numModifiedTotalItems:1,entryId:null})
const a=(0,d.Z)(Promise.resolve(n))
null==n&&a.cancel()
return a.promise}((()=>E.removeCollaborator(e,t,(0,a.Kq)(n))),n)}function openSavingCollaborationManagementModal(e){(0,i.Gp)((0,r.ZP)({id:e}),`Object with ID ${e} may not support capability. Did you add your type to CoreObjectMappings?`);(0,u.Z)(c.o,{policeableId:e,onRequestSubmit:async t=>{await function updateCollaborations(e,t){(0,i.Gp)((0,r.ZP)({id:e}),`Object with ID ${e} may not support capability. Did you add your type to CoreObjectMappings?`)
const n=(0,a.tQ)({id:e})
return E.updateCollaborations(e,(0,o.E9)(t),(0,a.Kq)(n))}(e,t)}})}},127415:(e,t,n)=>{n.d(t,{Z:()=>SchemaCollaboratorsSection})
var a=n(989526),i=n(56063),s=n(348920),r=n(315727),o=n(669324),l=n(872153),c=n(751512),d=n(974913),u=n(334148),p=n(476604)
function _getAdminSchemaPolicyId(e){return e.length>0?e[0].id:""}function _getDefaultSchemaPolicyId(e){return e.length>0?e[0].id:""}function SchemaCollaboratorsSection(e){function renderDescription(){return a.createElement("div",{className:"u-spacing-bottom"},a.createElement("strong",null,"All users")," can view objects of schemas by default. Granting additional access policies will control where schemas are listed in the product, who can create and edit schema objects, and who can manage schema access."," ",a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://help.benchling.com/hc/articles/9684210957581"},"Learn more"))}const t=(0,l.ZP)()
if(t.queryResultType===c.NI.PENDING)return a.createElement(p.b,null)
if(t.queryResultType!==c.NI.SUCCESS){d.ZP.error("Could not load schema policies; try reloading the page.")
return null}{let n=t.schemaPolicies
null!=e.policyPredicate&&(n=n.filter((t=>{var n
return null===(n=e.policyPredicate)||void 0===n?void 0:n.call(e,t)})))
return a.createElement("div",null,s.ZP.PERMISSIONS_ENABLE_NEW_COLLABORATION_UI?a.createElement(a.Fragment,null,renderDescription(),a.createElement("div",{className:"u-large-padding-bottom"},a.createElement(r.ZP,{isReadOnly:e.isReadOnly,collaborations:e.collaborators.flatMap((e=>(0,i.UF)(e,n))),ancestorCollaborations:[],setCollaborations:t=>{const n=(0,i.AX)(t)
e.onUpdate(n)},policies:n}))):a.createElement(o.Z,{getAdminPolicyId:_getAdminSchemaPolicyId,getDefaultPolicyId:_getDefaultSchemaPolicyId,collaborators:e.collaborators,renderDescription,enableAuditors:!1,isReadOnly:e.isReadOnly,policeableId:e.policeableId,onUpdate:function _handleUpdate(t){t.collaborators&&e.onUpdate(t.collaborators)},policies:n,policyType:i.Mi.SCHEMA}),!e.isReadOnly&&e.onSubmit&&a.createElement(u.Co,{buttonStyle:u.ZJ.PRIMARY,onClick:function _handleSubmit(){e.onSubmit&&e.onSubmit().then((()=>{d.ZP.success("Successfully updated collaborators.")})).catch(d.ZP.notifyError)},size:u.qE.MEDIUM,text:"Update Collaborators",dataTestAttrs:{component:"SchemaCollaboratorsSection",element:"updateCollaboratorsButton"}}))}}},895640:(e,t,n)=>{n.d(t,{Z:()=>useCollaborationManagementState})
var a=n(769784),i=n(64558),s=n(989526),r=n(751512),o=n(91092),l=n(697134),c=n(38317)
const d=a.Ps`
  query CollaborationManagementStateQuery($id: StrictString!) @skipAudit {
    policeable(id: $id) {
      ...InaccessibleInfoGraphQL
      ... on PoliceableInterface {
        id
        name
        inheritedCollaborations {
          party {
            ... on PartyInterface {
              id
              name
              avatarUrl
              handle
            }
            ... on GroupInterface {
              admin
            }
          }
          policy {
            ... on PolicyInterface {
              id
              name
              isHidden
            }
          }
          organizationRole
          teamRole
          auditor
          fromOwnership
          resource {
            ...InaccessibleInfoGraphQL
            ... on RestrictedResourceNode {
              id
              name
              type
            }
          }
        }
        currentUserPermissions {
          admin
        }
      }
    }
  }
  ${(0,o.f)("InaccessibleInfo").fragment}
`
function useCollaborationManagementState(e){const t=(0,r.A4)(d,{variables:{id:e},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:null==e}),[n,a]=(0,s.useState)(void 0)
if(t.type===r.NI.SKIPPED)return[{queryResultType:r.NI.SUCCESS,initialCollaborations:[],ancestorCollaborations:[],collaborations:null!=n?n:[]},{setCollaborations:a}]
if(t.type!==r.NI.SUCCESS)return[{queryResultType:t.type,initialCollaborations:[],collaborations:[]},{setCollaborations:e=>{}}]
const o=(0,l.i2)(t.data.policeable),[u,p]=function partitionCollaborations(e){return(0,i.uK)(e.inheritedCollaborations,(t=>null!=t.resource&&(0,l.k3)(t.resource)===e.id))}(o)
return[{queryResultType:t.type,policeable:(0,c.Z)(o,"inheritedCollaborations"),initialCollaborations:u,ancestorCollaborations:p,collaborations:null!=n?n:u},{setCollaborations:a,refetch:t.refetch}]}},879052:(e,t,n)=>{n.d(t,{Z:()=>AlignmentView})
var a=n(440281),i=n.n(a),s=n(250965),r=n.n(s),o=n(804921),l=n(62955),c=n(468943),d=n(974913),u=n(502633),p=n(294337)
class AlignmentView extends i().View{static openModalWithIds(e){(0,c.j)("alignment","openModal",{source:"folder-expanded-toolbar"})
return r().ajax({url:"/1/api/sequences/summaries",type:"GET",dataType:"json",traditional:!0,data:{id:e}}).fail(d.ZP.notifyError).done((e=>{this.openModalWithSequences(e)}))}static openModalWithSequences(e){const t=e.map((e=>{var t
return{type:l.n$.BIOENTITY,name:e.name,id:e.id,canBeTemplate:null!==(t=e.permissions.polymerFeaturesEditable)&&void 0!==t&&t,useCurrentVersion:!0,nucleotideType:e.nucleotideType}}));(0,u.Z)(o.Z,{initialInputs:t})}render(){r()(document).on("click",".js-create-alignment",(e=>{e.preventDefault();(0,c.j)("alignment","openModal",{source:"global-create"})
AlignmentView.openModalWithSequences([])}));(0,p.Z)("#create/alignment",(e=>{if(0===e.indexOf("#create/alignment?")){const t=e.slice("#create/alignment?".length).split("&")
AlignmentView.openModalWithIds(t)}else AlignmentView.openModalWithSequences([])}))
return this}}},545135:(e,t,n)=>{n.d(t,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__})
var a=n(989526),i=n(586262)
const FakeAutoSizer=({children:e,disableHeight:t})=>a.createElement("div",{style:{overflow:"visible",height:t?0:void 0}},e({height:400,width:3e3})),__WEBPACK_DEFAULT_EXPORT__=e=>n.g.__NODE_TESTING__?a.createElement(FakeAutoSizer,{...e}):a.createElement(i.Z,{...e})},489174:(e,t,n)=>{n.d(t,{Z:()=>Backdrop})
var a=n(440281),i=n.n(a),s=n(250965),r=n.n(s),o=n(68150)
class Backdrop extends i().View{initialize(e={}){this.closeEvents=["mousedown"];(null==e?void 0:e.closeOnScroll)&&this.closeEvents.push(o.C$)
this.overlay=r()("<div>").addClass("backdrop")}open(){return this.closeEvents.map((e=>this.overlay.one(`${e}.backdrop`,(e=>{this.close()
return e.preventDefault()}))))}remove(){this.overlay.remove()
return super.remove()}close(){this.overlay.off(".backdrop")
return this.overlay.detach()}}},212703:(e,t,n)=>{n.d(t,{Z:()=>u})
var a=n(531041),i=n(675649),s=n(812651),r=n(955836),o=n(959415),l=n(773364),c=n(132814),d=n(271359)
function lengthAllowEmpty(e,t,n){return e===t?0:c.length(e,t,n)}class BaseTranslation extends o.sd{translationGroupId(){return null}codonTranslationTable(e){return r.hR.STANDARD}groupTranslations(){return null==this.translationGroupId()?[this]:this.collection.filter((e=>e.translationGroupId()===this.translationGroupId()))}aminoAcidLength(e){if(!this.translationGroupId())return Math.floor(this.length(e)/3)
const t=i.Sm(this.upstreamGroupTranslations().map((t=>t.length(e))))
return Math.floor((this.length(e)+t%3)/3)}totalGroupLength(e){return i.Sm(this.groupTranslations().map((t=>t.length(e))))}leftGroupTranslations(){return this.groupTranslations().filter((e=>e.start()<this.start()))}rightGroupTranslations(){return this.groupTranslations().filter((e=>e.start()>this.start()))}upstreamGroupTranslations(){return 1===this.strand()?this.leftGroupTranslations():this.rightGroupTranslations()}getAminoAcids(e,t,n,r=l.yy.RASMOL){let o,u
if(e.length()<n)return[]
if(0===e.length())return[]
const p=e._sequence(),m=p instanceof s.GapSequence
function posToReal(e){return m?p.gapToReal(e):e}function realToPos(e){return m?p.realToGap(e):e}function realEndToPos(e){return m?p.realEndToGap(e):e}const E=posToReal(this.start()),h=posToReal(this.end()),g=posToReal(t),S=posToReal(n),_=posToReal(e.length())
if(0===_||E===h&&this.start()!==this.end())return[]
function realTranslationLength(t){return t.start()===t.end()?posToReal(e.length()):lengthAllowEmpty(posToReal(t.start()),posToReal(t.end()),_)}function realBaseSlice(t,n,a){const i=realToPos(t),r=realEndToPos(n)
return s.util.removeGaps(e.residueSlice(i,r,a))}const T=c.baseInRange(E,g,S)?E:g,I=c.endInRange(h,g,S,_)?h:c.mod(S,_),{startBasesNeeded:A,endBasesNeeded:f}=((e,t)=>{const n=i.Sm(this.upstreamGroupTranslations().map((e=>realTranslationLength(e)))),a=c.length(e,t,_)
let s,r
if(1===this.strand()){s=(n+lengthAllowEmpty(E,e,_))%3
r=c.mod(3-(s+a),3)}else{r=(n+lengthAllowEmpty(t,h,_))%3
s=c.mod(3-(r+a),3)}return{startBasesNeeded:s,endBasesNeeded:r}})(T,I),y=((e,t)=>{let n
const i=Math.min(t,lengthAllowEmpty(E,e,_))
if(0===i)n=""
else{t-=i
n=realBaseSlice(c.mod(e-i,_),e,!0)}if(0!==t){const e=a.default.sortBy(this.leftGroupTranslations(),(e=>-e.start()))
let i,s,r=0
for(;t>0&&r<e.length;){i=e[r++]
const a=posToReal(i.end()),o=posToReal(i.start()),l=Math.min(t,lengthAllowEmpty(o,a,_))
s=realBaseSlice(c.mod(a-l,_),a,!0)
n=s+n
t-=s.length
r+=1}}return n})(T,A),C=((e,t)=>{let n
const i=Math.min(t,lengthAllowEmpty(e,h,_))
if(0===i)n=""
else{t-=i
n=realBaseSlice(e,c.mod(e+i,_),!0)}if(0!==t){const e=a.default.sortBy(this.rightGroupTranslations(),(e=>e.start()))
let i,s,r=0
for(;t>0&&r<e.length;){i=e[r++]
const a=posToReal(i.start()),o=posToReal(i.end()),l=Math.min(t,lengthAllowEmpty(a,o,_))
s=realBaseSlice(a,c.mod(a+l,_),!0)
n+=s
t-=s.length}}return n})(I,f),R=realBaseSlice(T,I),b=y+R+C,N=((e,t,n,a,s)=>{let r
const o=i.Sm(this.upstreamGroupTranslations().map((e=>realTranslationLength(e))))
r=1===this.strand()?lengthAllowEmpty(e,n,s):lengthAllowEmpty(a,t,s)
return 1+Math.floor((o+r)/3)})(E,h,T,I,_)
if(1===this.strand()){o=e=>c.mod(3*e+T-y.length,_)
u=e=>e}else{o=e=>c.mod(I+C.length-3*(e+1),_)
u=e=>e.reverse()}return u(s.util.translateOnStrand(b,this.strand(),e.nucleotideType(),this.codonTranslationTable(e)).split("").map(((e,t)=>{let n=o(t),a=c.mod(n+3,_)
const i=N+t,s=function getAminoAcidColor(e,t,n){return n===l.yy.NONE?t%2==1?d.tN:d.pF:l.pd[n][e]}(e,t,r)
c.baseInRange(n,E,h)||(n=E)
c.endInRange(a,E,h,_)||(a=h)
return{b:e,color:s,aaIndex:i,indexStart:realToPos(n),indexEnd:realEndToPos(a)}})))}}const u=BaseTranslation},88823:(e,t,n)=>{n.d(t,{R:()=>a,e:()=>p})
var a,i=n(250965),s=n.n(i),r=n(531041),o=n(489174),l=n(99312),c=n(20835),d=n(952732),u=n(60614)
!function(e){e.TOP="TOP"
e.MIDDLE="MIDDLE"
e.BOTTOM="BOTTOM"}(a||(a={}))
function isString(e){return"string"==typeof e}function isFunction(e){return"function"==typeof e}class ContextMenuView extends o.Z{constructor(){super(...arguments)
this.menu=null
this.previousFocusedElement=null
this.openDeferred=(e,t,n,a)=>{this.hasRendered=!0
this.handlers={}
this.closehandlers={}
this.menuCloseHandler=a
if(t.some((e=>!r.default.result(e,"hide")&&"-"!==e))){this.menu=t
this.render()
const a=Math.min(e.pageX,s()(window).width()-this.$el.outerWidth()),i=Math.min(e.pageY,s()(window).height()-this.$el.outerHeight())
this.$el.css({display:"block",left:a,top:i})
i>s()(window).height()/2?this.$el.addClass("dropup"):this.$el.removeClass("dropup")
if(n){this.overlay.addClass("backdrop--raised")
this.$el.addClass("contextmenu--raised")}else{this.overlay.removeClass("backdrop--raised")
this.$el.removeClass("contextmenu--raised")}a>s()(window).width()-3*this.$el.outerWidth()&&this.$el.find(".dropdown-submenu").addClass("submenu-pull-left")
this.$el.before(this.overlay)}}}static initClass(){this.prototype.tagName="ul"
this.prototype.id="context-menu"
this.prototype.className="dropdown-menu contextMenu"}initialize(){this.open=this.open.bind(this)
this.render=this.render.bind(this)
super.initialize(...arguments)
this.hasRendered=!1}events(){return{"click .context-item":"onClick","contextmenu .context-item":"onCtxMenu"}}onClick(e){if(this.handlers[e.currentTarget.id]){this.handlers[e.currentTarget.id].apply(e.currentTarget)
null!=this.closehandlers[e.currentTarget.id]&&this.closehandlers[e.currentTarget.id].apply(e.currentTarget,[this.previousFocusedElement])
return this.close()}}onCtxMenu(e){this.onClick(e)
e.preventDefault()
return this.close()}open(e,t,n=!1,a){this.previousFocusedElement=document.activeElement
if(e.altKey&&window.debug){e.stopPropagation()
return!1}e.preventDefault()
e.stopPropagation()
super.open()
e.persist&&e.persist()
r.default.defer(r.default.bind(this.openDeferred,this),e,t,n,a)
return!0}close(){var e
if(this.hasRendered){super.close()
this.trigger("close")
this.$el.hide()
this.hasRendered=!1
null===(e=this.menuCloseHandler)||void 0===e||e.call(this)
return this.$('[data-toggle="tooltip"]').tooltip("destroy")}}remove(){super.remove()
this.hasRendered=!1
return this.$('[data-toggle="tooltip"]').tooltip("destroy")}_renderMenu(e){let t,n
const a=[[]]
for(n of Array.from(e))if("-"===n)a.push([])
else if(!(0,r.default)(n).result("hide")){a[a.length-1].push(n)}e=r.default.chain(a).filter((e=>0!==e.length)).each(((e,t)=>{if(0!==t)return e.unshift("-")})).flatten().value()
return(()=>{const a=[]
for(t=0;t<e.length;t++){n=e[t]
if("-"===n)a.push("<li class='divider'></li>")
else if(null!=n.menu){const e=!r.default.any(n.menu,(e=>null!=e&&e.hasOwnProperty("menu")))?"dropdown-menu dropdown-menu-scrollable":"dropdown-menu",t=n.dataTestAttrs?(0,d.Z)(n.dataTestAttrs):""
a.push(`<li class='dropdown-submenu' ${t}>\n    <a class='context-submenu-item'>${r.default.escape(n.name)}</a>\n    <ul class='${e}'>\n      ${this._renderMenu((0,r.default)(n).result("menu"))}\n    </ul>\n</li>`)}else{let e,t
null==n.id&&(n.id=r.default.uniqueId())
this.handlers[n.id]=n.click
this.closehandlers[n.id]=n.close
let i=""
if(null!=n.disabled&&(0,r.default)(n).result("disabled")){this.handlers[n.id]=null
i="disabled"}null!=n.active&&(0,r.default)(n).result("active")&&(i+=" active")
if(null!=n.tooltip){t='data-toggle="tooltip" '
t+=`title='${r.default.escape(n.tooltip)}'`}else t=""
if(null!=n.copy){if(!isString(n.copy)&&!isFunction(n.copy))throw new Error("Unexpected type for `copy`: "+typeof n.copy)
e=isString(n.copy)?n.copy:isFunction(n.copy)?n.copy():null}else e=null
const s=null!=e?`data-copy-text="${r.default.escape(e)}"`:"",o=n.dataTestAttrs?(0,d.Z)(n.dataTestAttrs):"",l=n.shortcut?r.default.escape(n.shortcut):""
a.push(`<li class='${i}' ${t} ${s} ${o}>\n  <a class='context-item' id='${r.default.escape(n.id)}'>${r.default.escape(n.name)}<span class='faded pull-right'>${l}</span></a>\n</li>`)}}return a})().join("")}render(){if(null!=this.menu){this.$el.html(this._renderMenu(this.menu))
this.$('[data-toggle="tooltip"]').tooltip({placement:"right",container:"body"})
const e=this
this.$el.find("[data-copy-text]").each((function(){u.Lx(this,{dataTransform(){return s()(this).attr("data-copy-text")},click:()=>e.close()})}));(0,c.Z)(this.$el,{component:"ContextMenu",element:"root"})}return this}}ContextMenuView.initClass()
const p=new ContextMenuView
l.isBrowser&&s()(window).on("keydown",(e=>{if(p.hasRendered){p.close()
return!1}}))},524990:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(764403),i=n.n(a),s=n(989526),r=n(467607),o=n(263137)
const l=(0,n(659680).Z)((function CopyOptionsModal({circular:e,sourceSequenceType:t,strand:n,targetNucleotideType:a}){const l=null!=n?1===n?"of Forward Strand ":"of Reverse Strand ":""
return s.createElement("div",{tabIndex:-1,className:"modal seltosequence-options-modal",...(0,o.Z)({component:"CopyOptionsModalTemplate",element:"root"})},s.createElement("div",{className:"modal-dialog"},s.createElement("div",{className:"modal-content"},s.createElement("div",{className:"modal-header"},s.createElement("h4",null,"Copy Selection ",t===r.uS.DOUBLE_STRANDED?l:"","to New"," ",a)),s.createElement("div",{className:"modal-body"},s.createElement("p",{className:"help-block"},"Customize what gets copied over:"),s.createElement("div",{className:"checkbox primer-bases-wrapper"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"primer-bases"}),"Use primer bases instead of sequence (includes overhang if any)")),s.createElement("div",{className:"checkbox"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"annotations"}),"Annotations, translations, and primers")),s.createElement("div",{className:"checkbox"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"not-contained-annotations"}),"Include annotations and translations not fully contained by selection")),null==n&&s.createElement("div",{className:"checkbox"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"reverse-complement"}),"Use reverse complement instead")),s.createElement("div",{className:i()("checkbox",{faded:e})},s.createElement("label",null,s.createElement("input",{type:"checkbox",disabled:e,className:"js-preserve-indices"}),"Preserve sequence indices")),s.createElement("div",{className:"checkbox"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"tags",defaultChecked:!0}),"Tags")),s.createElement("div",{className:"checkbox"},s.createElement("label",null,s.createElement("input",{type:"checkbox",className:"description"}),"Description"))),s.createElement("div",{className:"modal-footer"},s.createElement("a",{"data-dismiss":"modal",className:"btn btn-af-default"},"Cancel"),s.createElement("a",{"data-dismiss":"modal",className:"btn btn-af-success copy",...(0,o.Z)({component:"CopyOptionsModalTemplate",element:"createButton"})},"Copy")))))}))},19875:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(959415),i=n(17086)
class CutSite extends a.Hn{defaults(){return{...super.defaults(),hover:!1,color:null,fontColor:"#666",sliceData:{}}}initialize(){null!=this.color()&&this.set({fontColor:"black"})
this.listenTo(this.get("enzyme"),"change:color",((e,t)=>{this.set({color:t,fontColor:null!=t?"black":"#666"})}))}hover(){return this.get("hover")}sliceData(e,t,n){null==this.get("sliceData")[e]&&(this.get("sliceData")[e]={})
null!=n&&(this.get("sliceData")[e][t]=n)
return this.get("sliceData")[e][t]}doubleCutterStart(){const e=this.get("enzyme")
return e.doubleCutter()?this.get("position")+this.strand()*(-e.get("cut")+e.get("cut2")):null}position(){return this.get("position")}start(){return this.get("position")}end(){return this.start()+this.get("enzyme").get("offset")}strand(){return this.get("strand")}name(){return this.get("enzyme").get("name")}uid(){return this.type()+this.cid}annularLayer(){return 0}type(){return"cutsite"}visible(){return!0}color(){return this.get("color")}click(e,t=!1){const n=e.get("selection")
if(t)if(n.getStartState("cutsite")===this&&e.circular()){n.setEndpoints(n.start(),this.start())
n.addEndState({cutsite:this})}else if(null==n.getStartState("cutsite")||i.U2("isLinear")){n.expand(this.start())
"start"===n.freeEnd()?n.addStartState({cutsite:this}):n.addEndState({cutsite:this})}else{n.setEndpoints(n.start(),this.start())
n.addEndState({cutsite:this})}else{n.reset(this.start())
n.addStartState({cutsite:this})
e.trigger("jump",n.start())}this.select({multi:t})}dblClick(e,t=!1){this.click(e,t)
e.get("selection").trigger("cutsite",this)}}const s=CutSite},939754:(e,t,n)=>{n.d(t,{Z:()=>CutSites})
var a=n(531041),i=n(19875),s=n(959415)
class CutSites extends s.FE{static initClass(){this.prototype.model=i.Z}initialize(e,t){super.initialize(e)
const{enzymes:n}=t
this.selection=t.selection
this.createCutSites(n)
this.listenTo(n,"change:visible",((e,t,n)=>{this.changeEnzyme(e,t,n)}))
this.listenTo(n,"change:cutPositions",((e,t,n)=>{this.resetEnzyme(e,n)}))
this.on("change:selected",((e,t)=>{this.removeIfInvisible(e,t)}))}changeEnzyme(e,t,n){let s,r=this.where({enzyme:e})
if(t)for(const t of e.get("cutPositions")){const n=this.getSelected(e,t.position)
null!=n?r=a.default.without(r,n):this.add(new i.Z({enzyme:e,position:t.position,strand:t.strand,color:e.color()}))}else for(s of r.slice()){const e=this.selection.hasStartState("cutsite")&&null!=this.selection.getStartState("cutsite")&&this.selection.getStartState("cutsite").cid===s.cid,t=this.selection.hasEndState("cutsite")&&null!=this.selection.getEndState("cutsite")&&this.selection.getEndState("cutsite").cid===s.cid;(e||t)&&(r=a.default.without(r,s))}this.remove(r)
for(s of r)s.destroy();(null==n||n.trigger)&&this.trigger("cutsitesChanged")}getSelected(e,t){const n=this.selection.getStartState("cutsite"),a=this.selection.getEndState("cutsite"),i=null!=n&&n.get("enzyme").id===e.id&&n.get("position")===t,s=null!=a&&a.get("enzyme").id===e.id&&a.get("position")===t
return i?n:s?a:null}removeIfInvisible(e,t){if(!t&&!e.get("enzyme").get("visible")){this.remove(e)
e.destroy()}}resetEnzyme(e,t={trigger:!0}){if(e.get("visible")){this.changeEnzyme(e,!1,t)
this.changeEnzyme(e,!0,t)
if(t.trigger)return this.trigger("cutsitesChanged")}}createCutSites(e){const t=this
e.each((e=>{e.get("visible")&&e.get("cutPositions").map((n=>t.add(new i.Z({enzyme:e,position:n.position,strand:n.strand,color:e.color()}))))}))}}CutSites.initClass()},899304:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(440281),i=n.n(a),s=n(812651),r=n(900306)
class DNA extends i().Model{initialize(e,t){this.update()
this.listenTo(this.get("_sequence"),"change:bases",this.baseChangeHandler.bind(this))
this.listenTo(this.get("_sequence"),"change:offset3 change:offset5",this.offsetChangeHandler.bind(this))}forward(){const e=this.get("_sequence")
let t=(0,r.dA)(e.bases(),e.modifiedNucleotides(),e.nucleotideType(),e.get("type"))
const[n,a]=e.offsets()
n<0&&(t=t.slice(Math.abs(n)))
a>0&&(t=t.slice(0,t.length-a))
return t}reverse(){return s.util.complement(this.reverseNonComp(),this.get("_sequence").baseTable())}reverseNonComp(){const[e,t]=this.get("_sequence").offsets()
let n=this.get("_sequence").bases()
e>0&&(n=n.slice(e))
t<0&&(n=n.slice(0,n.length+t))
return n}forwardSlice(e,t){let n
const a=this.forward(),i=this.get("_sequence").offsets()[0]
n=i<0?this.sSlice(a,e,t+i):this.sSlice(a,e,t)
return{strand:"forward",bases:n,offset5:i}}reverseSlice(e,t){let n
const a=this.reverseNonComp(),i=this.get("_sequence").offsets()[0]
n=i>0?this.sSlice(a,e,t-i):this.sSlice(a,e,t)
n=s.util.complement(n,this.get("_sequence").baseTable())
return{strand:"reverse",bases:n,offset5:i}}baseChangeHandler(){this.update()}offsetChangeHandler(){this.update()}update(){this.trigger("change:forward change:reverse")}sSlice(e,t,n){return t<n?e.slice(t,n):e.slice(t)+e.slice(0,n)}slice(e,t){return[this.forwardSlice(e,t),this.reverseSlice(e,t)]}}const o=DNA},64717:(e,t,n)=>{n.d(t,{Z:()=>I})
var a=n(250965),i=n.n(a),s=n(232606),r=n(812651),o=n(955836),l=n(146238),c=n(773055),d=n(968653),u=n(440281),p=n.n(u)
class Trim extends p().Model{defaults(){return{start:null,end:null,sequence:null,draggingType:null}}initialize(){this.listenTo(this.get("sequence").get("_sequence"),"inserted",this.handleInsert.bind(this))
this.listenTo(this.get("sequence").get("_sequence"),"deleted",this.handleDelete.bind(this))}handleInsert(e,t,n=!0){e<this.start()&&this.set({start:this.start()+t.length})
e<this.end()&&this.set({end:this.end()+t.length})
n&&this.triggerUpdate()}handleDelete(e,t,n=!0){const a=t-e
t<this.end()?this.set({end:this.end()-a}):e<this.end()&&this.set({end:e})
t<this.start()?this.set({start:this.start()-a}):e<this.start()&&this.set({start:e})
n&&this.triggerUpdate()}start(){return this.get("start")}end(){return this.get("end")}startDrag(e){this.get("sequence").allowFeatureEdits()&&this.set({draggingType:e})}setStart(e,t){null==t&&(t=!0)
this.set({start:Math.min(e,this.end())})
t&&this.triggerUpdate()}setEnd(e,t){null==t&&(t=!0)
this.set({end:Math.max(e,this.start())})
t&&this.triggerUpdate()}setBoth(e,t,n){null==n&&(n=!0)
e>t&&([e,t]=Array.from([t,e]))
this.set("start",e)
this.set("end",t)
n&&this.triggerUpdate()}drag(e){const t=this.get("draggingType");(0,s.Gp)(this.isActive(),"Dragging type is not set while dragging trim!");(0,s.Gp)(["start","end"].includes(t),`Unexpected dragging type: ${t}`)
"start"===t?this.setStart(e,!1):this.setEnd(e,!1)}isActive(){return null!=this.get("draggingType")}stopDrag(){if(this.isActive()){this.set({draggingType:null})
this.triggerUpdate()
this.renderLineRanges()}}renderLineRanges(){this.get("sequence").get("_sequence").trigger("invalidateLineRanges")
this.get("sequence").get("_sequence").trigger("renderLineRanges")}triggerUpdate(){this.get("sequence").get("_sequence").trigger("updateTrim",this.start(),this.end())}}const m=Trim
var E=n(882321),h=n(605806),g=n(293630),S=n(87209),_=n(771398),T=n(901113)
class PathBuilder{constructor(){this.lastRun=null
this.pointRuns=[]}addIndex(e){if(null!=this.lastRun&&this.lastRun.end===e)this.lastRun.end++
else{this.lastRun={start:e,end:e+1}
this.pointRuns.push(this.lastRun)}}getPoints(){return this.pointRuns.map((e=>[[e.start,0],[e.start,1],[e.end,1],[e.end,0]]))}}class GapSequenceWrapper extends c.Sequence{wrapForSequenceXHR(e){S.$Z("Updating sequence")
e.always((()=>{S.Cp()}))
e.done((()=>{const t=_.bE(e)?(0,d.nE)(e):null
null!=t&&this.get("_sequence").trigger("sequenceVersionUpdate",{versionId:t})}))
const t=i().when(e)
t.client=t
return t}_computeLineRanges(e){return GapSequenceWrapper.computeLineRanges(this.get("_sequence").bases(),e.bases(),this.get("trim"))}static computeLineRanges(e,t,n,a=E.Q6.DNA){const i=new PathBuilder,r=new PathBuilder,l=new PathBuilder,c=e.length===t.length;(0,s.Gp)(c,`Aligned sequence ${e.length} has different length than master sequence ${t.length}. Possibly computing line ranges too early.`)
if(!c)return{correct:[],mutation:[],unknown:[]}
for(let s=0;s<e.length;s++){const c=e[s]
let d=null
if(null==n||n.start()<=s&&s<n.end()){const n=(0,g.A)(t,e,s,a)
switch(n){case null:c!==o.P8&&(d=i)
break
case h.V2.UNKNOWN:d=l
break
case h.V2.MUTATION:d=r
break
default:(0,T.vE)(n)}}else;null!=d&&d.addIndex(s)}return{correct:i.getPoints(),mutation:r.getPoints(),unknown:l.getPoints()}}invalidateLineRanges(){this.lineRanges=null}getLineRanges(e){null==this.lineRanges&&(this.lineRanges=this._computeLineRanges(e))
return this.lineRanges}initialize(e,t){super.initialize()
e.permissions&&e._sequence.set("permissions",e.permissions)
this.lineRanges=null
this.handleCanEdit=t.handleCanEdit
null!=t.trimStart&&null!=t.trimEnd&&this.set({trim:new m({start:t.trimStart,end:t.trimEnd,sequence:this})})
this.registerListeners(!0)}stopAllListeners(){this.stopListening()}registerListeners(e){this.stopListening()
this.listenTo(this.get("_sequence"),"invalidateLineRanges",this.invalidateLineRanges)
this.listenTo(this.get("_sequence"),"stopAllListeners",this.stopAllListeners)
if(null!=this.get("baseSequence")){this.listenTo(this.get("_sequence"),"inSync",this.registerListeners)
if(e){this.listenTo(this.get("baseSequence").get("_sequence"),"change:name",(function(e,t){return this.get("_sequence").set("name",t)}))
this.listenTo(this.get("selection"),"change:start change:end",(function(){if(!this.get("baseSequence").get("currentVersion"))return
const e=this.get("selection"),t=this.get("_sequence").gapToReal(e.start());(0,s.Gp)(null!=t,"Alignment gap to real not working",{start:e.start(),end:e.end(),baseLength:this.get("baseSequence").length(),gapLength:this._sequence().length()})
if(e.isEmpty())this.get("baseSequence").get("selection").reset(t)
else{const n=this.get("_sequence").gapToReal(e.end())
t===n&&e.start()<e.end()?this.get("baseSequence").get("selection").reset(t):this.get("baseSequence").get("selection").setEndpoints(t,n)}}))}}this.listenToTranslations()}fileState(){return null!=this.get("baseSequence")?this.get("baseSequence").fileState():void 0}insert(e,t,n={}){null==n&&(n={})
delete n.annotations
delete n.translations
delete n.sequencePrimers
const a=(()=>{if(this.handleCanEdit()){const a=r.util.sanitize(t,this.nucleotideType())
return(0===a.length||null==this.get("baseSequence")?i().Deferred().resolve().promise():this.get("baseSequence").insert(this.get("_sequence").gapToReal(e),a,n)).done((()=>{this.get("_sequence").trigger("insert",e,t,n)}))}return i().Deferred().reject({__suppress_notification:!0}).promise()})()
return this.wrapForSequenceXHR(a)}canInsertPart(){return!1}toggleCase(e,t,n,a={}){null==a&&(a={})
let s
if(this.handleCanEdit()){const r=this.get("baseSequence"),o=this.get("_sequence").gapToReal(e),l=this.get("_sequence").gapToReal(t)
s=r?r.toggleCase(o,l,n,a):i().Deferred().resolve().promise()
s.done((()=>{this.get("_sequence").trigger("toggleCase",e,t,n,a)}))}else s=i().Deferred().reject({__suppress_notification:!0}).promise()
return this.wrapForSequenceXHR(s)}deleteBases(e,t,n={}){null==n&&(n={})
let a
if(this.handleCanEdit()){const s=this.get("baseSequence"),r=this.get("selection")
if(s){const n=this.get("_sequence").gapToReal(e),i=this.get("_sequence").gapToReal(t)
a=s.deleteBases(n,i,{})}else a=i().Deferred().resolve().promise()
a.done((()=>{this.get("_sequence").trigger("delete",e,t,n)
r.reset(e)}))}else a=i().Deferred().reject({__suppress_notification:!0}).promise()
return this.wrapForSequenceXHR(a)}deleteSelection(e={}){null==e&&(e={})
let t
if(!this.handleCanEdit())return i().Deferred().reject({__suppress_notification:!0}).promise()
{const n=this.get("baseSequence"),a=this.get("selection"),s=a.start(),r=a.end()
n&&(t=n.deleteSelection({}))
t||(t=i().Deferred().resolve().promise())
t.done((()=>{this.get("_sequence").trigger("delete",s,r,e)
a.reset(a.start())}))}return this.wrapForSequenceXHR(t)}replace(e,t,n,a={}){null==a&&(a={})
delete a.annotations
delete a.translations
delete a.sequencePrimers
let s
if(this.handleCanEdit()){const o=this.get("baseSequence"),l=this.get("_sequence").gapToReal(e),c=this.get("_sequence").gapToReal(t),d=r.util.sanitize(n,this.nucleotideType())
s=o&&(l!==c||l===c&&e>=t)?d.length>0?o.replace(l,c,d,a):o.deleteBases(l,c,a):o&&d.length>0?o.insert(l,d,a):i().Deferred().resolve().promise()
s.done((()=>{this.get("_sequence").trigger("replace",e,t,n)}))}else s=i().Deferred().reject({__suppress_notification:!0}).promise()
return this.wrapForSequenceXHR(s)}createTranslation(e,t={}){const n=i().Deferred(),a=null!=t.bulk&&t.bulk
if(this.handleCanEdit({isFeatureEdit:!0})){const t=this.get("selection").start(),i=this.get("selection").end()
this.get("_sequence").translations().add({start:t,end:i,strand:e})
a||this.get("_sequence").trigger("save")
n.resolve()}else n.reject({__suppress_notification:!0})
return Promise.resolve(n)}async createTranslationIfNew(e){const t=this.get("selection").start(),n=this.get("selection").end()
for(const a of this.get("_sequence").translations().models)if(a.start()===t&&a.end()===n&&a.strand()===e)return
await this.createTranslation(e)}deleteFeature(e){const t=i().Deferred()
if(this.handleCanEdit({isFeatureEdit:!0})){e.destroy()
this.get("_sequence").trigger("save")
t.resolve()}else t.reject({__suppress_notification:!0})
return Promise.resolve(t)}deleteTranslationGroup(e){const t=i().Deferred()
if(this.handleCanEdit({isFeatureEdit:!0})){const n=this.get("_sequence"),a=n.translations().filter((t=>t.translationGroupId()===e))
n.translations().remove(a)
const i=this.translationGroups().filter((({id:t})=>e!==t))
n.set({translationGroups:i})
n.trigger("save")
t.resolve()}else t.reject({__suppress_notification:!0})
return t.promise()}makeEnzymes(){return new l.ZP}updateORFs(){}updateCuts(){}getNoteParts(){var e,t,n
return null===(n=null===(t=null===(e=this.get("baseSequence"))||void 0===e?void 0:e.get("_sequence"))||void 0===t?void 0:t.get("note"))||void 0===n?void 0:n.noteParts}initGraphQLSync(){}}const I=GapSequenceWrapper},605262:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(531041),i=n(212703),s=(n(436208),n(17086)),r=n(132814)
class ORF extends i.Z{defaults(){return(0,a.default)(super.defaults()).extend({visible:!0,color:"green",hover:!1,startPositions:[],endPosition:null,startCodon:null})}initialize(e,t){const n=t.sequence.length(),i=this.get("endPosition")
this.get("startPositions")
if(null!=i){let t
if(1===e.strand){t=this.relativeStart(i,1)
this.fastSet({start:t,end:(i+3)%n})}else{t=this.relativeStart(i,-1)
this.fastSet({end:r.mod(t+1,n),start:r.mod(i-2,n)})}}else 1===e.strand?this.fastSet({start:a.default.min(this.get("startPositions")),end:0}):this.fastSet({start:0,end:r.mod(a.default.max(this.get("startPositions"))+1,n)})
1===this.strand()?this.fastSet({layerStart:this.start(),layerEnd:r.mod(this.end(),n)}):this.fastSet({layerStart:r.mod(this.start()-1,n),layerEnd:this.end()})}type(){return"orf"}start(){return this.get("start")}end(){return this.get("end")}layerStart(){return this.get("layerStart")}layerEnd(){return this.get("layerEnd")}drawStart(){return this.start()}drawEnd(){return this.end()}startPositions(){return this.get("startPositions")}endPosition(){return this.get("endPosition")}hover(){return this.get("hover")}color(){return this.get("color")}uid(){return this.cid}strand(){return this.get("strand")}annularLayer(){return this.get("annularLayer")}visible(){return this.get("visible")}startCodon(){return this.get("startCodon")}relativeStart(e,t){const n=this.startPositions()
1===t?(e=a.default.min(a.default.filter(n,(t=>t>=e))))===1/0&&(e=a.default.min(n)):(e=a.default.max(a.default.filter(n,(t=>t<=e))))===-1/0&&(e=a.default.max(n))
return e}click(e,t){let n,a
null==t&&(t=!1)
const i=e.get("selection"),o=s.U2("index")
if(null!=o){if(1===this.strand()){a=this.relativeStart(o,-1)
n=this.end()}else{a=this.start()
n=r.mod(this.relativeStart(o,1)+1,e.length())}return t?i.expandRange(a,n):i.select(this,a,n)}return t?i.expandRange(this.start(),this.end()):i.select(this)}dblClick(e,t){null==t&&(t=!1)
this.click(e,t)
if(e.allowFeatureEdits())return e.get("selection").trigger("orf",this)}}const o=ORF},858240:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(531041),i=n(605262),s=n(959415),r=n(436208),o=n(703764),l=n(132814)
class ORFs extends s.FE{static initClass(){this.prototype.model=i.Z}initialize(e){super.initialize(e)
this.setLayers()
return this.listenTo(this,"add remove reset",this.setLayers)}slice(e,t,n){let i=this.filter((n=>{const a=n.start(),i=n.end()
return l.isRangeOverlap(e,t,a,i)}))
a.default.sortBy(i,(n=>Math.max(e,n.start())-e-(Math.min(t,n.end())-e)))
const{sequence:s}=n
i=a.default.filter(i,(e=>e.startCodon()===n.startCodon))
null!=n.minLength&&(i=a.default.filter(i,(e=>e.length(s)>=n.minLength)))
if(null!=n.frame&&"All"!==n.frame){"Forward"===n.frame||"number"==typeof n.frame&&n.frame>0?i=a.default.filter(i,(e=>1===e.strand())):("Reverse"===n.frame||n.frame<0)&&(i=a.default.filter(i,(e=>-1===e.strand())))
if([1,2,3,-1,-2,-3].includes(n.frame)){const e=Math.abs(n.frame)-1
i=a.default.filter(i,(t=>1===t.strand()?t.start()%3===e:t.end()%3===e))}}return i}setLayers(){const e=o.eo(this.models,{top:!0})
for(const{model:t,layer:n}of Array.from(e))t.fastSet(r.LINEAR_LAYER_FULL,n)
this.trigger("layerChange")}}ORFs.initClass()
const c=ORFs},571240:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(959415),i=n(47984),s=n(921554),r=n(132814)
const{ASSEMBLY_TYPE:o}=i
class PrimerAssemblyMismatch extends a.sd{start(){return this.get("pos")}end(){return this.get("pos")+1}uid(){return this.cid}strand(){return 0}click(e){e.get("selection").select(this)}}class PrimerAssemblyMismatches extends a.FE{static initClass(){this.prototype.model=PrimerAssemblyMismatch}slice(e,t){return this.filter((n=>r.baseInRange(n.get("pos"),e,t)))}updateMismatches(e){if(e.finalized()||null==e.assemblyType()||![o.GIBSON,o.GOLDEN_GATE].includes(e.assemblyType())){this.reset([])
return}const t=e.bases(),n=e.fragmentResults().chain().map(((n,a)=>{const i=[]
if(n.primerFlanked()){const o=e.length(),l=s.vx[a],c=e.primerPairs().get(n.primerPairID()),[d,u]=Array.from(c.getPrimers(e.sequencePrimers())),p=r.length(n.start(),d.end(),o),m=n.start(),E=n.end(),h=r.length(m,u.start(),o),g=r.length(u.start(),u.end(),o),S=m===u.start()?g===o?h:0:h,_=r.length(m,E,o)
for(const a of[__range__(0,p,!1),__range__(S,_,!1)])for(const s of Array.from(a)){const a=r.mod(n.start()+s,e.length());(null!=t[a]?t[a].toLowerCase():void 0)!==__guard__(n.originalBases()[s],(e=>e.toLowerCase()))&&i.push(new PrimerAssemblyMismatch({pos:a,fragmentSequenceID:__guard__(n.parent(),(e=>e.id)),fragmentSequenceName:__guard__(n.parent(),(e=>e.name)),fragmentResultColor:l,originalBase:n.originalBases()[s],newBase:t[a]}))}}return i})).flatten().sortBy((e=>e.get("pos"))).value()
this.reset(n)}}PrimerAssemblyMismatches.initClass()
const l=PrimerAssemblyMismatches
function __range__(e,t,n){const a=[],i=e<t,s=n?i?t+1:t-1:t
for(let t=e;i?t<s:t>s;i?t++:t--)a.push(t)
return a}function __guard__(e,t){return null!=e?t(e):void 0}},126675:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(440281),i=n.n(a),s=n(219579)
class Range extends i().Model{static initClass(){this.prototype.defaults={maxWidth:null,getLengthFn(){throw new Error("getLength not specified")},sequence:null,start:null,end:null,active:!1,panning:!1,freeEnd:null,type:null}}getLength(){return this.get("getLengthFn")()}freeEnd(){return this.get("freeEnd")}anchorEnd(){return"start"===this.get("freeEnd")?"end":"start"}span(){return this.end()-this.start()}preview(){return this.clone()}start(){return this.get("start")}end(){return this.get("end")}panStart(e){const t=this.getLength(),n=this.span()
e=Math.min(t-n,Math.max(0,e))
this.set({start:e,end:e+this.span()})
this.trigger("rangeChange",!1,!0)}pan(e){const t=this.span()
this.panStart(Math.floor(e-t/2))}setStart(e){this.set("start",e)
this.set("freeEnd","start")}setEnd(e){this.set("end",e)
this.set("freeEnd","end")}extend(e){const t={start:this.start(),end:this.end()}
t[this.freeEnd()]=e
t.start===t.end&&(t[this.freeEnd()]=e+1)
if(t.start>t.end){[t.start,t.end]=[t.end,t.start]
t.freeEnd=this.anchorEnd()}this.set(t)}correct(){let e,t,n
const a=this.get("maxWidth"),i=Math.max(2,this.span()),r=this.getLength(),o=s.Z.typeToFitWidth(i,a)
if(o.manual){o.setHeight(10)
this.set("type",o)
n=Math.floor(i)}else{const e=s.Z.largest.numChars(a),t=o.numChars(a)
if(e>t){this.set("type",s.Z.largest)
n=e}else{this.set("type",o)
n=t}}const l=this.start(),c=this.end()
if("end"===this.get("freeEnd")){t=l
e=l+n
if(e>r){e=r
t=r-n}}else{t=c-n
e=c
if(t<0){t=0
e=n}}this.set({start:t,end:e})
this.trigger("rangeChange",!0,!1)
return this}}Range.initClass()
const r=Range},916255:(e,t,n)=>{n.d(t,{OT:()=>FeatureSearchResults,RO:()=>FeatureSearchResult,Rm:()=>DNASearchResult,bR:()=>DNASearchResults})
var a=n(440281),i=n.n(a),s=n(959415)
class FeatureSearchResult extends i().Model{feature(){return this.get("feature")}start(){return this.get("start")}end(){return this.get("end")}}class FeatureSearchResults extends i().Collection{constructor(){super(...arguments)
this.comparator=(e,t)=>{const[n,a]=Array.from([e.feature().name().toLowerCase(),t.feature().name().toLowerCase()])
return n<a?-1:n===a?0:1}}static initClass(){this.prototype.model=FeatureSearchResult}}FeatureSearchResults.initClass()
class DNASearchResult extends s.sd{defaults(){return{...super.defaults(),hover:!1}}start(){return this.get("start")}end(){return this.get("end")}layerStart(){return this.start()}layerEnd(){return this.end()}color(){return"red"}uid(){return this.cid}type(){return"search-result"}hover(){return this.get("hover")}strand(){return this.get("strand")}sequence(){return this.get("sequence")}click(e,t=!1){e.get("selection").select(this)}dblClick(e,t=!1){this.click(e,t)}}class DNASearchResults extends s.FE{static initClass(){this.prototype.model=DNASearchResult}slice(e,t,n,a=!1){return(a?this.selected():this.models).filter((a=>{const i=n.get("_sequence"),s=a.get("sequence").get("_sequence"),r=a.start(),o=a.end(),l=r===o||r>o&&(t>r||e<o)||r<t&&o>e
return i.cid===s.cid&&l}))}}DNASearchResults.initClass()},968653:(e,t,n)=>{n.d(t,{ZP:()=>o,nE:()=>sequenceVersionIdFrom})
var a=n(250965),i=n.n(a),s=n(598317),r=n(260929)
function sequenceIdFrom(e){return e.getResponseHeader("X-Sequence")}function sequenceVersionIdFrom(e){const t=e.getResponseHeader("X-Sequence-Version")
return null!=t?parseInt(t,10):null}class SequenceAttributeCollection extends s.Z{constructor(){super(...arguments)
this.url=()=>{if(null==this.sequenceID)throw new Error("@sequenceID was not defined in SequenceAttributeCollection but URL was needed.")
return`/1/api/sequences/${this.sequenceID}/${this.attributeName}`}}static initClass(){this.prototype.attributeName=null}static requestHeaders(e){return null==e?{}:{"X-Sequence-Version":e._sequence().latestVersionId()}}static sequenceVersionSetter(e,t){const a=n(699418).ZP.get(),s=function handleTask(e,t){if(null==/\/1\/api\/tasks\//.exec(t.url))return null
const n=i().Deferred()
e.done((t=>{"SUCCESS"===t.status?n.resolve([sequenceIdFrom(e),sequenceVersionIdFrom(e)]):"FAILURE"===t.status&&n.reject([sequenceIdFrom(e),sequenceVersionIdFrom(e)])}))
return n.promise()}(e,t)||function handleSequenceEdit(e,t){const a=n(699418).ZP.get(),s=/\/1\/api\/sequences\/(\w+)\b/.exec(t.url)
if(null==s||"GET"===t.type)return null
const o=a.get(s[1])
if(null==o)return null
const l=o.model()
Object.entries(SequenceAttributeCollection.requestHeaders(l)).forEach((([t,n])=>{e.setRequestHeader(t,n.toString())}))
const c=i().Deferred()
e.done((n=>{const a=sequenceIdFrom(e),i=sequenceVersionIdFrom(e)
null!=i||function skipSequenceVersionFrom(e){return"true"===e.getResponseHeader("X-Skip-Sequence-Version")}(e)||r.vU(`Missing X-Sequence-Version from ${t.type} ${t.url}`)
c.resolve([a,i])}))
e.fail((t=>c.reject([sequenceIdFrom(e),sequenceVersionIdFrom(e)])))
return c.promise()}(e,t)
null!=s&&s.done((([e,t])=>{var n
null!=e&&null!=t&&(null===(n=a.get(e))||void 0===n||n.model().setLatestVersionId(t,{activateIfOnCurrent:!0}))})).fail((([e,t])=>{var n
if(null==e||null==t)return
const i=null===(n=a.get(e))||void 0===n?void 0:n.model()
null!=i&&i.updateVersions({switchToLast:!0,showHistoryPanel:!1})}))}initialize(e,t){null!=t&&(this.sequenceID=t.sequenceID)
if(null==this.attributeName)throw new Error("SequenceAttributeCollection was missing @attributeName")}}SequenceAttributeCollection.initClass()
const o=SequenceAttributeCollection},478752:(e,t,n)=>{n.d(t,{Q:()=>E,Z:()=>h})
var a=n(85758),i=n.n(a),s=n(531041),r=n(468943),o=n(48047),l=n(959415),c=(n(436208),n(281782)),d=n(521332),u=n(900306),p=n(974913),m=n(271359)
const E="primerPanelPrimerChecked"
class SequencePrimer extends l.sd{static initClass(){this.MIN_PRIMER_LENGTH=12}defaults(){return(0,s.default)(super.defaults()).extend({visible:!0,hover:!1,partnerSelected:!1})}initialize(){this.listenTo(this.get("_primer"),"destroy",this.selfDestroy.bind(this))
this.listenTo(this.get("_primer"),"change",this.change.bind(this))
this.listenTo(this.get("_primer"),"sync",(function(){this.trigger("saved")}))
this.listenTo(this.get("_primer"),"change:id",(function(e,t){this.set({id:t})}))
this.set({id:this.get("_primer").id});(0,c.a)(d.$.COMPONENT_SEQUENCE_PRIMER,this)}type(){return"primer"}visible(){return this.get("visible")}hover(){return this.get("hover")}partnerSelected(){return this.get("partnerSelected")}start(){return this.get("_primer").start()}name(){return this.get("_primer").name()}bases(){return this.get("_primer").bases()}nucleotideType(){return this.get("_primer").nucleotideType()}color(){return this.get("_primer").get("color")}displayLabel(){return this.get("_primer").displayLabel()}modifiedNucleotides(){return this.get("_primer").modifiedNucleotides()}canUseFullUTFlexibility(){return this.get("_primer").referencesExistingOligo()&&(0,u.JG)()}outlineColor(e){return this.mismatchedIndices(e).length>0?i().rgb(m.hM).darker().toString():this.selected()?"#111":i().rgb(this.color()).darker().toString()}end(){return this.get("_primer").get("end")}archiveRecord(){return this.get("_primer").get("archiveRecord")}isArchived(){return null!=this.archiveRecord()}uid(){return this.cid}strand(){return this.get("_primer").get("strand")}bindPosition(e){return this.get("_primer").bindPosition(e)}fromSubPart(){return this.get("_primer").fromSubPart()}change(){this.trigger("change:_primer")
this.trigger("change")}isNew(){return this.get("_primer").isNew()}hasOverhang(){return this.get("_primer").hasOverhang()}bindingBases(){return this.get("_primer").bindingBases()}overhangBases(){return this.get("_primer").overhangBases()}basesHtml(e){return this.get("_primer").basesHtml(e)}overhangLength(){return this.overhangBases().length}editable(){return this.get("_primer").editable()}overhangEdge(e){return this.get("_primer").overhangEdge(null==e?null:e.get("_sequence"))}layerStart(e){return this.drawStart(e)}layerEnd(e){return this.drawEnd(e)}drawStart(e){if(-1===this.strand())return this.start()
const t=this.overhangEdge(e)
return null!=t?t:0}drawEnd(e){if(1===this.strand())return this.end()
const t=this.overhangEdge(e)
return null!=t?t:0}selfDestroy(){this.trigger("destroy",this,this.collection)}destroy(){const e=this.get("_primer").destroy()
this.selfDestroy()
return e}click(e,t=!1){const n=e.circular(),a=e.get("selection"),i=this.start(),s=this.end(),l=this.strand(),c=a.getStartState("primer"),d=a.getEndState("primer")
if(t){r.j("primer","shift_clicked",{sequence_id:e.get("id")})
if(null!=c&&-1===l&&o.productLength([c.start(),c.end()],[i,s],n,e.length())>0)if(c.isNew()||this.get("_primer").isNew()){p.ZP.warn("Save primers to work with their PCR product.")
this.click(e)}else{a.addEndState({primer:this})
a.setEndpoints(c.start(),s)
a.setFreeEnd("end")}else if(null!=d&&1===l&&o.productLength([i,s],[d.start(),d.end()],n,e.length())>0)if(this.get("_primer").isNew()||d.isNew()){p.ZP.warn("Save primers to work with their PCR product.")
this.click(e)}else{a.addStartState({primer:this})
a.setEndpoints(i,d.end())
a.setFreeEnd("start")}else{"start"===a.freeEnd()?a.unsetStartState("primer"):a.unsetEndState("primer")
a.expandRange(this.start(),this.end())}}else{a.unsetStartState("primer")
a.unsetEndState("primer")
a.setEndpoints(this.start(),this.end())
if(1===l){a.addStartState({primer:this})
a.setFreeEnd("end")}else if(-1===l){a.addEndState({primer:this})
a.setFreeEnd("start")}e.trigger("jump",a.start())}this.select({multi:t})}dblClick(e,t=!1){this.click(e,t)
this.isNew()||e.get("selection").trigger("primer",this)}mismatchedIndices(e){return this.get("_primer").mismatchedIndices(e.get("_sequence"))}displayMeltingTemperature(){const e=this.get("_primer").meltingTemperature()
return Number.isNaN(e)?"--":`${e.toFixed(1)}°C`}}SequencePrimer.initClass()
const h=SequencePrimer},360836:(e,t,n)=>{n.d(t,{Z:()=>s})
var a=n(598317),i=n(820039)
class Tags extends a.Z{static initClass(){this.prototype.model=i.Z
this.prototype.attributeName="tags"}initialize(e,t){super.initialize(e,t)
this.on("change add remove",(function(){this.trigger("change:tags")}))}}Tags.initClass()
const s=Tags},434234:(e,t,n)=>{n.d(t,{Z:()=>r})
var a=n(955836),i=n(212703),s=n(502703)
class Translation extends i.Z{initialize(){this.listenTo(this.get("_translation"),"destroy remove",((e,t,n)=>{this.selfDestroy(n)}))
this.listenTo(this.get("_translation"),"change",this.change.bind(this))
this.listenTo(this.get("_translation"),"change:id",(()=>this.set({id:this.get("_translation").id})))}change(e,t){this.trigger("change:_translation",this,this.collection,t)}start(){return this.get("_translation").start()}end(){return this.get("_translation").end()}uid(){return this.get("_translation").cid}_translation(){return this.get("_translation")}strand(){return this.get("_translation").strand()}editable(){return this.get("_translation").editable()}fromSubPart(){return this.get("_translation").fromSubPart()}translationGroupId(){return this.get("_translation").translationGroupId()}codonTranslationTable(e){var t
if(null==this.translationGroupId())return a.hR.STANDARD
const n=e.translationGroups().find((e=>e.id===this.translationGroupId()))
return null!==(t=null==n?void 0:n.codonTranslationTable)&&void 0!==t?t:a.hR.STANDARD}selfDestroy(e){this.trigger("destroy",this,this.collection,e)}destroy(){const e=this.get("_translation").destroy()
this.selfDestroy()
return e}getTranslationRegionGroup(e){return(0,s.b2)(e,this)}toReactDict(){return{start:this.start(),end:this.end(),strand:this.strand(),translationGroupId:this.translationGroupId(),id:this._translation().id,fromSubPart:this.fromSubPart()}}}const r=Translation},227487:(e,t,n)=>{n.d(t,{A:()=>getTranslationsAsAnnotationsInRange})
var a=n(64558),i=n(468943),s=n(959415),r=n(502703),o=n(171471),l=n(436208),c=n(132814)
function getTranslationsAsAnnotationsInRange(e,t,n,i=!1){const s=(0,r.KB)(e),o=(0,a.Pe)(e.translations().models,(e=>e.cid))
let d=s.flatMap((e=>e.translations.map((t=>({translationRegionGroup:e,translationData:t})))))
const u=d.length
d=d.filter((({translationData:e})=>(0,c.isRangeOverlap)(t,n,e.start,e.end)))
const p=d.length
i||(d=d.slice(0,l.MAX_VISIBLE_RING_FEATURES))
return{numTotal:u,numVisible:p,numShown:d.length,shownTranslations:d.map((({translationRegionGroup:t,translationData:n})=>{const a=o[n.cid]
return new TranslationAsAnnotation({translationData:n,translationRegionGroup:t,translationComponentModel:a,sequenceStartIndex:e.startIndex(),sequenceLength:e.length(),[l.LINEAR_LAYER_FULL]:a.get(l.LINEAR_LAYER_FULL),[l.LINEAR_LAYER_INLINE]:a.get(l.LINEAR_LAYER_INLINE),[l.LINEAR_LAYER_INLINE_PDF]:a.get(l.LINEAR_LAYER_INLINE_PDF)})}))}}class TranslationAsAnnotation extends s.sd{uid(){return this.get("translationData").cid}start(){return this.get("translationData").start}end(){return this.get("translationData").end}hover(){return!1}color(){return this.get("translationRegionGroup").color}strand(){return this.get("translationData").strand}name(){return(0,r.Xy)(this.get("translationRegionGroup"),this.get("translationData").id,this.get("sequenceStartIndex"),this.get("sequenceLength"))}displayLabel(){return this.name()}visible(){return!0}type(){return"translation"}click(e,t=!1){const n=e.get("selection")
t?n.expandRange(this.start(),this.end()):n.select(this.get("translationComponentModel"))}dblClick(e,t=!1){const n=this.get("translationComponentModel")
if(e.allowFeatureEdits()&&n.editable()){i.j("translation","open_translation_panel",{product:o.XC.MOLBIO,openedFrom:"translation_double_click",sequence_id:e.get("id")})
e.get("selection").trigger("translation-panel",null,n)}}}},361810:(e,t,n)=>{n.d(t,{Z:()=>c})
var a=n(531041),i=n(959415),s=n(434234),r=n(436208),o=n(703764),l=n(132814)
class Translations extends i.FE{static initClass(){this.prototype.model=s.Z}batchName(){return"translations"}initialize(){this.setLayers=this.batch(this.setLayers.bind(this))
return this.on("add remove reset",(()=>{this.setLayers()}))}slice(e,t){const n=this.filter((n=>{const a=n.start(),i=n.end()
return l.isRangeOverlap(e,t,a,i)}))
return a.default.sortBy(n,(n=>Math.max(e,n.start())-Math.min(t,n.end())))}setLayers(){const e=o.eo(this.models,{top:!1})
for(const{model:t,layer:n}of e)t.set(r.LINEAR_LAYER_FULL,n,{silent:!0})
this.trigger("layerChange")}toReactJSON(){return this.models.map((e=>e.toReactDict()))}}Translations.initClass()
const c=Translations},681153:(e,t,n)=>{n.d(t,{D:()=>l})
var a=n(769784),i=n(467607),s=n(439366),r=n(521332),o=n(965131)
const l={__typename:"ComponentSequenceNode",fragmentWrapper:{fragment:a.Ps`
  fragment ComponentSequenceGraphQL on ComponentSequenceNode {
    bases @client
    id @client
    name @client
    nucleotideType @client
    sequencePrimers @client {
      id @client
    }
    modifiedNucleotides @client {
      position @client
      sugarMonomerId @client
      phosphateMonomerId @client
      baseMonomerId @client
    }
    startIndex @client
    type @client
  }
`,fragmentName:"ComponentSequenceGraphQL"},getGraphQLAttrs(e){return{bases:e.bases(),modifiedNucleotides:(0,o.T2)("ModifiedNucleotide",e.get("_sequence").get("modifiedNucleotides")),name:e.name(),nucleotideType:e.nucleotideType(),sequencePrimers:e.sequencePrimers().map((e=>(0,s.Z)(r.$.COMPONENT_SEQUENCE_PRIMER,e))),startIndex:e.startIndex(),type:i.ch[e.type()],__typename:this.__typename,id:this.getId(e)}},getId:e=>e.get("id")}},464563:(e,t,n)=>{n.d(t,{c:()=>o})
var a=n(769784),i=n(478752),s=n(294538),r=n(965131)
const o={__typename:"ComponentSequencePrimerNode",fragmentWrapper:{fragment:a.Ps`
  fragment ComponentSequencePrimerGraphQL on ComponentSequencePrimerNode {
    active @client
    bases @client
    checked @client
    displayLabel @client
    displayMeltingTemperature @client
    end @client
    id @client
    isNew @client
    isArchived @client
    modifiedNucleotides @client {
      position @client
      sugarMonomerId @client
      phosphateMonomerId @client
      baseMonomerId @client
    }
    name @client
    nucleotideType @client
    oligoId @client
    partnerSelected @client
    selected @client
    start @client
    strand @client
  }
`,fragmentName:"ComponentSequencePrimerGraphQL"},getGraphQLAttrs(e){var t,n
return{__typename:this.__typename,id:this.getId(e),active:e.active(),bases:e.bases(),checked:null!==(t=e.get(i.Q))&&void 0!==t?t:null,displayLabel:e.displayLabel(),displayMeltingTemperature:e.displayMeltingTemperature(),end:e.end(),modifiedNucleotides:(0,r.T2)("ModifiedNucleotide",e.get("_primer").modifiedNucleotides()),name:e.name(),nucleotideType:e.nucleotideType(),isNew:e.get("_primer").isNew(),isArchived:e.isArchived(),oligoId:null!==(n=e.get("_primer").get("primer_api_id"))&&void 0!==n?n:null,partnerSelected:e.partnerSelected(),selected:e.selected(),start:e.start(),strand:(0,s.HJ)(e.strand())}},getId:e=>e.cid}},103171:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(348920),i=n(674607),s=n(388616),r=n(2186)
class CircularMapTabState extends s.Z{mapState(e){return new i.JB(e)}getVisibilityOptions(){return this.get("visibilityOptions")}msVisibilityOptions(e){e={}
this.get("snapshot")&&(e.globalSync=!1)
const t=this.get("visibilityOptions").makeLocalSync(e)
if(this.get("snapshot")){for(const e of[r.jB,r.KL,r.gY,r.Cz,r.ih])t.getOption(e.name).set("visible",!0)
for(const e of[r.D1,r.gO,r.B$])t.getOption(e.name).set("visible",!1)}return t}defaults(){return{...super.defaults(),title:"Plasmid",closeable:!1,snapshot:!1,bufferViewLayout:null,visibilityOptions:(0,r.Ig)("circular",[{base:r.jB,visible:!0,editable:!0,sync:!0},{base:r.KL,visible:!0,editable:!0,sync:!0},...a.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?[{base:r.qh,visible:!0,editable:!0,sync:!0}]:[],{base:r.gY,visible:!0,editable:!0,sync:!0},{base:r.gO,visible:!0,editable:!0,sync:!0},{base:r.D1,visible:!1,editable:!0,sync:!0},{base:r.Cz,visible:!0,editable:!0,sync:!0},{base:r.xs,visible:!1,editable:!1,sync:!1},{base:r.B$,visible:!0,editable:!1,sync:!0},{base:r.ih,visible:!0,editable:!0,sync:!0},{base:r.iX,visible:!0,editable:!1},{base:r.Jv,visible:!0,editable:!1,sync:!1},{base:r.Nq,visible:!1,editable:!1,sync:!1}]),preferenceKey:"circular-map"}}}const o=CircularMapTabState},176792:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(348920),i=n(674607),s=n(388616),r=n(2186)
class MiniMapTabState extends s.Z{mapState(e){return new i.nX(e)}getVisibilityOptions(){return this.get("visibilityOptions")}msVisibilityOptions(e){e={}
this.get("snapshot")&&(e.globalSync=!1)
const t=this.get("visibilityOptions").makeLocalSync(e)
if(this.get("snapshot")){const e=[r.lA,r.jB,r.KL,r.gY,r.Cz],n=[this.sequence().isRNASequence()?r.gw:r.D1,r.xs,r.gO,r.Jv,r._j,r.VZ,r.dq,r.ih]
for(const n of e)t.getOption(n.name).set("visible",!0)
for(const e of n)t.getOption(e.name).set("visible",!1)}return t}defaults(){return{...super.defaults(),title:"Linear Map",snapshot:!1,closeable:!1,cutsiteFilter:null,bufferViewLayout:null,visibilityOptions:(0,r.Ig)("minimap",[{base:r.lA,visible:!0,editable:!1,sync:!1},{base:r.jB,visible:!0,editable:!0,sync:!0},{base:r.KL,visible:!0,editable:!0,sync:!0},...a.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?[{base:r.qh,visible:!0,editable:!0,sync:!0}]:[],{base:r.gY,visible:!0,editable:!0,sync:!0},{base:r.gO,visible:!0,editable:!0,sync:!0},{base:r.D1,visible:!1,editable:!0,sync:!0},{base:r.Cz,visible:!0,editable:!0,sync:!0},{base:r.xs,visible:!1,editable:!1,sync:!1},{base:r.Jv,visible:!1,editable:!1,sync:!0},{base:r.dq,visible:!1,editable:!1,sync:!0},{base:r.VZ,visible:!1,editable:!1,sync:!0},{base:r._j,visible:!1,editable:!1,sync:!0},{base:r.ih,visible:!1,editable:!0,sync:!0},{base:r.iX,visible:!0,editable:!1}]),preferenceKey:"mini-map"}}}const o=MiniMapTabState},601771:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(531041),i=n(348920),s=n(674607),r=n(388616),o=n(2186)
class OligoLinearMapTabState extends r.Z{constructor(){super(...arguments)
this.BASES_PER_SLICE_ADJUSTMENT=-1}mapState(e){return new s.O1(e)}getVisibilityOptions(){return this.get("visibilityOptions")}msVisibilityOptions(){return this.get("visibilityOptions").makeLocalSync()}defaults(){return{...super.defaults(),closeable:!1,title:"Sequence Map",bufferViewLayout:null,visibilityOptions:(0,o.Ig)("linear",a.default.compact([{base:o.lA,visible:!0,editable:!1,sync:!1},{base:o.jB,visible:!0,editable:!0,sync:!0},{base:o.gY,visible:!1,editable:!1,sync:!1},{base:o.bW,visible:!1,editable:!1,sync:!1},{base:o.gO,visible:!1,editable:!1,sync:!1},{base:o.dq,visible:!1,editable:!1,sync:!1},{base:o.D1,visible:!1,editable:!1,sync:!1},{base:o.Cz,visible:!0,editable:!0,sync:!0},i.ZP.MOLBIO_ENABLE_MODIFIED_NUCLEOTIDES?{base:o.UN,visible:!0,editable:!0,sync:!0}:null,{base:o.jw,visible:!0,editable:!0,sync:!0},{base:o.KL,visible:!1,editable:!1,sync:!1},{base:o.tO,visible:!1,editable:!1,sync:!1},{base:o.VZ,visible:!1,editable:!1,sync:!1},{base:o.Jv,visible:!0,editable:!1,sync:!0},{base:o._j,visible:!1,editable:!1,sync:!1},{base:o.B$,visible:!0,editable:!1,sync:!0},{base:o.iX,visible:!1,editable:!1}])),preferenceKey:"oligo-linear-map"}}}const l=OligoLinearMapTabState},68371:(e,t,n)=>{n.d(t,{Z:()=>i})
var a=n(766455)
class PolymerMapTabState extends a.X4{initialize(e,t){super.initialize(e,t)
this.listenTo(this.polymer(),"toggleOption",((e,t)=>{null==t&&(t=!0)
this.toggleOption(e,t)}))}toggleOption(e,t){var n
const a=this.get("visibilityOptions")
null!=a&&(null===(n=a.getOption(e))||void 0===n||n.set({visible:t}))}defaults(){return{...super.defaults(),visibilityOptions:null}}}const i=PolymerMapTabState},129187:(e,t,n)=>{n.d(t,{Z:()=>l})
var a=n(531041),i=n(348920),s=n(674607),r=n(388616),o=n(2186)
class ProteinMapTabState extends r.Z{mapState(e){return new s.yp(e)}msVisibilityOptions(){const e=this.get("visibilityOptions").filter((e=>e.get("editable"))).map((e=>e.get("name")))
return this.get("visibilityOptions").makeLocalSync({editableOptions:e})}defaults(){const e=a.default.compact([{base:o.lA,visible:!0,editable:!1,sync:!1},{base:o.EP,visible:!0,editable:!1,sync:!0},{base:o.Jv,visible:!0,editable:!1,sync:!0},{base:o.jB,visible:!0,editable:!0,sync:!0},{base:o.RS,visible:!0,editable:!1,sync:!0},{base:o.$U,visible:!0,editable:!0,sync:!0},{base:o.kQ,visible:!1,editable:!0,sync:!0},{base:o.HV,visible:!1,editable:!0,sync:!0},i.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?{base:o.XH,visible:!1,editable:!0,sync:!0}:null,i.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?{base:o.W3,visible:!1,editable:!0,sync:!0}:null,i.ZP.MOLBIO_ENABLE_ANTIBODY_ENGINEERING_TOOLS?{base:o.pz,visible:!1,editable:!0,sync:!0}:null])
return{...super.defaults(),closeable:!1,title:"Sequence Map",bufferViewLayout:null,visibilityOptions:(0,o.Ig)("linear",e),preferenceKey:"protein-map"}}}const l=ProteinMapTabState},682170:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(348920),i=n(674607),s=n(388616),r=n(2186)
class RNASequenceLinearMapTabState extends s.Z{constructor(){super(...arguments)
this.BASES_PER_SLICE_ADJUSTMENT=-1}mapState(e){return new i.RV(e)}getVisibilityOptions(){return this.get("visibilityOptions")}msVisibilityOptions(){return this.get("visibilityOptions").makeLocalSync()}defaults(){return{...super.defaults(),closeable:!1,title:"Sequence Map",bufferViewLayout:null,visibilityOptions:(0,r.Ig)("linear",[{base:r.lA,visible:!0,editable:!1,sync:!1},{base:r.jB,visible:!0,editable:!0,sync:!0},...a.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?[{base:r.qh,visible:!0,editable:!0,sync:!0}]:[],{base:r.gY,visible:!0,editable:!0,sync:!0},{base:r.bW,visible:!0,editable:!0,sync:!0},{base:r.gO,visible:!0,editable:!0,sync:!0},{base:r.dq,visible:!1,editable:!0,sync:!0},{base:r.gw,visible:!1,editable:!0,sync:!0},{base:r.Cz,visible:!0,editable:!0,sync:!0},{base:r.UN,visible:!0,editable:!0,sync:!0},{base:r.KL,visible:!0,editable:!0,sync:!0},{base:r.tO,visible:!1,editable:!1,sync:!1},{base:r.VZ,visible:!1,editable:!1,sync:!1},{base:r.Jv,visible:!0,editable:!1,sync:!0},{base:r._j,visible:!1,editable:!1,sync:!1},{base:r.B$,visible:!0,editable:!1,sync:!0},{base:r.iX,visible:!0,editable:!1}]),preferenceKey:"rna-sequence-linear-map"}}}const o=RNASequenceLinearMapTabState},612092:(e,t,n)=>{n.d(t,{Z:()=>RNASequenceMiniMapTabState})
var a=n(531041),i=n(348920),s=n(176792),r=n(2186)
class RNASequenceMiniMapTabState extends s.Z{defaults(){const e=[{base:r.lA,visible:!0,editable:!1,sync:!1},{base:r.jB,visible:!0,editable:!0,sync:!0},...i.ZP.PARTS_ENABLE_OVERLAPPING_PARTS?[{base:r.qh,visible:!0,editable:!0,sync:!0}]:[],{base:r.gY,visible:!0,editable:!0,sync:!0},{base:r.gO,visible:!0,editable:!0,sync:!0},{base:r.gw,visible:!1,editable:!0,sync:!0},{base:r.Cz,visible:!0,editable:!0,sync:!0},{base:r.xs,visible:!1,editable:!1,sync:!1},{base:r.Jv,visible:!1,editable:!1,sync:!0},{base:r.dq,visible:!1,editable:!1,sync:!0},{base:r.VZ,visible:!1,editable:!1,sync:!0},{base:r._j,visible:!1,editable:!1,sync:!0},{base:r.ih,visible:!1,editable:!0,sync:!0},{base:r.iX,visible:!0,editable:!1}]
return(0,a.default)(super.defaults()).extend({visibilityOptions:(0,r.Ig)("minimap",e),preferenceKey:"rna-sequence-mini-map"})}}},893424:(e,t,n)=>{n.d(t,{Z:()=>o})
var a=n(348920),i=n(674607),s=n(388616),r=n(2186)
class SequenceLinearMapTabState extends s.Z{mapState(e){return new i.CD(e)}getVisibilityOptions(){return this.get("visibilityOptions")}msVisibilityOptions(){var e,t
const n=null===(t=(e=this.polymer())._sequence)||void 0===t?void 0:t.call(e).tagSchemaHasTranscriptionLinkFields(),a=this.get("visibilityOptions")
n||a.remove(a.where({name:r.be.name}))
return a.makeLocalSync()}defaults(){return{...super.defaults(),closeable:!1,title:"Sequence Map",bufferViewLayout:null,visibilityOptions:(0,r.Ig)("linear",[{base:r.lA,visible:!0,editable:!1,sync:!1},{base:r.jB,visible:!0,editable:!0,sync:!0},a.ZP.PARTS_ENABLE_OVERLAPPING_PARTS&&{base:r.qh,visible:!0,editable:!0,sync:!0},{base:r.gY,visible:!0,editable:!0,sync:!0},{base:r.bW,visible:!0,editable:!0,sync:!0},{base:r.gO,visible:!0,editable:!0,sync:!0},{base:r.dq,visible:!0,editable:!0,sync:!0},{base:r.D1,visible:!1,editable:!0,sync:!0},{base:r.Cz,visible:!0,editable:!0,sync:!0},{base:r.xs,visible:!1,editable:!1,sync:!1},{base:r.KL,visible:!0,editable:!0,sync:!0},{base:r.be,visible:!0,editable:!0,sync:!0},{base:r.tO,visible:!0,editable:!0,sync:!0},{base:r.VZ,visible:!1,editable:!0,sync:!0},{base:r.Jv,visible:!0,editable:!1,sync:!0},{base:r._j,visible:!0,editable:!1,sync:!0},{base:r.B$,visible:!0,editable:!1,sync:!0},{base:r.iX,visible:!0,editable:!1}].filter((e=>e))),preferenceKey:"sequence-linear-map"}}}const o=SequenceLinearMapTabState},388616:(e,t,n)=>{n.d(t,{Z:()=>i})
var a=n(68371)
class SinglePolymerMapTabState extends a.Z{initialize(e,t,...n){super.initialize(e,t,...n)
null==this.get("mapstate")&&this.set({mapstate:this.mapState({polymer:this.polymer(),visibilityOptions:this.msVisibilityOptions()})})}}const i=SinglePolymerMapTabState},149058:(e,t,n)=>{n.d(t,{M2:()=>defensiveGetFromState,rP:()=>defensiveGetState,uq:()=>NotYetFetchedException})
var a=n(531041),i=n(525098)
class NotYetFetchedException extends i.Z{}function defensiveGetState(e,t){const n=t(e)
if(n&&!a.default.isEmpty(n))return n
throw new NotYetFetchedException(`Not yet fetched state for selector ${t}`)}function defensiveGetFromState(e,t){if(e.hasOwnProperty(t))return e[t]
throw new NotYetFetchedException(`Not yet fetched state for key ${t}`)}},295338:(e,t,n)=>{n.d(t,{Z:()=>StoreWrapper})
var a=n(232606),i=n(234868),s=n(728115),r=n(746312),o=n(933671),l=n(585624),c=n(372617),d=n(781995),u=n(273887),p=n(115749),m=n(351893),E=n(758911),h=n(978766),g=n(184353),S=n(469573),_=n(744898),T=n(778095),I=n(556957),A=n(286969),f=n(785249),y=n(179829),C=n(785718),R=n(57985),b=n(608886),N=n(232196),O=n(110341),L=n(727311),P=n(798540),D=n(824168),v=n(216090),M=n(166459),B=n(286708),U=n(85386),F=n(128963),w=n(224921),k=n(630822),x=n(676159),Z=n(749777),G=n(795110),H=n(305487),W=n(788836),q=n(967911),V=n(84941),J=n(75804),K=n(816456),Y=n(866648)
class StoreWrapper{constructor(){this.stores=[]
this.shouldSubscribeToRedux=!0}reduxState(){(0,a.Gp)(this.shouldSubscribeToRedux,"Tried to access redux state without subscribing to redux.")
return(0,M.getStore)().getState()}dispatch(e){return(0,M.getStore)().dispatch(e)}applicableBatchesStore(){return this.requiredStore(k.Z)}assayStore(){return this.requiredStore(w.Z)}bulkAntibodyStore(){return this.requiredStore(s.Z)}bulkAssemblyStore(){return this.requiredStore(r.Z)}bulkTranslationStore(){return this.requiredStore(o.Z)}calendarStore(){return this.requiredStore(l.ZP)}crisprAnalysisStore(){return this.requiredStore(m.Z)}crisprAssemblyStore(){return this.requiredStore(p.Z)}dataTableConfigStore(){return this.requiredStore(y.Z)}editorStore(){return this.requiredStore(b.Z)}entityStore(){return this.requiredStore(W.Z)}entryStore(){return this.requiredStore(q.Z)}fileBrowserStore(){return this.requiredStore(c.Z)}fullScreenStore(){return this.requiredStore(_.Z)}genomeStore(){return this.requiredStore(V.Z)}homeDashboardStore(){return this.requiredStore(d.Z)}hrTemplateStore(){return this.requiredStore(E.Z)}inventoryFileStore(){return this.requiredStore(u.Z)}organismStore(){return this.requiredStore(h.Z)}partyPageStore(){return this.requiredStore(v.Z)}navStore(){return this.requiredStore(T.Z)}newUserFlowStore(){return this.requiredStore(P.Z)}noteStore(){return this.requiredStore(f.Z)}proteinAlignmentStore(){return this.requiredStore(g.Z)}proteinStore(){return this.requiredStore(S.Z)}registryActivationFlowStore(){return this.requiredStore(D.Z)}registryStore(){return this.requiredStore(B.Z)}registryValidatorStore(){return this.requiredStore(U.Z)}schemaFieldSelectorStore(){return this.requiredStore(F.Z)}sampleSchemaStore(){return this.requiredStore(x.Z)}sampleStore(){return this.requiredStore(Z.Z)}sidepanelStore(){return this.requiredStore(I.Z)}spreadsheetBulkImportStore(){return this.requiredStore(i.ZP)}spreadsheetStore(){return this.requiredStore(O.Z)}stageEntryStore(){return this.requiredStore(Y.Z)}storableStore(){return this.requiredStore(G.Z)}tagSchemaStore(){return this.requiredStore(J.Z)}subtemplateStore(){return this.requiredStore(C.Z)}templateStore(){return this.requiredStore(R.Z)}tfiStore(){return this.requiredStore(L.Z)}timerStore(){return this.requiredStore(N.Z)}toastStore(){return this.requiredStore(A.Z)}workflowEntryTemplateStore(){return this.requiredStore(K.Z)}workspaceStore(){return this.requiredStore(H.Z)}requiredStore(e){(0,a.Gp)(this.stores.includes(e),"Tried to access store without having listened to it.")
return e}subscribe(e){for(const t of this.stores)t.addChangeListener(e)
let t=null
this.shouldSubscribeToRedux&&(t=(0,M.getStore)().subscribe(e))
return()=>{t&&t()
for(const t of this.stores)t.removeChangeListener(e)}}}},47984:(e,t,n)=>{n.r(t)
n.d(t,{ASSEMBLY_TYPE:()=>a})
var a
!function(e){e.DIGEST="DIGEST"
e.GIBSON="GIBSON"
e.GOLDEN_GATE="GOLDEN_GATE"}(a||(a={}))},429921:(e,t,n)=>{n.d(t,{Z:()=>i})
var a
!function(e){e.ANALYSIS_TOOL="ANALYSIS_TOOL"
e.ANALYTICS="ANALYTICS"
e.ARCHIVING="ARCHIVING"
e.AUDITING="AUDITING"
e.BENCHLING_APPS="BENCHLING_APPS"
e.BENCHLING_SDK="BENCHLING_SDK"
e.CAPILLARY="CAPILLARY"
e.CHANGE_DATA_CAPTURE="CHANGE_DATA_CAPTURE"
e.CHEMISTRY="CHEMISTRY"
e.CONFIG_MIGRATION="CONFIG_MIGRATION"
e.CONVERSION_TOOL="CONVERSION_TOOL"
e.CORE_OBJECT="CORE_OBJECT"
e.DATA_INPUT="DATA_INPUT"
e.DESKTOP_APP="DESKTOP_APP"
e.EVENTS="EVENTS"
e.EXPORTS="EXPORTS"
e.EXTERNAL_ADMIN="EXTERNAL_ADMIN"
e.FE_DEV_TOOLS="FE_DEV_TOOLS"
e.FORMS="FORMS"
e.GROWTH="GROWTH"
e.IDENTITY="IDENTITY"
e.INSIGHTS="INSIGHTS"
e.INSTITUTIONS="INSTITUTIONS"
e.INTERNAL_ADMIN="INTERNAL_ADMIN"
e.INTERNATIONALIZATION="INTERNATIONALIZATION"
e.INVENTORY="INVENTORY"
e.JOBS="JOBS"
e.LAB_AUTOMATION="LAB_AUTOMATION"
e.LEGACY_WORKFLOWS="LEGACY_WORKFLOWS"
e.MACHINE_LEARNING="MACHINE_LEARNING"
e.MODIFIED_BIOLOGICS="MODIFIED_BIOLOGICS"
e.MOLBIO="MOLBIO"
e.NAVIGATION="NAVIGATION"
e.NOTEBOOK="NOTEBOOK"
e.PERMISSIONS="PERMISSIONS"
e.PROCEDURES="PROCEDURES"
e.PROCESSES="PROCESSES"
e.MONOLITH_INFRA="MONOLITH_INFRA"
e.QUERY_API="QUERY_API"
e.REGISTRY="REGISTRY"
e.REQUESTS="REQUESTS"
e.RESULTS="RESULTS"
e.SCHEMAS="SCHEMAS"
e.SCHEMAS_UI="SCHEMAS_UI"
e.SIGHTGLASS="SIGHTGLASS"
e.TENANCY="TENANCY"
e.TEST_INFRA="TEST_INFRA"
e.TFI="TFI"
e.UNASSIGNED="UNASSIGNED"
e.UNITS="UNITS"
e.WAREHOUSE="WAREHOUSE"
e.WORKLISTS="WORKLISTS"
e.SECURITY="SECURITY"}(a||(a={}))
const i=a},239070:(e,t,n)=>{n.d(t,{$:()=>a,Dy:()=>s,hV:()=>r})
var a
!function(e){e.INVENTORY="inventory"
e.NOTEBOOK="notebook"
e.ALL="all"}(a||(a={}))
const i="NOTEBOOK",s={ALL:"ALL",ARBITRARY:i,INVENTORY:"INVENTORY",NOTEBOOK:i},r={DEFAULT_FOLDER_NAMESPACE:"default_folder.",DEFAULT_FOLDER_LIST_NAMESPACE:"default_folder_list.",DEFAULT_SECTION:"finder.default_section"}},922633:(e,t,n)=>{n.d(t,{ZP:()=>s})
var a
!function(e){e.SEQUENCE="sequence"
e.ENTRY="entry"
e.GETTING_STARTED="getting_started"}(a||(a={}))
const i=1073741824,s={VERIFY_EMAIL:"verify_email",SET_RECOVERY_EMAIL:"set_recovery_email",MAIN_TOUR:"main_tour",CREATE_FIRST_FILE:"create_first_file",CHAT_BENCHLING:"chat_benchling",VERIFY_ACADEMIC:"verify_academic",INVITE_MEMBER:"invite_member",CREATE_OR_JOIN_ORG:"create_or_join_org",MODULES:{SEQUENCE:a.SEQUENCE,ENTRY:a.ENTRY,GETTING_STARTED:a.GETTING_STARTED},READABLE_MODULES:{[a.SEQUENCE]:"sequence",[a.ENTRY]:"entry",[a.GETTING_STARTED]:"getting started"},OPEN_FILE:"open_file",AUTO_ANNOTATE:"auto_annotate",SPLIT_WORKSPACE:"split_workspace",IMPORT_SEQUENCE:"import_sequence",VIEW_ALIGNMENT:"view_alignment",RUN_DIGEST:"run_digest",CREATE_ENTRY:"create_entry",INSERT_DAY:"insert_day",CREATE_EDIT_TABLE:"create_edit_table",LINK_SEQUENCE:"link_sequence",ATTACH_PROTOCOL:"attach_protocol",SPACE_ADDITION_SIZES:{INVITE_MEMBER:i,VERIFY_ACADEMIC:i,ONBOARDING:{[a.GETTING_STARTED]:i,[a.SEQUENCE]:i,[a.ENTRY]:i}},LEGACY_CHECKLIST_MODULES:[a.SEQUENCE],MAX_INVITES:20}},984152:(e,t,n)=>{n.d(t,{g:()=>a})
var a
!function(e){e.GOOGLE_DOCS_VIEWER="google_docs_viewer"
e.MICROSOFT_OFFICE_ONLINE="microsoft_office_online"
e.MOLSTAR_PDB_VIEWER="molstar_pdb_viewer"
e.MOLSTAR_PDBQT_VIEWER="molstar_pdbqt_viewer"
e.MOLSTAR_MMCIF_VIEWER="molstar_mmcif_viewer"
e.IMAGE="image"
e.CSV="csv"
e.PDF="pdf"
e.NOT_PREVIEWABLE="not_previewable"}(a||(a={}))},136765:(e,t,n)=>{n.d(t,{Cn:()=>d,H2:()=>r,Pi:()=>u,m0:()=>p,n0:()=>o,nY:()=>i,oW:()=>m,uh:()=>l,vH:()=>a})
var a,i,s=n(602652)
!function(e){e.AVAILABLE="AVAILABLE"
e.RESERVED="RESERVED"
e.CHECKED_OUT="CHECKED_OUT"}(a||(a={}))
!function(e){e.RESTRICTED="RESTRICTED"
e.UNRESTRICTED="UNRESTRICTED"
e.NOT_APPLICABLE="NOT_APPLICABLE"}(i||(i={}))
const r={[i.RESTRICTED]:"Restricted",[i.UNRESTRICTED]:"Unrestricted",[i.NOT_APPLICABLE]:"N/A"}
var o
!function(e){e.ACCESS_GRANTED="ACCESS_GRANTED"
e.NO_ACCESS="NO_ACCESS"
e.NOT_APPLICABLE="NOT_APPLICABLE"}(o||(o={}))
const l={[o.ACCESS_GRANTED]:"Access granted",[o.NO_ACCESS]:"No access",[o.NOT_APPLICABLE]:"N/A"},c=s.shape({id:s.string.isRequired,name:s.string.isRequired,handle:s.string.isRequired}),d=s.shape({isCurrentUserRestrictedSampleUser:s.bool.isRequired,isCurrentUserSampleOwner:s.bool.isRequired,sampleOwners:s.arrayOf(c).isRequired,restrictedSampleUsers:s.arrayOf(c).isRequired}),u="You must have admin permissions to edit sample owners",p="You must have permission to restrict or unrestrict samples"
var m
!function(e){e.CICO_WARNING="CICO_WARNING"
e.SAMPLE_CONTROLS_WARNING="SAMPLE_CONTROLS_WARNING"}(m||(m={}))},875091:(e,t,n)=>{n.d(t,{Nu:()=>i,je:()=>s,xy:()=>a})
const a="alignment",i="digest",s="trace"},572928:(e,t,n)=>{n.r(t)
n.d(t,{ALL:()=>l,ARCHIVED:()=>u,HIDDEN:()=>d,ORGANIZATION:()=>c,PERSONAL:()=>r,PROJECT_TYPE:()=>a,REGISTRY_TYPE:()=>i,STARRED:()=>s,TEAM:()=>o})
const a="project",i="registry",s="starred",r="personal",o="team",l="all",c="organization",d="hidden",u="archived"},977989:(e,t,n)=>{n.d(t,{Q:()=>a,q:()=>i})
const a={PENDING:"pending",RUNNING:"running",SUCCEEDED:"succeeded",FAILED:"failed"}
var i
!function(e){e.PENDING="pending"
e.RUNNING="running"
e.SUCCEEDED="succeeded"
e.FAILED="failed"}(i||(i={}))},475242:(e,t,n)=>{n.d(t,{F:()=>a})
const a={SITE_ROOT:"https://help.benchling.com",ELN_ADDING_AUDITORS:"https://help.benchling.com/hc/articles/9684260674189",REGISTRY_CREATING_NEW_DATA:"https://help.benchling.com/hc/articles/9684264601997",REGISTRY_IMPORT_SPREADSHEETS:"https://help.benchling.com/hc/articles/9684236189197",MOLBIO_SIMULATE_DIGEST:"https://help.benchling.com/hc/articles/9684268012557",MOLBIO_MANUAL_PRIMER_DESIGN:"https://help.benchling.com/hc/articles/9684251405837"}},295213:(e,t,n)=>{n.d(t,{S:()=>i})
var a=n(786628)
const i={SELECTED_DATA_FRAME_CREATION_METHOD:{module:a.X.ANALYSIS_TOOL,action:"selected_data_frame_creation_option",actionCategory:a.J.READ},RESULTS_COLUMNS_MAPPED:{module:a.X.ANALYSIS_TOOL,action:"results_columns_mapped",actionCategory:a.J.WRITE},COPIED_ANALYSIS_STEP_KEY:{module:a.X.ANALYSIS_TOOL,action:"copied_analysis_step_key",actionCategory:a.J.READ},SELECTED_SIDEBAR_ITEM:{module:a.X.ANALYSIS_TOOL,action:"selected_sidebar_item",actionCategory:a.J.READ},CLICKED_GIVE_FEEDBACK:{module:a.X.ANALYSIS_TOOL,action:"clicked_give_feedback",actionCategory:a.J.READ}}},421797:(e,t,n)=>{n.d(t,{L:()=>i})
var a=n(786628)
const i={BENCHLING_APP_CREATED:{module:a.X.BENCHLING_APPS,action:"benchling_app_created",actionCategory:a.J.WRITE},BENCHLING_APP_NAME_UPDATED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_name_updated"},BENCHLING_APP_DESCRIPTION_UPDATED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"updated_benchling_app_description"},BENCHLING_APP_DEPENDENCIES_UPDATED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_dependencies_updated"},BENCHLING_APP_ARCHIVED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_archived"},BENCHLING_APP_UNARCHIVED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_unarchived"},BENCHLING_APP_API_KEY_REGENERATED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_api_key_regenerated"},BENCHLING_APP_API_KEY_DELETED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_api_key_deleted"},BENCHLING_APP_SECRET_REGENERATED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_secret_regenerated"},BENCHLING_APP_SECRET_DELETED:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"benchling_app_secret_deleted"},CREATED_APP_CANVAS:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"created_app_canvas"},ARCHIVED_APP_CANVAS:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"archived_app_canvas"},UNARCHIVED_APP_CANVAS:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"unarchived_app_canvas"},SUBMITTED_APP_CANVAS:{actionCategory:a.J.WRITE,module:a.X.BENCHLING_APPS,action:"submitted_app_canvas"},BENCHLING_APP_LISTING_PAGE_OPENED:{actionCategory:a.J.READ,module:a.X.BENCHLING_APPS,action:"benchling_apps_listing_page_opened"},BENCHLING_APP_DETAILS_PAGE_OPENED:{actionCategory:a.J.READ,module:a.X.BENCHLING_APPS,action:"benchling_app_details_page_opened"},CREATE_BENCHLING_APP_PAGE_OPENED:{actionCategory:a.J.READ,module:a.X.BENCHLING_APPS,action:"benchling_app_create_page_opened"}}},641562:(e,t,n)=>{n.d(t,{P:()=>i})
var a=n(786628)
const i={CALLED_TRY_IT_NOW:{module:a.X.CAPILLARY,action:"called_try_it_now",actionCategory:a.J.READ}}},67019:(e,t,n)=>{n.d(t,{C:()=>i})
var a=n(786628)
const i={UPLOADED_FILE:{module:a.X.CHEMISTRY,action:"uploaded_file",actionCategory:a.J.WRITE},CREATED_MOLECULE:{module:a.X.CHEMISTRY,action:"created_molecule",actionCategory:a.J.WRITE},EDITED_MOLECULE:{module:a.X.CHEMISTRY,action:"edited_molecule",actionCategory:a.J.WRITE},ARCHIVED_MOLECULE:{module:a.X.CHEMISTRY,action:"archived_molecule",actionCategory:a.J.WRITE},UNARCHIVED_MOLECULE:{module:a.X.CHEMISTRY,action:"unarchived_molecule",actionCategory:a.J.WRITE},DELETED_MOLECULE:{module:a.X.CHEMISTRY,action:"deleted_molecule",actionCategory:a.J.WRITE},VIEWED_MOLECULE:{module:a.X.CHEMISTRY,action:"viewed_molecule",actionCategory:a.J.READ},DOWNLOADED_MOLECULE:{module:a.X.CHEMISTRY,action:"downloaded_molecule",actionCategory:a.J.READ},PERFORMED_SUBSTRUCTURE_SEARCH:{module:a.X.CHEMISTRY,action:"performed_substructure_search",actionCategory:a.J.READ}}},856425:(e,t,n)=>{n.d(t,{Y:()=>i})
var a=n(786628)
const i={RECEIVED_REALTIME_UPDATE:{module:a.X.COLLABORATION,action:"received_realtime_update",actionCategory:a.J.READ},ENTERED_PRESENCE:{module:a.X.COLLABORATION,action:"entered_presence",actionCategory:a.J.READ},EXITED_PRESENCE:{module:a.X.COLLABORATION,action:"exited_presence",actionCategory:a.J.READ}}},514777:(e,t,n)=>{n.d(t,{T:()=>i})
var a=n(786628)
const i={EXPORTED_DATA_FRAME:{module:a.X.DATA_FRAMES,action:"exported_data_frame",actionCategory:a.J.READ},UPDATED_DATA_FRAME_TABLE_MODE:{module:a.X.DATA_FRAMES,action:"updated_data_frame_table_mode",actionCategory:a.J.READ},PAGINATED_DATA_FRAME_TABLE:{module:a.X.DATA_FRAMES,action:"paginated_data_frame_table",actionCategory:a.J.READ},SORTED_DATA_FRAME_TABLE:{module:a.X.DATA_FRAMES,action:"sorted_data_frame_table",actionCategory:a.J.READ}}},384189:(e,t,n)=>{n.d(t,{H:()=>i})
var a=n(786628)
const i={DOWNLOADED_REGISTRATION_TABLE_AS_CSV:{module:a.X.ELN,action:"downloaded_registration_table_as_csv",actionCategory:a.J.READ},DOWNLOADED_REQUEST_FULFILLMENTS_TABLE_AS_CSV:{module:a.X.ELN,action:"downloaded_request_fulfillments_table_as_csv",actionCategory:a.J.READ},DOWNLOADED_TRANSFER_TABLE_IN_NOTEBOOK_AS_CSV:{module:a.X.ELN,action:"downloaded_transfer_table_in_notebook_as_csv",actionCategory:a.J.READ},DOWNLOADED_UNSTRUCTURED_OR_WELL_PLATE_TABLE_AS_CSV:{module:a.X.ELN,action:"downloaded_unstructured_or_well_plate_table_as_csv",actionCategory:a.J.READ},DOWNLOADED_OUTPUT_SAMPLES_TABLE_AS_CSV:{module:a.X.ELN,action:"downloaded_output_samples_table_as_csv",actionCategory:a.J.READ},HOVERED_ILLEGAL_ERROR_TRIANGLE:{module:a.X.ELN,action:"hovered_illegal_error_triangle",actionCategory:a.J.READ},ACTIVATED_TAB:{module:a.X.ELN,action:"activated_tab",actionCategory:a.J.READ},OPENED_OLD_ENTRY_VERSION:{module:a.X.ELN,action:"opened_old_entry_version",actionCategory:a.J.READ},SENT_ENTRY_FOR_REVIEW:{module:a.X.ELN,action:"sent_entry_for_review",actionCategory:a.J.WRITE},SELF_APPROVED_ENTRY:{module:a.X.ELN,action:"self_approved_entry",actionCategory:a.J.WRITE},ACCEPTED_ENTRY_REVIEW:{module:a.X.ELN,action:"accepted_entry_review",actionCategory:a.J.WRITE},REJECTED_ENTRY_REVIEW:{module:a.X.ELN,action:"rejected_entry_review",actionCategory:a.J.WRITE},RETRACTED_ENTRY_REVIEW:{module:a.X.ELN,action:"retracted_entry_review",actionCategory:a.J.WRITE},REASSIGNED_REVIEW_STAGE_REVIEWER:{module:a.X.ELN,action:"reassigned_stage_reviewer",actionCategory:a.J.WRITE},COMPLETED_REVIEW_STAGE:{module:a.X.ELN,action:"completed_review_stage",actionCategory:a.J.WRITE},CREATED_ENTRY_FROM_TEMPLATE:{module:a.X.ELN,action:"created_entry_from_template",actionCategory:a.J.WRITE},CREATED_REGISTRATION_TABLE_IN_ENTRY:{module:a.X.ELN,action:"created_registration_table_in_entry",actionCategory:a.J.WRITE},CREATED_REGISTRATION_TABLE_CONFIG:{module:a.X.ELN,action:"created_registration_table_config",actionCategory:a.J.WRITE},CLONED_REGISTRATION_TABLE_FROM_CONFIG:{module:a.X.ELN,action:"cloned_registration_table_from_config",actionCategory:a.J.WRITE},REGISTERED_BATCH_FROM_TABLE:{module:a.X.ELN,action:"registered_batch_from_table",actionCategory:a.J.WRITE},REGISTERED_BIOENTITY_FROM_TABLE:{module:a.X.ELN,action:"registered_bioentity_from_table",actionCategory:a.J.WRITE},REGISTERED_BIOENTITY_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"registered_bioentity_from_structured_table",actionCategory:a.J.WRITE},TOGGLED_WATCHING_ON_REGISTRATION_TABLE:{module:a.X.ELN,action:"toggled_watching_on_registration_table",actionCategory:a.J.WRITE},CREATED_BOX_CREATION_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_box_creation_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_BOX_CREATION_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_box_creation_table_in_notebook_template",actionCategory:a.J.WRITE},CREATED_MIXTURE_PREP_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_mixture_prep_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_MIXTURE_PREP_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_mixture_prep_table_in_notebook_template",actionCategory:a.J.WRITE},INSERTED_PARENT_MIXTURE_INSTRUCTIONS_INTO_ENTRY:{module:a.X.ELN,action:"inserted_parent_mixture_instructions_into_entry",actionCategory:a.J.WRITE},CREATED_DATA_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_data_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_DATA_TABLE_CONFIG_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_data_table_config_in_notebook_template",actionCategory:a.J.WRITE},CREATED_LOOKUP_STRUCTURED_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_lookup_structured_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_LOOKUP_STRUCTURED_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_lookup_structured_table_config_in_notebook_template",actionCategory:a.J.WRITE},CREATED_RESULTS_STRUCTURED_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_results_structured_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_RESULTS_STRUCTURED_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_results_structured_table_config_in_notebook_template",actionCategory:a.J.WRITE},CREATED_TRANSFER_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_transfer_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_TRANSFER_TABLE_CONFIG_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_transfer_table_config_in_notebook_template",actionCategory:a.J.WRITE},ADDED_TRANSFER_TABLE_ROWS_FROM_SPREADSHEET_IMPORT:{module:a.X.ELN,action:"added_transfer_table_rows_from_spreadsheet_import",actionCategory:a.J.WRITE},FILLED_NEXT_AVAILABLE_POSITIONS_FROM_TRANSFER_TABLE_IN_NOTEBOOK:{module:a.X.ELN,action:"filled_next_available_positions_from_transfer_table_in_notebook",actionCategory:a.J.WRITE},CREATED_WELL_PLATE_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_well_plate_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_PLATE_CREATION_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_plate_creation_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_PLATE_CREATION_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_plate_creation_table_in_notebook_template",actionCategory:a.J.WRITE},CREATED_REGISTRATION_STRUCTURED_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_registration_structured_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_REGISTRATION_STRUCTURED_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_registration_structured_table_in_notebook_template",actionCategory:a.J.WRITE},CREATED_TRANSFER_STRUCTURED_TABLE_IN_NOTEBOOK_ENTRY:{module:a.X.ELN,action:"created_transfer_structured_table_in_notebook_entry",actionCategory:a.J.WRITE},CREATED_TRANSFER_STRUCTURED_TABLE_IN_NOTEBOOK_TEMPLATE:{module:a.X.ELN,action:"created_transfer_structured_table_in_notebook_template",actionCategory:a.J.WRITE},CREATED_INVENTORY_TABLE:{module:a.X.ELN,action:"created_inventory_table",actionCategory:a.J.WRITE},OPENED_QUICK_EDIT_MODAL:{module:a.X.ELN,action:"opened_quick_edit_modal",actionCategory:a.J.READ},SAVED_QUICK_EDIT_MODAL:{module:a.X.ELN,action:"saved_quick_edit_modal",actionCategory:a.J.WRITE},STRUCTURED_TABLE_ACTION_APPLIED:{module:a.X.ELN,action:"structured_table_action_applied",actionCategory:a.J.WRITE},PLATE_CREATED_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"plate_created_from_structured_table",actionCategory:a.J.WRITE},BOX_CREATED_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"box_created_from_structured_table",actionCategory:a.J.WRITE},BOX_UPDATED_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"box_updated_from_structured_table",actionCategory:a.J.WRITE},REGISTERED_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"registered_from_structured_table",actionCategory:a.J.WRITE},SUBMITTED_MIXTURE_GROUP:{module:a.X.ELN,action:"submitted_mixture_group",actionCategory:a.J.WRITE},TRANSFERRED_SAMPLES_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"transferred_samples_from_structured_table",actionCategory:a.J.WRITE},TRANSFERRED_ROW_SAMPLES_FROM_STRUCTURED_TABLE:{module:a.X.ELN,action:"transferred_row_samples_from_structured_table",actionCategory:a.J.WRITE},UPDATED_CONTAINER_SCHEMA_FIELDS_FROM_TRANSFER_STRUCTURED_TABLE:{module:a.X.ELN,action:"updated_container_schema_fields_from_transfer_structured_table",actionCategory:a.J.WRITE},UPDATED_CONTAINERS_OR_WELLS_FROM_INVENTORY_TABLE:{module:a.X.ELN,action:"updated_containers_or_wells_from_inventory_table",actionCategory:a.J.WRITE},UPDATED_CONTAINERS_OR_WELLS_FROM_INVENTORY_TABLE_ROWS:{module:a.X.ELN,action:"updated_containers_or_wells_from_inventory_table_rows",actionCategory:a.J.WRITE},REFRESHED_STRUCTURED_TABLE:{module:a.X.ELN,action:"refreshed_structured_table",actionCategory:a.J.WRITE},REFRESHED_STRUCTURED_TABLE_LOOKUP_COLUMNS:{module:a.X.ELN,action:"refreshed_structured_table_lookup_columns",actionCategory:a.J.WRITE},REFRESHED_NOTE_LINKED_GROUP:{module:a.X.ELN,action:"refreshed_note_linked_group",actionCategory:a.J.WRITE},ADDED_SAMPLES_TO_STRUCTURED_TABLE:{module:a.X.ELN,action:"added_samples_to_structured_table",actionCategory:a.J.WRITE},EDITED_IMAGE:{module:a.X.ELN,action:"edited_image",actionCategory:a.J.WRITE},RAN_PROCESS_TASK_FINDER:{module:a.X.ELN,action:"ran_process_task_finder",actionCategory:a.J.WRITE},TOGGLED_COLUMN_LOCKING:{module:a.X.ELN,action:"toggled_column_locking",actionCategory:a.J.WRITE},TOGGLED_FILL_IN_TEMPLATE:{module:a.X.ELN,action:"toggled_fill_in_template",actionCategory:a.J.WRITE},DUPLICATE_LOOKUP_COLUMN:{module:a.X.ELN,action:"duplicate_lookup_column",actionCategory:a.J.WRITE},EDIT_LOOKUP_COLUMN:{module:a.X.ELN,action:"edit_lookup_column",actionCategory:a.J.WRITE},INSERT_LOOKUP_COLUMN:{module:a.X.ELN,action:"insert_lookup_column",actionCategory:a.J.WRITE},INSERTED_CUSTOM_COLUMN:{module:a.X.ELN,action:"inserted_custom_column",actionCategory:a.J.WRITE},CREATE_NOTEBOOK_LOOKUP_CONFIG:{module:a.X.ELN,action:"create_lookup_config",actionCategory:a.J.WRITE},DELETE_COLUMN:{module:a.X.ELN,action:"delete_column",actionCategory:a.J.WRITE},INSERT_TEXT_BOX:{module:a.X.ELN,action:"insert_text_box",actionCategory:a.J.WRITE},DELETE_TEXT_BOX:{module:a.X.ELN,action:"delete_text_box",actionCategory:a.J.WRITE},REVERTED_ENTRY_VERSION:{module:a.X.ELN,action:"reverted_entry_version",actionCategory:a.J.WRITE},INSERTED_SUBTEMPLATE:{module:a.X.ELN,action:"inserted_subtemplate",actionCategory:a.J.WRITE},MENTIONED_OBJECT:{module:a.X.ELN,action:"mentioned_object",actionCategory:a.J.WRITE},UPDATED_TABLE_MAPPINGS:{module:a.X.ELN,action:"updated_table_mappings",actionCategory:a.J.WRITE},PERFORMED_TABLE_MAPPING:{module:a.X.ELN,action:"performed_table_mapping",actionCategory:a.J.WRITE},ROW_BASED_TABLE_SUBMISSION:{module:a.X.ELN,action:"row_based_table_submission",actionCategory:a.J.WRITE}}},87789:(e,t,n)=>{n.d(t,{$:()=>i})
var a=n(786628)
const i={CREATED_EVENT_SUBSCRIPTION:{module:a.X.EVENTS,action:"created_event_subscription",actionCategory:a.J.WRITE},UPDATED_EVENT_SUBSCRIPTION:{module:a.X.EVENTS,action:"updated_event_subscription",actionCategory:a.J.WRITE},DELETED_EVENT_SUBSCRIPTION:{module:a.X.EVENTS,action:"deleted_event_subscription",actionCategory:a.J.WRITE},INVALID_EVENT_SUBSCRIPTION_ATTEMPT:{module:a.X.EVENTS,action:"invalid_event_subscription_attempt",actionCategory:a.J.WRITE},EXPIRED_EVENT_SUBSCRIPTION:{module:a.X.EVENTS,action:"expired_event_subscription",actionCategory:a.J.WRITE},RESUMED_EVENT_SUBSCRIPTION:{module:a.X.EVENTS,action:"resumed_event_subscription",actionCategory:a.J.WRITE},OPENED_EVENT_SUBSCRIPTION_UPDATE_MODAL:{module:a.X.EVENTS,action:"opened_event_subscription_update_modal",actionCategory:a.J.READ},OPENED_EVENT_SUBSCRIPTION_CREATE_MODAL:{module:a.X.EVENTS,action:"opened_event_subscription_create_modal",actionCategory:a.J.READ},OPENED_EVENTS_DOCUMENTATION:{module:a.X.EVENTS,action:"opened_events_documentation",actionCategory:a.J.READ},OPENED_DEVELOPER_CONSOLE:{module:a.X.EVENTS,action:"opened_developer_console",actionCategory:a.J.READ}}},636976:(e,t,n)=>{n.d(t,{l:()=>i})
var a=n(786628)
const i={OPENED_FORM_DESIGNER:{module:a.X.FORMS,action:"opened_form_designer",actionCategory:a.J.READ},SUBMITTED_FORM_DESIGNER:{module:a.X.FORMS,action:"submitted_form_designer",actionCategory:a.J.WRITE},FIXED_INVALID_FORM_DEFINITION:{module:a.X.FORMS,action:"fixed_invalid_form_definition",actionCategory:a.J.WRITE},CLICKED_FORM_ARCHIVE_BUTTON:{module:a.X.FORMS,action:"clicked_form_archive_button",actionCategory:a.J.WRITE},CLICKED_FORM_UNARCHIVE_BUTTON:{module:a.X.FORMS,action:"clicked_form_unarchive_button",actionCategory:a.J.WRITE},CREATED_FORM_DEFINITION:{module:a.X.FORMS,action:"created_form_definition",actionCategory:a.J.WRITE},UPDATED_FORM_DEFINITION:{module:a.X.FORMS,action:"updated_form_definition",actionCategory:a.J.WRITE},ARCHIVED_FORM_DEFINITION:{module:a.X.FORMS,action:"archived_form_definition",actionCategory:a.J.WRITE},UNARCHIVED_FORM_DEFINITION:{module:a.X.FORMS,action:"unarchived_form_definition",actionCategory:a.J.WRITE}}},215476:(e,t,n)=>{n.d(t,{n:()=>i})
var a=n(786628)
const i={OPENED_SHARE_LINK_CREATION_MODAL:{module:a.X.GROWTH,action:"opened_share_link_creation_modal",actionCategory:a.J.READ},CLOSED_SHARE_LINK_METADATA_MODAL:{module:a.X.GROWTH,action:"closed_share_link_metadata_modal",actionCategory:a.J.READ}}},538667:(e,t,n)=>{n.d(t,{z:()=>i})
var a=n(786628)
const i={OPENED_MODAL_EFFECTIVE_PERMISSIONS:{module:a.X.IDENTITY,action:"opened_modal_effective_permissions",actionCategory:a.J.READ},CLOSED_MODAL_EFFECTIVE_PERMISSIONS:{module:a.X.IDENTITY,action:"closed_modal_effective_permissions",actionCategory:a.J.READ},OPENED_DATA_ACCESS_ROW_OVERFLOW_MENU:{module:a.X.IDENTITY,action:"opened_data_access_row_overflow_menu",actionCategory:a.J.READ},OPENED_PARTY_BASIC_SETTINGS_TAB:{module:a.X.IDENTITY,action:"opened_party_basic_settings_tab",actionCategory:a.J.READ},OPENED_PARTY_DATA_ACCESS_TAB:{module:a.X.IDENTITY,action:"opened_party_data_access_tab",actionCategory:a.J.READ},CLICKED_PARTY_SETTINGS:{module:a.X.IDENTITY,action:"clicked_party_settings",actionCategory:a.J.READ}}},571269:(e,t,n)=>{n.d(t,{J:()=>i})
var a=n(786628)
const i={OPENED_INSIGHTS_MODULE:{module:a.X.INSIGHTS,action:"opened_insights_module",actionCategory:a.J.READ},OPENED_DASHBOARD_FROM_SIDEPANEL:{module:a.X.INSIGHTS,action:"opened_dashboard_from_sidepanel",actionCategory:a.J.READ},LOADED_QUERY:{module:a.X.INSIGHTS,action:"loaded_query",actionCategory:a.J.READ},RAN_QUERY:{module:a.X.INSIGHTS,action:"ran_query",actionCategory:a.J.READ},COPIED_TABLE_NAME_IN_SCHEMA_BROWSER:{module:a.X.INSIGHTS,action:"copied_table_name_in_schema_browser",actionCategory:a.J.READ},SEARCHED_IN_SCHEMA_BROWSER:{module:a.X.INSIGHTS,action:"searched_in_schema_browser",actionCategory:a.J.READ},OPENED_DASHBOARD_FROM_EXTERNAL_MODULE:{module:a.X.INSIGHTS,action:"opened_dashboard_from_external_module",actionCategory:a.J.READ},OPENED_EMBEDDED_DASHBOARD_TAB:{module:a.X.INSIGHTS,action:"opened_embedded_dashboard_tab",actionCategory:a.J.READ},OPENED_TABLE_IN_SCHEMA_BROWSER:{module:a.X.INSIGHTS,action:"opened_table_in_schema_browser",actionCategory:a.J.READ},OPENED_WAREHOUSE_DIAGRAM:{module:a.X.INSIGHTS,action:"opened_warehouse_diagram",actionCategory:a.J.READ},ADDED_RELATED_TABLES_TO_WAREHOUSE_DIAGRAM:{module:a.X.INSIGHTS,action:"added_related_tables_to_warehouse_diagram",actionCategory:a.J.READ},DOWNLOADED_QUERY_OUTPUT_AS_CSV:{module:a.X.INSIGHTS,action:"downloaded_query_output_as_csv",actionCategory:a.J.READ},COPIED_QUERY_OUTPUT_AS_TSV:{module:a.X.INSIGHTS,action:"copied_query_output_as_tsv",actionCategory:a.J.READ},ADDED_BLOCK:{module:a.X.INSIGHTS,action:"added_block",actionCategory:a.J.WRITE},ADDED_EMBEDDED_DASHBOARD:{module:a.X.INSIGHTS,action:"added_embedded_dashboard",actionCategory:a.J.WRITE},CHANGED_BLOCK_LAYOUT:{module:a.X.INSIGHTS,action:"changed_block_layout",actionCategory:a.J.WRITE},CHANGED_VISUALIZATION_TYPE:{module:a.X.INSIGHTS,action:"changed_visualization_type",actionCategory:a.J.WRITE},CREATED_DASHBOARD:{module:a.X.INSIGHTS,action:"created_dashboard",actionCategory:a.J.WRITE},DELETED_BLOCK:{module:a.X.INSIGHTS,action:"deleted_block",actionCategory:a.J.WRITE},DELETED_DASHBOARD:{module:a.X.INSIGHTS,action:"deleted_dashboard",actionCategory:a.J.WRITE},DUPLICATED_BLOCK:{module:a.X.INSIGHTS,action:"duplicated_block",actionCategory:a.J.WRITE},DUPLICATED_DASHBOARD:{module:a.X.INSIGHTS,action:"duplicated_dashboard",actionCategory:a.J.WRITE},INSERTED_PARAMETER:{module:a.X.INSIGHTS,action:"inserted_parameter",actionCategory:a.J.WRITE},MOVED_DASHBOARD:{module:a.X.INSIGHTS,action:"moved_dashboard",actionCategory:a.J.WRITE},DELETED_EMBEDDED_DASHBOARD:{module:a.X.INSIGHTS,action:"removed_embedded_dashboard",actionCategory:a.J.WRITE},UPDATED_PARAMETER_TYPE:{module:a.X.INSIGHTS,action:"updated_parameter_type",actionCategory:a.J.WRITE}}},202365:(e,t,n)=>{n.d(t,{G:()=>i})
var a=n(786628)
const i={DOWNLOADED_INPUT_TABLE_AS_CSV:{module:a.X.LEGACY_WORKFLOWS,action:"downloaded_input_table_as_csv",actionCategory:a.J.READ},DOWNLOADED_TRANSFER_TABLE_AS_CSV:{module:a.X.LEGACY_WORKFLOWS,action:"downloaded_transfer_table_as_csv",actionCategory:a.J.READ},OPENED_STAGE_ENTRY:{module:a.X.LEGACY_WORKFLOWS,action:"opened_stage_entry",actionCategory:a.J.READ},OPENED_LEGACY_WORKFLOW_DASHBOARD:{module:a.X.LEGACY_WORKFLOWS,action:"opened_workflow_dashboard",actionCategory:a.J.READ},OPENED_LEGACY_WORKFLOW_SUMMARY_VIEW:{module:a.X.LEGACY_WORKFLOWS,action:"opened_workflow_summary_view",actionCategory:a.J.READ},OPENED_LEGACY_WORKFLOW_TEMPLATE:{module:a.X.LEGACY_WORKFLOWS,action:"opened_workflow_template",actionCategory:a.J.READ},ADDED_INPUT_TABLE_SAMPLES_FROM_SPREADSHEET_IMPORT:{module:a.X.LEGACY_WORKFLOWS,action:"added_input_table_samples_from_spreadsheet_import",actionCategory:a.J.WRITE},AUTOSELECTED_INPUT_CONTAINERS:{module:a.X.LEGACY_WORKFLOWS,action:"autoselected_input_containers",actionCategory:a.J.WRITE},COMPLETED_LEGACY_WORKFLOW:{module:a.X.LEGACY_WORKFLOWS,action:"completed_workflow",actionCategory:a.J.WRITE},CREATED_DATA_TABLE_IN_ENTRY:{module:a.X.LEGACY_WORKFLOWS,action:"created_data_table_in_entry",actionCategory:a.J.WRITE},CREATED_DATA_TABLE_CONFIG:{module:a.X.LEGACY_WORKFLOWS,action:"created_data_table_config",actionCategory:a.J.WRITE},CREATED_TRANSFER_TABLE_IN_ENTRY:{module:a.X.LEGACY_WORKFLOWS,action:"created_transfer_table_in_entry",actionCategory:a.J.WRITE},CREATED_TRANSFER_TABLE_CONFIG:{module:a.X.LEGACY_WORKFLOWS,action:"created_transfer_table_config",actionCategory:a.J.WRITE},CREATED_LEGACY_WORKFLOW:{module:a.X.LEGACY_WORKFLOWS,action:"created_workflow",actionCategory:a.J.WRITE},DUPLICATED_BRANCH:{module:a.X.LEGACY_WORKFLOWS,action:"duplicated_branch",actionCategory:a.J.WRITE},FILLED_NEXT_AVAILABLE_POSITIONS_FROM_TRANSFER_TABLE:{module:a.X.LEGACY_WORKFLOWS,action:"filled_next_available_positions_from_transfer_table",actionCategory:a.J.WRITE},RERAN_STAGE_RUN:{module:a.X.LEGACY_WORKFLOWS,action:"reran_stage_run",actionCategory:a.J.WRITE},SPLIT_BY_CONDITION:{module:a.X.LEGACY_WORKFLOWS,action:"split_by_condition",actionCategory:a.J.WRITE},SPLIT_BY_INPUTS:{module:a.X.LEGACY_WORKFLOWS,action:"split_by_inputs",actionCategory:a.J.WRITE},TRANSFERRED_SAMPLES_FROM_TABLE:{module:a.X.LEGACY_WORKFLOWS,action:"transferred_samples_from_table",actionCategory:a.J.WRITE},UPDATED_STAGE:{module:a.X.LEGACY_WORKFLOWS,action:"updated_stage",actionCategory:a.J.WRITE},UPDATED_STAGE_ENTRY:{module:a.X.LEGACY_WORKFLOWS,action:"updated_stage_entry",actionCategory:a.J.WRITE},UPDATED_STAGE_RUN:{module:a.X.LEGACY_WORKFLOWS,action:"updated_stage_run",actionCategory:a.J.WRITE},UPDATED_STAGE_RUN_STATUS:{module:a.X.LEGACY_WORKFLOWS,action:"updated_stage_run_status",actionCategory:a.J.WRITE},UPDATED_LEGACY_WORKFLOW_TEMPLATE:{module:a.X.LEGACY_WORKFLOWS,action:"updated_workflow_template",actionCategory:a.J.WRITE}}},625008:(e,t,n)=>{n.d(t,{g:()=>i})
var a=n(786628)
const i={OPENED_MOD_PATTERN_MODAL:{module:a.X.MODBIO,action:"opened_mod_pattern_modal",actionCategory:a.J.READ},REACHED_MOD_PATTERN_APPLY_PANE:{module:a.X.MODBIO,action:"reached_mod_pattern_apply_pane",actionCategory:a.J.READ},OPENED_FIND_AND_REPLACE_MODAL:{module:a.X.MODBIO,action:"opened_find_and_replace_modal",actionCategory:a.J.READ}}},605881:(e,t,n)=>{n.d(t,{J:()=>i})
var a=n(786628)
const i={OPENED_CODON_OPTIMIZATION:{module:a.X.MOLBIO,action:"opened_codon_optimiation",actionCategory:a.J.READ},PERFORMED_CODON_OPTIMIZATION:{module:a.X.MOLBIO,action:"performed_codon_optimization",actionCategory:a.J.READ},SAVED_CODON_OPTIMIZED_SEQUENCE:{module:a.X.MOLBIO,action:"saved_codon_optimized_sequence",actionCategory:a.J.WRITE},CREATED_CODON_OPTIMIZED_SEQUENCE:{module:a.X.MOLBIO,action:"created_codon_optimized_sequence",actionCategory:a.J.WRITE},OPENED_BULK_ASSEMBLY:{module:a.X.MOLBIO,action:"opened_bulk_assembly",actionCategory:a.J.READ},DOWNLOADED_FORMATTED_ALIGNMENT_PDF:{module:a.X.MOLBIO,action:"downloaded_formatted_alignment_pdf",actionCategory:a.J.READ},OPENED_FORMATTED_PDF_MODAL:{module:a.X.MOLBIO,action:"opened_formatted_pdf_modal",actionCategory:a.J.READ},RETRIED_HOMOLOGY_DETECTION:{module:a.X.MOLBIO,action:"retried_homology_detection",actionCategory:a.J.READ},USED_ALIGNMENT_MISMATCH_NAVIGATION:{module:a.X.MOLBIO,action:"used_alignment_mismatch_navigation",actionCategory:a.J.READ},OPENED_BIOCHEMICAL_PROPERTIES_TAB_ON_DNA:{module:a.X.MOLBIO,action:"opened_biochemical_properties_tab_on_dna",actionCategory:a.J.READ},VIEWED_SEQUENCE_ENTITY_MAP_TAB:{module:a.X.MOLBIO,action:"viewed_sequence_entity_map_tab",actionCategory:a.J.READ},VIEWED_SEQUENCE_ENTITY_DESCRIPTION_TAB:{module:a.X.MOLBIO,action:"viewed_sequence_entity_description_tab",actionCategory:a.J.READ},VIEWED_SEQUENCE_ENTITY_METADATA_TAB:{module:a.X.MOLBIO,action:"viewed_sequence_entity_metadata_tab",actionCategory:a.J.READ},CLICKED_SEQUENCE_ENTITY_SEQUENCE_MAP:{module:a.X.MOLBIO,action:"clicked_sequence_entity_map",actionCategory:a.J.READ},CLICKED_RIGHT_ON_SELECTED_SEQUENCE_BASES:{module:a.X.MOLBIO,action:"clicked_right_on_selected_sequence_bases",actionCategory:a.J.READ},CLICKED_CREATE_IN_SEQUENCE_MAP:{module:a.X.MOLBIO,action:"clicked_create_in_sequence_map",actionCategory:a.J.READ},CLICKED_ANALYZE_IN_SEQUENCE_MAP:{module:a.X.MOLBIO,action:"clicked_analyze_in_sequence_map",actionCategory:a.J.READ},CLICKED_ANNOTATION_IN_SEQUENCE_MAP:{module:a.X.MOLBIO,action:"clicked_annotation_in_sequence_map",actionCategory:a.J.READ},OPENED_SEQUENCE_MAP_SEARCH_MODAL:{module:a.X.MOLBIO,action:"opened_sequence_map_search_modal",actionCategory:a.J.READ},SELECTED_BASES_IN_MAP:{module:a.X.MOLBIO,action:"selected_bases_in_map",actionCategory:a.J.READ},OPENED_CREATE_OLIGO_MODAL:{module:a.X.MOLBIO,action:"opened_create_oligo_modal",actionCategory:a.J.READ},UPLOADED_NUCLEOTIDE_IMPORT_SPREADSHEET:{module:a.X.MOLBIO,action:"uploaded_nucleotide_import_spreadsheet",actionCategory:a.J.WRITE},ENTERED_VALUE_IN_NUCLEOTIDE_CREATE_MODAL:{module:a.X.MOLBIO,action:"entered_value_in_nucleotide_create_modal",actionCategory:a.J.WRITE},SUBMITTED_NUCLEOTIDE_CREATE_MODAL:{module:a.X.MOLBIO,action:"submitted_nucleotide_create_modal",actionCategory:a.J.WRITE},COPIED_ALIGNMENT_URL:{module:a.X.MOLBIO,action:"copied_alignment_url",actionCategory:a.J.READ},LOADED_ALIGNMENT_URL:{module:a.X.MOLBIO,action:"loaded_alignment_url",actionCategory:a.J.READ},OPENED_BULK_BACK_TRANSLATION:{module:a.X.MOLBIO,action:"opened_bulk_back_translation",actionCategory:a.J.READ},PERFORMED_BULK_BACK_TRANSLATION:{module:a.X.MOLBIO,action:"performed_bulk_back_translation",actionCategory:a.J.READ},OPENED_BULK_CODON_OPTIMIZATION:{module:a.X.MOLBIO,action:"opened_bulk_codon_optimization",actionCategory:a.J.READ},PERFORMED_BULK_CODON_OPTIMIZATION:{module:a.X.MOLBIO,action:"performed_bulk_codon_optimization",actionCategory:a.J.READ},UPLOADED_MOLFILE:{module:a.X.MOLBIO,action:"uploaded_molfile",actionCategory:a.J.WRITE},OPENED_RNA_SEQUENCE_FROM_TRANSCRIPTION_VISUALIZATION:{module:a.X.MOLBIO,action:"opened_rna_sequence_from_transcription_visualization",actionCategory:a.J.READ},VIEWED_BULK_ASSEMBLY_BETA_BANNER:{module:a.X.MOLBIO,action:"viewed_bulk_assembly_beta_banner",actionCategory:a.J.READ},CLICKED_REDESIGNED_BULK_ASSEMBLY_LINK:{module:a.X.MOLBIO,action:"clicked_redesigned_bulk_assembly_link",actionCategory:a.J.READ},CLOSED_REDESIGNED_BULK_ASSEMBLY_MODAL:{module:a.X.MOLBIO,action:"closed_redesigned_bulk_assembly_modal",actionCategory:a.J.READ},OPENED_BULK_ASSEMBLY_SETUP_MODAL:{module:a.X.MOLBIO,action:"opened_bulk_assembly_setup_modal",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_NAME_FIELD:{module:a.X.MOLBIO,action:"updated_bulk_assembly_name_field",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_CLONING_METHOD_FIELD:{module:a.X.MOLBIO,action:"updated_bulk_assembly_cloning_method_field",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_TOPOLOGY:{module:a.X.MOLBIO,action:"updated_bulk_assembly_topology_field",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_OUTPUT_SEQUENCE_TYPE:{module:a.X.MOLBIO,action:"updated_bulk_assembly_output_sequence_type",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_NUCLEOTIDE_TYPE:{module:a.X.MOLBIO,action:"updated_bulk_assembly_nucleotide_type_field",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_PRIMER_PARAMETERS:{module:a.X.MOLBIO,action:"updated_bulk_assembly_primer_parameters",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_ENZYME:{module:a.X.MOLBIO,action:"updated_bulk_assembly_enzyme",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_FRAGMENT_PRODUCTION_METHOD:{module:a.X.MOLBIO,action:"updated_bulk_assembly_fragment_production_method",actionCategory:a.J.READ},SAVED_BULK_ASSEMBLY_SETTINGS:{module:a.X.MOLBIO,action:"saved_bulk_assembly_settings",actionCategory:a.J.WRITE},ADDED_BULK_ASSEMBLY_BIN:{module:a.X.MOLBIO,action:"added_bulk_assembly_bin",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_BIN_NAME:{module:a.X.MOLBIO,action:"updated_bulk_assembly_bin_name",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_BIN_NUMBER:{module:a.X.MOLBIO,action:"updated_bulk_assembly_bin_number",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_BIN_SETTINGS:{module:a.X.MOLBIO,action:"updated_bulk_assembly_bin_settings",actionCategory:a.J.WRITE},DELETED_BULK_ASSEMBLY_BIN:{module:a.X.MOLBIO,action:"deleted_bulk_assembly_bin",actionCategory:a.J.WRITE},ADDED_BULK_ASSEMBLY_SPACER:{module:a.X.MOLBIO,action:"added_bulk_assembly_spacer",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_SPACER_NUMBER:{module:a.X.MOLBIO,action:"updated_bulk_assembly_spacer_number",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_SPACER_SETTINGS:{module:a.X.MOLBIO,action:"updated_bulk_assembly_spacer_settings",actionCategory:a.J.WRITE},DELETED_BULK_ASSEMBLY_SPACER:{module:a.X.MOLBIO,action:"deleted_bulk_assembly_spacer",actionCategory:a.J.WRITE},OPENED_BULK_ASSEMBLY_ADD_FRAGMENTS_MODAL:{module:a.X.MOLBIO,action:"opened_bulk_assembly_add_fragments_modal",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_PREFERRED_PRIMER:{module:a.X.MOLBIO,action:"updated_bulk_assembly_fragment_preferred_primer",actionCategory:a.J.WRITE},CLICKED_BULK_ASSEMBLY_FRAGMENT_SWAP_ENDPOINTS_BUTTON:{module:a.X.MOLBIO,action:"clicked_bulk_assembly_fragment_swap_endpoints_button",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_FRAGMENT_MODAL_ACTIVE_FRAGMENT:{module:a.X.MOLBIO,action:"updated_bulk_assembly_fragment_modal_active_fragment",actionCategory:a.J.READ},ADDED_BULK_ASSEMBLY_FRAGMENTS:{module:a.X.MOLBIO,action:"added_bulk_assembly_fragments",actionCategory:a.J.WRITE},OPENED_BULK_ASSEMBLY_EDIT_FRAGMENT_MODAL:{module:a.X.MOLBIO,action:"opened_bulk_assembly_edit_fragment_modal",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_FRAGMENT:{module:a.X.MOLBIO,action:"updated_bulk_assembly_fragment",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_FRAGMENTS_TABLE:{module:a.X.MOLBIO,action:"updated_bulk_assembly_fragments_table",actionCategory:a.J.WRITE},UPDATED_BULK_ASSEMBLY_CONSTRUCTS_TABLE:{module:a.X.MOLBIO,action:"updated_bulk_assembly_constructs_table",actionCategory:a.J.WRITE},DELETED_BULK_ASSEMBLY_CONSTRUCT:{module:a.X.MOLBIO,action:"deleted_bulk_assembly_construct",actionCategory:a.J.WRITE},EDITED_BULK_ASSEMBLY_CONSTRUCT_IN_TABLE:{module:a.X.MOLBIO,action:"edited_bulk_assembly_construct_in_table",actionCategory:a.J.WRITE},CLICKED_BULK_ASSEMBLY_AUTOPOPULATE_BUTTON:{module:a.X.MOLBIO,action:"clicked_bulk_assembly_autopopulate_button",actionCategory:a.J.WRITE},CLICKED_BULK_ASSEMBLY_CLEAR_CONSTRUCTS_BUTTON:{module:a.X.MOLBIO,action:"clicked_bulk_assembly_clear_constructs_button",actionCategory:a.J.WRITE},OPENED_BULK_ASSEMBLY_CONSTRUCT_PREVIEW_MODAL:{module:a.X.MOLBIO,action:"opened_bulk_assembly_construct_preview_modal",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_CONSTRUCT_MODAL_ACTIVE_TAB:{module:a.X.MOLBIO,action:"updated_bulk_assembly_construct_modal_active_tab",actionCategory:a.J.READ},OPENED_BULK_ASSEMBLY_FINALIZATION_MODAL:{module:a.X.MOLBIO,action:"opened_bulk_assembly_finalization_modal",actionCategory:a.J.READ},SUBMITTED_BULK_ASSEMBLY_FINALIZATION_MODAL:{module:a.X.MOLBIO,action:"submitted_bulk_assembly_finalization_modal",actionCategory:a.J.WRITE},COMPLETED_BULK_ASSEMBLY_FINALIZATION:{module:a.X.MOLBIO,action:"completed_bulk_assembly_finalization",actionCategory:a.J.WRITE},CLICKED_ALPHAFOLD_PROVIDE_FEEDBACK:{module:a.X.MOLBIO,action:"alphafold_click_provide_feedback",actionCategory:a.J.WRITE},CLICKED_ALPHAFOLD_REDO_RUN:{module:a.X.MOLBIO,action:"alphafold_click_redo_run",actionCategory:a.J.WRITE},CLICKED_ALPHAFOLD_CONFIRM_REDO_RUN:{module:a.X.MOLBIO,action:"alphafold_confirm_redo_run",actionCategory:a.J.WRITE},DOWNLOADED_ALPHAFOLD_STRUCTURE:{module:a.X.MOLBIO,action:"alphafold_download_structure",actionCategory:a.J.READ},REQUESTED_ALPHAFOLD_RUN:{module:a.X.MOLBIO,action:"alphafold_request_run",actionCategory:a.J.WRITE},INTERACTED_ALPHAFOLD_VIEWER:{module:a.X.MOLBIO,action:"alphafold_viewer_interaction",actionCategory:a.J.READ},SIGNUP_ALPHAFOLD_WAITLIST:{module:a.X.MOLBIO,action:"alphafold_sign_up_for_waitlist",actionCategory:a.J.WRITE},VIEWED_VISUAL_HISTORY_TAB:{module:a.X.MOLBIO,action:"viewed_visual_history_tab",actionCategory:a.J.READ},CLICKED_VISUAL_HISTORY_TAB:{module:a.X.MOLBIO,action:"clicked_visual_history_tab",actionCategory:a.J.READ},VIEWED_ASSEMBLY_HISTORY_TAB:{module:a.X.MOLBIO,action:"viewed_assembly_history_tab",actionCategory:a.J.READ},CLICKED_ASSEMBLY_HISTORY_TAB:{module:a.X.MOLBIO,action:"clicked_assembly_history_tab",actionCategory:a.J.READ},UPDATED_BULK_ASSEMBLY_VALIDATION:{module:a.X.MOLBIO,action:"updated_bulk_assembly_validation",actionCategory:a.J.READ}}},939190:(e,t,n)=>{n.d(t,{P:()=>i})
var a=n(786628)
const i={CREATED_SAVED_SEARCH:{module:a.X.NAVIGATION,action:"created_saved_search",actionCategory:a.J.WRITE},DELETED_SAVED_SEARCH:{module:a.X.NAVIGATION,action:"deleted_saved_search",actionCategory:a.J.WRITE},EDITED_SAVED_SEARCH:{module:a.X.NAVIGATION,action:"edited_saved_search",actionCategory:a.J.WRITE},OPENED_SAVED_SEARCH:{module:a.X.NAVIGATION,action:"opened_saved_search",actionCategory:a.J.READ},INSERTED_SAVED_SEARCH:{module:a.X.NAVIGATION,action:"inserted_saved_search",actionCategory:a.J.WRITE},APPLIED_SORTS:{module:a.X.NAVIGATION,action:"applied_sorts",actionCategory:a.J.READ},ADDED_SORT:{module:a.X.NAVIGATION,action:"added_sort",actionCategory:a.J.READ},REMOVED_SORT:{module:a.X.NAVIGATION,action:"removed_sort",actionCategory:a.J.READ},CLICKED_HELP_BUTTON:{module:a.X.NAVIGATION,action:"clicked_help_button",actionCategory:a.J.READ},INITIALIZED_APP:{module:a.X.NAVIGATION,action:"initialized_app",actionCategory:a.J.READ},OPENED_RELEVANT_OBJECT:{module:a.X.NAVIGATION,action:"opened_relevant_object",actionCategory:a.J.READ},OPENED_RELEVANT_TEMPLATES_TAB:{module:a.X.NAVIGATION,action:"opened_relevant_templates_tab",actionCategory:a.J.READ},OPENED_RELEVANT_TEMPLATES_ADMIN_HELP:{module:a.X.NAVIGATION,action:"opened_relevant_templates_admin_help",actionCategory:a.J.READ}}},729570:(e,t,n)=>{n.d(t,{c:()=>i})
var a=n(786628)
const i={CREATED_PROCEDURE:{module:a.X.PROCEDURES,action:"created_procedure",actionCategory:a.J.WRITE},UPDATED_PROCEDURE:{module:a.X.PROCEDURES,action:"updated_procedure",actionCategory:a.J.WRITE},CLICKED_SAVE_PROCEDURE:{module:a.X.PROCEDURES,action:"clicked_save_procedure",actionCategory:a.J.READ},CLICKED_EXIT_PROCEDURE:{module:a.X.PROCEDURES,action:"clicked_exit_procedure",actionCategory:a.J.READ},TOGGLED_PROCEDURE_VIEW:{module:a.X.PROCEDURES,action:"toggled_procedure_view",actionCategory:a.J.READ},REORDERED_PROCEDURE_METHODS:{module:a.X.PROCEDURES,action:"reordered_procedure_methods",actionCategory:a.J.WRITE},CREATED_METHOD:{module:a.X.PROCEDURES,action:"created_method",actionCategory:a.J.WRITE},UPDATED_METHOD:{module:a.X.PROCEDURES,action:"updated_method",actionCategory:a.J.WRITE},DELETED_METHOD:{module:a.X.PROCEDURES,action:"delted_method",actionCategory:a.J.WRITE},CLICKED_START_EXPERIMENT:{module:a.X.PROCEDURES,action:"clicked_start_experiment",actionCategory:a.J.READ}}},665633:(e,t,n)=>{n.d(t,{D:()=>i})
var a=n(786628)
const i={FILE_LINKED_TO_REGISTERED_FILE:{module:a.X.REGISTRY,action:"field_linked_to_registered_file",actionCategory:a.J.READ},FILE_LINKED_TO_UNREGISTERED_FILE:{module:a.X.REGISTRY,action:"field_linked_to_unregistered_file",actionCategory:a.J.READ},ENTRY_LINKED_TO_BATCH:{module:a.X.REGISTRY,action:"entry_linked_to_batch",actionCategory:a.J.READ},ENTRY_LINKED_TO_FILE:{module:a.X.REGISTRY,action:"entry_linked_to_registered_file",actionCategory:a.J.READ},OPENED_BATCH:{module:a.X.REGISTRY,action:"opened_batch",actionCategory:a.J.READ},OPENED_REGISTERED_FILE:{module:a.X.REGISTRY,action:"opened_registered_file",actionCategory:a.J.READ},SEARCHED_FILES:{module:a.X.REGISTRY,action:"searched_registered_files",actionCategory:a.J.READ},ARCHIVED_BATCHES:{module:a.X.REGISTRY,action:"archived_batches",actionCategory:a.J.WRITE},COPIED_FILES:{module:a.X.REGISTRY,action:"copied_registered_file",actionCategory:a.J.WRITE},CREATED_BATCHES:{module:a.X.REGISTRY,action:"created_batches",actionCategory:a.J.WRITE},CREATED_FILES_IN_REGISTRY_MODAL:{module:a.X.REGISTRY,action:"created_files_in_registry_modal",actionCategory:a.J.WRITE},REGISTERED_FILES:{module:a.X.REGISTRY,action:"register_files",actionCategory:a.J.WRITE},SUBMITTED_BIOENTITY_SPREADSHEET_IMPORT_MODAL:{module:a.X.REGISTRY,action:"submitted_bioentity_spreadsheet_import_modal",actionCategory:a.J.WRITE},SUBMITTED_AUTOFILL_SEQUENCE_FEATURE:{module:a.X.REGISTRY,action:"submitted_autofill_sequence_feature",actionCategory:a.J.WRITE},AUTOFILL_ACTION_COMPLETED:{module:a.X.REGISTRY,action:"successfully_autofilled_sequence_feature",actionCategory:a.J.WRITE},UPDATED_BATCHES:{module:a.X.REGISTRY,action:"updated_batches",actionCategory:a.J.WRITE},UPDATED_FILES:{module:a.X.REGISTRY,action:"updated_registered_files",actionCategory:a.J.WRITE}}},36996:(e,t,n)=>{n.d(t,{i:()=>i})
var a=n(786628)
const i={OPENED_REQUESTS_DASHBOARD:{module:a.X.REQUESTS,action:"opened_requests_dashboard",actionCategory:a.J.READ},OPENED_REQUEST_DETAILS:{module:a.X.REQUESTS,action:"opened_request_details",actionCategory:a.J.READ},OPENED_COPY_REQUEST_MODAL:{module:a.X.REQUESTS,action:"opened_copy_request_modal",actionCategory:a.J.READ},CREATED_REQUEST:{module:a.X.REQUESTS,action:"created_request",actionCategory:a.J.WRITE},UPDATED_REQUEST:{module:a.X.REQUESTS,action:"updated_request",actionCategory:a.J.WRITE},ASSIGNED_REQUEST:{module:a.X.REQUESTS,action:"assigned_request",actionCategory:a.J.WRITE},EXECUTED_REQUEST:{module:a.X.REQUESTS,action:"executed_request",actionCategory:a.J.WRITE},COMPLETED_REQUEST:{module:a.X.REQUESTS,action:"completed_request",actionCategory:a.J.WRITE},CREATED_TASK:{module:a.X.REQUESTS,action:"created_task",actionCategory:a.J.WRITE},UPDATED_TASK:{module:a.X.REQUESTS,action:"updated_task",actionCategory:a.J.WRITE},EXECUTED_TASK:{module:a.X.REQUESTS,action:"executed_task",actionCategory:a.J.WRITE},COMPLETED_TASK:{module:a.X.REQUESTS,action:"completed_task",actionCategory:a.J.WRITE},DELETED_TASK:{module:a.X.REQUESTS,action:"deleted_task",actionCategory:a.J.WRITE},ADDED_SAMPLE_GROUP:{module:a.X.REQUESTS,action:"added_sample_group",actionCategory:a.J.WRITE},DELETED_SAMPLE_GROUP:{module:a.X.REQUESTS,action:"deleted_sample_group",actionCategory:a.J.WRITE},IMPORTED_SAMPLE_GROUPS:{module:a.X.REQUESTS,action:"imported_sample_groups",actionCategory:a.J.WRITE},CREATED_TASK_SCHEMA:{module:a.X.REQUESTS,action:"created_task_schema",actionCategory:a.J.WRITE},UPDATED_TASK_SCHEMA:{module:a.X.REQUESTS,action:"updated_task_schema",actionCategory:a.J.WRITE},DELETED_FULFILLMENTS:{module:a.X.REQUESTS,action:"deleted_fulfillments",actionCategory:a.J.WRITE}}},956995:(e,t,n)=>{n.d(t,{k:()=>i})
var a=n(786628)
const i={CHANGED_RUNS_INBOX_ARCHIVE_FILTER:{module:a.X.RESULTS,action:"changed_runs_inbox_archive_filter",actionCategory:a.J.READ},CHANGED_RUNS_INBOX_IN_ENTRY_FILTER:{module:a.X.RESULTS,action:"changed_runs_inbox_in_entry_filter",actionCategory:a.J.READ},DOWNLOADED_DATA_TABLE_AS_CSV:{module:a.X.RESULTS,action:"downloaded_data_table_as_csv",actionCategory:a.J.READ},EXPORTED_BIOENTITY_RESULTS:{module:a.X.RESULTS,action:"exported_bioentity_results",actionCategory:a.J.READ},EXPORTED_REQUEST_RESULTS:{module:a.X.RESULTS,action:"exported_request_results",actionCategory:a.J.READ},READ_ENTRY_WITH_ASSAY_DATA:{module:a.X.RESULTS,action:"read_entry_with_assay_data",actionCategory:a.J.READ},EXPORTED_RUN_RESULTS:{module:a.X.RESULTS,action:"exported_run_results",actionCategory:a.J.READ},HOVERED_VALIDATION_TRIANGLE:{module:a.X.RESULTS,action:"hovered_validation_triangle",actionCategory:a.J.READ},OPENED_CONFIGURE_RESULT_TABLE_MODAL:{module:a.X.RESULTS,action:"opened_configure_result_table_modal",actionCategory:a.J.READ},OPENED_RUN_INBOX:{module:a.X.RESULTS,action:"opened_run_inbox",actionCategory:a.J.READ},OPENED_VALIDATION_HISTORY_MODAL:{module:a.X.RESULTS,action:"opened_validation_history_modal",actionCategory:a.J.READ},ARCHIVED_AUTOMATION_OUTPUT_FILE:{module:a.X.RESULTS,action:"archived_automation_output_file",actionCategory:a.J.WRITE},ARCHIVED_RUN_FROM_INBOX:{module:a.X.RESULTS,action:"archived_run_from_inbox",actionCategory:a.J.WRITE},ATTACHED_ASSAY_DATA_IN_ENTRY:{module:a.X.RESULTS,action:"attached_assay_data_in_entry",actionCategory:a.J.WRITE},ARCHIVED_ENTRY_WITH_RESULTS:{module:a.X.RESULTS,action:"archived_entry_with_results",actionCategory:a.J.WRITE},CREATED_ASSAY_SCHEMA:{module:a.X.RESULTS,action:"created_assay_schema",actionCategory:a.J.WRITE},CREATED_RUN:{module:a.X.RESULTS,action:"created_run",actionCategory:a.J.WRITE},COMPUTED_SNAPSHOT_FIELD:{module:a.X.RESULTS,action:"computed_snapshot_field",actionCategory:a.J.WRITE},FINISHED_TRANSFORM_CONFIGURATION:{module:a.X.RESULTS,action:"finished_transform_configuration",actionCategory:a.J.WRITE},INSERTED_DATA_TABLE:{module:a.X.RESULTS,action:"inserted_data_table",actionCategory:a.J.WRITE},INSERTED_RUN_FROM_INBOX:{module:a.X.RESULTS,action:"inserted_run_from_inbox",actionCategory:a.J.WRITE},PUBLISHED_DATA_TABLE_CONFIG:{module:a.X.RESULTS,action:"published_data_table_config",actionCategory:a.J.WRITE},UPDATED_ASSAY_SCHEMA:{module:a.X.RESULTS,action:"updated_assay_schema",actionCategory:a.J.WRITE},UPDATED_DATA_TABLE:{module:a.X.RESULTS,action:"updated_data_table",actionCategory:a.J.WRITE},UPDATED_INPUT_FILE_CONFIG:{module:a.X.RESULTS,action:"updated_input_file_config",actionCategory:a.J.WRITE},UPDATED_OUTPUT_FILE_CONFIG:{module:a.X.RESULTS,action:"updated_output_file_config",actionCategory:a.J.WRITE},UPDATED_RUN:{module:a.X.RESULTS,action:"updated_run",actionCategory:a.J.WRITE},UPLOADED_RUN_RESULTS:{module:a.X.RESULTS,action:"uploaded_run_results",actionCategory:a.J.WRITE},SET_CELL_VALIDATION:{module:a.X.RESULTS,action:"set_cell_validation",actionCategory:a.J.WRITE},SET_ROW_VALIDATION:{module:a.X.RESULTS,action:"set_row_validation",actionCategory:a.J.WRITE},SET_RUN_VALIDATION:{module:a.X.RESULTS,action:"set_run_validation",actionCategory:a.J.WRITE},STARTED_AUTOMATION_INPUT_FILE:{module:a.X.RESULTS,action:"started_automation_input_file",actionCategory:a.J.WRITE},STARTED_AUTOMATION_OUTPUT_FILE:{module:a.X.RESULTS,action:"started_automation_output_file",actionCategory:a.J.WRITE},STARTED_TRANSFORM_CONFIGURATION:{module:a.X.RESULTS,action:"started_transform_configuration",actionCategory:a.J.WRITE},UNARCHIVED_AUTOMATION_OUTPUT_FILE:{module:a.X.RESULTS,action:"unarchived_automation_output_file",actionCategory:a.J.WRITE},UNARCHIVED_RUN_FROM_INBOX:{module:a.X.RESULTS,action:"unarchived_run_from_inbox",actionCategory:a.J.WRITE},SET_CELL_VALIDATION_CAPILLARY:{module:a.X.RESULTS,action:"set_cell_validation_capillary",actionCategory:a.J.WRITE},SET_RUN_VALIDATION_CAPILLARY:{module:a.X.RESULTS,action:"set_run_validation_capillary",actionCategory:a.J.WRITE}}},864883:(e,t,n)=>{n.d(t,{x:()=>i})
var a=n(786628)
const i={CREATED_REVIEW_PROCESS:{module:a.X.REVIEWS,action:"created_review_process",actionCategory:a.J.WRITE},UPDATED_REVIEW_PROCESS:{module:a.X.REVIEWS,action:"updated_review_process",actionCategory:a.J.WRITE},SET_REVIEW_PROCESS:{module:a.X.REVIEWS,action:"set_review_process",actionCategory:a.J.WRITE},OPENED_MODAL_SEND_FOR_REVIEW:{module:a.X.REVIEWS,action:"opened_modal_send_for_review",actionCategory:a.J.WRITE},BEGAN_REVIEW_PROCESS_EXECUTION:{module:a.X.REVIEWS,action:"began_review_process",actionCategory:a.J.WRITE},COMPLETED_REVIEW_PROCESS_EXECUTION:{module:a.X.REVIEWS,action:"completed_review_process",actionCategory:a.J.WRITE},REVERTED_REVIEW_PROCESS_EXECUTION:{module:a.X.REVIEWS,action:"reverted_review_process",actionCategory:a.J.WRITE}}},304241:(e,t,n)=>{n.d(t,{y:()=>s})
var a,i=n(786628)
!function(e){e.CLICKED_INVENTORY_SHORTCUT="CLICKED_INVENTORY_SHORTCUT"
e.OPENED_STORABLE="OPENED_STORABLE"
e.SEARCHED_STORABLES="SEARCHED_STORABLES"
e.ARCHIVED_STORABLES="ARCHIVED_STORABLES"
e.CREATED_STORABLES="CREATED_STORABLES"
e.MOVED_STORABLES="MOVED_STORABLES"
e.TRANSFERRED_SAMPLES="TRANSFERRED_SAMPLES"
e.UPDATED_CICO_STATUS="UPDATED_CICO_STATUS"
e.UPDATED_STORABLES="UPDATED_STORABLES"
e.LABEL_PRINTED="LABEL_PRINTED"
e.INITIATED_LABEL_PRINT="INITIATED_LABEL_PRINT"}(a||(a={}))
const s={CLICKED_INVENTORY_SHORTCUT:{module:i.X.SAMPLES,action:"clicked_inventory_shortcut",actionCategory:i.J.READ},OPENED_STORABLE:{module:i.X.SAMPLES,action:"opened_storable",actionCategory:i.J.READ},SEARCHED_STORABLES:{module:i.X.SAMPLES,action:"searched_storables",actionCategory:i.J.READ},ARCHIVED_STORABLES:{module:i.X.SAMPLES,action:"archived_storables",actionCategory:i.J.WRITE},CREATED_STORABLES:{module:i.X.SAMPLES,action:"created_storables",actionCategory:i.J.WRITE},MOVED_STORABLES:{module:i.X.SAMPLES,action:"moved_storables",actionCategory:i.J.WRITE},TRANSFERRED_SAMPLES:{module:i.X.SAMPLES,action:"transferred_samples",actionCategory:i.J.WRITE},UPDATED_CICO_STATUS:{module:i.X.SAMPLES,action:"updated_cico_status",actionCategory:i.J.WRITE},UPDATED_STORABLES:{module:i.X.SAMPLES,action:"updated_storables",actionCategory:i.J.WRITE},LABEL_PRINTED:{module:i.X.SAMPLES,action:"label_printed",actionCategory:i.J.READ},INITIATED_LABEL_PRINT:{module:i.X.SAMPLES,action:"initiated_label_print",actionCategory:i.J.READ}}},647146:(e,t,n)=>{n.d(t,{x:()=>i})
var a=n(786628)
const i={FILTERED_BY_COMPUTED_FIELD_OVER_RESULTS:{module:a.X.SCHEMAS,action:"filtered_by_computed_field_over_results",actionCategory:a.J.READ},INTEGRATION_FIELD_BLOCKED_REVIEW:{module:a.X.SCHEMAS,action:"integration_field_blocked_review",actionCategory:a.J.READ},CLICKED_EDIT_SCHEMA_AS_JSON:{module:a.X.SCHEMAS,action:"clicked_edit_schema_as_json",actionCategory:a.J.READ},CLICKED_EDIT_SCHEMA_VIA_UI:{module:a.X.SCHEMAS,action:"clicked_edit_schema_via_ui",actionCategory:a.J.READ},CREATED_COMPUTED_FIELD_OVER_RESULTS:{module:a.X.SCHEMAS,action:"created_computed_field_over_results",actionCategory:a.J.WRITE},CREATED_RESULT_SCHEMA_VIA_SPREADSHEET:{module:a.X.SCHEMAS,action:"created_result_schema_via_spreadsheet",actionCategory:a.J.WRITE},CREATED_SNAPSHOT_FIELD_CONFIGURATION:{module:a.X.SCHEMAS,action:"created_snapshot_field_configuration",actionCategory:a.J.WRITE},CREATED_DROPDOWN_VIA_SPREADSHEET:{module:a.X.SCHEMAS,action:"created_dropdown_via_spreadsheet",actionCategory:a.J.WRITE},OVERRODE_INTEGRATION_TAG_VALUE:{module:a.X.SCHEMAS,action:"overrode_integration_tag_value",actionCategory:a.J.WRITE},SET_LEGAL_TEXT_SELECTOR:{module:a.X.SCHEMAS,action:"set_legal_text_selector",actionCategory:a.J.WRITE},SET_LEGAL_TEXT_VALUE:{module:a.X.SCHEMAS,action:"set_legal_text_value",actionCategory:a.J.WRITE},UPDATED_SNAPSHOT_FIELD_CONFIGURATION:{module:a.X.SCHEMAS,action:"updated_snapshot_field_configuration",actionCategory:a.J.WRITE},USED_RESULT_SCHEMA_SPREADSHEET_IMPORTER:{module:a.X.SCHEMAS,action:"used_result_schema_spreadsheet_importer",actionCategory:a.J.WRITE}}},626103:(e,t,n)=>{n.d(t,{Hb:()=>i,XA:()=>s,ou:()=>r})
var a=n(786628)
const i={CLICKED_SEARCH_RESULT:{module:a.X.SIGHTGLASS,action:"clicked_search_result",actionCategory:a.J.READ}},s={SUBMITTED_BLAST_SEARCH:{module:a.X.SIGHTGLASS,action:"submitted_blast_search",actionCategory:a.J.READ}},r={[a.J.READ]:{module:a.X.SIGHTGLASS,action:"initiated_bulk_action_on_search_results",actionCategory:a.J.READ},[a.J.WRITE]:{module:a.X.SIGHTGLASS,action:"initiated_bulk_action_on_search_results",actionCategory:a.J.WRITE}}},930630:(e,t,n)=>{n.d(t,{Wk:()=>s,Zm:()=>i,t1:()=>r})
var a=n(786628)
const i={ARCHIVED_TASK_GROUPS:{module:a.X.WORKFLOWS,action:"archived_task_groups",actionCategory:a.J.WRITE},ARCHIVED_TASKS:{module:a.X.WORKFLOWS,action:"archived_tasks",actionCategory:a.J.WRITE},ARCHIVED_OUTPUTS:{module:a.X.WORKFLOWS,action:"archived_outputs",actionCategory:a.J.WRITE},ARCHIVED_WORKFLOW_SCHEMAS:{module:a.X.WORKFLOWS,action:"archived_workflow_schemas",actionCategory:a.J.WRITE},CREATED_TASK_GROUP:{module:a.X.WORKFLOWS,action:"created_task_group",actionCategory:a.J.WRITE},CREATED_TASK:{module:a.X.WORKFLOWS,action:"created_task",actionCategory:a.J.WRITE},CREATED_TASK_SCHEMA_FIELD:{module:a.X.WORKFLOWS,action:"created_task_schema_field",actionCategory:a.J.WRITE},CREATED_OUTPUT:{module:a.X.WORKFLOWS,action:"created_output",actionCategory:a.J.WRITE},UPDATED_CREATION_FOLDER:{module:a.X.WORKFLOWS,action:"updated_creation_folder",actionCategory:a.J.WRITE},UPDATED_TASK_GROUP_NAME:{module:a.X.WORKFLOWS,action:"updated_task_group_name",actionCategory:a.J.WRITE},UPDATED_TASK_GROUP_WATCHERS:{module:a.X.WORKFLOWS,action:"updated_task_group_watchers",actionCategory:a.J.WRITE},UPDATED_TASK_STATUS:{module:a.X.WORKFLOWS,action:"updated_task_status",actionCategory:a.J.WRITE},UPDATED_TASK_EXECUTION_FLOWCHART:{module:a.X.WORKFLOWS,action:"updated_task_execution_flowchart",actionCategory:a.J.WRITE},UPDATED_TASK_ASSIGNEE:{module:a.X.WORKFLOWS,action:"updated_task_assignee",actionCategory:a.J.WRITE},UPDATED_TASK_RESPONSIBLE_PARTIES:{module:a.X.WORKFLOWS,action:"updated_task_responsible_parties",actionCategory:a.J.WRITE},UPDATED_TASK_SCHEDULED_DATE:{module:a.X.WORKFLOWS,action:"updated_task_scheduled_date",actionCategory:a.J.WRITE},UPDATED_TASK_SCHEMA_FIELD:{module:a.X.WORKFLOWS,action:"updated_task_schema_field",actionCategory:a.J.WRITE},UPDATED_OUTPUT_SCHEMA_FIELD:{module:a.X.WORKFLOWS,action:"updated_output_schema_field",actionCategory:a.J.WRITE},UPDATED_OUTPUT_TASK_FIELD:{module:a.X.WORKFLOWS,action:"updated_output_task_field",actionCategory:a.J.WRITE},EXECUTED_TASK_INTO_ENTRY:{module:a.X.WORKFLOWS,action:"executed_task_into_entry",actionCategory:a.J.WRITE},UNDID_TASK_EXECUTION:{module:a.X.WORKFLOWS,action:"undid_task_execution",actionCategory:a.J.WRITE},UPDATED_EXECUTION_ENTRY_NAME:{module:a.X.WORKFLOWS,action:"updated_execution_entry_name",actionCategory:a.J.WRITE},UPDATED_EXECUTION_ENTRY_DATE:{module:a.X.WORKFLOWS,action:"updated_execution_entry_date",actionCategory:a.J.WRITE},UPDATED_EXECUTION_ENTRY_FOLDER:{module:a.X.WORKFLOWS,action:"updated_execution_entry_folder",actionCategory:a.J.WRITE},LOADED_TASKS_INTO_EXECUTION_ENTRY:{module:a.X.WORKFLOWS,action:"loaded_tasks_into_execution_entry",actionCategory:a.J.WRITE},EXECUTED_TASK_INTO_MODAL:{module:a.X.WORKFLOWS,action:"executed_task_into_modal",actionCategory:a.J.WRITE},LOADED_TASKS_INTO_EXECUTION_MODAL:{module:a.X.WORKFLOWS,action:"loaded_tasks_into_execution_modal",actionCategory:a.J.WRITE},COMPLETED_TASK_MODAL_EXECUTION:{module:a.X.WORKFLOWS,action:"completed_task_modal_execution",actionCategory:a.J.WRITE},RAN_TASK_FINDER:{module:a.X.WORKFLOWS,action:"ran_task_finder",actionCategory:a.J.READ},RAN_TASK_FINDER_MULTIPLE_FOUND:{module:a.X.WORKFLOWS,action:"ran_task_finder_multiple_found",actionCategory:a.J.READ},RAN_TASK_FINDER_NONE_FOUND:{module:a.X.WORKFLOWS,action:"ran_task_finder_none_found",actionCategory:a.J.READ},RAN_TASK_FINDER_ERROR:{module:a.X.WORKFLOWS,action:"ran_task_finder_error",actionCategory:a.J.READ},FAILED_AUTOMATED_MAPPING:{module:a.X.WORKFLOWS,action:"failed_automated_mapping",actionCategory:a.J.WRITE},CORRECTED_FAILED_AUTOMATED_MAPPING:{module:a.X.WORKFLOWS,action:"corrected_failed_automated_mapping",actionCategory:a.J.WRITE},ADJUSTED_CANVAS_WORKSPACE:{module:a.X.WORKFLOWS,action:"adjusted_canvas_workspace",actionCategory:a.J.READ},CLICKED_FLOWCHART_GRAPH_NODE:{module:a.X.WORKFLOWS,action:"clicked_flowchart_graph_node",actionCategory:a.J.READ},CLICKED_FLOWCHART_CONFIG_TAB:{module:a.X.WORKFLOWS,action:"clicked_flowchart_config_tab",actionCategory:a.J.READ},CLOSED_FLOWCHART_CONFIG_EDITOR:{module:a.X.WORKFLOWS,action:"closed_flowchart_config_editor",actionCategory:a.J.READ},OPENED_FLOWCHART_CONFIG_EDITOR:{module:a.X.WORKFLOWS,action:"opened_flowchart_config_editor",actionCategory:a.J.READ},SUBMITTED_FLOWCHART_CONFIG_EDITOR:{module:a.X.WORKFLOWS,action:"submitted_flowchart_config_editor",actionCategory:a.J.WRITE},WARNING_CLOSED_FLOWCHART_CONFIG_ITEM_DELETION:{module:a.X.WORKFLOWS,action:"warning_closed_flowchart_config_item_deletion",actionCategory:a.J.READ},WARNING_OVERRIDDEN_FLOWCHART_CONFIG_ITEM_DELETION:{module:a.X.WORKFLOWS,action:"warning_overridden_flowchart_config_item_deletion",actionCategory:a.J.WRITE},WARNING_SHOWN_FLOWCHART_CONFIG_ITEM_DELETION:{module:a.X.WORKFLOWS,action:"warning_shown_flowchart_config_item_deletion",actionCategory:a.J.READ},MODIFIED_ITEM_IN_CANVAS:{module:a.X.WORKFLOWS,action:"modified_item_in_canvas",actionCategory:a.J.WRITE},CREATED_ROUTER_CONFIGURATION_IN_CANVAS:{module:a.X.WORKFLOWS,action:"created_router_configuration_in_canvas",actionCategory:a.J.WRITE},DELETED_ROUTER_CONFIGURATION_IN_CANVAS:{module:a.X.WORKFLOWS,action:"deleted_router_configuration",actionCategory:a.J.WRITE},UPDATED_ROUTER_CONFIGURATION_IN_CANVAS:{module:a.X.WORKFLOWS,action:"updated_router_configuration",actionCategory:a.J.WRITE},CREATED_ROUTER_CONFIGURATION_IN_DB:{module:a.X.WORKFLOWS,action:"created_router_configuration_in_db",actionCategory:a.J.WRITE},CREATED_ROUTER_RULE_IN_DB:{module:a.X.WORKFLOWS,action:"created_router_rule_in_db",actionCategory:a.J.WRITE},ERROR_MESSAGE_SHOWN_ROUTER_CONFIGURATION:{module:a.X.WORKFLOWS,action:"error_message_shown_router_configuration",actionCategory:a.J.READ},CREATED_TASK_SCHEMA:{module:a.X.WORKFLOWS,action:"created_task_schema",actionCategory:a.J.WRITE},UPDATED_TASK_SCHEMA:{module:a.X.WORKFLOWS,action:"updated_task_schema",actionCategory:a.J.WRITE},ADJUSTED_VIEW_TASK_GROUP_INSTRUCTIONS:{module:a.X.WORKFLOWS,action:"adjusted_view_task_group_instructions",actionCategory:a.J.READ},CLICKED_EXECUTION_ENTRY_CHIP:{module:a.X.WORKFLOWS,action:"clicked_execution_entry_chip",actionCategory:a.J.READ},CLICKED_TASK_OR_OUTPUT_CHIP:{module:a.X.WORKFLOWS,action:"clicked_task_or_output_chip",actionCategory:a.J.READ},CLICKED_TABLE_EXPAND:{module:a.X.WORKFLOWS,action:"clicked_table_expand",actionCategory:a.J.READ},CLICKED_TABLE_COLLAPSE:{module:a.X.WORKFLOWS,action:"clicked_table_collapse",actionCategory:a.J.READ},CLICKED_TASK_TABLE_EDIT:{module:a.X.WORKFLOWS,action:"clicked_task_table_edit",actionCategory:a.J.READ},CLICKED_OUTPUT_TABLE_EDIT:{module:a.X.WORKFLOWS,action:"clicked_output_table_edit",actionCategory:a.J.READ},CLICKED_TASK_TABLE_SUBMIT:{module:a.X.WORKFLOWS,action:"clicked_task_table_submit",actionCategory:a.J.READ},CLICKED_OUTPUT_TABLE_SUBMIT:{module:a.X.WORKFLOWS,action:"clicked_output_table_submit",actionCategory:a.J.READ},CLICKED_RELEVANT_ITEM:{module:a.X.WORKFLOWS,action:"clicked_relevant_item",actionCategory:a.J.READ},CLONED_TASK:{module:a.X.WORKFLOWS,action:"cloned_task",actionCategory:a.J.READ},OPENED_WORKFLOW_DASHBOARD:{module:a.X.WORKFLOWS,action:"opened_workflow_dashboard",actionCategory:a.J.READ},OPENED_TASK_GROUP_DETAILS:{module:a.X.WORKFLOWS,action:"opened_task_group_details",actionCategory:a.J.READ},SENT_NOTIFICATION:{module:a.X.WORKFLOWS,action:"sent_notification",actionCategory:a.J.READ},RESET_ENTRY_VERSION_ATTEMPT:{module:a.X.WORKFLOWS,action:"reset_entry_version_attempt",actionCategory:a.J.WRITE},OVERRODE_DEFAULT_STATUS_OUTPUT_CREATION_MODAL:{module:a.X.WORKFLOWS,action:"overrode_default_status_output_creation_modal",actionCategory:a.J.READ},SUBMITTED_DEFAULT_STATUS_OUTPUT_CREATION_MODAL:{module:a.X.WORKFLOWS,action:"submitted_default_status_output_creation_modal",actionCategory:a.J.WRITE},CREATED_OUTPUT_TERMINAL_TASK_ATTEMPT:{module:a.X.WORKFLOWS,action:"created_output_terminal_task_attempt",actionCategory:a.J.READ},OPENED_TASK_FROM_CALENDAR_ITEM_MODAL:{module:a.X.WORKFLOWS,action:"opened_task_from_calendar_item_modal",actionCategory:a.J.READ},CREATED_FLOWCHART_NODE_IN_DATABASE:{module:a.X.WORKFLOWS,action:"created_flowchart_node_in_database",actionCategory:a.J.WRITE},CREATED_OR_UPDATED_FLOWCHART:{module:a.X.WORKFLOWS,action:"created_or_updated_flowchart",actionCategory:a.J.WRITE},ADJUSTED_VIEW_TASK_CREATION:{module:a.X.WORKFLOWS,action:"adjusted_view_task_creation",actionCategory:a.J.READ}},s="create_process_modal",r="update_flowchart_modal"},882211:(e,t,n)=>{n.d(t,{p:()=>i})
var a=n(786628)
const i={FILLED_FROM_WORKLIST:{module:a.X.WORKLISTS,action:"filled_from_worklist",actionCategory:a.J.READ},OPENED_SETTINGS_MODAL:{module:a.X.WORKLISTS,action:"opened_settings_modal",actionCategory:a.J.READ}}}}])

//# sourceMappingURL=467.000472be3a2708c095d55f748cba13bd.js.map