"use strict";(self.webpackChunkaurelia=self.webpackChunkaurelia||[]).push([[505],{221109:(e,t,n)=>{n.d(t,{E9:()=>exportConfigMigrationDiff,Md:()=>exportConfigMigration,Xu:()=>listConfigMigrationModels,aN:()=>getConfigMigrationURL,ei:()=>planConfigMigration,hG:()=>importConfigMigration,uv:()=>validateConfigMigration})
var a=n(64558),o=n(8747),i=n(441541)
const r=18e5
function listConfigMigrationModels(e){return o.s0({url:"/1/api/config-migration:list-models",data:{organizationId:e}})}function exportConfigMigration(e,t){return o.s0({url:"/1/api/config-migration:export",data:{organizationId:e,apiIdsToExport:t}},r)}function planConfigMigration(e,t){return o.s0({url:"/1/api/config-migration:plan",data:{organizationId:e,importUrl:t}},r)}function exportConfigMigrationDiff(e,t){return o.s0({url:"/1/api/config-migration:diff",data:{organizationId:e,importUrl:t}},r)}function validateConfigMigration(e,t,n){return o.s0({url:"/1/api/config-migration:validate",data:{organizationId:e,importUrl:t,actionsByObjectId:(0,a.Xc)(n,i.oz)}},r)}function importConfigMigration(e,t,n){return o.s0({url:"/1/api/config-migration:import",data:{organizationId:e,importUrl:t,actionsByObjectId:(0,a.Xc)(n,i.oz)}},r)}function getConfigMigrationURL(){return"/config-migration"}},255418:(e,t,n)=>{n.d(t,{LP:()=>o,PI:()=>i,_K:()=>r,kB:()=>l,pm:()=>a,xG:()=>c})
const a="https://docs.google.com/forms/d/e/1FAIpQLSc0Br5hGtLeoVnOD3XA1ggu9Xx4zbtzMI5TTbUIbIcCD0itTA/viewform?usp=sf_link"
var o,i,r,l
!function(e){e.EntitySchema="EntitySchema"
e.Dropdown="Dropdown"
e.RunSchema="RunSchema"
e.ResultSchema="ResultSchema"
e.BatchSchema="BatchSchema"
e.BoxSchema="BoxSchema"
e.ContainerSchema="ContainerSchema"
e.LocationSchema="LocationSchema"
e.PlateSchema="PlateSchema"
e.TemplateCollection="TemplateCollection"
e.Template="Template"
e.Subtemplate="Subtemplate"
e.StudySchema="StudySchema"
e.ProcessTaskSchema="ProcessTaskSchema"
e.ProcessOutputSchema="ProcessOutputSchema"
e.ProcessFlowchartConfigVersion="ProcessFlowchartConfigVersion"}(o||(o={}))
!function(e){e.SUCCESS="SUCCESS"
e.FAILURE="FAILURE"}(i||(i={}))
!function(e){e.REQUIRED="is_required"
e.ARCHIVED="archive_reason"}(r||(r={}))
!function(e){e.REQUIRED="REQUIRED"
e.NOT_REQUIRED="NOT_REQUIRED"
e.ARCHIVED="ARCHIVED"
e.NOT_ARCHIVED="NOT_ARCHIVED"
e.DROPDOWN_UPDATE="DROPDOWN_UPDATE"}(l||(l={}))
const c={EntitySchema:"Entity schema",Dropdown:"Dropdown",RunSchema:"Run schema",ResultSchema:"Result schema",BatchSchema:"Batch schema",BoxSchema:"Box schema",ContainerSchema:"Container schema",LocationSchema:"Location schema",PlateSchema:"Plate schema",TemplateCollection:"Template collection",Template:"Template",Subtemplate:"Subtemplate",StudySchema:"Study schema",ProcessTaskSchema:"Workflow task schema",ProcessOutputSchema:"Workflow output schema",ProcessFlowchartConfigVersion:"Workflow flowchart config"}},622215:(e,t,n)=>{n.d(t,{TD:()=>getActionOrigin,xD:()=>trackCompletedExportOrganizationConfig,Uw:()=>trackCompletedImportConfiguration,zB:()=>trackCompletedImportOrganizationConfigFile,Kj:()=>trackCompletedValidateConfig,qT:()=>trackInitiatedExportOrganizationConfig,Zv:()=>trackInitiatedImportConfiguration,tF:()=>trackInitiatedImportOrganizationConfigFile,Ig:()=>trackInitiatedValidateConfig,dx:()=>trackNavigatedConfigMigrationTab,r1:()=>trackNavigatedImportWizard,eb:()=>trackOpenedUnchangedItems,US:()=>trackTriggeredConfigMigrationErrorToast})
var a=n(468943),o=n(577935),i=n(171471)
function getActionOrigin(e){switch(e){case o.i.EXPORT:return i.D2.CONFIG_MIGRATION_EXPORT_TAB
case o.i.IMPORT:return i.D2.CONFIG_MIGRATION_IMPORT_TAB
default:return i.D2.CONFIG_MIGRATION}}function trackConfigMigrationEvent(e,t){(0,a.gx)(i.Jz[e],i.XC.CONFIG_MIGRATION,t)}function trackCommonEvent(e,t){(0,a.gx)(i.U9[e],i.XC.CONFIG_MIGRATION,t)}function trackInitiatedExportOrganizationConfig(e){trackConfigMigrationEvent(i.yt.INITIATED_EXPORT_ORGANIZATION_CONFIG,e)}function trackCompletedExportOrganizationConfig(e){trackConfigMigrationEvent(i.yt.COMPLETED_EXPORT_ORGANIZATION_CONFIG,e)}function trackOpenedUnchangedItems(e){trackConfigMigrationEvent(i.yt.OPENED_UNCHANGED_ITEMS,e)}function trackInitiatedImportOrganizationConfigFile(e){trackConfigMigrationEvent(i.yt.INITIATED_IMPORT_ORGANIZATION_CONFIG_FILE,e)}function trackCompletedImportOrganizationConfigFile(e){trackConfigMigrationEvent(i.yt.COMPLETED_IMPORT_ORGANIZATION_CONFIG_FILE,e)}function trackInitiatedImportConfiguration(e){trackConfigMigrationEvent(i.yt.INITIATED_IMPORT_CONFIGURATION,e)}function trackCompletedImportConfiguration(e){trackConfigMigrationEvent(i.yt.COMPLETED_IMPORT_CONFIGURATION,e)}function trackNavigatedConfigMigrationTab(e){trackCommonEvent(i.c0.NAVIGATED_TAB,e)}function trackNavigatedImportWizard(e){trackCommonEvent(i.c0.NAVIGATED_STEP_COMPONENT,e)}function trackTriggeredConfigMigrationErrorToast(e){trackCommonEvent(i.c0.TRIGGERED_ERROR_TOAST,e)}function trackInitiatedValidateConfig(e){trackConfigMigrationEvent(i.yt.INITIATED_VALIDATE_CONFIG,e)}function trackCompletedValidateConfig(e){trackConfigMigrationEvent(i.yt.COMPLETED_VALIDATE_CONFIG,e)}},835603:(e,t,n)=>{n.d(t,{R:()=>i,Z:()=>useConfigMigrationImportTabContext})
var a=n(494327),o=n(457924)
const i=(0,a.x)((()=>({activeStep:o.QS})),"ConfigMigrationPageContext")
function useConfigMigrationImportTabContext(){return i.useContext()}},602857:(e,t,n)=>{n.d(t,{N:()=>useConfigMigrationPageContext,e:()=>r})
var a=n(468943),o=n(494327),i=n(577935)
const r=(0,o.x)((()=>({activeTab:i.b,eventGroupId:(0,a.Vr)()})),"ConfigMigrationPageContext")
function useConfigMigrationPageContext(){return r.useContext()}},44592:(e,t,n)=>{n.d(t,{PB:()=>countChildHighImpactChanges,a:()=>getHighImpactChangeMapFromChangelog,ff:()=>getHighImpactChangelogFromChangelog,sI:()=>getHighImpactChangeFromMigrationDiff})
var a=n(255418),o=n(637519),i=n(899568),r=n(989485)
function getHighImpactChangeMapFromChangelog(e){const t=new Map
e.forEach((e=>{e.diffDetails.forEach((n=>{const a=getHighImpactChangeFromMigrationDiff(n,e)
if(a){const e=n.provenanceUri,o=t.get(e)||[]
t.set(e,[...o,a])}}))}))
return t}function getHighImpactChangelogFromChangelog(e){return JSON.parse(JSON.stringify(e)).filter((e=>{const t=e.diffDetails.filter((t=>null!=getHighImpactChangeFromMigrationDiff(t,e)))
e.diffDetails=t
return t.length>0}))}function getHighImpactChangeFromMigrationDiff(e,t){if(e.diffType!==i.lw.UPDATE)return null
const n=e.diffPath[e.diffPath.length-1]
if(n&&n.segmentType===i.vZ.FIELD_LABEL&&Object.values(a._K).includes(n.segmentName)){const t=n.segmentName,o=e.leftValue,i=e.rightValue
if(t===a._K.REQUIRED){if("False"===o&&"True"===i)return a.kB.REQUIRED
if("True"===o&&"False"===i)return a.kB.NOT_REQUIRED}if(t===a._K.ARCHIVED){if(""===o&&""!==i)return a.kB.ARCHIVED
if(""!==o&&""===i)return a.kB.NOT_ARCHIVED}}return t.objectType===a.LP.Dropdown?a.kB.DROPDOWN_UPDATE:null}function countChildHighImpactChanges(e,t){const n=e.childMigrationPlans.filter((e=>t.has(e.objectId)&&e.selectedAction.type===o.j.UPDATE)).map((e=>e.objectId)),a=(0,r.z3)(e.childMigrationPlans).map((e=>e.target.provenanceUri)).filter((e=>t.has(e))),i=new Set([...n,...a])
return Array.from(i).reduce(((e,n)=>e+t.get(n).length),0)}},66950:(e,t,n)=>{n.d(t,{M2:()=>getActionOption,ZP:()=>ObjectActionDropdown,l_:()=>getOptionValue,lw:()=>getActionDescription})
var a=n(989526),o=n(531041),i=n(954240),r=n(865486),l=n(924982),c=n(554475),s=n(637519)
function getActionDescription(e){return e.type===s.j.CREATE?"Create":e.type===s.j.IGNORE?"Ignore":a.createElement("span",null,"Update ",a.createElement("strong",null,e.target.displayName),e.target.archived&&" (Archived)")}function getOptionValue(e){return e.type===s.j.UPDATE?e.target.apiIdentifier:e.type}function getActionOption(e,t){return a.createElement(l.Z,{value:getOptionValue(e),onSelect:()=>{t(e)},key:o.default.uniqueId("action-")},getActionDescription(e))}function ObjectActionDropdown(e){const updateObject=t=>{e.onUpdateObject({...e.object,selectedAction:t})}
return e.showActionInline?a.createElement("div",{className:"u-mini-spacing-right u-flex-grow"},getActionDescription(e.object.selectedAction)):a.createElement(i.ZP,{className:"u-mini-spacing-right u-flex-grow",menu:a.createElement(r.ZP,{height:r.ZP.HEIGHTS.MEDIUM,width:r.ZP.WIDTHS.FULL,value:getOptionValue(e.object.selectedAction),scrollable:!0},a.createElement(c.Z,null,getActionOption(e.object.hasProvenanceUriMatch?e.object.initialAction:{type:s.j.CREATE},updateObject),!e.excludeIgnore&&getActionOption({type:s.j.IGNORE},updateObject)),a.createElement(c.Z,null,!e.object.hasProvenanceUriMatch&&e.object.additionalActions.map((e=>getActionOption(e,updateObject))))),displayName:getActionDescription(e.object.selectedAction)})}},573137:(e,t,n)=>{n.d(t,{U2:()=>M,ii:()=>D,X_:()=>U,Ct:()=>L,t_:()=>w,LR:()=>filterMigrationObjectsToAllPlannedSteps,sN:()=>filterMigrationObjectsToCurrentStep,vE:()=>generateSections,Xj:()=>getCurrentAndLaterPlanSteps,lr:()=>getPlanableMigrationSteps,nY:()=>F,Yp:()=>migrationObjectToTab})
var a=n(64558),o=n(531041),i=n(232606),r=n(348920),l=n(675649),c=n(989526),s=n(483841),m=n(896014),p=n(579635),d=n(174540),g=n(417241),u=n(586944),h=n(255418)
function TemplateChangelog(e){const t=[]
for(const n of e.changes){const a=n.slice(1),o=n[0],i=(0,s.IC)(a,e.errorsByObjectId).map((t=>{var n
return(0,s.Qt)(t,e.futureTense,null!==(n=e.errorsByObjectId[t.objectId])&&void 0!==n?n:[],e.showObjectUrl?t.objectType===h.LP.Template?g.Z.templateURL(t.objectApiIdentifier):t.objectType===h.LP.Subtemplate?d.Z.subtemplateURL(t.objectApiIdentifier):null:null)})),r=(0,s.IC)([o],e.errorsByObjectId).map((t=>{var n
return(0,s.Qt)(t,e.futureTense,null!==(n=e.errorsByObjectId[t.objectId])&&void 0!==n?n:[],e.showObjectUrl?p.Z.collectionURL(t.objectApiIdentifier):null)})),l=c.createElement("strong",null,e.sectionDisplayName)
if(r.length)t.push([...r,...i])
else if(i.length){const n=e.showObjectUrl&&c.createElement("a",{href:p.Z.collectionURL(o.objectApiIdentifier),target:"_blank",rel:"noopener noreferrer"},l),a=(0,u.qv)(c.createElement("span",null,"Changes within template collection ",n||l))
t.push([a,...i])}else t.push([(0,u.qv)(c.createElement("span",null,"No changes within template collection ",l))])}return c.createElement(m.Z,{sectionDisplayName:(0,m.G)(h.LP.Template),logMessageGroups:t})}var E=n(855416),f=n(480756),I=n(974913),T=n(622215),C=n(835603),A=n(602857),b=n(637519),P=n(44592),v=n(989485),S=n(71580),N=n(311557)
function deriveActionFromTaskSchemaActionForMutableMemberObject(e,t){let n
if(e.selectedAction.type===b.j.CREATE||e.selectedAction.type===b.j.IGNORE)n={type:e.selectedAction.type}
else if(function isPlanWithSelectedUpdateAction(e){return e.selectedAction.type===b.j.UPDATE}(e)){const a=function findCorrespondingUpdateAction(e,t){var n
if(e.selectedAction.target.provenanceUri===e.objectId)return t.initialAction
let a=null!==(n=t.additionalActions.find((t=>{var n
return t.type===e.selectedAction.type&&(null===(n=t.target.parentIdentifier)||void 0===n?void 0:n.apiIdentifier)===e.selectedAction.target.apiIdentifier})))&&void 0!==n?n:null
null==a&&e.selectedAction.type===b.j.UPDATE&&(a={type:b.j.CREATE})
return a}(e,t)
if(null==a)throw new Error(`Could not find corresponding ${t.objectType} action for ${e.selectedAction.target.displayName}`)
n=a}else(0,i.hu)(!1,`Unsupported selected action ${e.selectedAction.type}`)
return{...t,selectedAction:n,childMigrationPlans:[]}}const R={[h.LP.Template]:{title:"Execution template",deriveUpdateFromTaskSchemaPlan:deriveActionFromTaskSchemaActionForMutableMemberObject},[h.LP.ProcessOutputSchema]:{title:"Output schema",deriveUpdateFromTaskSchemaPlan:deriveActionFromTaskSchemaActionForMutableMemberObject},[h.LP.ProcessFlowchartConfigVersion]:{title:"Flowchart configuration",deriveUpdateFromTaskSchemaPlan:function deriveFlowchartConfigActionFromTaskSchemaAction(e,t){let n
e.selectedAction.type===b.j.CREATE||e.selectedAction.type===b.j.IGNORE?n={type:e.selectedAction.type}:e.selectedAction.type===b.j.UPDATE?n=t.initialAction:(0,i.hu)(!1,`Unsupported selected action ${e.selectedAction.type}`)
return{...t,selectedAction:n,childMigrationPlans:[]}}}}
function ProcessTaskSchemaPlanRow(e){const t=e.errors.filter((({level:e})=>e===f.in.ERROR)).length>0,n=e.errors.filter((({level:e})=>e===f.in.WARNING)).length>0,[a,o]=c.useState(!0),{activeTab:i,eventGroupId:r}=(0,A.N)(),{activeStep:l,destinationOrganizationId:s}=(0,C.Z)(),m=(0,P.PB)(e.plan,e.highImpactChangeMap)
return c.createElement(c.Fragment,null,c.createElement(N.iV,{plan:e.plan,hasErrors:t,hasWarnings:n,key:e.plan.objectId},c.createElement(N.VW,{hasErrors:t,hasWarnings:n,plan:e.plan,errors:e.errors,setIsCollapsed:o,isCollapsed:a,hasChildren:e.plan.childMigrationPlans.length>0||e.memberPlansAndErrors.length>0&&e.plan.selectedAction.type!==b.j.IGNORE,highImpactChangeCount:m}),c.createElement(N.e5,{plan:e.plan,onUpdatePlan:t=>{try{const n=e.memberPlansAndErrors.map((({memberPlan:e})=>R[e.objectType].deriveUpdateFromTaskSchemaPlan(t,e)))
e.onUpdatePlans([t,...n])}catch(e){I.ZP.error(String(e));(0,T.US)({action_origin:(0,T.TD)(i),destination_organization_id:s,event_group_id:r,stage:i,import_step:l})}}})),!a&&e.plan.childMigrationPlans.length>0&&c.createElement(v.ZP,{plan:e.plan,onUpdatePlan:t=>{e.onUpdatePlans([t])},highImpactChangeMap:e.highImpactChangeMap}),!a&&e.plan.selectedAction.type!==b.j.IGNORE&&e.memberPlansAndErrors.map((({memberPlan:t,memberErrors:n})=>c.createElement(v.vw,{key:t.objectId,title:R[t.objectType].title,dataTestAttrs:{component:"ProcessTaskSchemaPlanRow",element:"memberPlanWrapper",key:t.objectId}},c.createElement(N.ZP,{plan:t,errors:n,onUpdatePlan:t=>{e.onUpdatePlans([t])},isNested:!0,showActionInline:!0,highImpactChangeMap:e.highImpactChangeMap})))))}function ProcessTaskSchemaPlanSection(e){const t=e.plans.filter((e=>e.objectType===h.LP.ProcessTaskSchema)),n=Object.keys(R).reduce(((t,n)=>{t[n]=function getPlansByTaskSchema(e,t){return e.filter((e=>e.objectType===t)).reduce(((e,t)=>{const n=t.objectAttributes;(0,i.hu)(null!=n.processTaskSchemaId,"Expected processTaskSchemaId attribute to be defined")
e[n.processTaskSchemaId]=t
return e}),{})}(e.plans,n)
return t}),{});(0,c.useEffect)((()=>{var o
const i=[],r=(0,a.Pe)(t,(e=>e.objectId))
Object.entries(null!==(o=n[h.LP.Template])&&void 0!==o?o:{}).forEach((([e,t])=>{const n=r[e]
i.push(deriveActionFromTaskSchemaActionForMutableMemberObject(n,t))}))
e.onUpdatePlans(i)}),[])
const o=Object.keys(R).sort(((e,t)=>R[e].title.localeCompare(R[t].title))),getMemberPlanAndErrors=t=>(0,a.oA)(o.map((a=>{var o,i,r
const l=null===(o=n[a])||void 0===o?void 0:o[t.objectId]
return null==l?null:{memberPlan:l,memberErrors:null!==(r=null===(i=e.errorsByObjectId)||void 0===i?void 0:i[l.objectId])&&void 0!==r?r:[]}})))
return c.createElement(S.Rp,{...e,plansToSummarize:t},c.createElement(c.Fragment,null,t.map((t=>c.createElement(ProcessTaskSchemaPlanRow,{key:t.objectId,plan:t,memberPlansAndErrors:getMemberPlanAndErrors(t),errors:e.errorsByObjectId[t.objectId]||[],onUpdatePlans:t=>{e.onUpdatePlans(t)},highImpactChangeMap:e.highImpactChangeMap})))))}var y=n(989566),O=n(457924),j=n(670168)
const M=["Template","Subtemplate"],D=["TemplateCollection"],U=[{migrationStep:O.TS.SCHEMAS,title:"Schemas",isEnabled:()=>!0},{migrationStep:O.TS.TEMPLATES,title:"Templates",isEnabled:()=>!0},{migrationStep:O.TS.PROCESS_TASK_SCHEMAS,title:"Workflows",isEnabled:()=>r.ZP.WORKFLOWS_ENABLE}],L=(h.LP.Subtemplate,h.LP.Template,h.LP.TemplateCollection,h.LP.ProcessFlowchartConfigVersion,{EntitySchema:"Schema fields",Dropdown:"Dropdown options",RunSchema:"Schema fields",ResultSchema:"Schema fields",BatchSchema:"Schema fields",BoxSchema:"Schema fields",ContainerSchema:"Schema fields",LocationSchema:"Schema fields",PlateSchema:"Schema fields",ProcessTaskSchema:"Schema fields",ProcessOutputSchema:"Output schema fields",StudySchema:"Schema fields"}),w={[O.TS.SCHEMAS]:[h.LP.Dropdown,h.LP.EntitySchema,h.LP.BatchSchema,h.LP.LocationSchema,h.LP.BoxSchema,h.LP.PlateSchema,h.LP.ContainerSchema,h.LP.RunSchema,h.LP.ResultSchema,h.LP.StudySchema],[O.TS.TEMPLATES]:[h.LP.TemplateCollection,h.LP.Template,h.LP.Subtemplate],[O.TS.PROCESS_TASK_SCHEMAS]:[h.LP.ProcessTaskSchema,h.LP.ProcessOutputSchema,h.LP.ProcessFlowchartConfigVersion,h.LP.Template]},k=(h.LP.Subtemplate,h.LP.Template,h.LP.TemplateCollection,(0,y.Z)((()=>({objectTypes:w[O.TS.TEMPLATES],displayNameFn:e=>e.find((e=>e.objectType===h.LP.TemplateCollection)).objectDisplayName,changelogComponent:TemplateChangelog,planComponent:E.Z,shouldExcludeObjectWithAttributes:e=>e.objectType===h.LP.Template&&!(0,j.m)(e,O.TS.TEMPLATES),groupRelevantObjects:e=>{const t=o.default.groupBy(e.filter((e=>e.objectType===h.LP.Template||e.objectType===h.LP.Subtemplate)),(e=>e.objectAttributes.templateCollectionId))
return(0,a.UY)(e.filter((e=>e.objectType===h.LP.TemplateCollection)),"objectDisplayName").map((e=>[e,...(0,a.UY)(t[e.objectId]||[],"objectDisplayName")]))},migrationTab:O.TS.TEMPLATES})))),_=(0,y.Z)((()=>({objectTypes:w[O.TS.PROCESS_TASK_SCHEMAS],displayNameFn:e=>(0,l._6)(2,h.xG[h.LP.ProcessTaskSchema]),changelogComponent:s.QM,planComponent:ProcessTaskSchemaPlanSection,shouldExcludeObjectWithAttributes:e=>e.objectType===h.LP.Template&&!(0,j.m)(e,O.TS.PROCESS_TASK_SCHEMAS),groupRelevantObjects:e=>[(0,a.UY)(e,"objectDisplayName")],migrationTab:O.TS.PROCESS_TASK_SCHEMAS}))),F=(0,y.Z)((()=>[...w[O.TS.SCHEMAS].map((e=>(e=>({objectTypes:[e],displayNameFn:t=>(0,l._6)(2,h.xG[e]),changelogComponent:s.QM,planComponent:S.ZP,groupRelevantObjects:e=>[(0,a.UY)(e,"objectDisplayName")],migrationTab:O.TS.SCHEMAS}))(e))),k(),_()])),x=(0,y.Z)((()=>(0,a.m8)(F().flatMap((e=>e.objectTypes.map((t=>[t,e.migrationTab])))))))
function migrationObjectToTab(e){const t=F().filter((t=>{var n,a
return t.objectTypes.includes(e.objectType)&&!(null!==(a=null===(n=t.shouldExcludeObjectWithAttributes)||void 0===n?void 0:n.call(t,e))&&void 0!==a&&a)}))
if(1!==t.length){(0,i.Gp)(!1,`Expected to find exactly one section for ${e}, but found ${t.length}: ${t}`)
return x()[e.objectType]}return t[0].migrationTab}function generateSections(e){const t=o.default.groupBy(e,"objectType")
return F().flatMap((e=>{const n=e.objectTypes.flatMap((e=>t[e]||[])).filter((t=>{var n,a
return!(null!==(a=null===(n=e.shouldExcludeObjectWithAttributes)||void 0===n?void 0:n.call(e,t))&&void 0!==a&&a)}))
if(!n.length)return[]
return e.groupRelevantObjects(n).map((t=>({objects:t,config:e})))}))}function getPlanableMigrationSteps(){return U.map((e=>e.migrationStep))}function getCurrentAndLaterPlanSteps(e){const t=getPlanableMigrationSteps(),n=t.findIndex((t=>t===e))
return t.slice(n)}function filterMigrationObjects(e,t,n){const a=getPlanableMigrationSteps();(0,i.Gp)(a.includes(t),`Only allow filtering to SCHEMAS or TEMPLATES step, but was ${t}`)
const r=a.findIndex((e=>e===t)),l=n?Array.from(Array(r+1).keys()):[r],c=o.default.groupBy(e,"objectType")
return F().flatMap((e=>{const t=a.findIndex((t=>t===e.migrationTab))
if(!l.includes(t))return[]
return e.objectTypes.flatMap((e=>c[e]||[])).filter((t=>{var n,a
return!(null!==(a=null===(n=e.shouldExcludeObjectWithAttributes)||void 0===n?void 0:n.call(e,t))&&void 0!==a&&a)}))}))}function filterMigrationObjectsToAllPlannedSteps(e,t){return filterMigrationObjects(e,t,!0)}function filterMigrationObjectsToCurrentStep(e,t){return filterMigrationObjects(e,t,!1)}},483841:(e,t,n)=>{n.d(t,{IC:()=>filterChanges,QM:()=>ImportChangelogSection,Qt:()=>convertChangeToLogMessage,ZP:()=>ImportChangelog})
var a=n(692013),o=n(989526),i=n(44592),r=n(899568),l=n(573137),c=n(480756),s=n(896014),m=n(255418),p=n(263137),d=n(801455),g=n(586944)
function ImportDiffDescription(e){const{diff:t,futureTense:n,renderType:a,parentObjectDisplayName:i}=e,l=n?r.UB[t.changelogVerb]:r.MK[t.changelogVerb],c=function applyStylingToDiffPath(e,t){return e.length?e.map(((e,t)=>e.segmentType!==r.vZ.FIELD_LABEL?o.createElement("strong",{key:t},e.segmentName):e.segmentName)).flatMap(((e,t,n)=>n.length-1!==t?[e," "]:e)):[o.createElement("strong",{key:0},t)]}(t.diffPath.slice(0,-1),i),s=t.diffPath.length?t.diffPath[t.diffPath.length-1].segmentName:""
if(t.diffType===r.lw.UPDATE)return t.changelogVerb===r.Dg.ARCHIVE||t.changelogVerb===r.Dg.UNARCHIVE?o.createElement("span",null,l," ",c):t.changelogVerb===r.Dg.RENAME?o.createElement("span",null,l," ",c," to ",o.createElement("strong",null,t.rightValue)):t.changelogVerb===r.Dg.MARK?o.createElement("span",null,l," ",c,": ",s," as ",o.createElement("strong",null,t.rightValue)):a===r.Mm.MASK_DETAILS?o.createElement("span",null,l," ",c,": ",s," changed"):o.createElement("span",null,l," ",c,": ",s," changed from ",o.createElement("strong",null,t.leftValue)," to"," ",o.createElement("strong",null,t.rightValue))
{const e=t.objectClass
return o.createElement("span",null,l," ",e," ",t.objectDisplayName&&o.createElement("strong",null,t.objectDisplayName))}}function convertChangeToLogMessage(e,t,n,a){const l=t?r.yy[e.objectAction]:r.M4[e.objectAction],s=e.diffDetails.map((n=>{const a={message:o.createElement(ImportDiffDescription,{diff:n,futureTense:t,renderType:n.renderType,parentObjectDisplayName:e.objectDisplayName}),level:c.in.INFO},r=(0,i.sI)(n,e)
r&&(a.highImpactChange=r)
return a})),p=n.map((e=>({message:e.message,level:e.level}))),d=o.createElement("strong",null,e.objectDisplayName)
return{message:o.createElement("span",null,l," ",m.xG[e.objectType].toLowerCase()," ",a?o.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},d):d),details:s.concat(p)}}function filterChanges(e,t){return e.filter((e=>e.objectAction!==r.lw.NO_CHANGE||t[e.objectId]))}function ImportChangelogSection(e){const t=[]
e.changes.forEach((n=>{const a=filterChanges(n,e.errorsByObjectId).map((t=>convertChangeToLogMessage(t,e.futureTense,e.errorsByObjectId[t.objectId]||[])))
0===a.length&&a.push((0,g.qv)(`No changes to ${e.sectionDisplayName.toLowerCase()}`))
t.push(a)}))
return o.createElement(s.Z,{sectionDisplayName:e.sectionDisplayName,logMessageGroups:t})}function updateChangelogGroupsForSection(e,t,n){const a=function getChangelogSectionKey(e){return"Template"===e.objectType?e.objectAttributes.hasOwnProperty("processTaskSchemaId")?(0,s.G)(m.LP.ProcessTaskSchema):(0,s.G)(m.LP.Template):(0,s.G)(e.objectType)}(e.objects[0]),o=t.get(a)||[]
0===o.length&&n.set(a,e.config)
o.push(e.objects)
t.set(a,o)}function ImportChangelogSectionGroup(e){const t=(0,l.vE)(e.changelog),n=new Map,a=new Map
t.forEach((e=>{updateChangelogGroupsForSection(e,a,n)}))
const i=function getChangelogComponents(e,t,n){const a=[]
e.forEach(((e,i)=>{const r=t.get(i)
r&&a.push(o.createElement(r.changelogComponent,{key:i,futureTense:n.futureTense,changes:e,errorsByObjectId:n.errorsByObjectId,sectionDisplayName:r.displayNameFn(e[0]),showObjectUrl:n.showObjectUrl}))}))
return a}(a,n,e)
return o.createElement(o.Fragment,null,i)}function ImportChangelog(e){const t=e.futureTense?"Review & Apply Migration":"Changelog",n=(0,i.ff)(e.changelog)
let r
if(0!==n.length){const t={...e,changelog:n}
r=o.createElement(ImportChangelogSectionGroup,{...t})}else r=o.createElement("p",null,"There are no changes flagged as high impact.")
return o.createElement("div",{className:"u-spacing-top",...(0,p.Z)({component:"ImportChangelog",element:"div"})},o.createElement(o.Fragment,null,o.createElement(d.Z,{label:t,className:(0,a.iv)(u.topLabel)}),o.createElement("br",null)),o.createElement(o.Fragment,null,o.createElement(d.Z,{label:"High Impact Change Highlights",className:(0,a.iv)(u.groupLabel)}),r),o.createElement(o.Fragment,null,o.createElement(d.Z,{label:"All Changes",className:(0,a.iv)(u.groupLabel)}),o.createElement(ImportChangelogSectionGroup,{...e})))}const u=a.mM.create({groupLabel:{fontSize:14},topLabel:{fontSize:16}})},899568:(e,t,n)=>{n.d(t,{Dg:()=>r,M4:()=>m,MK:()=>c,Mm:()=>i,UB:()=>l,lw:()=>o,vZ:()=>a,yy:()=>s})
var a,o,i,r
!function(e){e.REPEATED_INDEX_LABEL="REPEATED_INDEX_LABEL"
e.REPEATED_STRING_LABEL="REPEATED_STRING_LABEL"
e.FIELD_LABEL="FIELD_LABEL"}(a||(a={}))
!function(e){e.ADDITION="ADDITION"
e.NO_CHANGE="NO_CHANGE"
e.SUBTRACTION="SUBTRACTION"
e.UPDATE="UPDATE"}(o||(o={}))
!function(e){e.FULL="FULL"
e.MASK_DETAILS="MASK_DETAILS"
e.ARCHIVE="ARCHIVE"
e.UNARCHIVE="UNARCHIVE"}(i||(i={}))
!function(e){e.CREATE="Create"
e.REMOVE="Remove"
e.UPDATE="Update"
e.ARCHIVE="Archive"
e.UNARCHIVE="Unarchive"
e.RENAME="Rename"
e.MARK="Mark"}(r||(r={}))
const l={[r.CREATE]:"Creating",[r.REMOVE]:"Removing",[r.UPDATE]:"Updating",[r.ARCHIVE]:"Archiving",[r.UNARCHIVE]:"Unarchiving",[r.RENAME]:"Renaming",[r.MARK]:"Marking"},c={[r.CREATE]:"Created",[r.REMOVE]:"Removed",[r.UPDATE]:"Updated",[r.ARCHIVE]:"Archived",[r.UNARCHIVE]:"Unarchived",[r.RENAME]:"Renamed",[r.MARK]:"Marked"},s={ADDITION:l[r.CREATE],SUBTRACTION:l[r.REMOVE],UPDATE:l[r.UPDATE]},m={ADDITION:c[r.CREATE],SUBTRACTION:c[r.REMOVE],UPDATE:c[r.UPDATE]}},989485:(e,t,n)=>{n.d(t,{ZP:()=>ChildImportPlanSection,vw:()=>ChildImportPlanSectionWrapper,z3:()=>getUnselectedUpdateActions})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(531041),c=n(573137),s=n(771274),m=n(203040),p=n(263137),d=n(271359),g=n(637519),u=n(66950)
function ChildImportPlanSectionWrapper(e){return r.createElement("div",{...(0,p.Z)(e.dataTestAttrs)},r.createElement("div",{className:i()("simpleDivTable-row",(0,a.iv)(h.childRow),e.isNested?(0,a.iv)(h.nestedSectionHeader):(0,a.iv)(h.sectionHeader))},r.createElement("div",{className:"simpleDivTable-cell"},r.createElement("strong",null,e.title))),e.children)}function getUnselectedUpdateActions(e){return e.map((e=>e.additionalActions.filter((t=>!(0,s.VL)(t,e.selectedAction)&&!t.target.archived)))).flat()}function ChildImportPlanSection(e){return r.createElement(ChildImportPlanSectionWrapper,{title:c.Ct[e.plan.objectType],isNested:e.isNested},e.plan.childMigrationPlans.map(((t,n)=>r.createElement(ChildImportPlanRow,{key:t.objectId,plan:t,onUpdateChildPlan:t=>{e.onUpdatePlan({...e.plan,childMigrationPlans:[...e.plan.childMigrationPlans.slice(0,n),t,...e.plan.childMigrationPlans.slice(n+1)]})},isNested:e.isNested,highImpactChanges:e.highImpactChangeMap.get(t.objectId)||[]}))),(()=>{const t=getUnselectedUpdateActions(e.plan.childMigrationPlans),n=new Map
t.forEach((e=>{n.set(e.target.displayName,e)}))
return[...new Set(n.values())]})().map((t=>r.createElement(ChildToArchiveRow,{displayName:t.target.displayName,highImpactChanges:e.highImpactChangeMap.get(t.target.provenanceUri)||[],key:l.default.uniqueId("child-")}))))}function ChildImportPlanRow(e){return r.createElement("div",{className:i()("simpleDivTable-row",e.plan.selectedAction.type===g.j.IGNORE&&(0,a.iv)(h.ignoreRow),(0,a.iv)(h.childRow),{[(0,a.iv)(h.nestedRow)]:e.isNested}),key:e.plan.objectId},r.createElement("div",{className:i()("simpleDivTable-cell","u-flex-display u-vertical-center-items",{[(0,a.iv)(h.firstCell)]:!e.isNested,[(0,a.iv)(h.nestedFirstChildCell)]:e.isNested})},r.createElement("span",{className:i()((0,a.iv)(h.descriptionText))},e.plan.objectDisplayName),e.highImpactChanges.map(((e,t)=>r.createElement(m.q,{key:l.default.uniqueId("icon-"),highImpactChange:e})))),r.createElement("div",{className:i()("simpleDivTable-cell",(0,a.iv)(h.secondCell))},e.plan.initialAction.type===g.j.UPDATE&&e.plan.objectId===e.plan.initialAction.target.provenanceUri?(0,u.lw)(e.plan.initialAction):r.createElement(u.ZP,{object:e.plan,onUpdateObject:e.onUpdateChildPlan,excludeIgnore:!0})))}function ChildToArchiveRow(e){return r.createElement("div",{className:i()("simpleDivTable-row",(0,a.iv)(h.childRow)),key:e.displayName},r.createElement("div",{className:i()("simpleDivTable-cell",(0,a.iv)(h.firstCell))}),r.createElement("div",{className:i()("simpleDivTable-cell",(0,a.iv)(h.secondCell))},r.createElement("span",{className:(0,a.iv)(h.descriptionText)},"Archive ",r.createElement("strong",null,e.displayName)),e.highImpactChanges.map(((e,t)=>r.createElement(m.q,{key:l.default.uniqueId("archive-icon-"),highImpactChange:e})))))}const h=a.mM.create({firstCell:{marginLeft:30},secondCell:{marginLeft:-16},sectionHeader:{paddingLeft:42},nestedSectionHeader:{paddingLeft:"55px"},ignoreRow:{color:d.TG},childRow:{backgroundColor:d.bs,border:"none"},nestedRow:{paddingLeft:"40px"},nestedFirstChildCell:{marginLeft:"14px"},descriptionText:{marginRight:6}})},71580:(e,t,n)=>{n.d(t,{Rp:()=>ImportPlanSectionWrapper,eS:()=>ImportPlanSummary,ZP:()=>ImportPlanSection})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(36424),c=n(637519),s=n(334148),m=n(198964),p=n(865486),d=n(924982)
function BulkObjectActionDropdown(e){return r.createElement(m.ZP,{className:"u-mini-spacing-right u-flex-grow",menu:r.createElement(p.ZP,{height:p.ZP.HEIGHTS.MEDIUM,width:p.ZP.WIDTHS.MEDIUM},r.createElement(d.Z,{onSelect:()=>{e.onUpdateObjects(e.objects.map((e=>({...e,selectedAction:{type:c.j.IGNORE}}))))}},"Ignore all"),r.createElement(d.Z,{onSelect:()=>{e.onUpdateObjects(e.objects.map((e=>({...e,selectedAction:e.initialAction}))))}},"Reset all"))},r.createElement(s.Co,{className:i()((0,a.iv)(g.actionMenuToggle),e.className),buttonStyle:s.ZJ.TERTIARY_BLUE,text:"Action",isDropdown:!0,size:s.qE.SMALL}))}const g=a.mM.create({actionMenuToggle:{cursor:"pointer"}})
var u=n(311557)
function ImportPlanSummary(e){return r.createElement("div",{className:(0,a.iv)(h.summarySection),onClick:()=>{e.onUpdateCollapsed(!e.collapsed)}},function getSummary(e){const t=e.reduce(((e,t)=>({...e,[t.selectedAction.type]:e[t.selectedAction.type]+1})),{[c.j.CREATE]:0,[c.j.UPDATE]:0,[c.j.IGNORE]:0,[c.j.KEEP]:0}),n=[]
t[c.j.CREATE]&&n.push(`${t[c.j.CREATE]} to create`)
t[c.j.UPDATE]&&n.push(`${t[c.j.UPDATE]} to update`)
t[c.j.IGNORE]&&n.push(`${t[c.j.IGNORE]} ignored`)
return n.join(", ")}(e.plans),r.createElement(l.Z,{icon:e.collapsed?"chevron-down":"chevron-up",className:"u-faded u-mini-spacing-left u-pointer"}))}function ImportPlanSectionWrapper(e){var t
return r.createElement("div",{className:"simpleDivTable u-spacing-top"},r.createElement("div",{className:"simpleDivTable-header u-vertical-center-items"},r.createElement("h4",{className:i()((0,a.iv)(h.firstCell),"simpleDivTable-headerCell")},e.sectionDisplayName),r.createElement("div",{className:i()("simpleDivTable-headerCell","u-lr-split",(0,a.iv)(h.headerActions))},r.createElement(BulkObjectActionDropdown,{className:i()(e.collapsed&&"invisible"),objects:e.plans,onUpdateObjects:e.onUpdatePlans}),r.createElement(ImportPlanSummary,{plans:null!==(t=e.plansToSummarize)&&void 0!==t?t:e.plans,onUpdateCollapsed:e.onUpdateCollapsed,collapsed:e.collapsed}))),!e.collapsed&&e.children)}function ImportPlanSection(e){return r.createElement(ImportPlanSectionWrapper,{...e},r.createElement(r.Fragment,null,e.plans.map((t=>r.createElement(u.ZP,{key:t.objectId,plan:t,errors:e.errorsByObjectId[t.objectId]||[],onUpdatePlan:t=>{e.onUpdatePlans([t])},highImpactChangeMap:e.highImpactChangeMap})))))}const h=a.mM.create({firstCell:{marginLeft:12},summarySection:{cursor:"pointer"},headerActions:{display:"inline-flex"}})},311557:(e,t,n)=>{n.d(t,{VW:()=>ObjectDisplayNameColumn,ZP:()=>ImportPlanSectionRow,e5:()=>ObjectActionDropdownColumn,iV:()=>ImportPlanSectionRowWrapper})
var a=n(153686),o=n(692013),i=n(764403),r=n.n(i),l=n(989526),c=n(675649),s=n(989485),m=n(480756),p=n(128817),d=n(263137),g=n(271359),u=n(686836),h=n(36424),E=n(637519),f=n(44592),I=n(66950)
function ImportPlanSectionRow(e){const{plan:t,errors:n}=e,a=n.filter((({level:e})=>e===m.in.ERROR)).length>0,o=n.filter((({level:e})=>e===m.in.WARNING)).length>0,i=Boolean(t.childMigrationPlans.length),[r,c]=l.useState(!0),p=(0,f.PB)(t,e.highImpactChangeMap)
return l.createElement(l.Fragment,null,l.createElement(ImportPlanSectionRowWrapper,{plan:t,hasErrors:a,hasWarnings:o,key:t.objectId,isNested:e.isNested},l.createElement(ObjectDisplayNameColumn,{hasErrors:a,hasWarnings:o,plan:t,errors:n,setIsCollapsed:c,isCollapsed:r,hasChildren:i,isNested:e.isNested,highImpactChangeCount:p}),l.createElement(ObjectActionDropdownColumn,{plan:t,onUpdatePlan:e.onUpdatePlan,showActionInline:e.showActionInline})),!r&&i&&l.createElement(s.ZP,{plan:e.plan,onUpdatePlan:e.onUpdatePlan,isNested:e.isNested,highImpactChangeMap:e.highImpactChangeMap}))}function ImportPlanSectionRowWrapper(e){return l.createElement("div",{className:r()("simpleDivTable-row",e.isNested&&(0,o.iv)(T.childRow),e.plan.selectedAction.type===E.j.IGNORE&&(0,o.iv)(T.ignoreRow),e.hasErrors&&(0,o.iv)(T.errorRow),e.hasWarnings&&!e.hasErrors&&(0,o.iv)(T.warningRow)),...(0,d.Z)({component:"ImportPlanSectionRow",element:"tableRow"})},e.children)}function ObjectDisplayNameColumn(e){return l.createElement("div",{className:r()("simpleDivTable-cell",e.subLabel?(0,o.iv)(T.subLabelHeight):null,e.hasErrors||e.hasWarnings?(0,o.iv)(T.iconCell):(0,o.iv)(T.firstCell),"u-flex-display u-vertical-center-items")},l.createElement("div",null,e.hasErrors?l.createElement(p.x,{objectName:e.plan.objectDisplayName,errors:e.errors}):e.hasWarnings?l.createElement(p.H,{objectName:e.plan.objectDisplayName,errors:e.errors}):null,e.rowIcon?l.createElement(h.Z,{className:"result-icon",icon:e.rowIcon}):null,l.createElement("span",{onClick:()=>{e.setIsCollapsed(!e.isCollapsed)},className:r()(e.hasChildren?(0,o.iv)(T.parentToggle):e.isNested?null:(0,o.iv)(T.noToggle)),...e.hasChildren&&(0,d.Z)({component:"ImportPlanSectionRow",element:"collapseToggle"})},e.hasChildren?e.isCollapsed?l.createElement(h.Z,{className:(0,o.iv)(T.toggleIcon),icon:"triangle-right"}):l.createElement(h.Z,{className:(0,o.iv)(T.toggleIcon),icon:"triangle-down"}):null,e.plan.objectDisplayName,e.highImpactChangeCount>0&&l.createElement("span",{className:(0,o.iv)(T.highImpactParentIcon)},l.createElement(u.Z,{renderContent:()=>function getParentIconHoverText(e){return`${e} high impact ${(0,c._6)(e,"change")} to this object`}(e.highImpactChangeCount)},l.createElement(a.Vp,{text:e.highImpactChangeCount.toString(),color:a.MV.WARN,size:a.D2.SMALL}))))),e.subLabel?l.createElement("div",{className:(0,o.iv)(T.subLabel)},e.subLabel):null)}function ObjectActionDropdownColumn(e){return l.createElement("div",{className:"simpleDivTable-cell"},l.createElement(I.ZP,{object:e.plan,showActionInline:e.showActionInline,onUpdateObject:t=>{e.onUpdatePlan({...t,childMigrationPlans:[]})}}))}const T=o.mM.create({iconCell:{marginLeft:-6,paddingRight:18},firstCell:{marginLeft:15},warningRow:{backgroundColor:g.DO},errorRow:{backgroundColor:g.L3},ignoreRow:{color:g.TG},toggleIcon:{color:g.pp,marginRight:2,flex:"none"},parentToggle:{cursor:"pointer"},noToggle:{marginLeft:15},childRow:{backgroundColor:g.bs,border:"none",paddingLeft:"28px"},childActionCol:{marginLeft:"-28px"},subLabel:{display:"inline-block",minWidth:"0",marginLeft:28},subLabelHeight:{lineHeight:"14px"},highImpactParentIcon:{marginLeft:6}})},771274:(e,t,n)=>{n.d(t,{VL:()=>areActionsEqual,ZP:()=>convertImportIdentifiersToPlans})
var a=n(531041),o=n(637519)
function convertImportIdentifiersToPlans(e,t,n,i=new Map){const r=function getImportProvenanceUriToInitialAction(e,t,n){let{importProvenanceUriToDestinationIdentifier:a,unmatchedImportIdentifiers:i,unmatchedDestinationIdentifiers:r}=matchImportToDestinationIdentifier(e,t,(e=>e.provenanceUri),(e=>e.provenanceUri)),l=convertDestinationIdentifierToUpdateAction(a)
if(n){({importProvenanceUriToDestinationIdentifier:a,unmatchedImportIdentifiers:i,unmatchedDestinationIdentifiers:r}=matchImportToDestinationIdentifier(i,r,(e=>e.displayName),(e=>e.displayName)))
l=new Map([...l.entries(),...convertDestinationIdentifierToUpdateAction(a).entries()])}for(const e of i)l.set(e.provenanceUri,{type:o.j.CREATE})
return l}(e,t,n),l=function getImportProvenanceUriToSelectedAction(e,t,n){return e.reduce(((e,a)=>{const o=t.get(a.provenanceUri),i=n.get(a.provenanceUri)
e.set(a.provenanceUri,null!=o?o:i)
return e}),new Map)}(e,i,r),c=function getImportProvenanceUriToAdditionalActions(e,t,n){const i=new Set(e.map((e=>e.provenanceUri))),r=t.filter((e=>!i.has(e.provenanceUri))),l=Array.from(n.values())
return e.reduce(((e,t)=>{const i=n.get(t.provenanceUri),c=function getAdditionalActions(e,t){const[n,i]=a.default.partition(t,(t=>t.displayName===e.displayName))
return[...n,...a.default.sortBy(a.default.sortBy(i,(e=>e.displayName.toLowerCase())),(e=>e.archived))].map((e=>({type:o.j.UPDATE,target:e})))}(t,r).filter((e=>function shouldKeepAdditionalAction(e,t,n){return areActionsEqual(n,e)||!t.some((t=>areActionsEqual(t,e)))}(e,l,i)))
e.set(t.provenanceUri,c)
return e}),new Map)}(e,t,l)
return e.map((e=>{const t=r.get(e.provenanceUri),n=l.get(e.provenanceUri),a=c.get(e.provenanceUri),i=t.type===o.j.UPDATE&&e.provenanceUri===t.target.provenanceUri
return{objectId:e.provenanceUri,objectDisplayName:e.displayName,initialAction:t,selectedAction:n,additionalActions:a,hasProvenanceUriMatch:i}}))}function matchImportToDestinationIdentifier(e,t,n,o){const i=new Map,r=[],l=new Set,c=a.default.indexBy(t,o)
for(const t of e){const e=c[n(t)]
if(e){i.set(t.provenanceUri,e)
l.add(e)}else r.push(t)}return{importProvenanceUriToDestinationIdentifier:i,unmatchedImportIdentifiers:r,unmatchedDestinationIdentifiers:t.filter((e=>!l.has(e)))}}function convertDestinationIdentifierToUpdateAction(e){return Array.from(e.keys()).reduce(((t,n)=>{t.set(n,{type:o.j.UPDATE,target:e.get(n)})
return t}),new Map)}function areActionsEqual(e,t){return e.type===o.j.UPDATE&&t.type===o.j.UPDATE?e.target.apiIdentifier===t.target.apiIdentifier:e.type===t.type}},670168:(e,t,n)=>{n.d(t,{m:()=>isPlannableTemplate})
var a=n(457924)
function isPlannableTemplate(e,t){var n
if(t===a.TS.UPLOAD)return!0
if(t!==a.TS.PROCESS_TASK_SCHEMAS&&t!==a.TS.TEMPLATES)return!1
const o=t===a.TS.TEMPLATES?"templateCollectionId":"processTaskSchemaId"
return null!=(null===(n=e.objectAttributes)||void 0===n?void 0:n[o])}},441541:(e,t,n)=>{n.d(t,{Yu:()=>transformPlannedActions,oz:()=>transformObjectActionToServerRepresentation})
var a=n(531041),o=n(637519),i=n(573137)
function transformPlannedActions(e,t,n){let o=Object.values(e)
n&&(o=(0,i.LR)(o,n))
const r=a.default.indexBy(o,"objectId")
return{...a.default.mapObject(r,(e=>{const t=a.default.indexBy(e.childMigrationPlans,"objectId")
return{...e.selectedAction,childActionsByObjectId:a.default.mapObject(t,(e=>e.selectedAction))}})),...transformPlannedKeepActions(t,n)}}function transformPlannedKeepActions(e,t){const n=t?(0,i.LR)(e,t):e,a={}
n.forEach((e=>{a[e.identifier.provenanceUri]={type:o.j.KEEP,target:e.identifier}}))
return a}function _objectActionToServer(e){return{type:e.type,target:e.type===o.j.UPDATE||e.type===o.j.KEEP?{id:e.target.apiIdentifier}:null}}function transformObjectActionToServerRepresentation(e){return{..._objectActionToServer(e),childActionsByObjectId:(0,a.mapObject)(e.childActionsByObjectId||{},_objectActionToServer)}}},855416:(e,t,n)=>{n.d(t,{h:()=>TemplatePlanHeader,Z:()=>TemplatePlan})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(263137),c=n(637519),s=n(71580),m=n(66950),p=n(64558),d=n(531041),g=n(480756),u=n(255418),h=n(459830),E=n(954240),f=n(36424),I=n(865486),T=n(554475),C=n(914073),A=n(311557)
function TemplatePlanRow(e){const{plan:t,errors:n}=e,a=n.filter((({level:e})=>e===g.in.ERROR)).length>0,o=n.filter((({level:e})=>e===g.in.WARNING)).length>0,i=e.plan.objectType===u.LP.Template?h.TEMPLATE:e.plan.objectType===u.LP.Subtemplate?h.SUBTEMPLATE:void 0,l=e.plan.objectType===u.LP.Template?"Template":e.plan.objectType===u.LP.Subtemplate?"Sub-template":" "
return r.createElement(r.Fragment,null,r.createElement(A.iV,{plan:t,hasErrors:a,hasWarnings:o,key:t.objectId},r.createElement(A.VW,{hasErrors:a,hasWarnings:o,rowIcon:i,subLabel:l,plan:t,errors:n,setIsCollapsed:e=>{},isCollapsed:!1,hasChildren:!1,highImpactChangeCount:0}),r.createElement(TemplateActionDropdownColumn,{plan:t,onUpdatePlan:e.onUpdatePlan,templateCollectionPlan:e.templateCollectionPlan})))}function TemplateActionDropdownColumn(e){const onUpdateAction=t=>{e.onUpdatePlan({...e.plan,selectedAction:t})}
return r.createElement("div",{className:"simpleDivTable-cell"},r.createElement(E.ZP,{className:"u-mini-spacing-right u-flex-grow",disabled:e.templateCollectionPlan.selectedAction.type===c.j.IGNORE,menu:r.createElement(I.ZP,{height:I.ZP.HEIGHTS.MEDIUM,width:I.ZP.WIDTHS.FULL,value:(0,m.l_)(e.plan.selectedAction),scrollable:!0},r.createElement(T.Z,null,(0,m.M2)({type:c.j.IGNORE},onUpdateAction),!e.plan.hasProvenanceUriMatch&&(0,m.M2)({type:c.j.CREATE},onUpdateAction)),e.plan.initialAction.type===c.j.UPDATE&&e.plan.hasProvenanceUriMatch?getTemplateUpdateSectionForCollection(e.plan.initialAction.target.parentIdentifier.displayName,[e.plan.initialAction],onUpdateAction):getTemplateUpdateOptions(e.plan,onUpdateAction,e.templateCollectionPlan)),displayName:(0,m.lw)(e.plan.selectedAction)}))}function getTemplateUpdateSectionForCollection(e,t,n){return r.createElement(T.Z,{key:d.default.uniqueId("template-update-")},r.createElement(C.Z,null,r.createElement(f.Z,{icon:h.TEMPLATE_COLLECTION}),r.createElement("span",{className:"u-tiny-spacing-left"},e)),t.map((e=>(0,m.M2)(e,n))))}function getTemplateUpdateOptions(e,t,n){const a=d.default.groupBy(e.additionalActions,(e=>e.target.parentIdentifier.apiIdentifier)),o=(0,p.Xc)(a,(e=>e[0].target.parentIdentifier.displayName)),i=n.selectedAction.type===c.j.UPDATE&&n.selectedAction.target.apiIdentifier,r=d.default.sortBy(Object.keys(a).filter((e=>!i||e!==i)),(e=>o[e].toLowerCase())).map((e=>getTemplateUpdateSectionForCollection(o[e],a[e],t)))
return i&&a[i]?[getTemplateUpdateSectionForCollection(o[i],a[i],t),...r]:r}function TemplatePlanHeader(){return r.createElement(r.Fragment,null,r.createElement("p",null,"Imported templates and sub-templates may contain placeholders where there was a reference to data that is not imported by this tool."),r.createElement("p",null,"A Template Collection may be included on this page because an Execution template belongs in it. Execution templates will be imported on the next page with Workflow items."),r.createElement("p",null,"Pre-filled schema field values will not be migrated. Newly created templates will have empty schema field values. Existing schema field values in the destination will be unchanged."))}function TemplatePlan(e){const t=e.plans[0],n=e.plans.slice(1)
return r.createElement("div",{className:"simpleDivTable u-spacing-top"},r.createElement("div",{className:i()("simpleDivTable-header","u-lr-split",(0,a.iv)(b.summaryRow))},r.createElement("h4",null,"Template Collection"),r.createElement(s.eS,{plans:e.plans,onUpdateCollapsed:e.onUpdateCollapsed,collapsed:e.collapsed})),r.createElement("div",{className:"simpleDivTable-header",...(0,l.Z)({component:"TemplateSection",element:"tableHeader"})},r.createElement("div",{className:i()("simpleDivTable-headerCell u-black-color",(0,a.iv)(b.firstCell))},r.createElement("strong",null,t.objectDisplayName)),r.createElement("div",{className:"simpleDivTable-headerCell"},r.createElement(m.ZP,{object:t,onUpdateObject:t=>{if(t.selectedAction.type===c.j.IGNORE){const a=n.map((e=>({...e,selectedAction:{type:c.j.IGNORE}})))
e.onUpdatePlans([t,...a])}else{e.onUpdatePlans([t,...n.map((e=>({...e,selectedAction:e.initialAction})))])
e.onUpdateCollapsed(!1)}}}))),!e.collapsed&&r.createElement(r.Fragment,null,n.map(((n,a)=>r.createElement(TemplatePlanRow,{key:n.objectId,plan:n,errors:e.errorsByObjectId[n.objectId]||[],onUpdatePlan:t=>{e.onUpdatePlans([t])},templateCollectionPlan:t})))))}const b=a.mM.create({summaryRow:{paddingLeft:24,paddingRight:24,marginBottom:2},firstCell:{marginLeft:12}})},586944:(e,t,n)=>{n.d(t,{ZP:()=>Log,q8:()=>formatLogs,qv:()=>makeSimpleLogMessage})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(531041),c=n(203040),s=n(271359),m=n(36424),p=n(480756)
function makeSimpleLogMessage(e){return{message:e,details:[]}}function formatLogs(e){return e.map((e=>{let t=[`${(0,p.$q)(e.details.map((e=>e.level)))}: ${e.message}`]
t=t.concat(e.details.map((e=>`${e.level}: ${e.message}`)))
return t.join("\n  ")})).join("\n")}function LogIcon(e){return e.highImpactChange?r.createElement(c.q,{highImpactChange:e.highImpactChange}):e.logLevel===p.in.ERROR?r.createElement(m.Z,{icon:"error",className:i()(e.className,(0,a.iv)(d.errorIcon))}):e.logLevel===p.in.WARNING?r.createElement(m.Z,{icon:"warning",className:i()(e.className,(0,a.iv)(d.warningIcon))}):e.renderInfo?r.createElement(m.Z,{icon:"check",className:i()(e.className,(0,a.iv)(d.infoIcon))}):r.createElement(m.Z,{icon:"notdef",className:i()((0,a.iv)(d.blankIcon),(0,a.iv)(d.detailIcon))})}function LogMessage(e){const t=l.default.sortBy(e.details,(e=>-1*p.mE[e.level])),n=(0,p.$q)(t.map((e=>e.level))),o=t.some((e=>e.highImpactChange)),c=(0,p.$q)([n,o?p.in.WARNING:p.in.INFO])
return r.createElement("div",{className:(0,a.iv)(d.logRow)},r.createElement("div",{className:"u-flex-display"},r.createElement(LogIcon,{className:i()((0,a.iv)(d.objectIcon)),logLevel:c,renderInfo:!0}),e.message),t.map((({message:e,level:t,highImpactChange:n},o)=>r.createElement("div",{className:i()((0,a.iv)(d.listItem)),key:o},r.createElement(LogIcon,{logLevel:t,highImpactChange:n,className:i()((0,a.iv)(d.detailIcon)),renderInfo:!1}),e))))}function Log({logMessages:e}){return r.createElement("div",null,e.map(((e,t)=>r.createElement(LogMessage,{key:t,...e}))))}const d=a.mM.create({errorIcon:{color:s.hM},warningIcon:{color:s.ud},infoIcon:{color:s.ZA},logRow:{marginBottom:8,display:"flex",flexDirection:"column"},listItem:{marginLeft:16,marginTop:6,display:"flex"},objectIcon:{width:14,height:14,flex:"none",marginRight:6},detailIcon:{height:12,width:12,flex:"none",marginRight:6,marginTop:2},blankIcon:{color:"transparent"}})},480756:(e,t,n)=>{n.d(t,{$q:()=>getMaxLogLevel,in:()=>a,mE:()=>o})
var a
!function(e){e.INFO="INFO"
e.WARNING="WARNING"
e.ERROR="ERROR"}(a||(a={}))
const o={[a.INFO]:20,[a.WARNING]:30,[a.ERROR]:40}
function getMaxLogLevel(e){if(!e.length)return a.INFO
const t=Math.max(...e.map((e=>o[e])))
return e.find((e=>o[e]===t))}},896014:(e,t,n)=>{n.d(t,{G:()=>getSectionNameForObjectType,Z:()=>LogSection})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(675649),c=n(255418),s=n(271359),m=n(586944)
const p=s.bs,d=[c.LP.TemplateCollection,c.LP.Template,c.LP.Subtemplate],g=[c.LP.ProcessTaskSchema,c.LP.ProcessOutputSchema,c.LP.ProcessFlowchartConfigVersion]
function getSectionNameForObjectType(e){return d.includes(e)?(0,l._6)(2,c.xG[c.LP.Template]):g.includes(e)?(0,l._6)(2,c.xG[c.LP.ProcessTaskSchema]):(0,l._6)(2,c.xG[e])}function LogSection(e){return r.createElement("div",{className:i()((0,a.iv)(u.logContainer)),style:{backgroundColor:e.backgroundColor?e.backgroundColor:p}},e.sectionDisplayName&&r.createElement("div",{className:i()((0,a.iv)(u.sectionTitle))},r.createElement("strong",null,e.sectionDisplayName)),e.logMessageGroups.map(((t,n)=>r.createElement("div",{key:n,className:i()(n!==e.logMessageGroups.length-1?(0,a.iv)(u.logGroup):null)},r.createElement(m.ZP,{logMessages:t})))))}const u=a.mM.create({logContainer:{padding:14,marginBottom:14},sectionTitle:{fontSize:14,marginBottom:10},logGroup:{marginBottom:18}})},203040:(e,t,n)=>{n.d(t,{q:()=>HighImpactChangeIcon})
var a=n(692013),o=n(989526),i=n(255418),r=n(271359),l=n(80558)
const c=new Map([[i.kB.REQUIRED,{iconName:"asterisk",description:'Field marked as "required"'}],[i.kB.NOT_REQUIRED,{iconName:"asterisk",description:'Field marked as "not required"'}],[i.kB.ARCHIVED,{iconName:"box-archive-arrow-down",description:'Field marked as "archived"'}],[i.kB.NOT_ARCHIVED,{iconName:"box-archive-arrow-down",description:'Field marked as "not archived"'}],[i.kB.DROPDOWN_UPDATE,{iconName:"basic_folder_item",description:"Dropdown updates affect existing data"}]])
function HighImpactChangeIcon(e){const t=c.get(e.highImpactChange)
return t?o.createElement(l.Z,{renderContent:()=>t.description,icon:t.iconName,className:(0,a.iv)(s.highImpactChangeIcon)}):o.createElement(o.Fragment,null)}const s=a.mM.create({highImpactChangeIcon:{width:12,height:12,color:r.ud,marginRight:6}})},128817:(e,t,n)=>{n.d(t,{H:()=>InlineWarningIcon,x:()=>InlineErrorIcon})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(531041),c=n(480756),s=n(577935),m=n(129270),p=n(271359),d=n(361974),g=n(686836),u=n(36424)
function InlineIcon(e){return r.createElement(g.Z,{renderContent:()=>r.createElement("div",{className:(0,a.iv)(h.content)},e.content),placement:d.ZH.TOP,interaction:d.x2.CLICK},r.createElement(u.Z,{icon:e.icon,className:i()(e.iconClassName,(0,a.iv)(h.inlineIcon))}))}function InlineWarningIcon(e){var t
return r.createElement(InlineIcon,{content:r.createElement(r.Fragment,null,r.createElement("p",null,e.migrationTab===s.i.IMPORT?r.createElement(r.Fragment,null,r.createElement("strong",null,e.objectName)," can be imported with changes."):r.createElement(r.Fragment,null,r.createElement("strong",null,e.objectName)," was exported but will not be importable.")),r.createElement("ul",{className:(0,a.iv)(h.list)},e.errors.map((({message:e})=>r.createElement("li",{key:l.default.uniqueId("warning-")},e))))),icon:null!==(t=e.iconOverride)&&void 0!==t?t:"warning",iconClassName:(0,a.iv)(h.warningIcon)})}function InlineErrorIcon(e){var t,n
return r.createElement(InlineIcon,{content:r.createElement(r.Fragment,null,r.createElement("p",null,r.createElement("strong",null,e.objectName)," cannot be ",(n=e.migrationTab,(null!=n?n:s.i.IMPORT)===s.i.IMPORT?"imported":"exported"),"."),r.createElement("ul",{className:(0,a.iv)(h.list)},e.errors.filter((e=>e.level===c.in.ERROR)).map((({message:e})=>r.createElement("li",{key:l.default.uniqueId("error-")},e))))),icon:null!==(t=e.iconOverride)&&void 0!==t?t:"error",iconClassName:(0,a.iv)(h.errorIcon)})}const h=a.mM.create({content:{...m.hv},list:{paddingInlineStart:20},inlineIcon:{cursor:"pointer",flex:"none",marginRight:6},errorIcon:{color:p.JF},warningIcon:{color:p.Y}})},91971:(e,t,n)=>{n.d(t,{Z:()=>TriangleToggle})
var a=n(692013),o=n(764403),i=n.n(o),r=n(989526),l=n(271359),c=n(36424)
function TriangleToggle(e){return r.createElement(r.Fragment,null,r.createElement("div",{onClick:()=>{e.setIsCollapsed(!e.isCollapsed)},className:i()((0,a.iv)(s.toggleLabel),"u-mini-spacing-top")},e.isCollapsed?r.createElement(c.Z,{className:(0,a.iv)(s.toggleIcon),icon:"triangle-right"}):r.createElement(c.Z,{className:(0,a.iv)(s.toggleIcon),icon:"triangle-down"}),e.toggleLabel),!e.isCollapsed&&e.children)}const s=a.mM.create({toggleIcon:{color:l.pp,flex:"none"},toggleLabel:{cursor:"pointer"}})},457924:(e,t,n)=>{n.d(t,{Co:()=>i,QS:()=>o,TS:()=>a})
var a
!function(e){e.UPLOAD="UPLOAD"
e.SCHEMAS="SCHEMAS"
e.TEMPLATES="TEMPLATES"
e.PROCESS_TASK_SCHEMAS="PROCESS_TASK_SCHEMAS"
e.REVIEW="REVIEW"}(a||(a={}))
const o=a.UPLOAD,i={[a.SCHEMAS]:"No schema changes included in this migration.",[a.TEMPLATES]:"No template changes included in this migration.",[a.PROCESS_TASK_SCHEMAS]:"No workflow item changes included in this migration."}},577935:(e,t,n)=>{n.d(t,{b:()=>o,i:()=>a})
var a
!function(e){e.EXPORT="EXPORT"
e.IMPORT="IMPORT"}(a||(a={}))
const o=a.IMPORT},637519:(e,t,n)=>{n.d(t,{j:()=>a})
var a
!function(e){e.CREATE="CREATE"
e.UPDATE="UPDATE"
e.IGNORE="IGNORE"
e.KEEP="KEEP"}(a||(a={}))}}])

//# sourceMappingURL=505.7996e351d9e323e1273666e8859654f7.js.map